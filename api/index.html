
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Documentation for the AIPerf project">
      
      
        <meta name="author" content="NVIDIA CORPORATION & AFFILIATES">
      
      
      
        <link rel="prev" href="../Development/">
      
      
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.14">
    
    
      
        <title>API Reference - AIPerf Documentation</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.342714a4.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../assets/_mkdocstrings.css">
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    <body dir="ltr">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#api-reference" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="AIPerf Documentation" class="md-header__button md-logo" aria-label="AIPerf Documentation" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            AIPerf Documentation
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              API Reference
            
          </span>
        </div>
      </div>
    </div>
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="AIPerf Documentation" class="md-nav__button md-logo" aria-label="AIPerf Documentation" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    AIPerf Documentation
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Home
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../Development/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Development
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    API Reference
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    API Reference
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#aiperfcli" class="md-nav__link">
    <span class="md-ellipsis">
      aiperf.cli
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.cli" class="md-nav__link">
    <span class="md-ellipsis">
      cli
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.cli.main" class="md-nav__link">
    <span class="md-ellipsis">
      main
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperfcommonbootstrap" class="md-nav__link">
    <span class="md-ellipsis">
      aiperf.common.bootstrap
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.bootstrap" class="md-nav__link">
    <span class="md-ellipsis">
      bootstrap
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.bootstrap.bootstrap_and_run_service" class="md-nav__link">
    <span class="md-ellipsis">
      bootstrap_and_run_service
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperfcommoncommsbase" class="md-nav__link">
    <span class="md-ellipsis">
      aiperf.common.comms.base
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.comms.base" class="md-nav__link">
    <span class="md-ellipsis">
      base
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.comms.base.BaseCommunication" class="md-nav__link">
    <span class="md-ellipsis">
      BaseCommunication
    </span>
  </a>
  
    <nav class="md-nav" aria-label="BaseCommunication">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#aiperf.common.comms.base.BaseCommunication.is_initialized" class="md-nav__link">
    <span class="md-ellipsis">
      is_initialized
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.common.comms.base.BaseCommunication.is_shutdown" class="md-nav__link">
    <span class="md-ellipsis">
      is_shutdown
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.common.comms.base.BaseCommunication.create_clients" class="md-nav__link">
    <span class="md-ellipsis">
      create_clients
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.common.comms.base.BaseCommunication.initialize" class="md-nav__link">
    <span class="md-ellipsis">
      initialize
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.common.comms.base.BaseCommunication.publish" class="md-nav__link">
    <span class="md-ellipsis">
      publish
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.common.comms.base.BaseCommunication.push" class="md-nav__link">
    <span class="md-ellipsis">
      push
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.common.comms.base.BaseCommunication.register_pull_callback" class="md-nav__link">
    <span class="md-ellipsis">
      register_pull_callback
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.common.comms.base.BaseCommunication.request" class="md-nav__link">
    <span class="md-ellipsis">
      request
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.common.comms.base.BaseCommunication.shutdown" class="md-nav__link">
    <span class="md-ellipsis">
      shutdown
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.common.comms.base.BaseCommunication.subscribe" class="md-nav__link">
    <span class="md-ellipsis">
      subscribe
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperfcommoncommsclient_enums" class="md-nav__link">
    <span class="md-ellipsis">
      aiperf.common.comms.client_enums
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.comms.client_enums" class="md-nav__link">
    <span class="md-ellipsis">
      client_enums
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.comms.client_enums.ClientType" class="md-nav__link">
    <span class="md-ellipsis">
      ClientType
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.comms.client_enums.PubClientType" class="md-nav__link">
    <span class="md-ellipsis">
      PubClientType
    </span>
  </a>
  
    <nav class="md-nav" aria-label="PubClientType">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#aiperf.common.comms.client_enums.PubClientType.from_topic" class="md-nav__link">
    <span class="md-ellipsis">
      from_topic
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.comms.client_enums.PullClientType" class="md-nav__link">
    <span class="md-ellipsis">
      PullClientType
    </span>
  </a>
  
    <nav class="md-nav" aria-label="PullClientType">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#aiperf.common.comms.client_enums.PullClientType.from_message_type" class="md-nav__link">
    <span class="md-ellipsis">
      from_message_type
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.comms.client_enums.PushClientType" class="md-nav__link">
    <span class="md-ellipsis">
      PushClientType
    </span>
  </a>
  
    <nav class="md-nav" aria-label="PushClientType">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#aiperf.common.comms.client_enums.PushClientType.from_topic" class="md-nav__link">
    <span class="md-ellipsis">
      from_topic
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.comms.client_enums.RepClientType" class="md-nav__link">
    <span class="md-ellipsis">
      RepClientType
    </span>
  </a>
  
    <nav class="md-nav" aria-label="RepClientType">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#aiperf.common.comms.client_enums.RepClientType.from_topic" class="md-nav__link">
    <span class="md-ellipsis">
      from_topic
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.comms.client_enums.ReqClientType" class="md-nav__link">
    <span class="md-ellipsis">
      ReqClientType
    </span>
  </a>
  
    <nav class="md-nav" aria-label="ReqClientType">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#aiperf.common.comms.client_enums.ReqClientType.from_topic" class="md-nav__link">
    <span class="md-ellipsis">
      from_topic
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.comms.client_enums.SubClientType" class="md-nav__link">
    <span class="md-ellipsis">
      SubClientType
    </span>
  </a>
  
    <nav class="md-nav" aria-label="SubClientType">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#aiperf.common.comms.client_enums.SubClientType.from_topic" class="md-nav__link">
    <span class="md-ellipsis">
      from_topic
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperfcommoncommszmqclientsbase" class="md-nav__link">
    <span class="md-ellipsis">
      aiperf.common.comms.zmq.clients.base
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.comms.zmq.clients.base" class="md-nav__link">
    <span class="md-ellipsis">
      base
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.comms.zmq.clients.base.BaseZMQClient" class="md-nav__link">
    <span class="md-ellipsis">
      BaseZMQClient
    </span>
  </a>
  
    <nav class="md-nav" aria-label="BaseZMQClient">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#aiperf.common.comms.zmq.clients.base.BaseZMQClient.is_initialized" class="md-nav__link">
    <span class="md-ellipsis">
      is_initialized
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.common.comms.zmq.clients.base.BaseZMQClient.is_shutdown" class="md-nav__link">
    <span class="md-ellipsis">
      is_shutdown
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.common.comms.zmq.clients.base.BaseZMQClient.socket" class="md-nav__link">
    <span class="md-ellipsis">
      socket
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.common.comms.zmq.clients.base.BaseZMQClient.socket_type_name" class="md-nav__link">
    <span class="md-ellipsis">
      socket_type_name
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.common.comms.zmq.clients.base.BaseZMQClient.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.common.comms.zmq.clients.base.BaseZMQClient.initialize" class="md-nav__link">
    <span class="md-ellipsis">
      initialize
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.common.comms.zmq.clients.base.BaseZMQClient.shutdown" class="md-nav__link">
    <span class="md-ellipsis">
      shutdown
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperfcommoncommszmqclientspub" class="md-nav__link">
    <span class="md-ellipsis">
      aiperf.common.comms.zmq.clients.pub
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.comms.zmq.clients.pub" class="md-nav__link">
    <span class="md-ellipsis">
      pub
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.comms.zmq.clients.pub.ZMQPubClient" class="md-nav__link">
    <span class="md-ellipsis">
      ZMQPubClient
    </span>
  </a>
  
    <nav class="md-nav" aria-label="ZMQPubClient">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#aiperf.common.comms.zmq.clients.pub.ZMQPubClient.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.common.comms.zmq.clients.pub.ZMQPubClient.publish" class="md-nav__link">
    <span class="md-ellipsis">
      publish
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperfcommoncommszmqclientspull" class="md-nav__link">
    <span class="md-ellipsis">
      aiperf.common.comms.zmq.clients.pull
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.comms.zmq.clients.pull" class="md-nav__link">
    <span class="md-ellipsis">
      pull
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.comms.zmq.clients.pull.ZMQPullClient" class="md-nav__link">
    <span class="md-ellipsis">
      ZMQPullClient
    </span>
  </a>
  
    <nav class="md-nav" aria-label="ZMQPullClient">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#aiperf.common.comms.zmq.clients.pull.ZMQPullClient.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.common.comms.zmq.clients.pull.ZMQPullClient.register_pull_callback" class="md-nav__link">
    <span class="md-ellipsis">
      register_pull_callback
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperfcommoncommszmqclientspush" class="md-nav__link">
    <span class="md-ellipsis">
      aiperf.common.comms.zmq.clients.push
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.comms.zmq.clients.push" class="md-nav__link">
    <span class="md-ellipsis">
      push
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.comms.zmq.clients.push.ZMQPushClient" class="md-nav__link">
    <span class="md-ellipsis">
      ZMQPushClient
    </span>
  </a>
  
    <nav class="md-nav" aria-label="ZMQPushClient">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#aiperf.common.comms.zmq.clients.push.ZMQPushClient.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.common.comms.zmq.clients.push.ZMQPushClient.push" class="md-nav__link">
    <span class="md-ellipsis">
      push
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperfcommoncommszmqclientsrep" class="md-nav__link">
    <span class="md-ellipsis">
      aiperf.common.comms.zmq.clients.rep
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.comms.zmq.clients.rep" class="md-nav__link">
    <span class="md-ellipsis">
      rep
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.comms.zmq.clients.rep.ZMQRepClient" class="md-nav__link">
    <span class="md-ellipsis">
      ZMQRepClient
    </span>
  </a>
  
    <nav class="md-nav" aria-label="ZMQRepClient">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#aiperf.common.comms.zmq.clients.rep.ZMQRepClient.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.common.comms.zmq.clients.rep.ZMQRepClient.respond" class="md-nav__link">
    <span class="md-ellipsis">
      respond
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.common.comms.zmq.clients.rep.ZMQRepClient.wait_for_request" class="md-nav__link">
    <span class="md-ellipsis">
      wait_for_request
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperfcommoncommszmqclientsreq" class="md-nav__link">
    <span class="md-ellipsis">
      aiperf.common.comms.zmq.clients.req
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.comms.zmq.clients.req" class="md-nav__link">
    <span class="md-ellipsis">
      req
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.comms.zmq.clients.req.ZMQReqClient" class="md-nav__link">
    <span class="md-ellipsis">
      ZMQReqClient
    </span>
  </a>
  
    <nav class="md-nav" aria-label="ZMQReqClient">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#aiperf.common.comms.zmq.clients.req.ZMQReqClient.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.common.comms.zmq.clients.req.ZMQReqClient.request" class="md-nav__link">
    <span class="md-ellipsis">
      request
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperfcommoncommszmqclientssub" class="md-nav__link">
    <span class="md-ellipsis">
      aiperf.common.comms.zmq.clients.sub
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.comms.zmq.clients.sub" class="md-nav__link">
    <span class="md-ellipsis">
      sub
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.comms.zmq.clients.sub.ZMQSubClient" class="md-nav__link">
    <span class="md-ellipsis">
      ZMQSubClient
    </span>
  </a>
  
    <nav class="md-nav" aria-label="ZMQSubClient">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#aiperf.common.comms.zmq.clients.sub.ZMQSubClient.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.common.comms.zmq.clients.sub.ZMQSubClient.subscribe" class="md-nav__link">
    <span class="md-ellipsis">
      subscribe
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperfcommoncommszmqzmq_comms" class="md-nav__link">
    <span class="md-ellipsis">
      aiperf.common.comms.zmq.zmq_comms
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.comms.zmq.zmq_comms" class="md-nav__link">
    <span class="md-ellipsis">
      zmq_comms
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.comms.zmq.zmq_comms.ZMQCommunication" class="md-nav__link">
    <span class="md-ellipsis">
      ZMQCommunication
    </span>
  </a>
  
    <nav class="md-nav" aria-label="ZMQCommunication">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#aiperf.common.comms.zmq.zmq_comms.ZMQCommunication.context" class="md-nav__link">
    <span class="md-ellipsis">
      context
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.common.comms.zmq.zmq_comms.ZMQCommunication.is_initialized" class="md-nav__link">
    <span class="md-ellipsis">
      is_initialized
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.common.comms.zmq.zmq_comms.ZMQCommunication.is_shutdown" class="md-nav__link">
    <span class="md-ellipsis">
      is_shutdown
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.common.comms.zmq.zmq_comms.ZMQCommunication.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.common.comms.zmq.zmq_comms.ZMQCommunication.create_clients" class="md-nav__link">
    <span class="md-ellipsis">
      create_clients
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.common.comms.zmq.zmq_comms.ZMQCommunication.initialize" class="md-nav__link">
    <span class="md-ellipsis">
      initialize
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.common.comms.zmq.zmq_comms.ZMQCommunication.publish" class="md-nav__link">
    <span class="md-ellipsis">
      publish
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.common.comms.zmq.zmq_comms.ZMQCommunication.push" class="md-nav__link">
    <span class="md-ellipsis">
      push
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.common.comms.zmq.zmq_comms.ZMQCommunication.register_pull_callback" class="md-nav__link">
    <span class="md-ellipsis">
      register_pull_callback
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.common.comms.zmq.zmq_comms.ZMQCommunication.request" class="md-nav__link">
    <span class="md-ellipsis">
      request
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.common.comms.zmq.zmq_comms.ZMQCommunication.respond" class="md-nav__link">
    <span class="md-ellipsis">
      respond
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.common.comms.zmq.zmq_comms.ZMQCommunication.shutdown" class="md-nav__link">
    <span class="md-ellipsis">
      shutdown
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.common.comms.zmq.zmq_comms.ZMQCommunication.subscribe" class="md-nav__link">
    <span class="md-ellipsis">
      subscribe
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperfcommonconfigbase_config" class="md-nav__link">
    <span class="md-ellipsis">
      aiperf.common.config.base_config
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.config.base_config" class="md-nav__link">
    <span class="md-ellipsis">
      base_config
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.config.base_config.BaseConfig" class="md-nav__link">
    <span class="md-ellipsis">
      BaseConfig
    </span>
  </a>
  
    <nav class="md-nav" aria-label="BaseConfig">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#aiperf.common.config.base_config.BaseConfig.serialize_to_yaml" class="md-nav__link">
    <span class="md-ellipsis">
      serialize_to_yaml
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperfcommonconfigconfig_defaults" class="md-nav__link">
    <span class="md-ellipsis">
      aiperf.common.config.config_defaults
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.config.config_defaults" class="md-nav__link">
    <span class="md-ellipsis">
      config_defaults
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperfcommonconfigconfig_validators" class="md-nav__link">
    <span class="md-ellipsis">
      aiperf.common.config.config_validators
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.config.config_validators" class="md-nav__link">
    <span class="md-ellipsis">
      config_validators
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.config.config_validators.parse_file" class="md-nav__link">
    <span class="md-ellipsis">
      parse_file
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.config.config_validators.parse_goodput" class="md-nav__link">
    <span class="md-ellipsis">
      parse_goodput
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.config.config_validators.parse_str_or_list" class="md-nav__link">
    <span class="md-ellipsis">
      parse_str_or_list
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.config.config_validators.parse_str_or_list_of_positive_values" class="md-nav__link">
    <span class="md-ellipsis">
      parse_str_or_list_of_positive_values
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperfcommonconfigendpointendpoint_config" class="md-nav__link">
    <span class="md-ellipsis">
      aiperf.common.config.endpoint.endpoint_config
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.config.endpoint.endpoint_config" class="md-nav__link">
    <span class="md-ellipsis">
      endpoint_config
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.config.endpoint.endpoint_config.EndPointConfig" class="md-nav__link">
    <span class="md-ellipsis">
      EndPointConfig
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperfcommonconfiginputaudio_config" class="md-nav__link">
    <span class="md-ellipsis">
      aiperf.common.config.input.audio_config
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.config.input.audio_config" class="md-nav__link">
    <span class="md-ellipsis">
      audio_config
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.config.input.audio_config.AudioConfig" class="md-nav__link">
    <span class="md-ellipsis">
      AudioConfig
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.config.input.audio_config.AudioLengthConfig" class="md-nav__link">
    <span class="md-ellipsis">
      AudioLengthConfig
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperfcommonconfiginputimage_config" class="md-nav__link">
    <span class="md-ellipsis">
      aiperf.common.config.input.image_config
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.config.input.image_config" class="md-nav__link">
    <span class="md-ellipsis">
      image_config
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.config.input.image_config.ImageConfig" class="md-nav__link">
    <span class="md-ellipsis">
      ImageConfig
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.config.input.image_config.ImageHeightConfig" class="md-nav__link">
    <span class="md-ellipsis">
      ImageHeightConfig
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.config.input.image_config.ImageWidthConfig" class="md-nav__link">
    <span class="md-ellipsis">
      ImageWidthConfig
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperfcommonconfiginputinput_config" class="md-nav__link">
    <span class="md-ellipsis">
      aiperf.common.config.input.input_config
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.config.input.input_config" class="md-nav__link">
    <span class="md-ellipsis">
      input_config
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.config.input.input_config.InputConfig" class="md-nav__link">
    <span class="md-ellipsis">
      InputConfig
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperfcommonconfiginputprompt_config" class="md-nav__link">
    <span class="md-ellipsis">
      aiperf.common.config.input.prompt_config
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.config.input.prompt_config" class="md-nav__link">
    <span class="md-ellipsis">
      prompt_config
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.config.input.prompt_config.InputTokensConfig" class="md-nav__link">
    <span class="md-ellipsis">
      InputTokensConfig
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.config.input.prompt_config.OutputTokensConfig" class="md-nav__link">
    <span class="md-ellipsis">
      OutputTokensConfig
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.config.input.prompt_config.PrefixPromptConfig" class="md-nav__link">
    <span class="md-ellipsis">
      PrefixPromptConfig
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.config.input.prompt_config.PromptConfig" class="md-nav__link">
    <span class="md-ellipsis">
      PromptConfig
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperfcommonconfiginputsessions_config" class="md-nav__link">
    <span class="md-ellipsis">
      aiperf.common.config.input.sessions_config
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.config.input.sessions_config" class="md-nav__link">
    <span class="md-ellipsis">
      sessions_config
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.config.input.sessions_config.SessionTurnDelayConfig" class="md-nav__link">
    <span class="md-ellipsis">
      SessionTurnDelayConfig
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.config.input.sessions_config.SessionTurnsConfig" class="md-nav__link">
    <span class="md-ellipsis">
      SessionTurnsConfig
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.config.input.sessions_config.SessionsConfig" class="md-nav__link">
    <span class="md-ellipsis">
      SessionsConfig
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperfcommonconfigloader" class="md-nav__link">
    <span class="md-ellipsis">
      aiperf.common.config.loader
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.config.loader" class="md-nav__link">
    <span class="md-ellipsis">
      loader
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.config.loader.load_service_config" class="md-nav__link">
    <span class="md-ellipsis">
      load_service_config
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperfcommonconfigoutputoutput_config" class="md-nav__link">
    <span class="md-ellipsis">
      aiperf.common.config.output.output_config
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.config.output.output_config" class="md-nav__link">
    <span class="md-ellipsis">
      output_config
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.config.output.output_config.OutputConfig" class="md-nav__link">
    <span class="md-ellipsis">
      OutputConfig
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperfcommonconfigservice_config" class="md-nav__link">
    <span class="md-ellipsis">
      aiperf.common.config.service_config
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.config.service_config" class="md-nav__link">
    <span class="md-ellipsis">
      service_config
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.config.service_config.ServiceConfig" class="md-nav__link">
    <span class="md-ellipsis">
      ServiceConfig
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperfcommonconfigtokenizertokenizer_config" class="md-nav__link">
    <span class="md-ellipsis">
      aiperf.common.config.tokenizer.tokenizer_config
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.config.tokenizer.tokenizer_config" class="md-nav__link">
    <span class="md-ellipsis">
      tokenizer_config
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.config.tokenizer.tokenizer_config.TokenizerConfig" class="md-nav__link">
    <span class="md-ellipsis">
      TokenizerConfig
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperfcommonconfiguser_config" class="md-nav__link">
    <span class="md-ellipsis">
      aiperf.common.config.user_config
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.config.user_config" class="md-nav__link">
    <span class="md-ellipsis">
      user_config
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.config.user_config.UserConfig" class="md-nav__link">
    <span class="md-ellipsis">
      UserConfig
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperfcommonconfigzmq_config" class="md-nav__link">
    <span class="md-ellipsis">
      aiperf.common.config.zmq_config
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.config.zmq_config" class="md-nav__link">
    <span class="md-ellipsis">
      zmq_config
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.config.zmq_config.BaseZMQCommunicationConfig" class="md-nav__link">
    <span class="md-ellipsis">
      BaseZMQCommunicationConfig
    </span>
  </a>
  
    <nav class="md-nav" aria-label="BaseZMQCommunicationConfig">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#aiperf.common.config.zmq_config.BaseZMQCommunicationConfig.component_pub_sub_address" class="md-nav__link">
    <span class="md-ellipsis">
      component_pub_sub_address
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.common.config.zmq_config.BaseZMQCommunicationConfig.controller_pub_sub_address" class="md-nav__link">
    <span class="md-ellipsis">
      controller_pub_sub_address
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.common.config.zmq_config.BaseZMQCommunicationConfig.conversation_data_address" class="md-nav__link">
    <span class="md-ellipsis">
      conversation_data_address
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.common.config.zmq_config.BaseZMQCommunicationConfig.credit_drop_address" class="md-nav__link">
    <span class="md-ellipsis">
      credit_drop_address
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.common.config.zmq_config.BaseZMQCommunicationConfig.credit_return_address" class="md-nav__link">
    <span class="md-ellipsis">
      credit_return_address
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.common.config.zmq_config.BaseZMQCommunicationConfig.inference_push_pull_address" class="md-nav__link">
    <span class="md-ellipsis">
      inference_push_pull_address
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.common.config.zmq_config.BaseZMQCommunicationConfig.records_address" class="md-nav__link">
    <span class="md-ellipsis">
      records_address
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.config.zmq_config.ZMQIPCConfig" class="md-nav__link">
    <span class="md-ellipsis">
      ZMQIPCConfig
    </span>
  </a>
  
    <nav class="md-nav" aria-label="ZMQIPCConfig">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#aiperf.common.config.zmq_config.ZMQIPCConfig.component_pub_sub_address" class="md-nav__link">
    <span class="md-ellipsis">
      component_pub_sub_address
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.common.config.zmq_config.ZMQIPCConfig.controller_pub_sub_address" class="md-nav__link">
    <span class="md-ellipsis">
      controller_pub_sub_address
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.common.config.zmq_config.ZMQIPCConfig.conversation_data_address" class="md-nav__link">
    <span class="md-ellipsis">
      conversation_data_address
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.common.config.zmq_config.ZMQIPCConfig.credit_drop_address" class="md-nav__link">
    <span class="md-ellipsis">
      credit_drop_address
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.common.config.zmq_config.ZMQIPCConfig.credit_return_address" class="md-nav__link">
    <span class="md-ellipsis">
      credit_return_address
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.common.config.zmq_config.ZMQIPCConfig.inference_push_pull_address" class="md-nav__link">
    <span class="md-ellipsis">
      inference_push_pull_address
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.common.config.zmq_config.ZMQIPCConfig.records_address" class="md-nav__link">
    <span class="md-ellipsis">
      records_address
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.config.zmq_config.ZMQInprocConfig" class="md-nav__link">
    <span class="md-ellipsis">
      ZMQInprocConfig
    </span>
  </a>
  
    <nav class="md-nav" aria-label="ZMQInprocConfig">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#aiperf.common.config.zmq_config.ZMQInprocConfig.component_pub_sub_address" class="md-nav__link">
    <span class="md-ellipsis">
      component_pub_sub_address
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.common.config.zmq_config.ZMQInprocConfig.controller_pub_sub_address" class="md-nav__link">
    <span class="md-ellipsis">
      controller_pub_sub_address
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.config.zmq_config.ZMQTCPTransportConfig" class="md-nav__link">
    <span class="md-ellipsis">
      ZMQTCPTransportConfig
    </span>
  </a>
  
    <nav class="md-nav" aria-label="ZMQTCPTransportConfig">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#aiperf.common.config.zmq_config.ZMQTCPTransportConfig.component_pub_sub_address" class="md-nav__link">
    <span class="md-ellipsis">
      component_pub_sub_address
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.common.config.zmq_config.ZMQTCPTransportConfig.controller_pub_sub_address" class="md-nav__link">
    <span class="md-ellipsis">
      controller_pub_sub_address
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.common.config.zmq_config.ZMQTCPTransportConfig.conversation_data_address" class="md-nav__link">
    <span class="md-ellipsis">
      conversation_data_address
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.common.config.zmq_config.ZMQTCPTransportConfig.credit_drop_address" class="md-nav__link">
    <span class="md-ellipsis">
      credit_drop_address
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.common.config.zmq_config.ZMQTCPTransportConfig.credit_return_address" class="md-nav__link">
    <span class="md-ellipsis">
      credit_return_address
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.common.config.zmq_config.ZMQTCPTransportConfig.inference_push_pull_address" class="md-nav__link">
    <span class="md-ellipsis">
      inference_push_pull_address
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.common.config.zmq_config.ZMQTCPTransportConfig.records_address" class="md-nav__link">
    <span class="md-ellipsis">
      records_address
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperfcommonconstants" class="md-nav__link">
    <span class="md-ellipsis">
      aiperf.common.constants
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.constants" class="md-nav__link">
    <span class="md-ellipsis">
      constants
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperfcommonenums" class="md-nav__link">
    <span class="md-ellipsis">
      aiperf.common.enums
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.enums" class="md-nav__link">
    <span class="md-ellipsis">
      enums
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.enums.CaseInsensitiveStrEnum" class="md-nav__link">
    <span class="md-ellipsis">
      CaseInsensitiveStrEnum
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.enums.CommandType" class="md-nav__link">
    <span class="md-ellipsis">
      CommandType
    </span>
  </a>
  
    <nav class="md-nav" aria-label="CommandType">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#aiperf.common.enums.CommandType.PROCESS_RECORDS" class="md-nav__link">
    <span class="md-ellipsis">
      PROCESS_RECORDS
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.common.enums.CommandType.PROFILE_CANCEL" class="md-nav__link">
    <span class="md-ellipsis">
      PROFILE_CANCEL
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.common.enums.CommandType.PROFILE_CONFIGURE" class="md-nav__link">
    <span class="md-ellipsis">
      PROFILE_CONFIGURE
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.common.enums.CommandType.PROFILE_START" class="md-nav__link">
    <span class="md-ellipsis">
      PROFILE_START
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.common.enums.CommandType.PROFILE_STOP" class="md-nav__link">
    <span class="md-ellipsis">
      PROFILE_STOP
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.common.enums.CommandType.SHUTDOWN" class="md-nav__link">
    <span class="md-ellipsis">
      SHUTDOWN
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.enums.CommunicationBackend" class="md-nav__link">
    <span class="md-ellipsis">
      CommunicationBackend
    </span>
  </a>
  
    <nav class="md-nav" aria-label="CommunicationBackend">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#aiperf.common.enums.CommunicationBackend.ZMQ_INPROC" class="md-nav__link">
    <span class="md-ellipsis">
      ZMQ_INPROC
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.common.enums.CommunicationBackend.ZMQ_IPC" class="md-nav__link">
    <span class="md-ellipsis">
      ZMQ_IPC
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.common.enums.CommunicationBackend.ZMQ_TCP" class="md-nav__link">
    <span class="md-ellipsis">
      ZMQ_TCP
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.enums.InferenceClientType" class="md-nav__link">
    <span class="md-ellipsis">
      InferenceClientType
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.enums.MessageType" class="md-nav__link">
    <span class="md-ellipsis">
      MessageType
    </span>
  </a>
  
    <nav class="md-nav" aria-label="MessageType">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#aiperf.common.enums.MessageType.COMMAND" class="md-nav__link">
    <span class="md-ellipsis">
      COMMAND
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.common.enums.MessageType.CONVERSATION_REQUEST" class="md-nav__link">
    <span class="md-ellipsis">
      CONVERSATION_REQUEST
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.common.enums.MessageType.CONVERSATION_RESPONSE" class="md-nav__link">
    <span class="md-ellipsis">
      CONVERSATION_RESPONSE
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.common.enums.MessageType.CREDITS_COMPLETE" class="md-nav__link">
    <span class="md-ellipsis">
      CREDITS_COMPLETE
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.common.enums.MessageType.CREDIT_DROP" class="md-nav__link">
    <span class="md-ellipsis">
      CREDIT_DROP
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.common.enums.MessageType.CREDIT_RETURN" class="md-nav__link">
    <span class="md-ellipsis">
      CREDIT_RETURN
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.common.enums.MessageType.ERROR" class="md-nav__link">
    <span class="md-ellipsis">
      ERROR
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.common.enums.MessageType.HEARTBEAT" class="md-nav__link">
    <span class="md-ellipsis">
      HEARTBEAT
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.common.enums.MessageType.INFERENCE_RESULTS" class="md-nav__link">
    <span class="md-ellipsis">
      INFERENCE_RESULTS
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.common.enums.MessageType.PROFILE_ERROR" class="md-nav__link">
    <span class="md-ellipsis">
      PROFILE_ERROR
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.common.enums.MessageType.PROFILE_PROGRESS" class="md-nav__link">
    <span class="md-ellipsis">
      PROFILE_PROGRESS
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.common.enums.MessageType.PROFILE_RESULTS" class="md-nav__link">
    <span class="md-ellipsis">
      PROFILE_RESULTS
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.common.enums.MessageType.PROFILE_STATS" class="md-nav__link">
    <span class="md-ellipsis">
      PROFILE_STATS
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.common.enums.MessageType.REGISTRATION" class="md-nav__link">
    <span class="md-ellipsis">
      REGISTRATION
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.common.enums.MessageType.RESPONSE" class="md-nav__link">
    <span class="md-ellipsis">
      RESPONSE
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.common.enums.MessageType.SERVICE_ERROR" class="md-nav__link">
    <span class="md-ellipsis">
      SERVICE_ERROR
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.common.enums.MessageType.STATUS" class="md-nav__link">
    <span class="md-ellipsis">
      STATUS
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.common.enums.MessageType.SWEEP_BEGIN" class="md-nav__link">
    <span class="md-ellipsis">
      SWEEP_BEGIN
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.common.enums.MessageType.SWEEP_CONFIGURE" class="md-nav__link">
    <span class="md-ellipsis">
      SWEEP_CONFIGURE
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.common.enums.MessageType.SWEEP_END" class="md-nav__link">
    <span class="md-ellipsis">
      SWEEP_END
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.common.enums.MessageType.SWEEP_ERROR" class="md-nav__link">
    <span class="md-ellipsis">
      SWEEP_ERROR
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.common.enums.MessageType.SWEEP_PROGRESS" class="md-nav__link">
    <span class="md-ellipsis">
      SWEEP_PROGRESS
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.common.enums.MessageType.SWEEP_RESULTS" class="md-nav__link">
    <span class="md-ellipsis">
      SWEEP_RESULTS
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.common.enums.MessageType.UNKNOWN" class="md-nav__link">
    <span class="md-ellipsis">
      UNKNOWN
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.enums.MetricTimeType" class="md-nav__link">
    <span class="md-ellipsis">
      MetricTimeType
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.enums.Modality" class="md-nav__link">
    <span class="md-ellipsis">
      Modality
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.enums.ModelSelectionStrategy" class="md-nav__link">
    <span class="md-ellipsis">
      ModelSelectionStrategy
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.enums.PromptSource" class="md-nav__link">
    <span class="md-ellipsis">
      PromptSource
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.enums.RequestPayloadType" class="md-nav__link">
    <span class="md-ellipsis">
      RequestPayloadType
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.enums.ResponsePayloadType" class="md-nav__link">
    <span class="md-ellipsis">
      ResponsePayloadType
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.enums.ServiceRegistrationStatus" class="md-nav__link">
    <span class="md-ellipsis">
      ServiceRegistrationStatus
    </span>
  </a>
  
    <nav class="md-nav" aria-label="ServiceRegistrationStatus">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#aiperf.common.enums.ServiceRegistrationStatus.ERROR" class="md-nav__link">
    <span class="md-ellipsis">
      ERROR
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.common.enums.ServiceRegistrationStatus.REGISTERED" class="md-nav__link">
    <span class="md-ellipsis">
      REGISTERED
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.common.enums.ServiceRegistrationStatus.TIMEOUT" class="md-nav__link">
    <span class="md-ellipsis">
      TIMEOUT
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.common.enums.ServiceRegistrationStatus.UNREGISTERED" class="md-nav__link">
    <span class="md-ellipsis">
      UNREGISTERED
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.common.enums.ServiceRegistrationStatus.WAITING" class="md-nav__link">
    <span class="md-ellipsis">
      WAITING
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.enums.ServiceRunType" class="md-nav__link">
    <span class="md-ellipsis">
      ServiceRunType
    </span>
  </a>
  
    <nav class="md-nav" aria-label="ServiceRunType">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#aiperf.common.enums.ServiceRunType.KUBERNETES" class="md-nav__link">
    <span class="md-ellipsis">
      KUBERNETES
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.common.enums.ServiceRunType.MULTIPROCESSING" class="md-nav__link">
    <span class="md-ellipsis">
      MULTIPROCESSING
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.enums.ServiceState" class="md-nav__link">
    <span class="md-ellipsis">
      ServiceState
    </span>
  </a>
  
    <nav class="md-nav" aria-label="ServiceState">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#aiperf.common.enums.ServiceState.ERROR" class="md-nav__link">
    <span class="md-ellipsis">
      ERROR
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.common.enums.ServiceState.INITIALIZING" class="md-nav__link">
    <span class="md-ellipsis">
      INITIALIZING
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.common.enums.ServiceState.READY" class="md-nav__link">
    <span class="md-ellipsis">
      READY
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.common.enums.ServiceState.STARTING" class="md-nav__link">
    <span class="md-ellipsis">
      STARTING
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.common.enums.ServiceState.STOPPING" class="md-nav__link">
    <span class="md-ellipsis">
      STOPPING
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.enums.ServiceType" class="md-nav__link">
    <span class="md-ellipsis">
      ServiceType
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.enums.Topic" class="md-nav__link">
    <span class="md-ellipsis">
      Topic
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperfcommonexceptions" class="md-nav__link">
    <span class="md-ellipsis">
      aiperf.common.exceptions
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.exceptions" class="md-nav__link">
    <span class="md-ellipsis">
      exceptions
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.exceptions.AIPerfError" class="md-nav__link">
    <span class="md-ellipsis">
      AIPerfError
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.exceptions.AIPerfMultiError" class="md-nav__link">
    <span class="md-ellipsis">
      AIPerfMultiError
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.exceptions.CommunicationClientCreationError" class="md-nav__link">
    <span class="md-ellipsis">
      CommunicationClientCreationError
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.exceptions.CommunicationClientNotFoundError" class="md-nav__link">
    <span class="md-ellipsis">
      CommunicationClientNotFoundError
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.exceptions.CommunicationCreateError" class="md-nav__link">
    <span class="md-ellipsis">
      CommunicationCreateError
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.exceptions.CommunicationError" class="md-nav__link">
    <span class="md-ellipsis">
      CommunicationError
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.exceptions.CommunicationInitializationError" class="md-nav__link">
    <span class="md-ellipsis">
      CommunicationInitializationError
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.exceptions.CommunicationNotInitializedError" class="md-nav__link">
    <span class="md-ellipsis">
      CommunicationNotInitializedError
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.exceptions.CommunicationPublishError" class="md-nav__link">
    <span class="md-ellipsis">
      CommunicationPublishError
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.exceptions.CommunicationPullError" class="md-nav__link">
    <span class="md-ellipsis">
      CommunicationPullError
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.exceptions.CommunicationPushError" class="md-nav__link">
    <span class="md-ellipsis">
      CommunicationPushError
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.exceptions.CommunicationRequestError" class="md-nav__link">
    <span class="md-ellipsis">
      CommunicationRequestError
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.exceptions.CommunicationResponseError" class="md-nav__link">
    <span class="md-ellipsis">
      CommunicationResponseError
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.exceptions.CommunicationShutdownError" class="md-nav__link">
    <span class="md-ellipsis">
      CommunicationShutdownError
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.exceptions.CommunicationSubscribeError" class="md-nav__link">
    <span class="md-ellipsis">
      CommunicationSubscribeError
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.exceptions.ConfigError" class="md-nav__link">
    <span class="md-ellipsis">
      ConfigError
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.exceptions.ConfigLoadError" class="md-nav__link">
    <span class="md-ellipsis">
      ConfigLoadError
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.exceptions.ConfigParseError" class="md-nav__link">
    <span class="md-ellipsis">
      ConfigParseError
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.exceptions.ConfigValidationError" class="md-nav__link">
    <span class="md-ellipsis">
      ConfigValidationError
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.exceptions.FactoryCreationError" class="md-nav__link">
    <span class="md-ellipsis">
      FactoryCreationError
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.exceptions.GeneratorConfigurationError" class="md-nav__link">
    <span class="md-ellipsis">
      GeneratorConfigurationError
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.exceptions.GeneratorError" class="md-nav__link">
    <span class="md-ellipsis">
      GeneratorError
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.exceptions.GeneratorInitializationError" class="md-nav__link">
    <span class="md-ellipsis">
      GeneratorInitializationError
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.exceptions.MetricTypeError" class="md-nav__link">
    <span class="md-ellipsis">
      MetricTypeError
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.exceptions.ServiceCleanupError" class="md-nav__link">
    <span class="md-ellipsis">
      ServiceCleanupError
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.exceptions.ServiceConfigureError" class="md-nav__link">
    <span class="md-ellipsis">
      ServiceConfigureError
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.exceptions.ServiceError" class="md-nav__link">
    <span class="md-ellipsis">
      ServiceError
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.exceptions.ServiceHeartbeatError" class="md-nav__link">
    <span class="md-ellipsis">
      ServiceHeartbeatError
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.exceptions.ServiceInitializationError" class="md-nav__link">
    <span class="md-ellipsis">
      ServiceInitializationError
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.exceptions.ServiceMessageProcessingError" class="md-nav__link">
    <span class="md-ellipsis">
      ServiceMessageProcessingError
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.exceptions.ServiceRegistrationError" class="md-nav__link">
    <span class="md-ellipsis">
      ServiceRegistrationError
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.exceptions.ServiceRunError" class="md-nav__link">
    <span class="md-ellipsis">
      ServiceRunError
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.exceptions.ServiceStartError" class="md-nav__link">
    <span class="md-ellipsis">
      ServiceStartError
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.exceptions.ServiceStatusError" class="md-nav__link">
    <span class="md-ellipsis">
      ServiceStatusError
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.exceptions.ServiceStopError" class="md-nav__link">
    <span class="md-ellipsis">
      ServiceStopError
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.exceptions.TokenizerError" class="md-nav__link">
    <span class="md-ellipsis">
      TokenizerError
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.exceptions.TokenizerInitializationError" class="md-nav__link">
    <span class="md-ellipsis">
      TokenizerInitializationError
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.exceptions.UnsupportedHookError" class="md-nav__link">
    <span class="md-ellipsis">
      UnsupportedHookError
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperfcommonfactories" class="md-nav__link">
    <span class="md-ellipsis">
      aiperf.common.factories
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.factories" class="md-nav__link">
    <span class="md-ellipsis">
      factories
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.factories.CommunicationFactory" class="md-nav__link">
    <span class="md-ellipsis">
      CommunicationFactory
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.factories.DataExporterFactory" class="md-nav__link">
    <span class="md-ellipsis">
      DataExporterFactory
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.factories.FactoryMixin" class="md-nav__link">
    <span class="md-ellipsis">
      FactoryMixin
    </span>
  </a>
  
    <nav class="md-nav" aria-label="FactoryMixin">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#aiperf.common.factories.FactoryMixin.create_instance" class="md-nav__link">
    <span class="md-ellipsis">
      create_instance
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.common.factories.FactoryMixin.get_all_classes" class="md-nav__link">
    <span class="md-ellipsis">
      get_all_classes
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.common.factories.FactoryMixin.get_class_from_type" class="md-nav__link">
    <span class="md-ellipsis">
      get_class_from_type
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.common.factories.FactoryMixin.register" class="md-nav__link">
    <span class="md-ellipsis">
      register
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.factories.PostProcessorFactory" class="md-nav__link">
    <span class="md-ellipsis">
      PostProcessorFactory
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.factories.ServiceFactory" class="md-nav__link">
    <span class="md-ellipsis">
      ServiceFactory
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperfcommonhooks" class="md-nav__link">
    <span class="md-ellipsis">
      aiperf.common.hooks
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.hooks" class="md-nav__link">
    <span class="md-ellipsis">
      hooks
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.hooks.AIPERF_HOOK_TYPE" class="md-nav__link">
    <span class="md-ellipsis">
      AIPERF_HOOK_TYPE
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.hooks.HookType" class="md-nav__link">
    <span class="md-ellipsis">
      HookType
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.hooks.AIPerfHook" class="md-nav__link">
    <span class="md-ellipsis">
      AIPerfHook
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.hooks.AIPerfTaskMixin" class="md-nav__link">
    <span class="md-ellipsis">
      AIPerfTaskMixin
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.hooks.HookSystem" class="md-nav__link">
    <span class="md-ellipsis">
      HookSystem
    </span>
  </a>
  
    <nav class="md-nav" aria-label="HookSystem">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#aiperf.common.hooks.HookSystem.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.common.hooks.HookSystem.get_hooks" class="md-nav__link">
    <span class="md-ellipsis">
      get_hooks
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.common.hooks.HookSystem.register_hook" class="md-nav__link">
    <span class="md-ellipsis">
      register_hook
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.common.hooks.HookSystem.run_hooks" class="md-nav__link">
    <span class="md-ellipsis">
      run_hooks
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.common.hooks.HookSystem.run_hooks_async" class="md-nav__link">
    <span class="md-ellipsis">
      run_hooks_async
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.hooks.HooksMixin" class="md-nav__link">
    <span class="md-ellipsis">
      HooksMixin
    </span>
  </a>
  
    <nav class="md-nav" aria-label="HooksMixin">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#aiperf.common.hooks.HooksMixin.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.common.hooks.HooksMixin.get_hooks" class="md-nav__link">
    <span class="md-ellipsis">
      get_hooks
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.common.hooks.HooksMixin.register_hook" class="md-nav__link">
    <span class="md-ellipsis">
      register_hook
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.common.hooks.HooksMixin.run_hooks" class="md-nav__link">
    <span class="md-ellipsis">
      run_hooks
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.common.hooks.HooksMixin.run_hooks_async" class="md-nav__link">
    <span class="md-ellipsis">
      run_hooks_async
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.hooks.aiperf_task" class="md-nav__link">
    <span class="md-ellipsis">
      aiperf_task
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.hooks.hook_decorator" class="md-nav__link">
    <span class="md-ellipsis">
      hook_decorator
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.hooks.on_cleanup" class="md-nav__link">
    <span class="md-ellipsis">
      on_cleanup
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.hooks.on_configure" class="md-nav__link">
    <span class="md-ellipsis">
      on_configure
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.hooks.on_init" class="md-nav__link">
    <span class="md-ellipsis">
      on_init
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.hooks.on_run" class="md-nav__link">
    <span class="md-ellipsis">
      on_run
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.hooks.on_set_state" class="md-nav__link">
    <span class="md-ellipsis">
      on_set_state
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.hooks.on_start" class="md-nav__link">
    <span class="md-ellipsis">
      on_start
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.hooks.on_stop" class="md-nav__link">
    <span class="md-ellipsis">
      on_stop
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.hooks.supports_hooks" class="md-nav__link">
    <span class="md-ellipsis">
      supports_hooks
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperfcommoninterfaces" class="md-nav__link">
    <span class="md-ellipsis">
      aiperf.common.interfaces
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.interfaces" class="md-nav__link">
    <span class="md-ellipsis">
      interfaces
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.interfaces.DataExporterProtocol" class="md-nav__link">
    <span class="md-ellipsis">
      DataExporterProtocol
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.interfaces.PostProcessorProtocol" class="md-nav__link">
    <span class="md-ellipsis">
      PostProcessorProtocol
    </span>
  </a>
  
    <nav class="md-nav" aria-label="PostProcessorProtocol">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#aiperf.common.interfaces.PostProcessorProtocol.process" class="md-nav__link">
    <span class="md-ellipsis">
      process
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperfcommonmessages" class="md-nav__link">
    <span class="md-ellipsis">
      aiperf.common.messages
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.messages" class="md-nav__link">
    <span class="md-ellipsis">
      messages
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.messages.BaseMessage" class="md-nav__link">
    <span class="md-ellipsis">
      BaseMessage
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.messages.BaseServiceErrorMessage" class="md-nav__link">
    <span class="md-ellipsis">
      BaseServiceErrorMessage
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.messages.BaseServiceMessage" class="md-nav__link">
    <span class="md-ellipsis">
      BaseServiceMessage
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.messages.BaseStatusMessage" class="md-nav__link">
    <span class="md-ellipsis">
      BaseStatusMessage
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.messages.CommandMessage" class="md-nav__link">
    <span class="md-ellipsis">
      CommandMessage
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.messages.ConversationRequestMessage" class="md-nav__link">
    <span class="md-ellipsis">
      ConversationRequestMessage
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.messages.ConversationResponseMessage" class="md-nav__link">
    <span class="md-ellipsis">
      ConversationResponseMessage
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.messages.CreditDropMessage" class="md-nav__link">
    <span class="md-ellipsis">
      CreditDropMessage
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.messages.CreditReturnMessage" class="md-nav__link">
    <span class="md-ellipsis">
      CreditReturnMessage
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.messages.CreditsCompleteMessage" class="md-nav__link">
    <span class="md-ellipsis">
      CreditsCompleteMessage
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.messages.ErrorMessage" class="md-nav__link">
    <span class="md-ellipsis">
      ErrorMessage
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.messages.HeartbeatMessage" class="md-nav__link">
    <span class="md-ellipsis">
      HeartbeatMessage
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.messages.InferenceResultsMessage" class="md-nav__link">
    <span class="md-ellipsis">
      InferenceResultsMessage
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.messages.Message" class="md-nav__link">
    <span class="md-ellipsis">
      Message
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Message">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#aiperf.common.messages.Message.from_json" class="md-nav__link">
    <span class="md-ellipsis">
      from_json
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.common.messages.Message.to_json" class="md-nav__link">
    <span class="md-ellipsis">
      to_json
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.messages.ProcessRecordsCommandData" class="md-nav__link">
    <span class="md-ellipsis">
      ProcessRecordsCommandData
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.messages.ProfileProgressMessage" class="md-nav__link">
    <span class="md-ellipsis">
      ProfileProgressMessage
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.messages.ProfileResultsMessage" class="md-nav__link">
    <span class="md-ellipsis">
      ProfileResultsMessage
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.messages.ProfileStatsMessage" class="md-nav__link">
    <span class="md-ellipsis">
      ProfileStatsMessage
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.messages.RegistrationMessage" class="md-nav__link">
    <span class="md-ellipsis">
      RegistrationMessage
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.messages.StatusMessage" class="md-nav__link">
    <span class="md-ellipsis">
      StatusMessage
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.messages.exclude_if_none" class="md-nav__link">
    <span class="md-ellipsis">
      exclude_if_none
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperfcommonmodels" class="md-nav__link">
    <span class="md-ellipsis">
      aiperf.common.models
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.models" class="md-nav__link">
    <span class="md-ellipsis">
      models
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.models.ServiceRunInfo" class="md-nav__link">
    <span class="md-ellipsis">
      ServiceRunInfo
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.models.ZMQCommunicationConfig" class="md-nav__link">
    <span class="md-ellipsis">
      ZMQCommunicationConfig
    </span>
  </a>
  
    <nav class="md-nav" aria-label="ZMQCommunicationConfig">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#aiperf.common.models.ZMQCommunicationConfig.component_pub_sub_address" class="md-nav__link">
    <span class="md-ellipsis">
      component_pub_sub_address
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.common.models.ZMQCommunicationConfig.controller_pub_sub_address" class="md-nav__link">
    <span class="md-ellipsis">
      controller_pub_sub_address
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.common.models.ZMQCommunicationConfig.conversation_data_address" class="md-nav__link">
    <span class="md-ellipsis">
      conversation_data_address
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.common.models.ZMQCommunicationConfig.credit_drop_address" class="md-nav__link">
    <span class="md-ellipsis">
      credit_drop_address
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.common.models.ZMQCommunicationConfig.credit_return_address" class="md-nav__link">
    <span class="md-ellipsis">
      credit_return_address
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.common.models.ZMQCommunicationConfig.inference_push_pull_address" class="md-nav__link">
    <span class="md-ellipsis">
      inference_push_pull_address
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.common.models.ZMQCommunicationConfig.records_address" class="md-nav__link">
    <span class="md-ellipsis">
      records_address
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.models.ZMQTCPTransportConfig" class="md-nav__link">
    <span class="md-ellipsis">
      ZMQTCPTransportConfig
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperfcommonrecord_models" class="md-nav__link">
    <span class="md-ellipsis">
      aiperf.common.record_models
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.record_models" class="md-nav__link">
    <span class="md-ellipsis">
      record_models
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.record_models.BaseClientConfig" class="md-nav__link">
    <span class="md-ellipsis">
      BaseClientConfig
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.record_models.ErrorDetails" class="md-nav__link">
    <span class="md-ellipsis">
      ErrorDetails
    </span>
  </a>
  
    <nav class="md-nav" aria-label="ErrorDetails">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#aiperf.common.record_models.ErrorDetails.__eq__" class="md-nav__link">
    <span class="md-ellipsis">
      __eq__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.common.record_models.ErrorDetails.__hash__" class="md-nav__link">
    <span class="md-ellipsis">
      __hash__
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.record_models.ErrorDetailsCount" class="md-nav__link">
    <span class="md-ellipsis">
      ErrorDetailsCount
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.record_models.GenericHTTPClientConfig" class="md-nav__link">
    <span class="md-ellipsis">
      GenericHTTPClientConfig
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.record_models.InferenceServerResponse" class="md-nav__link">
    <span class="md-ellipsis">
      InferenceServerResponse
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.record_models.Record" class="md-nav__link">
    <span class="md-ellipsis">
      Record
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.record_models.RequestRecord" class="md-nav__link">
    <span class="md-ellipsis">
      RequestRecord
    </span>
  </a>
  
    <nav class="md-nav" aria-label="RequestRecord">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#aiperf.common.record_models.RequestRecord.has_error" class="md-nav__link">
    <span class="md-ellipsis">
      has_error
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.common.record_models.RequestRecord.has_null_last_response" class="md-nav__link">
    <span class="md-ellipsis">
      has_null_last_response
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.common.record_models.RequestRecord.inter_token_latency_ns" class="md-nav__link">
    <span class="md-ellipsis">
      inter_token_latency_ns
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.common.record_models.RequestRecord.time_to_first_response_ns" class="md-nav__link">
    <span class="md-ellipsis">
      time_to_first_response_ns
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.common.record_models.RequestRecord.time_to_last_response_ns" class="md-nav__link">
    <span class="md-ellipsis">
      time_to_last_response_ns
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.common.record_models.RequestRecord.time_to_second_response_ns" class="md-nav__link">
    <span class="md-ellipsis">
      time_to_second_response_ns
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.common.record_models.RequestRecord.valid" class="md-nav__link">
    <span class="md-ellipsis">
      valid
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.common.record_models.RequestRecord.time_string" class="md-nav__link">
    <span class="md-ellipsis">
      time_string
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.common.record_models.RequestRecord.token_latency_ns" class="md-nav__link">
    <span class="md-ellipsis">
      token_latency_ns
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.record_models.SSEEventType" class="md-nav__link">
    <span class="md-ellipsis">
      SSEEventType
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.record_models.SSEField" class="md-nav__link">
    <span class="md-ellipsis">
      SSEField
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.record_models.SSEFieldType" class="md-nav__link">
    <span class="md-ellipsis">
      SSEFieldType
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.record_models.SSEMessage" class="md-nav__link">
    <span class="md-ellipsis">
      SSEMessage
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.record_models.TextResponse" class="md-nav__link">
    <span class="md-ellipsis">
      TextResponse
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.record_models.Transaction" class="md-nav__link">
    <span class="md-ellipsis">
      Transaction
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperfcommonservicebase_component_service" class="md-nav__link">
    <span class="md-ellipsis">
      aiperf.common.service.base_component_service
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.service.base_component_service" class="md-nav__link">
    <span class="md-ellipsis">
      base_component_service
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.service.base_component_service.BaseComponentService" class="md-nav__link">
    <span class="md-ellipsis">
      BaseComponentService
    </span>
  </a>
  
    <nav class="md-nav" aria-label="BaseComponentService">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#aiperf.common.service.base_component_service.BaseComponentService.required_clients" class="md-nav__link">
    <span class="md-ellipsis">
      required_clients
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.common.service.base_component_service.BaseComponentService.create_heartbeat_message" class="md-nav__link">
    <span class="md-ellipsis">
      create_heartbeat_message
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.common.service.base_component_service.BaseComponentService.create_registration_message" class="md-nav__link">
    <span class="md-ellipsis">
      create_registration_message
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.common.service.base_component_service.BaseComponentService.create_status_message" class="md-nav__link">
    <span class="md-ellipsis">
      create_status_message
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.common.service.base_component_service.BaseComponentService.process_command_message" class="md-nav__link">
    <span class="md-ellipsis">
      process_command_message
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.common.service.base_component_service.BaseComponentService.register" class="md-nav__link">
    <span class="md-ellipsis">
      register
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.common.service.base_component_service.BaseComponentService.send_heartbeat" class="md-nav__link">
    <span class="md-ellipsis">
      send_heartbeat
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperfcommonservicebase_controller_service" class="md-nav__link">
    <span class="md-ellipsis">
      aiperf.common.service.base_controller_service
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.service.base_controller_service" class="md-nav__link">
    <span class="md-ellipsis">
      base_controller_service
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.service.base_controller_service.BaseControllerService" class="md-nav__link">
    <span class="md-ellipsis">
      BaseControllerService
    </span>
  </a>
  
    <nav class="md-nav" aria-label="BaseControllerService">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#aiperf.common.service.base_controller_service.BaseControllerService.required_clients" class="md-nav__link">
    <span class="md-ellipsis">
      required_clients
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.common.service.base_controller_service.BaseControllerService.create_command_message" class="md-nav__link">
    <span class="md-ellipsis">
      create_command_message
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperfcommonservicebase_service" class="md-nav__link">
    <span class="md-ellipsis">
      aiperf.common.service.base_service
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.service.base_service" class="md-nav__link">
    <span class="md-ellipsis">
      base_service
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.service.base_service.BaseService" class="md-nav__link">
    <span class="md-ellipsis">
      BaseService
    </span>
  </a>
  
    <nav class="md-nav" aria-label="BaseService">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#aiperf.common.service.base_service.BaseService.comms" class="md-nav__link">
    <span class="md-ellipsis">
      comms
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.common.service.base_service.BaseService.is_initialized" class="md-nav__link">
    <span class="md-ellipsis">
      is_initialized
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.common.service.base_service.BaseService.is_shutdown" class="md-nav__link">
    <span class="md-ellipsis">
      is_shutdown
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.common.service.base_service.BaseService.state" class="md-nav__link">
    <span class="md-ellipsis">
      state
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.common.service.base_service.BaseService.configure" class="md-nav__link">
    <span class="md-ellipsis">
      configure
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.common.service.base_service.BaseService.initialize" class="md-nav__link">
    <span class="md-ellipsis">
      initialize
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.common.service.base_service.BaseService.run_forever" class="md-nav__link">
    <span class="md-ellipsis">
      run_forever
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.common.service.base_service.BaseService.set_state" class="md-nav__link">
    <span class="md-ellipsis">
      set_state
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.common.service.base_service.BaseService.start" class="md-nav__link">
    <span class="md-ellipsis">
      start
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.common.service.base_service.BaseService.stop" class="md-nav__link">
    <span class="md-ellipsis">
      stop
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperfcommonservicebase_service_interface" class="md-nav__link">
    <span class="md-ellipsis">
      aiperf.common.service.base_service_interface
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.service.base_service_interface" class="md-nav__link">
    <span class="md-ellipsis">
      base_service_interface
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.service.base_service_interface.BaseServiceInterface" class="md-nav__link">
    <span class="md-ellipsis">
      BaseServiceInterface
    </span>
  </a>
  
    <nav class="md-nav" aria-label="BaseServiceInterface">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#aiperf.common.service.base_service_interface.BaseServiceInterface.required_clients" class="md-nav__link">
    <span class="md-ellipsis">
      required_clients
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.common.service.base_service_interface.BaseServiceInterface.service_type" class="md-nav__link">
    <span class="md-ellipsis">
      service_type
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.common.service.base_service_interface.BaseServiceInterface.configure" class="md-nav__link">
    <span class="md-ellipsis">
      configure
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.common.service.base_service_interface.BaseServiceInterface.initialize" class="md-nav__link">
    <span class="md-ellipsis">
      initialize
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.common.service.base_service_interface.BaseServiceInterface.run_forever" class="md-nav__link">
    <span class="md-ellipsis">
      run_forever
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.common.service.base_service_interface.BaseServiceInterface.set_state" class="md-nav__link">
    <span class="md-ellipsis">
      set_state
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.common.service.base_service_interface.BaseServiceInterface.start" class="md-nav__link">
    <span class="md-ellipsis">
      start
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.common.service.base_service_interface.BaseServiceInterface.stop" class="md-nav__link">
    <span class="md-ellipsis">
      stop
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperfcommontokenizer" class="md-nav__link">
    <span class="md-ellipsis">
      aiperf.common.tokenizer
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.tokenizer" class="md-nav__link">
    <span class="md-ellipsis">
      tokenizer
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.tokenizer.Tokenizer" class="md-nav__link">
    <span class="md-ellipsis">
      Tokenizer
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Tokenizer">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#aiperf.common.tokenizer.Tokenizer.__call__" class="md-nav__link">
    <span class="md-ellipsis">
      __call__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.common.tokenizer.Tokenizer.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.common.tokenizer.Tokenizer.__repr__" class="md-nav__link">
    <span class="md-ellipsis">
      __repr__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.common.tokenizer.Tokenizer.__str__" class="md-nav__link">
    <span class="md-ellipsis">
      __str__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.common.tokenizer.Tokenizer.bos_token_id" class="md-nav__link">
    <span class="md-ellipsis">
      bos_token_id
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.common.tokenizer.Tokenizer.decode" class="md-nav__link">
    <span class="md-ellipsis">
      decode
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.common.tokenizer.Tokenizer.encode" class="md-nav__link">
    <span class="md-ellipsis">
      encode
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.common.tokenizer.Tokenizer.from_pretrained" class="md-nav__link">
    <span class="md-ellipsis">
      from_pretrained
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperfcommonutils" class="md-nav__link">
    <span class="md-ellipsis">
      aiperf.common.utils
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.utils" class="md-nav__link">
    <span class="md-ellipsis">
      utils
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.utils.call_all_functions" class="md-nav__link">
    <span class="md-ellipsis">
      call_all_functions
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.utils.call_all_functions_self" class="md-nav__link">
    <span class="md-ellipsis">
      call_all_functions_self
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperfdata_exporterconsole_exporter" class="md-nav__link">
    <span class="md-ellipsis">
      aiperf.data_exporter.console_exporter
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.data_exporter.console_exporter" class="md-nav__link">
    <span class="md-ellipsis">
      console_exporter
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.data_exporter.console_exporter.ConsoleExporter" class="md-nav__link">
    <span class="md-ellipsis">
      ConsoleExporter
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperfdata_exporterexporter_manager" class="md-nav__link">
    <span class="md-ellipsis">
      aiperf.data_exporter.exporter_manager
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.data_exporter.exporter_manager" class="md-nav__link">
    <span class="md-ellipsis">
      exporter_manager
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.data_exporter.exporter_manager.ExporterManager" class="md-nav__link">
    <span class="md-ellipsis">
      ExporterManager
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperfdata_exporterrecord" class="md-nav__link">
    <span class="md-ellipsis">
      aiperf.data_exporter.record
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.data_exporter.record" class="md-nav__link">
    <span class="md-ellipsis">
      record
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperfservicesdatasetdataset_manager" class="md-nav__link">
    <span class="md-ellipsis">
      aiperf.services.dataset.dataset_manager
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.services.dataset.dataset_manager" class="md-nav__link">
    <span class="md-ellipsis">
      dataset_manager
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.services.dataset.dataset_manager.DatasetManager" class="md-nav__link">
    <span class="md-ellipsis">
      DatasetManager
    </span>
  </a>
  
    <nav class="md-nav" aria-label="DatasetManager">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#aiperf.services.dataset.dataset_manager.DatasetManager.service_type" class="md-nav__link">
    <span class="md-ellipsis">
      service_type
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.services.dataset.dataset_manager.main" class="md-nav__link">
    <span class="md-ellipsis">
      main
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperfservicesdatasetgeneratoraudio" class="md-nav__link">
    <span class="md-ellipsis">
      aiperf.services.dataset.generator.audio
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.services.dataset.generator.audio" class="md-nav__link">
    <span class="md-ellipsis">
      audio
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.services.dataset.generator.audio.AudioGenerator" class="md-nav__link">
    <span class="md-ellipsis">
      AudioGenerator
    </span>
  </a>
  
    <nav class="md-nav" aria-label="AudioGenerator">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#aiperf.services.dataset.generator.audio.AudioGenerator.create_synthetic_audio" class="md-nav__link">
    <span class="md-ellipsis">
      create_synthetic_audio
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperfservicesdatasetgeneratorimage" class="md-nav__link">
    <span class="md-ellipsis">
      aiperf.services.dataset.generator.image
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.services.dataset.generator.image" class="md-nav__link">
    <span class="md-ellipsis">
      image
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.services.dataset.generator.image.ImageGenerator" class="md-nav__link">
    <span class="md-ellipsis">
      ImageGenerator
    </span>
  </a>
  
    <nav class="md-nav" aria-label="ImageGenerator">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#aiperf.services.dataset.generator.image.ImageGenerator.create_synthetic_image" class="md-nav__link">
    <span class="md-ellipsis">
      create_synthetic_image
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperfservicesdatasetgeneratorprompt" class="md-nav__link">
    <span class="md-ellipsis">
      aiperf.services.dataset.generator.prompt
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.services.dataset.generator.prompt" class="md-nav__link">
    <span class="md-ellipsis">
      prompt
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.services.dataset.generator.prompt.PromptGenerator" class="md-nav__link">
    <span class="md-ellipsis">
      PromptGenerator
    </span>
  </a>
  
    <nav class="md-nav" aria-label="PromptGenerator">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#aiperf.services.dataset.generator.prompt.PromptGenerator.create_prefix_prompts_pool" class="md-nav__link">
    <span class="md-ellipsis">
      create_prefix_prompts_pool
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.services.dataset.generator.prompt.PromptGenerator.create_synthetic_prompt" class="md-nav__link">
    <span class="md-ellipsis">
      create_synthetic_prompt
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.services.dataset.generator.prompt.PromptGenerator.get_random_prefix_prompt" class="md-nav__link">
    <span class="md-ellipsis">
      get_random_prefix_prompt
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperfservicesdatasetgeneratorutils" class="md-nav__link">
    <span class="md-ellipsis">
      aiperf.services.dataset.generator.utils
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.services.dataset.generator.utils" class="md-nav__link">
    <span class="md-ellipsis">
      utils
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.services.dataset.generator.utils.encode_image" class="md-nav__link">
    <span class="md-ellipsis">
      encode_image
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperfservicespost_processor_managerpost_processor_manager" class="md-nav__link">
    <span class="md-ellipsis">
      aiperf.services.post_processor_manager.post_processor_manager
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.services.post_processor_manager.post_processor_manager" class="md-nav__link">
    <span class="md-ellipsis">
      post_processor_manager
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.services.post_processor_manager.post_processor_manager.PostProcessorManager" class="md-nav__link">
    <span class="md-ellipsis">
      PostProcessorManager
    </span>
  </a>
  
    <nav class="md-nav" aria-label="PostProcessorManager">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#aiperf.services.post_processor_manager.post_processor_manager.PostProcessorManager.service_type" class="md-nav__link">
    <span class="md-ellipsis">
      service_type
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.services.post_processor_manager.post_processor_manager.main" class="md-nav__link">
    <span class="md-ellipsis">
      main
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperfservicesrecords_managermetricsbase_metric" class="md-nav__link">
    <span class="md-ellipsis">
      aiperf.services.records_manager.metrics.base_metric
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.services.records_manager.metrics.base_metric" class="md-nav__link">
    <span class="md-ellipsis">
      base_metric
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.services.records_manager.metrics.base_metric.BaseMetric" class="md-nav__link">
    <span class="md-ellipsis">
      BaseMetric
    </span>
  </a>
  
    <nav class="md-nav" aria-label="BaseMetric">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#aiperf.services.records_manager.metrics.base_metric.BaseMetric.__init_subclass__" class="md-nav__link">
    <span class="md-ellipsis">
      __init_subclass__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.services.records_manager.metrics.base_metric.BaseMetric.get_all" class="md-nav__link">
    <span class="md-ellipsis">
      get_all
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.services.records_manager.metrics.base_metric.BaseMetric.update_value" class="md-nav__link">
    <span class="md-ellipsis">
      update_value
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.services.records_manager.metrics.base_metric.BaseMetric.values" class="md-nav__link">
    <span class="md-ellipsis">
      values
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperfservicesrecords_managermetricstypesbenchmark_duration_metric" class="md-nav__link">
    <span class="md-ellipsis">
      aiperf.services.records_manager.metrics.types.benchmark_duration_metric
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.services.records_manager.metrics.types.benchmark_duration_metric" class="md-nav__link">
    <span class="md-ellipsis">
      benchmark_duration_metric
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.services.records_manager.metrics.types.benchmark_duration_metric.BenchmarkDurationMetric" class="md-nav__link">
    <span class="md-ellipsis">
      BenchmarkDurationMetric
    </span>
  </a>
  
    <nav class="md-nav" aria-label="BenchmarkDurationMetric">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#aiperf.services.records_manager.metrics.types.benchmark_duration_metric.BenchmarkDurationMetric.values" class="md-nav__link">
    <span class="md-ellipsis">
      values
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperfservicesrecords_managermetricstypesmax_response_metric" class="md-nav__link">
    <span class="md-ellipsis">
      aiperf.services.records_manager.metrics.types.max_response_metric
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.services.records_manager.metrics.types.max_response_metric" class="md-nav__link">
    <span class="md-ellipsis">
      max_response_metric
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.services.records_manager.metrics.types.max_response_metric.MaxResponseMetric" class="md-nav__link">
    <span class="md-ellipsis">
      MaxResponseMetric
    </span>
  </a>
  
    <nav class="md-nav" aria-label="MaxResponseMetric">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#aiperf.services.records_manager.metrics.types.max_response_metric.MaxResponseMetric.update_value" class="md-nav__link">
    <span class="md-ellipsis">
      update_value
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.services.records_manager.metrics.types.max_response_metric.MaxResponseMetric.values" class="md-nav__link">
    <span class="md-ellipsis">
      values
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperfservicesrecords_managermetricstypesmin_request_metric" class="md-nav__link">
    <span class="md-ellipsis">
      aiperf.services.records_manager.metrics.types.min_request_metric
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.services.records_manager.metrics.types.min_request_metric" class="md-nav__link">
    <span class="md-ellipsis">
      min_request_metric
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.services.records_manager.metrics.types.min_request_metric.MinRequestMetric" class="md-nav__link">
    <span class="md-ellipsis">
      MinRequestMetric
    </span>
  </a>
  
    <nav class="md-nav" aria-label="MinRequestMetric">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#aiperf.services.records_manager.metrics.types.min_request_metric.MinRequestMetric.update_value" class="md-nav__link">
    <span class="md-ellipsis">
      update_value
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.services.records_manager.metrics.types.min_request_metric.MinRequestMetric.values" class="md-nav__link">
    <span class="md-ellipsis">
      values
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperfservicesrecords_managermetricstypesrequest_latency_metric" class="md-nav__link">
    <span class="md-ellipsis">
      aiperf.services.records_manager.metrics.types.request_latency_metric
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.services.records_manager.metrics.types.request_latency_metric" class="md-nav__link">
    <span class="md-ellipsis">
      request_latency_metric
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.services.records_manager.metrics.types.request_latency_metric.RequestLatencyMetric" class="md-nav__link">
    <span class="md-ellipsis">
      RequestLatencyMetric
    </span>
  </a>
  
    <nav class="md-nav" aria-label="RequestLatencyMetric">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#aiperf.services.records_manager.metrics.types.request_latency_metric.RequestLatencyMetric.update_value" class="md-nav__link">
    <span class="md-ellipsis">
      update_value
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.services.records_manager.metrics.types.request_latency_metric.RequestLatencyMetric.values" class="md-nav__link">
    <span class="md-ellipsis">
      values
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperfservicesrecords_managermetricstypesttft_metric" class="md-nav__link">
    <span class="md-ellipsis">
      aiperf.services.records_manager.metrics.types.ttft_metric
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.services.records_manager.metrics.types.ttft_metric" class="md-nav__link">
    <span class="md-ellipsis">
      ttft_metric
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.services.records_manager.metrics.types.ttft_metric.TTFTMetric" class="md-nav__link">
    <span class="md-ellipsis">
      TTFTMetric
    </span>
  </a>
  
    <nav class="md-nav" aria-label="TTFTMetric">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#aiperf.services.records_manager.metrics.types.ttft_metric.TTFTMetric.update_value" class="md-nav__link">
    <span class="md-ellipsis">
      update_value
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.services.records_manager.metrics.types.ttft_metric.TTFTMetric.values" class="md-nav__link">
    <span class="md-ellipsis">
      values
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperfservicesrecords_managermetricstypesttst_metric" class="md-nav__link">
    <span class="md-ellipsis">
      aiperf.services.records_manager.metrics.types.ttst_metric
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.services.records_manager.metrics.types.ttst_metric" class="md-nav__link">
    <span class="md-ellipsis">
      ttst_metric
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.services.records_manager.metrics.types.ttst_metric.TTSTMetric" class="md-nav__link">
    <span class="md-ellipsis">
      TTSTMetric
    </span>
  </a>
  
    <nav class="md-nav" aria-label="TTSTMetric">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#aiperf.services.records_manager.metrics.types.ttst_metric.TTSTMetric.update_value" class="md-nav__link">
    <span class="md-ellipsis">
      update_value
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.services.records_manager.metrics.types.ttst_metric.TTSTMetric.values" class="md-nav__link">
    <span class="md-ellipsis">
      values
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperfservicesrecords_managerpost_processorsmetric_summary" class="md-nav__link">
    <span class="md-ellipsis">
      aiperf.services.records_manager.post_processors.metric_summary
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.services.records_manager.post_processors.metric_summary" class="md-nav__link">
    <span class="md-ellipsis">
      metric_summary
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.services.records_manager.post_processors.metric_summary.MetricSummary" class="md-nav__link">
    <span class="md-ellipsis">
      MetricSummary
    </span>
  </a>
  
    <nav class="md-nav" aria-label="MetricSummary">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#aiperf.services.records_manager.post_processors.metric_summary.MetricSummary.process" class="md-nav__link">
    <span class="md-ellipsis">
      process
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperfservicesrecords_managerrecords" class="md-nav__link">
    <span class="md-ellipsis">
      aiperf.services.records_manager.records
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.services.records_manager.records" class="md-nav__link">
    <span class="md-ellipsis">
      records
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.services.records_manager.records.Records" class="md-nav__link">
    <span class="md-ellipsis">
      Records
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Records">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#aiperf.services.records_manager.records.Records.add_record" class="md-nav__link">
    <span class="md-ellipsis">
      add_record
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperfservicesrecords_managerrecords_manager" class="md-nav__link">
    <span class="md-ellipsis">
      aiperf.services.records_manager.records_manager
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.services.records_manager.records_manager" class="md-nav__link">
    <span class="md-ellipsis">
      records_manager
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.services.records_manager.records_manager.RecordsManager" class="md-nav__link">
    <span class="md-ellipsis">
      RecordsManager
    </span>
  </a>
  
    <nav class="md-nav" aria-label="RecordsManager">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#aiperf.services.records_manager.records_manager.RecordsManager.service_type" class="md-nav__link">
    <span class="md-ellipsis">
      service_type
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.services.records_manager.records_manager.main" class="md-nav__link">
    <span class="md-ellipsis">
      main
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperfservicesservice_managerbase" class="md-nav__link">
    <span class="md-ellipsis">
      aiperf.services.service_manager.base
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.services.service_manager.base" class="md-nav__link">
    <span class="md-ellipsis">
      base
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.services.service_manager.base.BaseServiceManager" class="md-nav__link">
    <span class="md-ellipsis">
      BaseServiceManager
    </span>
  </a>
  
    <nav class="md-nav" aria-label="BaseServiceManager">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#aiperf.services.service_manager.base.BaseServiceManager.initialize_all_services" class="md-nav__link">
    <span class="md-ellipsis">
      initialize_all_services
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.services.service_manager.base.BaseServiceManager.stop_all_services" class="md-nav__link">
    <span class="md-ellipsis">
      stop_all_services
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.services.service_manager.base.BaseServiceManager.wait_for_all_services_registration" class="md-nav__link">
    <span class="md-ellipsis">
      wait_for_all_services_registration
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.services.service_manager.base.BaseServiceManager.wait_for_all_services_start" class="md-nav__link">
    <span class="md-ellipsis">
      wait_for_all_services_start
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperfservicesservice_managerkubernetes" class="md-nav__link">
    <span class="md-ellipsis">
      aiperf.services.service_manager.kubernetes
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.services.service_manager.kubernetes" class="md-nav__link">
    <span class="md-ellipsis">
      kubernetes
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.services.service_manager.kubernetes.KubernetesServiceManager" class="md-nav__link">
    <span class="md-ellipsis">
      KubernetesServiceManager
    </span>
  </a>
  
    <nav class="md-nav" aria-label="KubernetesServiceManager">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#aiperf.services.service_manager.kubernetes.KubernetesServiceManager.initialize_all_services" class="md-nav__link">
    <span class="md-ellipsis">
      initialize_all_services
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.services.service_manager.kubernetes.KubernetesServiceManager.stop_all_services" class="md-nav__link">
    <span class="md-ellipsis">
      stop_all_services
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.services.service_manager.kubernetes.KubernetesServiceManager.wait_for_all_services_registration" class="md-nav__link">
    <span class="md-ellipsis">
      wait_for_all_services_registration
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.services.service_manager.kubernetes.KubernetesServiceManager.wait_for_all_services_start" class="md-nav__link">
    <span class="md-ellipsis">
      wait_for_all_services_start
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.services.service_manager.kubernetes.ServiceKubernetesRunInfo" class="md-nav__link">
    <span class="md-ellipsis">
      ServiceKubernetesRunInfo
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperfservicesservice_managermultiprocess" class="md-nav__link">
    <span class="md-ellipsis">
      aiperf.services.service_manager.multiprocess
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.services.service_manager.multiprocess" class="md-nav__link">
    <span class="md-ellipsis">
      multiprocess
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.services.service_manager.multiprocess.MultiProcessRunInfo" class="md-nav__link">
    <span class="md-ellipsis">
      MultiProcessRunInfo
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.services.service_manager.multiprocess.MultiProcessServiceManager" class="md-nav__link">
    <span class="md-ellipsis">
      MultiProcessServiceManager
    </span>
  </a>
  
    <nav class="md-nav" aria-label="MultiProcessServiceManager">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#aiperf.services.service_manager.multiprocess.MultiProcessServiceManager.initialize_all_services" class="md-nav__link">
    <span class="md-ellipsis">
      initialize_all_services
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.services.service_manager.multiprocess.MultiProcessServiceManager.stop_all_services" class="md-nav__link">
    <span class="md-ellipsis">
      stop_all_services
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.services.service_manager.multiprocess.MultiProcessServiceManager.wait_for_all_services_registration" class="md-nav__link">
    <span class="md-ellipsis">
      wait_for_all_services_registration
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.services.service_manager.multiprocess.MultiProcessServiceManager.wait_for_all_services_start" class="md-nav__link">
    <span class="md-ellipsis">
      wait_for_all_services_start
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperfservicessystem_controllersystem_controller" class="md-nav__link">
    <span class="md-ellipsis">
      aiperf.services.system_controller.system_controller
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.services.system_controller.system_controller" class="md-nav__link">
    <span class="md-ellipsis">
      system_controller
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.services.system_controller.system_controller.SystemController" class="md-nav__link">
    <span class="md-ellipsis">
      SystemController
    </span>
  </a>
  
    <nav class="md-nav" aria-label="SystemController">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#aiperf.services.system_controller.system_controller.SystemController.service_type" class="md-nav__link">
    <span class="md-ellipsis">
      service_type
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.services.system_controller.system_controller.SystemController.send_command_to_service" class="md-nav__link">
    <span class="md-ellipsis">
      send_command_to_service
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.services.system_controller.system_controller.SystemController.start_all_services" class="md-nav__link">
    <span class="md-ellipsis">
      start_all_services
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.services.system_controller.system_controller.main" class="md-nav__link">
    <span class="md-ellipsis">
      main
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperfservicestiming_managertiming_manager" class="md-nav__link">
    <span class="md-ellipsis">
      aiperf.services.timing_manager.timing_manager
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.services.timing_manager.timing_manager" class="md-nav__link">
    <span class="md-ellipsis">
      timing_manager
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.services.timing_manager.timing_manager.TimingManager" class="md-nav__link">
    <span class="md-ellipsis">
      TimingManager
    </span>
  </a>
  
    <nav class="md-nav" aria-label="TimingManager">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#aiperf.services.timing_manager.timing_manager.TimingManager.required_clients" class="md-nav__link">
    <span class="md-ellipsis">
      required_clients
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.services.timing_manager.timing_manager.TimingManager.service_type" class="md-nav__link">
    <span class="md-ellipsis">
      service_type
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.services.timing_manager.timing_manager.main" class="md-nav__link">
    <span class="md-ellipsis">
      main
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperfservicesworkerworker" class="md-nav__link">
    <span class="md-ellipsis">
      aiperf.services.worker.worker
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.services.worker.worker" class="md-nav__link">
    <span class="md-ellipsis">
      worker
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.services.worker.worker.Worker" class="md-nav__link">
    <span class="md-ellipsis">
      Worker
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Worker">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#aiperf.services.worker.worker.Worker.required_clients" class="md-nav__link">
    <span class="md-ellipsis">
      required_clients
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.services.worker.worker.Worker.service_type" class="md-nav__link">
    <span class="md-ellipsis">
      service_type
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.services.worker.worker.main" class="md-nav__link">
    <span class="md-ellipsis">
      main
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperfservicesworker_managerworker_manager" class="md-nav__link">
    <span class="md-ellipsis">
      aiperf.services.worker_manager.worker_manager
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.services.worker_manager.worker_manager" class="md-nav__link">
    <span class="md-ellipsis">
      worker_manager
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.services.worker_manager.worker_manager.WorkerManager" class="md-nav__link">
    <span class="md-ellipsis">
      WorkerManager
    </span>
  </a>
  
    <nav class="md-nav" aria-label="WorkerManager">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#aiperf.services.worker_manager.worker_manager.WorkerManager.service_type" class="md-nav__link">
    <span class="md-ellipsis">
      service_type
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.services.worker_manager.worker_manager.WorkerProcess" class="md-nav__link">
    <span class="md-ellipsis">
      WorkerProcess
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.services.worker_manager.worker_manager.main" class="md-nav__link">
    <span class="md-ellipsis">
      main
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperftestsbase_test_component_service" class="md-nav__link">
    <span class="md-ellipsis">
      aiperf.tests.base_test_component_service
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.tests.base_test_component_service" class="md-nav__link">
    <span class="md-ellipsis">
      base_test_component_service
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.tests.base_test_component_service.BaseTestComponentService" class="md-nav__link">
    <span class="md-ellipsis">
      BaseTestComponentService
    </span>
  </a>
  
    <nav class="md-nav" aria-label="BaseTestComponentService">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#aiperf.tests.base_test_component_service.BaseTestComponentService.service_class" class="md-nav__link">
    <span class="md-ellipsis">
      service_class
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.tests.base_test_component_service.BaseTestComponentService.test_service_heartbeat" class="md-nav__link">
    <span class="md-ellipsis">
      test_service_heartbeat
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.tests.base_test_component_service.BaseTestComponentService.test_service_registration" class="md-nav__link">
    <span class="md-ellipsis">
      test_service_registration
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.tests.base_test_component_service.BaseTestComponentService.test_service_status_update" class="md-nav__link">
    <span class="md-ellipsis">
      test_service_status_update
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperftestsbase_test_controller_service" class="md-nav__link">
    <span class="md-ellipsis">
      aiperf.tests.base_test_controller_service
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.tests.base_test_controller_service" class="md-nav__link">
    <span class="md-ellipsis">
      base_test_controller_service
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.tests.base_test_controller_service.BaseTestControllerService" class="md-nav__link">
    <span class="md-ellipsis">
      BaseTestControllerService
    </span>
  </a>
  
    <nav class="md-nav" aria-label="BaseTestControllerService">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#aiperf.tests.base_test_controller_service.BaseTestControllerService.test_controller_command_publishing" class="md-nav__link">
    <span class="md-ellipsis">
      test_controller_command_publishing
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperftestsbase_test_service" class="md-nav__link">
    <span class="md-ellipsis">
      aiperf.tests.base_test_service
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.tests.base_test_service" class="md-nav__link">
    <span class="md-ellipsis">
      base_test_service
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.tests.base_test_service.BaseTestService" class="md-nav__link">
    <span class="md-ellipsis">
      BaseTestService
    </span>
  </a>
  
    <nav class="md-nav" aria-label="BaseTestService">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#aiperf.tests.base_test_service.BaseTestService.initialized_service" class="md-nav__link">
    <span class="md-ellipsis">
      initialized_service
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.tests.base_test_service.BaseTestService.no_sleep" class="md-nav__link">
    <span class="md-ellipsis">
      no_sleep
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.tests.base_test_service.BaseTestService.patch_communication_factory" class="md-nav__link">
    <span class="md-ellipsis">
      patch_communication_factory
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.tests.base_test_service.BaseTestService.service_class" class="md-nav__link">
    <span class="md-ellipsis">
      service_class
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.tests.base_test_service.BaseTestService.service_config" class="md-nav__link">
    <span class="md-ellipsis">
      service_config
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.tests.base_test_service.BaseTestService.test_service_initialization" class="md-nav__link">
    <span class="md-ellipsis">
      test_service_initialization
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.tests.base_test_service.BaseTestService.test_service_run_does_not_start" class="md-nav__link">
    <span class="md-ellipsis">
      test_service_run_does_not_start
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.tests.base_test_service.BaseTestService.test_service_start_stop" class="md-nav__link">
    <span class="md-ellipsis">
      test_service_start_stop
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.tests.base_test_service.BaseTestService.test_service_state_transitions" class="md-nav__link">
    <span class="md-ellipsis">
      test_service_state_transitions
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.tests.base_test_service.BaseTestService.uninitialized_service" class="md-nav__link">
    <span class="md-ellipsis">
      uninitialized_service
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperftestscommsmock_zmq" class="md-nav__link">
    <span class="md-ellipsis">
      aiperf.tests.comms.mock_zmq
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.tests.comms.mock_zmq" class="md-nav__link">
    <span class="md-ellipsis">
      mock_zmq
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.tests.comms.mock_zmq.MockCommunicationData" class="md-nav__link">
    <span class="md-ellipsis">
      MockCommunicationData
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.tests.comms.mock_zmq.mock_zmq_communication" class="md-nav__link">
    <span class="md-ellipsis">
      mock_zmq_communication
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperftestscommstest_zmq_communication" class="md-nav__link">
    <span class="md-ellipsis">
      aiperf.tests.comms.test_zmq_communication
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.tests.comms.test_zmq_communication" class="md-nav__link">
    <span class="md-ellipsis">
      test_zmq_communication
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.tests.comms.test_zmq_communication.TestZMQCommunication" class="md-nav__link">
    <span class="md-ellipsis">
      TestZMQCommunication
    </span>
  </a>
  
    <nav class="md-nav" aria-label="TestZMQCommunication">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#aiperf.tests.comms.test_zmq_communication.TestZMQCommunication.mock_config" class="md-nav__link">
    <span class="md-ellipsis">
      mock_config
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.tests.comms.test_zmq_communication.TestZMQCommunication.test_create_clients" class="md-nav__link">
    <span class="md-ellipsis">
      test_create_clients
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.tests.comms.test_zmq_communication.TestZMQCommunication.test_initialization" class="md-nav__link">
    <span class="md-ellipsis">
      test_initialization
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.tests.comms.test_zmq_communication.TestZMQCommunication.test_initialization_failure" class="md-nav__link">
    <span class="md-ellipsis">
      test_initialization_failure
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.tests.comms.test_zmq_communication.TestZMQCommunication.test_message" class="md-nav__link">
    <span class="md-ellipsis">
      test_message
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.tests.comms.test_zmq_communication.TestZMQCommunication.test_publish_message" class="md-nav__link">
    <span class="md-ellipsis">
      test_publish_message
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.tests.comms.test_zmq_communication.TestZMQCommunication.test_shutdown" class="md-nav__link">
    <span class="md-ellipsis">
      test_shutdown
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.tests.comms.test_zmq_communication.TestZMQCommunication.test_subscribe_to_topic" class="md-nav__link">
    <span class="md-ellipsis">
      test_subscribe_to_topic
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.tests.comms.test_zmq_communication.TestZMQCommunication.zmq_communication" class="md-nav__link">
    <span class="md-ellipsis">
      zmq_communication
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperftestsconfigtest_audio_config" class="md-nav__link">
    <span class="md-ellipsis">
      aiperf.tests.config.test_audio_config
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.tests.config.test_audio_config" class="md-nav__link">
    <span class="md-ellipsis">
      test_audio_config
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.tests.config.test_audio_config.test_audio_config_custom_values" class="md-nav__link">
    <span class="md-ellipsis">
      test_audio_config_custom_values
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.tests.config.test_audio_config.test_audio_config_defaults" class="md-nav__link">
    <span class="md-ellipsis">
      test_audio_config_defaults
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperftestsconfigtest_base_config" class="md-nav__link">
    <span class="md-ellipsis">
      aiperf.tests.config.test_base_config
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.tests.config.test_base_config" class="md-nav__link">
    <span class="md-ellipsis">
      test_base_config
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.tests.config.test_base_config.test_attach_comments_with_verbose" class="md-nav__link">
    <span class="md-ellipsis">
      test_attach_comments_with_verbose
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.tests.config.test_base_config.test_is_a_nested_config" class="md-nav__link">
    <span class="md-ellipsis">
      test_is_a_nested_config
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.tests.config.test_base_config.test_preprocess_value_enum" class="md-nav__link">
    <span class="md-ellipsis">
      test_preprocess_value_enum
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.tests.config.test_base_config.test_serialize_to_yaml" class="md-nav__link">
    <span class="md-ellipsis">
      test_serialize_to_yaml
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.tests.config.test_base_config.test_should_add_field_to_template" class="md-nav__link">
    <span class="md-ellipsis">
      test_should_add_field_to_template
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperftestsconfigtest_endpoint_config" class="md-nav__link">
    <span class="md-ellipsis">
      aiperf.tests.config.test_endpoint_config
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.tests.config.test_endpoint_config" class="md-nav__link">
    <span class="md-ellipsis">
      test_endpoint_config
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.tests.config.test_endpoint_config.test_endpoint_config_custom_values" class="md-nav__link">
    <span class="md-ellipsis">
      test_endpoint_config_custom_values
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.tests.config.test_endpoint_config.test_endpoint_config_defaults" class="md-nav__link">
    <span class="md-ellipsis">
      test_endpoint_config_defaults
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.tests.config.test_endpoint_config.test_server_metrics_urls_validator" class="md-nav__link">
    <span class="md-ellipsis">
      test_server_metrics_urls_validator
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperftestsconfigtest_image_config" class="md-nav__link">
    <span class="md-ellipsis">
      aiperf.tests.config.test_image_config
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.tests.config.test_image_config" class="md-nav__link">
    <span class="md-ellipsis">
      test_image_config
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.tests.config.test_image_config.test_image_config_custom_values" class="md-nav__link">
    <span class="md-ellipsis">
      test_image_config_custom_values
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.tests.config.test_image_config.test_image_config_defaults" class="md-nav__link">
    <span class="md-ellipsis">
      test_image_config_defaults
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperftestsconfigtest_input_config" class="md-nav__link">
    <span class="md-ellipsis">
      aiperf.tests.config.test_input_config
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.tests.config.test_input_config" class="md-nav__link">
    <span class="md-ellipsis">
      test_input_config
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.tests.config.test_input_config.test_input_config_custom_values" class="md-nav__link">
    <span class="md-ellipsis">
      test_input_config_custom_values
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.tests.config.test_input_config.test_input_config_defaults" class="md-nav__link">
    <span class="md-ellipsis">
      test_input_config_defaults
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.tests.config.test_input_config.test_input_config_file_validation" class="md-nav__link">
    <span class="md-ellipsis">
      test_input_config_file_validation
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.tests.config.test_input_config.test_input_config_goodput_validation" class="md-nav__link">
    <span class="md-ellipsis">
      test_input_config_goodput_validation
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperftestsconfigtest_output_config" class="md-nav__link">
    <span class="md-ellipsis">
      aiperf.tests.config.test_output_config
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.tests.config.test_output_config" class="md-nav__link">
    <span class="md-ellipsis">
      test_output_config
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.tests.config.test_output_config.test_output_config_custom_values" class="md-nav__link">
    <span class="md-ellipsis">
      test_output_config_custom_values
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.tests.config.test_output_config.test_output_config_defaults" class="md-nav__link">
    <span class="md-ellipsis">
      test_output_config_defaults
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperftestsconfigtest_prompt_config" class="md-nav__link">
    <span class="md-ellipsis">
      aiperf.tests.config.test_prompt_config
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.tests.config.test_prompt_config" class="md-nav__link">
    <span class="md-ellipsis">
      test_prompt_config
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.tests.config.test_prompt_config.test_input_tokens_config_custom_values" class="md-nav__link">
    <span class="md-ellipsis">
      test_input_tokens_config_custom_values
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.tests.config.test_prompt_config.test_input_tokens_config_defaults" class="md-nav__link">
    <span class="md-ellipsis">
      test_input_tokens_config_defaults
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.tests.config.test_prompt_config.test_output_tokens_config_custom_values" class="md-nav__link">
    <span class="md-ellipsis">
      test_output_tokens_config_custom_values
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.tests.config.test_prompt_config.test_output_tokens_config_defaults" class="md-nav__link">
    <span class="md-ellipsis">
      test_output_tokens_config_defaults
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.tests.config.test_prompt_config.test_prefix_prompt_config_custom_values" class="md-nav__link">
    <span class="md-ellipsis">
      test_prefix_prompt_config_custom_values
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.tests.config.test_prompt_config.test_prefix_prompt_config_defaults" class="md-nav__link">
    <span class="md-ellipsis">
      test_prefix_prompt_config_defaults
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperftestsconfigtest_sessions_config" class="md-nav__link">
    <span class="md-ellipsis">
      aiperf.tests.config.test_sessions_config
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.tests.config.test_sessions_config" class="md-nav__link">
    <span class="md-ellipsis">
      test_sessions_config
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.tests.config.test_sessions_config.test_sessions_config_custom_values" class="md-nav__link">
    <span class="md-ellipsis">
      test_sessions_config_custom_values
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.tests.config.test_sessions_config.test_sessions_config_defaults" class="md-nav__link">
    <span class="md-ellipsis">
      test_sessions_config_defaults
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperftestsconfigtest_tokenizer_config" class="md-nav__link">
    <span class="md-ellipsis">
      aiperf.tests.config.test_tokenizer_config
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.tests.config.test_tokenizer_config" class="md-nav__link">
    <span class="md-ellipsis">
      test_tokenizer_config
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.tests.config.test_tokenizer_config.test_output_config_custom_values" class="md-nav__link">
    <span class="md-ellipsis">
      test_output_config_custom_values
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.tests.config.test_tokenizer_config.test_tokenizer_config_defaults" class="md-nav__link">
    <span class="md-ellipsis">
      test_tokenizer_config_defaults
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperftestsconfigtest_user_config" class="md-nav__link">
    <span class="md-ellipsis">
      aiperf.tests.config.test_user_config
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.tests.config.test_user_config" class="md-nav__link">
    <span class="md-ellipsis">
      test_user_config
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.tests.config.test_user_config.test_user_config_custom_values" class="md-nav__link">
    <span class="md-ellipsis">
      test_user_config_custom_values
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.tests.config.test_user_config.test_user_config_defaults" class="md-nav__link">
    <span class="md-ellipsis">
      test_user_config_defaults
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.tests.config.test_user_config.test_user_config_serialization_to_file" class="md-nav__link">
    <span class="md-ellipsis">
      test_user_config_serialization_to_file
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperftestsconftest" class="md-nav__link">
    <span class="md-ellipsis">
      aiperf.tests.conftest
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.tests.conftest" class="md-nav__link">
    <span class="md-ellipsis">
      conftest
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.tests.conftest.mock_communication" class="md-nav__link">
    <span class="md-ellipsis">
      mock_communication
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.tests.conftest.mock_hf_tokenizer" class="md-nav__link">
    <span class="md-ellipsis">
      mock_hf_tokenizer
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.tests.conftest.mock_zmq_context" class="md-nav__link">
    <span class="md-ellipsis">
      mock_zmq_context
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.tests.conftest.mock_zmq_socket" class="md-nav__link">
    <span class="md-ellipsis">
      mock_zmq_socket
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperftestsdata_exporterstest_console_exporter" class="md-nav__link">
    <span class="md-ellipsis">
      aiperf.tests.data_exporters.test_console_exporter
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.tests.data_exporters.test_console_exporter" class="md-nav__link">
    <span class="md-ellipsis">
      test_console_exporter
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperftestsdata_exporterstest_exporter_manager" class="md-nav__link">
    <span class="md-ellipsis">
      aiperf.tests.data_exporters.test_exporter_manager
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.tests.data_exporters.test_exporter_manager" class="md-nav__link">
    <span class="md-ellipsis">
      test_exporter_manager
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperftestsservicestest_dataset_manager" class="md-nav__link">
    <span class="md-ellipsis">
      aiperf.tests.services.test_dataset_manager
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.tests.services.test_dataset_manager" class="md-nav__link">
    <span class="md-ellipsis">
      test_dataset_manager
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.tests.services.test_dataset_manager.DatasetManagerTestConfig" class="md-nav__link">
    <span class="md-ellipsis">
      DatasetManagerTestConfig
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.tests.services.test_dataset_manager.TestDatasetManager" class="md-nav__link">
    <span class="md-ellipsis">
      TestDatasetManager
    </span>
  </a>
  
    <nav class="md-nav" aria-label="TestDatasetManager">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#aiperf.tests.services.test_dataset_manager.TestDatasetManager.dataset_config" class="md-nav__link">
    <span class="md-ellipsis">
      dataset_config
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.tests.services.test_dataset_manager.TestDatasetManager.service_class" class="md-nav__link">
    <span class="md-ellipsis">
      service_class
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.tests.services.test_dataset_manager.TestDatasetManager.test_dataset_manager_initialization" class="md-nav__link">
    <span class="md-ellipsis">
      test_dataset_manager_initialization
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperftestsservicestest_post_processor_manager" class="md-nav__link">
    <span class="md-ellipsis">
      aiperf.tests.services.test_post_processor_manager
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.tests.services.test_post_processor_manager" class="md-nav__link">
    <span class="md-ellipsis">
      test_post_processor_manager
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.tests.services.test_post_processor_manager.PostProcessorTestConfig" class="md-nav__link">
    <span class="md-ellipsis">
      PostProcessorTestConfig
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.tests.services.test_post_processor_manager.TestPostProcessorManager" class="md-nav__link">
    <span class="md-ellipsis">
      TestPostProcessorManager
    </span>
  </a>
  
    <nav class="md-nav" aria-label="TestPostProcessorManager">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#aiperf.tests.services.test_post_processor_manager.TestPostProcessorManager.processor_config" class="md-nav__link">
    <span class="md-ellipsis">
      processor_config
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.tests.services.test_post_processor_manager.TestPostProcessorManager.service_class" class="md-nav__link">
    <span class="md-ellipsis">
      service_class
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.tests.services.test_post_processor_manager.TestPostProcessorManager.test_post_processor_manager_initialization" class="md-nav__link">
    <span class="md-ellipsis">
      test_post_processor_manager_initialization
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperftestsservicestest_records_manager" class="md-nav__link">
    <span class="md-ellipsis">
      aiperf.tests.services.test_records_manager
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.tests.services.test_records_manager" class="md-nav__link">
    <span class="md-ellipsis">
      test_records_manager
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.tests.services.test_records_manager.RecordsManagerTestConfig" class="md-nav__link">
    <span class="md-ellipsis">
      RecordsManagerTestConfig
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.tests.services.test_records_manager.TestRecordsManager" class="md-nav__link">
    <span class="md-ellipsis">
      TestRecordsManager
    </span>
  </a>
  
    <nav class="md-nav" aria-label="TestRecordsManager">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#aiperf.tests.services.test_records_manager.TestRecordsManager.records_config" class="md-nav__link">
    <span class="md-ellipsis">
      records_config
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.tests.services.test_records_manager.TestRecordsManager.service_class" class="md-nav__link">
    <span class="md-ellipsis">
      service_class
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.tests.services.test_records_manager.TestRecordsManager.test_records_manager_initialization" class="md-nav__link">
    <span class="md-ellipsis">
      test_records_manager_initialization
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperftestsservicestest_system_controller" class="md-nav__link">
    <span class="md-ellipsis">
      aiperf.tests.services.test_system_controller
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.tests.services.test_system_controller" class="md-nav__link">
    <span class="md-ellipsis">
      test_system_controller
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.tests.services.test_system_controller.SystemControllerTestConfig" class="md-nav__link">
    <span class="md-ellipsis">
      SystemControllerTestConfig
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.tests.services.test_system_controller.TestSystemController" class="md-nav__link">
    <span class="md-ellipsis">
      TestSystemController
    </span>
  </a>
  
    <nav class="md-nav" aria-label="TestSystemController">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#aiperf.tests.services.test_system_controller.TestSystemController.controller_config" class="md-nav__link">
    <span class="md-ellipsis">
      controller_config
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.tests.services.test_system_controller.TestSystemController.service_class" class="md-nav__link">
    <span class="md-ellipsis">
      service_class
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.tests.services.test_system_controller.TestSystemController.service_manager_with_multiprocess" class="md-nav__link">
    <span class="md-ellipsis">
      service_manager_with_multiprocess
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.tests.services.test_system_controller.TestSystemController.test_controller_subscriptions" class="md-nav__link">
    <span class="md-ellipsis">
      test_controller_subscriptions
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.tests.services.test_system_controller.TestSystemController.test_service_run_does_start" class="md-nav__link">
    <span class="md-ellipsis">
      test_service_run_does_start
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperftestsservicestest_timing_manager" class="md-nav__link">
    <span class="md-ellipsis">
      aiperf.tests.services.test_timing_manager
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.tests.services.test_timing_manager" class="md-nav__link">
    <span class="md-ellipsis">
      test_timing_manager
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.tests.services.test_timing_manager.TestTimingManager" class="md-nav__link">
    <span class="md-ellipsis">
      TestTimingManager
    </span>
  </a>
  
    <nav class="md-nav" aria-label="TestTimingManager">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#aiperf.tests.services.test_timing_manager.TestTimingManager.service_class" class="md-nav__link">
    <span class="md-ellipsis">
      service_class
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.tests.services.test_timing_manager.TestTimingManager.test_timing_manager_initialization" class="md-nav__link">
    <span class="md-ellipsis">
      test_timing_manager_initialization
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.tests.services.test_timing_manager.TestTimingManager.timing_config" class="md-nav__link">
    <span class="md-ellipsis">
      timing_config
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.tests.services.test_timing_manager.TimingManagerTestConfig" class="md-nav__link">
    <span class="md-ellipsis">
      TimingManagerTestConfig
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperftestsservicestest_worker" class="md-nav__link">
    <span class="md-ellipsis">
      aiperf.tests.services.test_worker
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.tests.services.test_worker" class="md-nav__link">
    <span class="md-ellipsis">
      test_worker
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.tests.services.test_worker.TestWorker" class="md-nav__link">
    <span class="md-ellipsis">
      TestWorker
    </span>
  </a>
  
    <nav class="md-nav" aria-label="TestWorker">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#aiperf.tests.services.test_worker.TestWorker.service_class" class="md-nav__link">
    <span class="md-ellipsis">
      service_class
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.tests.services.test_worker.TestWorker.test_worker_initialization" class="md-nav__link">
    <span class="md-ellipsis">
      test_worker_initialization
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.tests.services.test_worker.TestWorker.worker_config" class="md-nav__link">
    <span class="md-ellipsis">
      worker_config
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.tests.services.test_worker.WorkerTestConfig" class="md-nav__link">
    <span class="md-ellipsis">
      WorkerTestConfig
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperftestsservicestest_worker_manager" class="md-nav__link">
    <span class="md-ellipsis">
      aiperf.tests.services.test_worker_manager
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.tests.services.test_worker_manager" class="md-nav__link">
    <span class="md-ellipsis">
      test_worker_manager
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.tests.services.test_worker_manager.TestWorkerManager" class="md-nav__link">
    <span class="md-ellipsis">
      TestWorkerManager
    </span>
  </a>
  
    <nav class="md-nav" aria-label="TestWorkerManager">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#aiperf.tests.services.test_worker_manager.TestWorkerManager.service_class" class="md-nav__link">
    <span class="md-ellipsis">
      service_class
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.tests.services.test_worker_manager.TestWorkerManager.test_worker_manager_initialization" class="md-nav__link">
    <span class="md-ellipsis">
      test_worker_manager_initialization
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.tests.services.test_worker_manager.TestWorkerManager.worker_manager_config" class="md-nav__link">
    <span class="md-ellipsis">
      worker_manager_config
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.tests.services.test_worker_manager.WorkerManagerTestConfig" class="md-nav__link">
    <span class="md-ellipsis">
      WorkerManagerTestConfig
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperfteststest_aiperf_task" class="md-nav__link">
    <span class="md-ellipsis">
      aiperf.tests.test_aiperf_task
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.tests.test_aiperf_task" class="md-nav__link">
    <span class="md-ellipsis">
      test_aiperf_task
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperfteststest_audio_generator" class="md-nav__link">
    <span class="md-ellipsis">
      aiperf.tests.test_audio_generator
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.tests.test_audio_generator" class="md-nav__link">
    <span class="md-ellipsis">
      test_audio_generator
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.tests.test_audio_generator.decode_audio" class="md-nav__link">
    <span class="md-ellipsis">
      decode_audio
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperfteststest_benchmark_duration_metric" class="md-nav__link">
    <span class="md-ellipsis">
      aiperf.tests.test_benchmark_duration_metric
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.tests.test_benchmark_duration_metric" class="md-nav__link">
    <span class="md-ellipsis">
      test_benchmark_duration_metric
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperfteststest_hooks" class="md-nav__link">
    <span class="md-ellipsis">
      aiperf.tests.test_hooks
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.tests.test_hooks" class="md-nav__link">
    <span class="md-ellipsis">
      test_hooks
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.tests.test_hooks.test_hook_decorators" class="md-nav__link">
    <span class="md-ellipsis">
      test_hook_decorators
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.tests.test_hooks.test_hook_inheritance" class="md-nav__link">
    <span class="md-ellipsis">
      test_hook_inheritance
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.tests.test_hooks.test_hook_ordering" class="md-nav__link">
    <span class="md-ellipsis">
      test_hook_ordering
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.tests.test_hooks.test_inheritance_hook_order" class="md-nav__link">
    <span class="md-ellipsis">
      test_inheritance_hook_order
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.tests.test_hooks.test_inheritance_hook_override" class="md-nav__link">
    <span class="md-ellipsis">
      test_inheritance_hook_override
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.tests.test_hooks.test_instance_additional_hooks" class="md-nav__link">
    <span class="md-ellipsis">
      test_instance_additional_hooks
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.tests.test_hooks.test_instance_additional_supported_hooks" class="md-nav__link">
    <span class="md-ellipsis">
      test_instance_additional_supported_hooks
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.tests.test_hooks.test_unsupported_hook_decorator" class="md-nav__link">
    <span class="md-ellipsis">
      test_unsupported_hook_decorator
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperfteststest_image_generator" class="md-nav__link">
    <span class="md-ellipsis">
      aiperf.tests.test_image_generator
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.tests.test_image_generator" class="md-nav__link">
    <span class="md-ellipsis">
      test_image_generator
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperfteststest_max_response_metric" class="md-nav__link">
    <span class="md-ellipsis">
      aiperf.tests.test_max_response_metric
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.tests.test_max_response_metric" class="md-nav__link">
    <span class="md-ellipsis">
      test_max_response_metric
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperfteststest_messages" class="md-nav__link">
    <span class="md-ellipsis">
      aiperf.tests.test_messages
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.tests.test_messages" class="md-nav__link">
    <span class="md-ellipsis">
      test_messages
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperfteststest_metric_summary" class="md-nav__link">
    <span class="md-ellipsis">
      aiperf.tests.test_metric_summary
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.tests.test_metric_summary" class="md-nav__link">
    <span class="md-ellipsis">
      test_metric_summary
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperfteststest_min_request_metric" class="md-nav__link">
    <span class="md-ellipsis">
      aiperf.tests.test_min_request_metric
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.tests.test_min_request_metric" class="md-nav__link">
    <span class="md-ellipsis">
      test_min_request_metric
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperfteststest_prompt_generator" class="md-nav__link">
    <span class="md-ellipsis">
      aiperf.tests.test_prompt_generator
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.tests.test_prompt_generator" class="md-nav__link">
    <span class="md-ellipsis">
      test_prompt_generator
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperfteststest_records" class="md-nav__link">
    <span class="md-ellipsis">
      aiperf.tests.test_records
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.tests.test_records" class="md-nav__link">
    <span class="md-ellipsis">
      test_records
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.tests.test_records.test_record_dataclass" class="md-nav__link">
    <span class="md-ellipsis">
      test_record_dataclass
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.tests.test_records.test_records_add_and_get_records" class="md-nav__link">
    <span class="md-ellipsis">
      test_records_add_and_get_records
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.tests.test_records.test_records_multiple_adds" class="md-nav__link">
    <span class="md-ellipsis">
      test_records_multiple_adds
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.tests.test_records.test_records_serialization_and_deserialization" class="md-nav__link">
    <span class="md-ellipsis">
      test_records_serialization_and_deserialization
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.tests.test_records.test_transaction_dataclass" class="md-nav__link">
    <span class="md-ellipsis">
      test_transaction_dataclass
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperfteststest_request_latency_metric" class="md-nav__link">
    <span class="md-ellipsis">
      aiperf.tests.test_request_latency_metric
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.tests.test_request_latency_metric" class="md-nav__link">
    <span class="md-ellipsis">
      test_request_latency_metric
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperfteststest_tokenizer" class="md-nav__link">
    <span class="md-ellipsis">
      aiperf.tests.test_tokenizer
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.tests.test_tokenizer" class="md-nav__link">
    <span class="md-ellipsis">
      test_tokenizer
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperfteststest_ttft_metric" class="md-nav__link">
    <span class="md-ellipsis">
      aiperf.tests.test_ttft_metric
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.tests.test_ttft_metric" class="md-nav__link">
    <span class="md-ellipsis">
      test_ttft_metric
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperfteststest_ttst_metric" class="md-nav__link">
    <span class="md-ellipsis">
      aiperf.tests.test_ttst_metric
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.tests.test_ttst_metric" class="md-nav__link">
    <span class="md-ellipsis">
      test_ttst_metric
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperftestsutilsasync_test_utils" class="md-nav__link">
    <span class="md-ellipsis">
      aiperf.tests.utils.async_test_utils
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.tests.utils.async_test_utils" class="md-nav__link">
    <span class="md-ellipsis">
      async_test_utils
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.tests.utils.async_test_utils.async_fixture" class="md-nav__link">
    <span class="md-ellipsis">
      async_fixture
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.tests.utils.async_test_utils.async_noop" class="md-nav__link">
    <span class="md-ellipsis">
      async_noop
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperftestsutilsmetric_test_utils" class="md-nav__link">
    <span class="md-ellipsis">
      aiperf.tests.utils.metric_test_utils
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.tests.utils.metric_test_utils" class="md-nav__link">
    <span class="md-ellipsis">
      metric_test_utils
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#aiperfcli" class="md-nav__link">
    <span class="md-ellipsis">
      aiperf.cli
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.cli" class="md-nav__link">
    <span class="md-ellipsis">
      cli
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.cli.main" class="md-nav__link">
    <span class="md-ellipsis">
      main
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperfcommonbootstrap" class="md-nav__link">
    <span class="md-ellipsis">
      aiperf.common.bootstrap
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.bootstrap" class="md-nav__link">
    <span class="md-ellipsis">
      bootstrap
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.bootstrap.bootstrap_and_run_service" class="md-nav__link">
    <span class="md-ellipsis">
      bootstrap_and_run_service
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperfcommoncommsbase" class="md-nav__link">
    <span class="md-ellipsis">
      aiperf.common.comms.base
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.comms.base" class="md-nav__link">
    <span class="md-ellipsis">
      base
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.comms.base.BaseCommunication" class="md-nav__link">
    <span class="md-ellipsis">
      BaseCommunication
    </span>
  </a>
  
    <nav class="md-nav" aria-label="BaseCommunication">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#aiperf.common.comms.base.BaseCommunication.is_initialized" class="md-nav__link">
    <span class="md-ellipsis">
      is_initialized
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.common.comms.base.BaseCommunication.is_shutdown" class="md-nav__link">
    <span class="md-ellipsis">
      is_shutdown
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.common.comms.base.BaseCommunication.create_clients" class="md-nav__link">
    <span class="md-ellipsis">
      create_clients
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.common.comms.base.BaseCommunication.initialize" class="md-nav__link">
    <span class="md-ellipsis">
      initialize
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.common.comms.base.BaseCommunication.publish" class="md-nav__link">
    <span class="md-ellipsis">
      publish
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.common.comms.base.BaseCommunication.push" class="md-nav__link">
    <span class="md-ellipsis">
      push
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.common.comms.base.BaseCommunication.register_pull_callback" class="md-nav__link">
    <span class="md-ellipsis">
      register_pull_callback
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.common.comms.base.BaseCommunication.request" class="md-nav__link">
    <span class="md-ellipsis">
      request
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.common.comms.base.BaseCommunication.shutdown" class="md-nav__link">
    <span class="md-ellipsis">
      shutdown
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.common.comms.base.BaseCommunication.subscribe" class="md-nav__link">
    <span class="md-ellipsis">
      subscribe
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperfcommoncommsclient_enums" class="md-nav__link">
    <span class="md-ellipsis">
      aiperf.common.comms.client_enums
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.comms.client_enums" class="md-nav__link">
    <span class="md-ellipsis">
      client_enums
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.comms.client_enums.ClientType" class="md-nav__link">
    <span class="md-ellipsis">
      ClientType
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.comms.client_enums.PubClientType" class="md-nav__link">
    <span class="md-ellipsis">
      PubClientType
    </span>
  </a>
  
    <nav class="md-nav" aria-label="PubClientType">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#aiperf.common.comms.client_enums.PubClientType.from_topic" class="md-nav__link">
    <span class="md-ellipsis">
      from_topic
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.comms.client_enums.PullClientType" class="md-nav__link">
    <span class="md-ellipsis">
      PullClientType
    </span>
  </a>
  
    <nav class="md-nav" aria-label="PullClientType">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#aiperf.common.comms.client_enums.PullClientType.from_message_type" class="md-nav__link">
    <span class="md-ellipsis">
      from_message_type
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.comms.client_enums.PushClientType" class="md-nav__link">
    <span class="md-ellipsis">
      PushClientType
    </span>
  </a>
  
    <nav class="md-nav" aria-label="PushClientType">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#aiperf.common.comms.client_enums.PushClientType.from_topic" class="md-nav__link">
    <span class="md-ellipsis">
      from_topic
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.comms.client_enums.RepClientType" class="md-nav__link">
    <span class="md-ellipsis">
      RepClientType
    </span>
  </a>
  
    <nav class="md-nav" aria-label="RepClientType">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#aiperf.common.comms.client_enums.RepClientType.from_topic" class="md-nav__link">
    <span class="md-ellipsis">
      from_topic
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.comms.client_enums.ReqClientType" class="md-nav__link">
    <span class="md-ellipsis">
      ReqClientType
    </span>
  </a>
  
    <nav class="md-nav" aria-label="ReqClientType">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#aiperf.common.comms.client_enums.ReqClientType.from_topic" class="md-nav__link">
    <span class="md-ellipsis">
      from_topic
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.comms.client_enums.SubClientType" class="md-nav__link">
    <span class="md-ellipsis">
      SubClientType
    </span>
  </a>
  
    <nav class="md-nav" aria-label="SubClientType">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#aiperf.common.comms.client_enums.SubClientType.from_topic" class="md-nav__link">
    <span class="md-ellipsis">
      from_topic
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperfcommoncommszmqclientsbase" class="md-nav__link">
    <span class="md-ellipsis">
      aiperf.common.comms.zmq.clients.base
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.comms.zmq.clients.base" class="md-nav__link">
    <span class="md-ellipsis">
      base
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.comms.zmq.clients.base.BaseZMQClient" class="md-nav__link">
    <span class="md-ellipsis">
      BaseZMQClient
    </span>
  </a>
  
    <nav class="md-nav" aria-label="BaseZMQClient">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#aiperf.common.comms.zmq.clients.base.BaseZMQClient.is_initialized" class="md-nav__link">
    <span class="md-ellipsis">
      is_initialized
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.common.comms.zmq.clients.base.BaseZMQClient.is_shutdown" class="md-nav__link">
    <span class="md-ellipsis">
      is_shutdown
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.common.comms.zmq.clients.base.BaseZMQClient.socket" class="md-nav__link">
    <span class="md-ellipsis">
      socket
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.common.comms.zmq.clients.base.BaseZMQClient.socket_type_name" class="md-nav__link">
    <span class="md-ellipsis">
      socket_type_name
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.common.comms.zmq.clients.base.BaseZMQClient.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.common.comms.zmq.clients.base.BaseZMQClient.initialize" class="md-nav__link">
    <span class="md-ellipsis">
      initialize
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.common.comms.zmq.clients.base.BaseZMQClient.shutdown" class="md-nav__link">
    <span class="md-ellipsis">
      shutdown
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperfcommoncommszmqclientspub" class="md-nav__link">
    <span class="md-ellipsis">
      aiperf.common.comms.zmq.clients.pub
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.comms.zmq.clients.pub" class="md-nav__link">
    <span class="md-ellipsis">
      pub
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.comms.zmq.clients.pub.ZMQPubClient" class="md-nav__link">
    <span class="md-ellipsis">
      ZMQPubClient
    </span>
  </a>
  
    <nav class="md-nav" aria-label="ZMQPubClient">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#aiperf.common.comms.zmq.clients.pub.ZMQPubClient.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.common.comms.zmq.clients.pub.ZMQPubClient.publish" class="md-nav__link">
    <span class="md-ellipsis">
      publish
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperfcommoncommszmqclientspull" class="md-nav__link">
    <span class="md-ellipsis">
      aiperf.common.comms.zmq.clients.pull
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.comms.zmq.clients.pull" class="md-nav__link">
    <span class="md-ellipsis">
      pull
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.comms.zmq.clients.pull.ZMQPullClient" class="md-nav__link">
    <span class="md-ellipsis">
      ZMQPullClient
    </span>
  </a>
  
    <nav class="md-nav" aria-label="ZMQPullClient">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#aiperf.common.comms.zmq.clients.pull.ZMQPullClient.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.common.comms.zmq.clients.pull.ZMQPullClient.register_pull_callback" class="md-nav__link">
    <span class="md-ellipsis">
      register_pull_callback
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperfcommoncommszmqclientspush" class="md-nav__link">
    <span class="md-ellipsis">
      aiperf.common.comms.zmq.clients.push
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.comms.zmq.clients.push" class="md-nav__link">
    <span class="md-ellipsis">
      push
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.comms.zmq.clients.push.ZMQPushClient" class="md-nav__link">
    <span class="md-ellipsis">
      ZMQPushClient
    </span>
  </a>
  
    <nav class="md-nav" aria-label="ZMQPushClient">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#aiperf.common.comms.zmq.clients.push.ZMQPushClient.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.common.comms.zmq.clients.push.ZMQPushClient.push" class="md-nav__link">
    <span class="md-ellipsis">
      push
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperfcommoncommszmqclientsrep" class="md-nav__link">
    <span class="md-ellipsis">
      aiperf.common.comms.zmq.clients.rep
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.comms.zmq.clients.rep" class="md-nav__link">
    <span class="md-ellipsis">
      rep
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.comms.zmq.clients.rep.ZMQRepClient" class="md-nav__link">
    <span class="md-ellipsis">
      ZMQRepClient
    </span>
  </a>
  
    <nav class="md-nav" aria-label="ZMQRepClient">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#aiperf.common.comms.zmq.clients.rep.ZMQRepClient.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.common.comms.zmq.clients.rep.ZMQRepClient.respond" class="md-nav__link">
    <span class="md-ellipsis">
      respond
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.common.comms.zmq.clients.rep.ZMQRepClient.wait_for_request" class="md-nav__link">
    <span class="md-ellipsis">
      wait_for_request
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperfcommoncommszmqclientsreq" class="md-nav__link">
    <span class="md-ellipsis">
      aiperf.common.comms.zmq.clients.req
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.comms.zmq.clients.req" class="md-nav__link">
    <span class="md-ellipsis">
      req
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.comms.zmq.clients.req.ZMQReqClient" class="md-nav__link">
    <span class="md-ellipsis">
      ZMQReqClient
    </span>
  </a>
  
    <nav class="md-nav" aria-label="ZMQReqClient">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#aiperf.common.comms.zmq.clients.req.ZMQReqClient.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.common.comms.zmq.clients.req.ZMQReqClient.request" class="md-nav__link">
    <span class="md-ellipsis">
      request
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperfcommoncommszmqclientssub" class="md-nav__link">
    <span class="md-ellipsis">
      aiperf.common.comms.zmq.clients.sub
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.comms.zmq.clients.sub" class="md-nav__link">
    <span class="md-ellipsis">
      sub
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.comms.zmq.clients.sub.ZMQSubClient" class="md-nav__link">
    <span class="md-ellipsis">
      ZMQSubClient
    </span>
  </a>
  
    <nav class="md-nav" aria-label="ZMQSubClient">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#aiperf.common.comms.zmq.clients.sub.ZMQSubClient.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.common.comms.zmq.clients.sub.ZMQSubClient.subscribe" class="md-nav__link">
    <span class="md-ellipsis">
      subscribe
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperfcommoncommszmqzmq_comms" class="md-nav__link">
    <span class="md-ellipsis">
      aiperf.common.comms.zmq.zmq_comms
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.comms.zmq.zmq_comms" class="md-nav__link">
    <span class="md-ellipsis">
      zmq_comms
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.comms.zmq.zmq_comms.ZMQCommunication" class="md-nav__link">
    <span class="md-ellipsis">
      ZMQCommunication
    </span>
  </a>
  
    <nav class="md-nav" aria-label="ZMQCommunication">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#aiperf.common.comms.zmq.zmq_comms.ZMQCommunication.context" class="md-nav__link">
    <span class="md-ellipsis">
      context
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.common.comms.zmq.zmq_comms.ZMQCommunication.is_initialized" class="md-nav__link">
    <span class="md-ellipsis">
      is_initialized
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.common.comms.zmq.zmq_comms.ZMQCommunication.is_shutdown" class="md-nav__link">
    <span class="md-ellipsis">
      is_shutdown
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.common.comms.zmq.zmq_comms.ZMQCommunication.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.common.comms.zmq.zmq_comms.ZMQCommunication.create_clients" class="md-nav__link">
    <span class="md-ellipsis">
      create_clients
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.common.comms.zmq.zmq_comms.ZMQCommunication.initialize" class="md-nav__link">
    <span class="md-ellipsis">
      initialize
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.common.comms.zmq.zmq_comms.ZMQCommunication.publish" class="md-nav__link">
    <span class="md-ellipsis">
      publish
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.common.comms.zmq.zmq_comms.ZMQCommunication.push" class="md-nav__link">
    <span class="md-ellipsis">
      push
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.common.comms.zmq.zmq_comms.ZMQCommunication.register_pull_callback" class="md-nav__link">
    <span class="md-ellipsis">
      register_pull_callback
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.common.comms.zmq.zmq_comms.ZMQCommunication.request" class="md-nav__link">
    <span class="md-ellipsis">
      request
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.common.comms.zmq.zmq_comms.ZMQCommunication.respond" class="md-nav__link">
    <span class="md-ellipsis">
      respond
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.common.comms.zmq.zmq_comms.ZMQCommunication.shutdown" class="md-nav__link">
    <span class="md-ellipsis">
      shutdown
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.common.comms.zmq.zmq_comms.ZMQCommunication.subscribe" class="md-nav__link">
    <span class="md-ellipsis">
      subscribe
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperfcommonconfigbase_config" class="md-nav__link">
    <span class="md-ellipsis">
      aiperf.common.config.base_config
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.config.base_config" class="md-nav__link">
    <span class="md-ellipsis">
      base_config
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.config.base_config.BaseConfig" class="md-nav__link">
    <span class="md-ellipsis">
      BaseConfig
    </span>
  </a>
  
    <nav class="md-nav" aria-label="BaseConfig">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#aiperf.common.config.base_config.BaseConfig.serialize_to_yaml" class="md-nav__link">
    <span class="md-ellipsis">
      serialize_to_yaml
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperfcommonconfigconfig_defaults" class="md-nav__link">
    <span class="md-ellipsis">
      aiperf.common.config.config_defaults
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.config.config_defaults" class="md-nav__link">
    <span class="md-ellipsis">
      config_defaults
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperfcommonconfigconfig_validators" class="md-nav__link">
    <span class="md-ellipsis">
      aiperf.common.config.config_validators
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.config.config_validators" class="md-nav__link">
    <span class="md-ellipsis">
      config_validators
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.config.config_validators.parse_file" class="md-nav__link">
    <span class="md-ellipsis">
      parse_file
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.config.config_validators.parse_goodput" class="md-nav__link">
    <span class="md-ellipsis">
      parse_goodput
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.config.config_validators.parse_str_or_list" class="md-nav__link">
    <span class="md-ellipsis">
      parse_str_or_list
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.config.config_validators.parse_str_or_list_of_positive_values" class="md-nav__link">
    <span class="md-ellipsis">
      parse_str_or_list_of_positive_values
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperfcommonconfigendpointendpoint_config" class="md-nav__link">
    <span class="md-ellipsis">
      aiperf.common.config.endpoint.endpoint_config
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.config.endpoint.endpoint_config" class="md-nav__link">
    <span class="md-ellipsis">
      endpoint_config
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.config.endpoint.endpoint_config.EndPointConfig" class="md-nav__link">
    <span class="md-ellipsis">
      EndPointConfig
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperfcommonconfiginputaudio_config" class="md-nav__link">
    <span class="md-ellipsis">
      aiperf.common.config.input.audio_config
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.config.input.audio_config" class="md-nav__link">
    <span class="md-ellipsis">
      audio_config
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.config.input.audio_config.AudioConfig" class="md-nav__link">
    <span class="md-ellipsis">
      AudioConfig
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.config.input.audio_config.AudioLengthConfig" class="md-nav__link">
    <span class="md-ellipsis">
      AudioLengthConfig
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperfcommonconfiginputimage_config" class="md-nav__link">
    <span class="md-ellipsis">
      aiperf.common.config.input.image_config
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.config.input.image_config" class="md-nav__link">
    <span class="md-ellipsis">
      image_config
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.config.input.image_config.ImageConfig" class="md-nav__link">
    <span class="md-ellipsis">
      ImageConfig
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.config.input.image_config.ImageHeightConfig" class="md-nav__link">
    <span class="md-ellipsis">
      ImageHeightConfig
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.config.input.image_config.ImageWidthConfig" class="md-nav__link">
    <span class="md-ellipsis">
      ImageWidthConfig
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperfcommonconfiginputinput_config" class="md-nav__link">
    <span class="md-ellipsis">
      aiperf.common.config.input.input_config
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.config.input.input_config" class="md-nav__link">
    <span class="md-ellipsis">
      input_config
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.config.input.input_config.InputConfig" class="md-nav__link">
    <span class="md-ellipsis">
      InputConfig
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperfcommonconfiginputprompt_config" class="md-nav__link">
    <span class="md-ellipsis">
      aiperf.common.config.input.prompt_config
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.config.input.prompt_config" class="md-nav__link">
    <span class="md-ellipsis">
      prompt_config
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.config.input.prompt_config.InputTokensConfig" class="md-nav__link">
    <span class="md-ellipsis">
      InputTokensConfig
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.config.input.prompt_config.OutputTokensConfig" class="md-nav__link">
    <span class="md-ellipsis">
      OutputTokensConfig
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.config.input.prompt_config.PrefixPromptConfig" class="md-nav__link">
    <span class="md-ellipsis">
      PrefixPromptConfig
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.config.input.prompt_config.PromptConfig" class="md-nav__link">
    <span class="md-ellipsis">
      PromptConfig
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperfcommonconfiginputsessions_config" class="md-nav__link">
    <span class="md-ellipsis">
      aiperf.common.config.input.sessions_config
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.config.input.sessions_config" class="md-nav__link">
    <span class="md-ellipsis">
      sessions_config
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.config.input.sessions_config.SessionTurnDelayConfig" class="md-nav__link">
    <span class="md-ellipsis">
      SessionTurnDelayConfig
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.config.input.sessions_config.SessionTurnsConfig" class="md-nav__link">
    <span class="md-ellipsis">
      SessionTurnsConfig
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.config.input.sessions_config.SessionsConfig" class="md-nav__link">
    <span class="md-ellipsis">
      SessionsConfig
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperfcommonconfigloader" class="md-nav__link">
    <span class="md-ellipsis">
      aiperf.common.config.loader
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.config.loader" class="md-nav__link">
    <span class="md-ellipsis">
      loader
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.config.loader.load_service_config" class="md-nav__link">
    <span class="md-ellipsis">
      load_service_config
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperfcommonconfigoutputoutput_config" class="md-nav__link">
    <span class="md-ellipsis">
      aiperf.common.config.output.output_config
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.config.output.output_config" class="md-nav__link">
    <span class="md-ellipsis">
      output_config
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.config.output.output_config.OutputConfig" class="md-nav__link">
    <span class="md-ellipsis">
      OutputConfig
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperfcommonconfigservice_config" class="md-nav__link">
    <span class="md-ellipsis">
      aiperf.common.config.service_config
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.config.service_config" class="md-nav__link">
    <span class="md-ellipsis">
      service_config
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.config.service_config.ServiceConfig" class="md-nav__link">
    <span class="md-ellipsis">
      ServiceConfig
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperfcommonconfigtokenizertokenizer_config" class="md-nav__link">
    <span class="md-ellipsis">
      aiperf.common.config.tokenizer.tokenizer_config
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.config.tokenizer.tokenizer_config" class="md-nav__link">
    <span class="md-ellipsis">
      tokenizer_config
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.config.tokenizer.tokenizer_config.TokenizerConfig" class="md-nav__link">
    <span class="md-ellipsis">
      TokenizerConfig
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperfcommonconfiguser_config" class="md-nav__link">
    <span class="md-ellipsis">
      aiperf.common.config.user_config
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.config.user_config" class="md-nav__link">
    <span class="md-ellipsis">
      user_config
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.config.user_config.UserConfig" class="md-nav__link">
    <span class="md-ellipsis">
      UserConfig
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperfcommonconfigzmq_config" class="md-nav__link">
    <span class="md-ellipsis">
      aiperf.common.config.zmq_config
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.config.zmq_config" class="md-nav__link">
    <span class="md-ellipsis">
      zmq_config
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.config.zmq_config.BaseZMQCommunicationConfig" class="md-nav__link">
    <span class="md-ellipsis">
      BaseZMQCommunicationConfig
    </span>
  </a>
  
    <nav class="md-nav" aria-label="BaseZMQCommunicationConfig">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#aiperf.common.config.zmq_config.BaseZMQCommunicationConfig.component_pub_sub_address" class="md-nav__link">
    <span class="md-ellipsis">
      component_pub_sub_address
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.common.config.zmq_config.BaseZMQCommunicationConfig.controller_pub_sub_address" class="md-nav__link">
    <span class="md-ellipsis">
      controller_pub_sub_address
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.common.config.zmq_config.BaseZMQCommunicationConfig.conversation_data_address" class="md-nav__link">
    <span class="md-ellipsis">
      conversation_data_address
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.common.config.zmq_config.BaseZMQCommunicationConfig.credit_drop_address" class="md-nav__link">
    <span class="md-ellipsis">
      credit_drop_address
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.common.config.zmq_config.BaseZMQCommunicationConfig.credit_return_address" class="md-nav__link">
    <span class="md-ellipsis">
      credit_return_address
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.common.config.zmq_config.BaseZMQCommunicationConfig.inference_push_pull_address" class="md-nav__link">
    <span class="md-ellipsis">
      inference_push_pull_address
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.common.config.zmq_config.BaseZMQCommunicationConfig.records_address" class="md-nav__link">
    <span class="md-ellipsis">
      records_address
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.config.zmq_config.ZMQIPCConfig" class="md-nav__link">
    <span class="md-ellipsis">
      ZMQIPCConfig
    </span>
  </a>
  
    <nav class="md-nav" aria-label="ZMQIPCConfig">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#aiperf.common.config.zmq_config.ZMQIPCConfig.component_pub_sub_address" class="md-nav__link">
    <span class="md-ellipsis">
      component_pub_sub_address
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.common.config.zmq_config.ZMQIPCConfig.controller_pub_sub_address" class="md-nav__link">
    <span class="md-ellipsis">
      controller_pub_sub_address
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.common.config.zmq_config.ZMQIPCConfig.conversation_data_address" class="md-nav__link">
    <span class="md-ellipsis">
      conversation_data_address
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.common.config.zmq_config.ZMQIPCConfig.credit_drop_address" class="md-nav__link">
    <span class="md-ellipsis">
      credit_drop_address
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.common.config.zmq_config.ZMQIPCConfig.credit_return_address" class="md-nav__link">
    <span class="md-ellipsis">
      credit_return_address
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.common.config.zmq_config.ZMQIPCConfig.inference_push_pull_address" class="md-nav__link">
    <span class="md-ellipsis">
      inference_push_pull_address
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.common.config.zmq_config.ZMQIPCConfig.records_address" class="md-nav__link">
    <span class="md-ellipsis">
      records_address
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.config.zmq_config.ZMQInprocConfig" class="md-nav__link">
    <span class="md-ellipsis">
      ZMQInprocConfig
    </span>
  </a>
  
    <nav class="md-nav" aria-label="ZMQInprocConfig">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#aiperf.common.config.zmq_config.ZMQInprocConfig.component_pub_sub_address" class="md-nav__link">
    <span class="md-ellipsis">
      component_pub_sub_address
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.common.config.zmq_config.ZMQInprocConfig.controller_pub_sub_address" class="md-nav__link">
    <span class="md-ellipsis">
      controller_pub_sub_address
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.config.zmq_config.ZMQTCPTransportConfig" class="md-nav__link">
    <span class="md-ellipsis">
      ZMQTCPTransportConfig
    </span>
  </a>
  
    <nav class="md-nav" aria-label="ZMQTCPTransportConfig">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#aiperf.common.config.zmq_config.ZMQTCPTransportConfig.component_pub_sub_address" class="md-nav__link">
    <span class="md-ellipsis">
      component_pub_sub_address
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.common.config.zmq_config.ZMQTCPTransportConfig.controller_pub_sub_address" class="md-nav__link">
    <span class="md-ellipsis">
      controller_pub_sub_address
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.common.config.zmq_config.ZMQTCPTransportConfig.conversation_data_address" class="md-nav__link">
    <span class="md-ellipsis">
      conversation_data_address
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.common.config.zmq_config.ZMQTCPTransportConfig.credit_drop_address" class="md-nav__link">
    <span class="md-ellipsis">
      credit_drop_address
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.common.config.zmq_config.ZMQTCPTransportConfig.credit_return_address" class="md-nav__link">
    <span class="md-ellipsis">
      credit_return_address
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.common.config.zmq_config.ZMQTCPTransportConfig.inference_push_pull_address" class="md-nav__link">
    <span class="md-ellipsis">
      inference_push_pull_address
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.common.config.zmq_config.ZMQTCPTransportConfig.records_address" class="md-nav__link">
    <span class="md-ellipsis">
      records_address
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperfcommonconstants" class="md-nav__link">
    <span class="md-ellipsis">
      aiperf.common.constants
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.constants" class="md-nav__link">
    <span class="md-ellipsis">
      constants
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperfcommonenums" class="md-nav__link">
    <span class="md-ellipsis">
      aiperf.common.enums
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.enums" class="md-nav__link">
    <span class="md-ellipsis">
      enums
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.enums.CaseInsensitiveStrEnum" class="md-nav__link">
    <span class="md-ellipsis">
      CaseInsensitiveStrEnum
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.enums.CommandType" class="md-nav__link">
    <span class="md-ellipsis">
      CommandType
    </span>
  </a>
  
    <nav class="md-nav" aria-label="CommandType">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#aiperf.common.enums.CommandType.PROCESS_RECORDS" class="md-nav__link">
    <span class="md-ellipsis">
      PROCESS_RECORDS
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.common.enums.CommandType.PROFILE_CANCEL" class="md-nav__link">
    <span class="md-ellipsis">
      PROFILE_CANCEL
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.common.enums.CommandType.PROFILE_CONFIGURE" class="md-nav__link">
    <span class="md-ellipsis">
      PROFILE_CONFIGURE
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.common.enums.CommandType.PROFILE_START" class="md-nav__link">
    <span class="md-ellipsis">
      PROFILE_START
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.common.enums.CommandType.PROFILE_STOP" class="md-nav__link">
    <span class="md-ellipsis">
      PROFILE_STOP
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.common.enums.CommandType.SHUTDOWN" class="md-nav__link">
    <span class="md-ellipsis">
      SHUTDOWN
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.enums.CommunicationBackend" class="md-nav__link">
    <span class="md-ellipsis">
      CommunicationBackend
    </span>
  </a>
  
    <nav class="md-nav" aria-label="CommunicationBackend">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#aiperf.common.enums.CommunicationBackend.ZMQ_INPROC" class="md-nav__link">
    <span class="md-ellipsis">
      ZMQ_INPROC
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.common.enums.CommunicationBackend.ZMQ_IPC" class="md-nav__link">
    <span class="md-ellipsis">
      ZMQ_IPC
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.common.enums.CommunicationBackend.ZMQ_TCP" class="md-nav__link">
    <span class="md-ellipsis">
      ZMQ_TCP
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.enums.InferenceClientType" class="md-nav__link">
    <span class="md-ellipsis">
      InferenceClientType
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.enums.MessageType" class="md-nav__link">
    <span class="md-ellipsis">
      MessageType
    </span>
  </a>
  
    <nav class="md-nav" aria-label="MessageType">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#aiperf.common.enums.MessageType.COMMAND" class="md-nav__link">
    <span class="md-ellipsis">
      COMMAND
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.common.enums.MessageType.CONVERSATION_REQUEST" class="md-nav__link">
    <span class="md-ellipsis">
      CONVERSATION_REQUEST
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.common.enums.MessageType.CONVERSATION_RESPONSE" class="md-nav__link">
    <span class="md-ellipsis">
      CONVERSATION_RESPONSE
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.common.enums.MessageType.CREDITS_COMPLETE" class="md-nav__link">
    <span class="md-ellipsis">
      CREDITS_COMPLETE
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.common.enums.MessageType.CREDIT_DROP" class="md-nav__link">
    <span class="md-ellipsis">
      CREDIT_DROP
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.common.enums.MessageType.CREDIT_RETURN" class="md-nav__link">
    <span class="md-ellipsis">
      CREDIT_RETURN
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.common.enums.MessageType.ERROR" class="md-nav__link">
    <span class="md-ellipsis">
      ERROR
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.common.enums.MessageType.HEARTBEAT" class="md-nav__link">
    <span class="md-ellipsis">
      HEARTBEAT
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.common.enums.MessageType.INFERENCE_RESULTS" class="md-nav__link">
    <span class="md-ellipsis">
      INFERENCE_RESULTS
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.common.enums.MessageType.PROFILE_ERROR" class="md-nav__link">
    <span class="md-ellipsis">
      PROFILE_ERROR
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.common.enums.MessageType.PROFILE_PROGRESS" class="md-nav__link">
    <span class="md-ellipsis">
      PROFILE_PROGRESS
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.common.enums.MessageType.PROFILE_RESULTS" class="md-nav__link">
    <span class="md-ellipsis">
      PROFILE_RESULTS
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.common.enums.MessageType.PROFILE_STATS" class="md-nav__link">
    <span class="md-ellipsis">
      PROFILE_STATS
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.common.enums.MessageType.REGISTRATION" class="md-nav__link">
    <span class="md-ellipsis">
      REGISTRATION
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.common.enums.MessageType.RESPONSE" class="md-nav__link">
    <span class="md-ellipsis">
      RESPONSE
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.common.enums.MessageType.SERVICE_ERROR" class="md-nav__link">
    <span class="md-ellipsis">
      SERVICE_ERROR
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.common.enums.MessageType.STATUS" class="md-nav__link">
    <span class="md-ellipsis">
      STATUS
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.common.enums.MessageType.SWEEP_BEGIN" class="md-nav__link">
    <span class="md-ellipsis">
      SWEEP_BEGIN
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.common.enums.MessageType.SWEEP_CONFIGURE" class="md-nav__link">
    <span class="md-ellipsis">
      SWEEP_CONFIGURE
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.common.enums.MessageType.SWEEP_END" class="md-nav__link">
    <span class="md-ellipsis">
      SWEEP_END
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.common.enums.MessageType.SWEEP_ERROR" class="md-nav__link">
    <span class="md-ellipsis">
      SWEEP_ERROR
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.common.enums.MessageType.SWEEP_PROGRESS" class="md-nav__link">
    <span class="md-ellipsis">
      SWEEP_PROGRESS
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.common.enums.MessageType.SWEEP_RESULTS" class="md-nav__link">
    <span class="md-ellipsis">
      SWEEP_RESULTS
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.common.enums.MessageType.UNKNOWN" class="md-nav__link">
    <span class="md-ellipsis">
      UNKNOWN
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.enums.MetricTimeType" class="md-nav__link">
    <span class="md-ellipsis">
      MetricTimeType
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.enums.Modality" class="md-nav__link">
    <span class="md-ellipsis">
      Modality
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.enums.ModelSelectionStrategy" class="md-nav__link">
    <span class="md-ellipsis">
      ModelSelectionStrategy
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.enums.PromptSource" class="md-nav__link">
    <span class="md-ellipsis">
      PromptSource
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.enums.RequestPayloadType" class="md-nav__link">
    <span class="md-ellipsis">
      RequestPayloadType
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.enums.ResponsePayloadType" class="md-nav__link">
    <span class="md-ellipsis">
      ResponsePayloadType
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.enums.ServiceRegistrationStatus" class="md-nav__link">
    <span class="md-ellipsis">
      ServiceRegistrationStatus
    </span>
  </a>
  
    <nav class="md-nav" aria-label="ServiceRegistrationStatus">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#aiperf.common.enums.ServiceRegistrationStatus.ERROR" class="md-nav__link">
    <span class="md-ellipsis">
      ERROR
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.common.enums.ServiceRegistrationStatus.REGISTERED" class="md-nav__link">
    <span class="md-ellipsis">
      REGISTERED
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.common.enums.ServiceRegistrationStatus.TIMEOUT" class="md-nav__link">
    <span class="md-ellipsis">
      TIMEOUT
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.common.enums.ServiceRegistrationStatus.UNREGISTERED" class="md-nav__link">
    <span class="md-ellipsis">
      UNREGISTERED
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.common.enums.ServiceRegistrationStatus.WAITING" class="md-nav__link">
    <span class="md-ellipsis">
      WAITING
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.enums.ServiceRunType" class="md-nav__link">
    <span class="md-ellipsis">
      ServiceRunType
    </span>
  </a>
  
    <nav class="md-nav" aria-label="ServiceRunType">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#aiperf.common.enums.ServiceRunType.KUBERNETES" class="md-nav__link">
    <span class="md-ellipsis">
      KUBERNETES
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.common.enums.ServiceRunType.MULTIPROCESSING" class="md-nav__link">
    <span class="md-ellipsis">
      MULTIPROCESSING
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.enums.ServiceState" class="md-nav__link">
    <span class="md-ellipsis">
      ServiceState
    </span>
  </a>
  
    <nav class="md-nav" aria-label="ServiceState">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#aiperf.common.enums.ServiceState.ERROR" class="md-nav__link">
    <span class="md-ellipsis">
      ERROR
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.common.enums.ServiceState.INITIALIZING" class="md-nav__link">
    <span class="md-ellipsis">
      INITIALIZING
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.common.enums.ServiceState.READY" class="md-nav__link">
    <span class="md-ellipsis">
      READY
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.common.enums.ServiceState.STARTING" class="md-nav__link">
    <span class="md-ellipsis">
      STARTING
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.common.enums.ServiceState.STOPPING" class="md-nav__link">
    <span class="md-ellipsis">
      STOPPING
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.enums.ServiceType" class="md-nav__link">
    <span class="md-ellipsis">
      ServiceType
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.enums.Topic" class="md-nav__link">
    <span class="md-ellipsis">
      Topic
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperfcommonexceptions" class="md-nav__link">
    <span class="md-ellipsis">
      aiperf.common.exceptions
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.exceptions" class="md-nav__link">
    <span class="md-ellipsis">
      exceptions
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.exceptions.AIPerfError" class="md-nav__link">
    <span class="md-ellipsis">
      AIPerfError
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.exceptions.AIPerfMultiError" class="md-nav__link">
    <span class="md-ellipsis">
      AIPerfMultiError
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.exceptions.CommunicationClientCreationError" class="md-nav__link">
    <span class="md-ellipsis">
      CommunicationClientCreationError
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.exceptions.CommunicationClientNotFoundError" class="md-nav__link">
    <span class="md-ellipsis">
      CommunicationClientNotFoundError
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.exceptions.CommunicationCreateError" class="md-nav__link">
    <span class="md-ellipsis">
      CommunicationCreateError
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.exceptions.CommunicationError" class="md-nav__link">
    <span class="md-ellipsis">
      CommunicationError
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.exceptions.CommunicationInitializationError" class="md-nav__link">
    <span class="md-ellipsis">
      CommunicationInitializationError
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.exceptions.CommunicationNotInitializedError" class="md-nav__link">
    <span class="md-ellipsis">
      CommunicationNotInitializedError
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.exceptions.CommunicationPublishError" class="md-nav__link">
    <span class="md-ellipsis">
      CommunicationPublishError
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.exceptions.CommunicationPullError" class="md-nav__link">
    <span class="md-ellipsis">
      CommunicationPullError
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.exceptions.CommunicationPushError" class="md-nav__link">
    <span class="md-ellipsis">
      CommunicationPushError
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.exceptions.CommunicationRequestError" class="md-nav__link">
    <span class="md-ellipsis">
      CommunicationRequestError
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.exceptions.CommunicationResponseError" class="md-nav__link">
    <span class="md-ellipsis">
      CommunicationResponseError
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.exceptions.CommunicationShutdownError" class="md-nav__link">
    <span class="md-ellipsis">
      CommunicationShutdownError
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.exceptions.CommunicationSubscribeError" class="md-nav__link">
    <span class="md-ellipsis">
      CommunicationSubscribeError
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.exceptions.ConfigError" class="md-nav__link">
    <span class="md-ellipsis">
      ConfigError
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.exceptions.ConfigLoadError" class="md-nav__link">
    <span class="md-ellipsis">
      ConfigLoadError
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.exceptions.ConfigParseError" class="md-nav__link">
    <span class="md-ellipsis">
      ConfigParseError
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.exceptions.ConfigValidationError" class="md-nav__link">
    <span class="md-ellipsis">
      ConfigValidationError
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.exceptions.FactoryCreationError" class="md-nav__link">
    <span class="md-ellipsis">
      FactoryCreationError
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.exceptions.GeneratorConfigurationError" class="md-nav__link">
    <span class="md-ellipsis">
      GeneratorConfigurationError
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.exceptions.GeneratorError" class="md-nav__link">
    <span class="md-ellipsis">
      GeneratorError
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.exceptions.GeneratorInitializationError" class="md-nav__link">
    <span class="md-ellipsis">
      GeneratorInitializationError
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.exceptions.MetricTypeError" class="md-nav__link">
    <span class="md-ellipsis">
      MetricTypeError
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.exceptions.ServiceCleanupError" class="md-nav__link">
    <span class="md-ellipsis">
      ServiceCleanupError
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.exceptions.ServiceConfigureError" class="md-nav__link">
    <span class="md-ellipsis">
      ServiceConfigureError
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.exceptions.ServiceError" class="md-nav__link">
    <span class="md-ellipsis">
      ServiceError
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.exceptions.ServiceHeartbeatError" class="md-nav__link">
    <span class="md-ellipsis">
      ServiceHeartbeatError
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.exceptions.ServiceInitializationError" class="md-nav__link">
    <span class="md-ellipsis">
      ServiceInitializationError
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.exceptions.ServiceMessageProcessingError" class="md-nav__link">
    <span class="md-ellipsis">
      ServiceMessageProcessingError
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.exceptions.ServiceRegistrationError" class="md-nav__link">
    <span class="md-ellipsis">
      ServiceRegistrationError
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.exceptions.ServiceRunError" class="md-nav__link">
    <span class="md-ellipsis">
      ServiceRunError
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.exceptions.ServiceStartError" class="md-nav__link">
    <span class="md-ellipsis">
      ServiceStartError
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.exceptions.ServiceStatusError" class="md-nav__link">
    <span class="md-ellipsis">
      ServiceStatusError
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.exceptions.ServiceStopError" class="md-nav__link">
    <span class="md-ellipsis">
      ServiceStopError
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.exceptions.TokenizerError" class="md-nav__link">
    <span class="md-ellipsis">
      TokenizerError
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.exceptions.TokenizerInitializationError" class="md-nav__link">
    <span class="md-ellipsis">
      TokenizerInitializationError
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.exceptions.UnsupportedHookError" class="md-nav__link">
    <span class="md-ellipsis">
      UnsupportedHookError
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperfcommonfactories" class="md-nav__link">
    <span class="md-ellipsis">
      aiperf.common.factories
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.factories" class="md-nav__link">
    <span class="md-ellipsis">
      factories
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.factories.CommunicationFactory" class="md-nav__link">
    <span class="md-ellipsis">
      CommunicationFactory
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.factories.DataExporterFactory" class="md-nav__link">
    <span class="md-ellipsis">
      DataExporterFactory
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.factories.FactoryMixin" class="md-nav__link">
    <span class="md-ellipsis">
      FactoryMixin
    </span>
  </a>
  
    <nav class="md-nav" aria-label="FactoryMixin">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#aiperf.common.factories.FactoryMixin.create_instance" class="md-nav__link">
    <span class="md-ellipsis">
      create_instance
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.common.factories.FactoryMixin.get_all_classes" class="md-nav__link">
    <span class="md-ellipsis">
      get_all_classes
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.common.factories.FactoryMixin.get_class_from_type" class="md-nav__link">
    <span class="md-ellipsis">
      get_class_from_type
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.common.factories.FactoryMixin.register" class="md-nav__link">
    <span class="md-ellipsis">
      register
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.factories.PostProcessorFactory" class="md-nav__link">
    <span class="md-ellipsis">
      PostProcessorFactory
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.factories.ServiceFactory" class="md-nav__link">
    <span class="md-ellipsis">
      ServiceFactory
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperfcommonhooks" class="md-nav__link">
    <span class="md-ellipsis">
      aiperf.common.hooks
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.hooks" class="md-nav__link">
    <span class="md-ellipsis">
      hooks
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.hooks.AIPERF_HOOK_TYPE" class="md-nav__link">
    <span class="md-ellipsis">
      AIPERF_HOOK_TYPE
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.hooks.HookType" class="md-nav__link">
    <span class="md-ellipsis">
      HookType
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.hooks.AIPerfHook" class="md-nav__link">
    <span class="md-ellipsis">
      AIPerfHook
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.hooks.AIPerfTaskMixin" class="md-nav__link">
    <span class="md-ellipsis">
      AIPerfTaskMixin
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.hooks.HookSystem" class="md-nav__link">
    <span class="md-ellipsis">
      HookSystem
    </span>
  </a>
  
    <nav class="md-nav" aria-label="HookSystem">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#aiperf.common.hooks.HookSystem.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.common.hooks.HookSystem.get_hooks" class="md-nav__link">
    <span class="md-ellipsis">
      get_hooks
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.common.hooks.HookSystem.register_hook" class="md-nav__link">
    <span class="md-ellipsis">
      register_hook
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.common.hooks.HookSystem.run_hooks" class="md-nav__link">
    <span class="md-ellipsis">
      run_hooks
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.common.hooks.HookSystem.run_hooks_async" class="md-nav__link">
    <span class="md-ellipsis">
      run_hooks_async
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.hooks.HooksMixin" class="md-nav__link">
    <span class="md-ellipsis">
      HooksMixin
    </span>
  </a>
  
    <nav class="md-nav" aria-label="HooksMixin">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#aiperf.common.hooks.HooksMixin.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.common.hooks.HooksMixin.get_hooks" class="md-nav__link">
    <span class="md-ellipsis">
      get_hooks
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.common.hooks.HooksMixin.register_hook" class="md-nav__link">
    <span class="md-ellipsis">
      register_hook
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.common.hooks.HooksMixin.run_hooks" class="md-nav__link">
    <span class="md-ellipsis">
      run_hooks
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.common.hooks.HooksMixin.run_hooks_async" class="md-nav__link">
    <span class="md-ellipsis">
      run_hooks_async
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.hooks.aiperf_task" class="md-nav__link">
    <span class="md-ellipsis">
      aiperf_task
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.hooks.hook_decorator" class="md-nav__link">
    <span class="md-ellipsis">
      hook_decorator
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.hooks.on_cleanup" class="md-nav__link">
    <span class="md-ellipsis">
      on_cleanup
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.hooks.on_configure" class="md-nav__link">
    <span class="md-ellipsis">
      on_configure
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.hooks.on_init" class="md-nav__link">
    <span class="md-ellipsis">
      on_init
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.hooks.on_run" class="md-nav__link">
    <span class="md-ellipsis">
      on_run
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.hooks.on_set_state" class="md-nav__link">
    <span class="md-ellipsis">
      on_set_state
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.hooks.on_start" class="md-nav__link">
    <span class="md-ellipsis">
      on_start
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.hooks.on_stop" class="md-nav__link">
    <span class="md-ellipsis">
      on_stop
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.hooks.supports_hooks" class="md-nav__link">
    <span class="md-ellipsis">
      supports_hooks
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperfcommoninterfaces" class="md-nav__link">
    <span class="md-ellipsis">
      aiperf.common.interfaces
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.interfaces" class="md-nav__link">
    <span class="md-ellipsis">
      interfaces
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.interfaces.DataExporterProtocol" class="md-nav__link">
    <span class="md-ellipsis">
      DataExporterProtocol
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.interfaces.PostProcessorProtocol" class="md-nav__link">
    <span class="md-ellipsis">
      PostProcessorProtocol
    </span>
  </a>
  
    <nav class="md-nav" aria-label="PostProcessorProtocol">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#aiperf.common.interfaces.PostProcessorProtocol.process" class="md-nav__link">
    <span class="md-ellipsis">
      process
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperfcommonmessages" class="md-nav__link">
    <span class="md-ellipsis">
      aiperf.common.messages
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.messages" class="md-nav__link">
    <span class="md-ellipsis">
      messages
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.messages.BaseMessage" class="md-nav__link">
    <span class="md-ellipsis">
      BaseMessage
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.messages.BaseServiceErrorMessage" class="md-nav__link">
    <span class="md-ellipsis">
      BaseServiceErrorMessage
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.messages.BaseServiceMessage" class="md-nav__link">
    <span class="md-ellipsis">
      BaseServiceMessage
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.messages.BaseStatusMessage" class="md-nav__link">
    <span class="md-ellipsis">
      BaseStatusMessage
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.messages.CommandMessage" class="md-nav__link">
    <span class="md-ellipsis">
      CommandMessage
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.messages.ConversationRequestMessage" class="md-nav__link">
    <span class="md-ellipsis">
      ConversationRequestMessage
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.messages.ConversationResponseMessage" class="md-nav__link">
    <span class="md-ellipsis">
      ConversationResponseMessage
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.messages.CreditDropMessage" class="md-nav__link">
    <span class="md-ellipsis">
      CreditDropMessage
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.messages.CreditReturnMessage" class="md-nav__link">
    <span class="md-ellipsis">
      CreditReturnMessage
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.messages.CreditsCompleteMessage" class="md-nav__link">
    <span class="md-ellipsis">
      CreditsCompleteMessage
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.messages.ErrorMessage" class="md-nav__link">
    <span class="md-ellipsis">
      ErrorMessage
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.messages.HeartbeatMessage" class="md-nav__link">
    <span class="md-ellipsis">
      HeartbeatMessage
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.messages.InferenceResultsMessage" class="md-nav__link">
    <span class="md-ellipsis">
      InferenceResultsMessage
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.messages.Message" class="md-nav__link">
    <span class="md-ellipsis">
      Message
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Message">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#aiperf.common.messages.Message.from_json" class="md-nav__link">
    <span class="md-ellipsis">
      from_json
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.common.messages.Message.to_json" class="md-nav__link">
    <span class="md-ellipsis">
      to_json
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.messages.ProcessRecordsCommandData" class="md-nav__link">
    <span class="md-ellipsis">
      ProcessRecordsCommandData
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.messages.ProfileProgressMessage" class="md-nav__link">
    <span class="md-ellipsis">
      ProfileProgressMessage
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.messages.ProfileResultsMessage" class="md-nav__link">
    <span class="md-ellipsis">
      ProfileResultsMessage
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.messages.ProfileStatsMessage" class="md-nav__link">
    <span class="md-ellipsis">
      ProfileStatsMessage
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.messages.RegistrationMessage" class="md-nav__link">
    <span class="md-ellipsis">
      RegistrationMessage
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.messages.StatusMessage" class="md-nav__link">
    <span class="md-ellipsis">
      StatusMessage
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.messages.exclude_if_none" class="md-nav__link">
    <span class="md-ellipsis">
      exclude_if_none
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperfcommonmodels" class="md-nav__link">
    <span class="md-ellipsis">
      aiperf.common.models
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.models" class="md-nav__link">
    <span class="md-ellipsis">
      models
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.models.ServiceRunInfo" class="md-nav__link">
    <span class="md-ellipsis">
      ServiceRunInfo
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.models.ZMQCommunicationConfig" class="md-nav__link">
    <span class="md-ellipsis">
      ZMQCommunicationConfig
    </span>
  </a>
  
    <nav class="md-nav" aria-label="ZMQCommunicationConfig">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#aiperf.common.models.ZMQCommunicationConfig.component_pub_sub_address" class="md-nav__link">
    <span class="md-ellipsis">
      component_pub_sub_address
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.common.models.ZMQCommunicationConfig.controller_pub_sub_address" class="md-nav__link">
    <span class="md-ellipsis">
      controller_pub_sub_address
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.common.models.ZMQCommunicationConfig.conversation_data_address" class="md-nav__link">
    <span class="md-ellipsis">
      conversation_data_address
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.common.models.ZMQCommunicationConfig.credit_drop_address" class="md-nav__link">
    <span class="md-ellipsis">
      credit_drop_address
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.common.models.ZMQCommunicationConfig.credit_return_address" class="md-nav__link">
    <span class="md-ellipsis">
      credit_return_address
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.common.models.ZMQCommunicationConfig.inference_push_pull_address" class="md-nav__link">
    <span class="md-ellipsis">
      inference_push_pull_address
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.common.models.ZMQCommunicationConfig.records_address" class="md-nav__link">
    <span class="md-ellipsis">
      records_address
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.models.ZMQTCPTransportConfig" class="md-nav__link">
    <span class="md-ellipsis">
      ZMQTCPTransportConfig
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperfcommonrecord_models" class="md-nav__link">
    <span class="md-ellipsis">
      aiperf.common.record_models
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.record_models" class="md-nav__link">
    <span class="md-ellipsis">
      record_models
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.record_models.BaseClientConfig" class="md-nav__link">
    <span class="md-ellipsis">
      BaseClientConfig
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.record_models.ErrorDetails" class="md-nav__link">
    <span class="md-ellipsis">
      ErrorDetails
    </span>
  </a>
  
    <nav class="md-nav" aria-label="ErrorDetails">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#aiperf.common.record_models.ErrorDetails.__eq__" class="md-nav__link">
    <span class="md-ellipsis">
      __eq__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.common.record_models.ErrorDetails.__hash__" class="md-nav__link">
    <span class="md-ellipsis">
      __hash__
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.record_models.ErrorDetailsCount" class="md-nav__link">
    <span class="md-ellipsis">
      ErrorDetailsCount
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.record_models.GenericHTTPClientConfig" class="md-nav__link">
    <span class="md-ellipsis">
      GenericHTTPClientConfig
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.record_models.InferenceServerResponse" class="md-nav__link">
    <span class="md-ellipsis">
      InferenceServerResponse
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.record_models.Record" class="md-nav__link">
    <span class="md-ellipsis">
      Record
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.record_models.RequestRecord" class="md-nav__link">
    <span class="md-ellipsis">
      RequestRecord
    </span>
  </a>
  
    <nav class="md-nav" aria-label="RequestRecord">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#aiperf.common.record_models.RequestRecord.has_error" class="md-nav__link">
    <span class="md-ellipsis">
      has_error
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.common.record_models.RequestRecord.has_null_last_response" class="md-nav__link">
    <span class="md-ellipsis">
      has_null_last_response
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.common.record_models.RequestRecord.inter_token_latency_ns" class="md-nav__link">
    <span class="md-ellipsis">
      inter_token_latency_ns
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.common.record_models.RequestRecord.time_to_first_response_ns" class="md-nav__link">
    <span class="md-ellipsis">
      time_to_first_response_ns
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.common.record_models.RequestRecord.time_to_last_response_ns" class="md-nav__link">
    <span class="md-ellipsis">
      time_to_last_response_ns
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.common.record_models.RequestRecord.time_to_second_response_ns" class="md-nav__link">
    <span class="md-ellipsis">
      time_to_second_response_ns
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.common.record_models.RequestRecord.valid" class="md-nav__link">
    <span class="md-ellipsis">
      valid
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.common.record_models.RequestRecord.time_string" class="md-nav__link">
    <span class="md-ellipsis">
      time_string
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.common.record_models.RequestRecord.token_latency_ns" class="md-nav__link">
    <span class="md-ellipsis">
      token_latency_ns
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.record_models.SSEEventType" class="md-nav__link">
    <span class="md-ellipsis">
      SSEEventType
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.record_models.SSEField" class="md-nav__link">
    <span class="md-ellipsis">
      SSEField
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.record_models.SSEFieldType" class="md-nav__link">
    <span class="md-ellipsis">
      SSEFieldType
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.record_models.SSEMessage" class="md-nav__link">
    <span class="md-ellipsis">
      SSEMessage
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.record_models.TextResponse" class="md-nav__link">
    <span class="md-ellipsis">
      TextResponse
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.record_models.Transaction" class="md-nav__link">
    <span class="md-ellipsis">
      Transaction
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperfcommonservicebase_component_service" class="md-nav__link">
    <span class="md-ellipsis">
      aiperf.common.service.base_component_service
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.service.base_component_service" class="md-nav__link">
    <span class="md-ellipsis">
      base_component_service
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.service.base_component_service.BaseComponentService" class="md-nav__link">
    <span class="md-ellipsis">
      BaseComponentService
    </span>
  </a>
  
    <nav class="md-nav" aria-label="BaseComponentService">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#aiperf.common.service.base_component_service.BaseComponentService.required_clients" class="md-nav__link">
    <span class="md-ellipsis">
      required_clients
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.common.service.base_component_service.BaseComponentService.create_heartbeat_message" class="md-nav__link">
    <span class="md-ellipsis">
      create_heartbeat_message
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.common.service.base_component_service.BaseComponentService.create_registration_message" class="md-nav__link">
    <span class="md-ellipsis">
      create_registration_message
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.common.service.base_component_service.BaseComponentService.create_status_message" class="md-nav__link">
    <span class="md-ellipsis">
      create_status_message
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.common.service.base_component_service.BaseComponentService.process_command_message" class="md-nav__link">
    <span class="md-ellipsis">
      process_command_message
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.common.service.base_component_service.BaseComponentService.register" class="md-nav__link">
    <span class="md-ellipsis">
      register
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.common.service.base_component_service.BaseComponentService.send_heartbeat" class="md-nav__link">
    <span class="md-ellipsis">
      send_heartbeat
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperfcommonservicebase_controller_service" class="md-nav__link">
    <span class="md-ellipsis">
      aiperf.common.service.base_controller_service
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.service.base_controller_service" class="md-nav__link">
    <span class="md-ellipsis">
      base_controller_service
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.service.base_controller_service.BaseControllerService" class="md-nav__link">
    <span class="md-ellipsis">
      BaseControllerService
    </span>
  </a>
  
    <nav class="md-nav" aria-label="BaseControllerService">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#aiperf.common.service.base_controller_service.BaseControllerService.required_clients" class="md-nav__link">
    <span class="md-ellipsis">
      required_clients
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.common.service.base_controller_service.BaseControllerService.create_command_message" class="md-nav__link">
    <span class="md-ellipsis">
      create_command_message
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperfcommonservicebase_service" class="md-nav__link">
    <span class="md-ellipsis">
      aiperf.common.service.base_service
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.service.base_service" class="md-nav__link">
    <span class="md-ellipsis">
      base_service
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.service.base_service.BaseService" class="md-nav__link">
    <span class="md-ellipsis">
      BaseService
    </span>
  </a>
  
    <nav class="md-nav" aria-label="BaseService">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#aiperf.common.service.base_service.BaseService.comms" class="md-nav__link">
    <span class="md-ellipsis">
      comms
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.common.service.base_service.BaseService.is_initialized" class="md-nav__link">
    <span class="md-ellipsis">
      is_initialized
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.common.service.base_service.BaseService.is_shutdown" class="md-nav__link">
    <span class="md-ellipsis">
      is_shutdown
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.common.service.base_service.BaseService.state" class="md-nav__link">
    <span class="md-ellipsis">
      state
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.common.service.base_service.BaseService.configure" class="md-nav__link">
    <span class="md-ellipsis">
      configure
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.common.service.base_service.BaseService.initialize" class="md-nav__link">
    <span class="md-ellipsis">
      initialize
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.common.service.base_service.BaseService.run_forever" class="md-nav__link">
    <span class="md-ellipsis">
      run_forever
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.common.service.base_service.BaseService.set_state" class="md-nav__link">
    <span class="md-ellipsis">
      set_state
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.common.service.base_service.BaseService.start" class="md-nav__link">
    <span class="md-ellipsis">
      start
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.common.service.base_service.BaseService.stop" class="md-nav__link">
    <span class="md-ellipsis">
      stop
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperfcommonservicebase_service_interface" class="md-nav__link">
    <span class="md-ellipsis">
      aiperf.common.service.base_service_interface
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.service.base_service_interface" class="md-nav__link">
    <span class="md-ellipsis">
      base_service_interface
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.service.base_service_interface.BaseServiceInterface" class="md-nav__link">
    <span class="md-ellipsis">
      BaseServiceInterface
    </span>
  </a>
  
    <nav class="md-nav" aria-label="BaseServiceInterface">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#aiperf.common.service.base_service_interface.BaseServiceInterface.required_clients" class="md-nav__link">
    <span class="md-ellipsis">
      required_clients
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.common.service.base_service_interface.BaseServiceInterface.service_type" class="md-nav__link">
    <span class="md-ellipsis">
      service_type
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.common.service.base_service_interface.BaseServiceInterface.configure" class="md-nav__link">
    <span class="md-ellipsis">
      configure
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.common.service.base_service_interface.BaseServiceInterface.initialize" class="md-nav__link">
    <span class="md-ellipsis">
      initialize
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.common.service.base_service_interface.BaseServiceInterface.run_forever" class="md-nav__link">
    <span class="md-ellipsis">
      run_forever
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.common.service.base_service_interface.BaseServiceInterface.set_state" class="md-nav__link">
    <span class="md-ellipsis">
      set_state
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.common.service.base_service_interface.BaseServiceInterface.start" class="md-nav__link">
    <span class="md-ellipsis">
      start
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.common.service.base_service_interface.BaseServiceInterface.stop" class="md-nav__link">
    <span class="md-ellipsis">
      stop
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperfcommontokenizer" class="md-nav__link">
    <span class="md-ellipsis">
      aiperf.common.tokenizer
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.tokenizer" class="md-nav__link">
    <span class="md-ellipsis">
      tokenizer
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.tokenizer.Tokenizer" class="md-nav__link">
    <span class="md-ellipsis">
      Tokenizer
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Tokenizer">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#aiperf.common.tokenizer.Tokenizer.__call__" class="md-nav__link">
    <span class="md-ellipsis">
      __call__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.common.tokenizer.Tokenizer.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.common.tokenizer.Tokenizer.__repr__" class="md-nav__link">
    <span class="md-ellipsis">
      __repr__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.common.tokenizer.Tokenizer.__str__" class="md-nav__link">
    <span class="md-ellipsis">
      __str__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.common.tokenizer.Tokenizer.bos_token_id" class="md-nav__link">
    <span class="md-ellipsis">
      bos_token_id
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.common.tokenizer.Tokenizer.decode" class="md-nav__link">
    <span class="md-ellipsis">
      decode
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.common.tokenizer.Tokenizer.encode" class="md-nav__link">
    <span class="md-ellipsis">
      encode
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.common.tokenizer.Tokenizer.from_pretrained" class="md-nav__link">
    <span class="md-ellipsis">
      from_pretrained
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperfcommonutils" class="md-nav__link">
    <span class="md-ellipsis">
      aiperf.common.utils
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.utils" class="md-nav__link">
    <span class="md-ellipsis">
      utils
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.utils.call_all_functions" class="md-nav__link">
    <span class="md-ellipsis">
      call_all_functions
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.common.utils.call_all_functions_self" class="md-nav__link">
    <span class="md-ellipsis">
      call_all_functions_self
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperfdata_exporterconsole_exporter" class="md-nav__link">
    <span class="md-ellipsis">
      aiperf.data_exporter.console_exporter
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.data_exporter.console_exporter" class="md-nav__link">
    <span class="md-ellipsis">
      console_exporter
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.data_exporter.console_exporter.ConsoleExporter" class="md-nav__link">
    <span class="md-ellipsis">
      ConsoleExporter
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperfdata_exporterexporter_manager" class="md-nav__link">
    <span class="md-ellipsis">
      aiperf.data_exporter.exporter_manager
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.data_exporter.exporter_manager" class="md-nav__link">
    <span class="md-ellipsis">
      exporter_manager
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.data_exporter.exporter_manager.ExporterManager" class="md-nav__link">
    <span class="md-ellipsis">
      ExporterManager
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperfdata_exporterrecord" class="md-nav__link">
    <span class="md-ellipsis">
      aiperf.data_exporter.record
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.data_exporter.record" class="md-nav__link">
    <span class="md-ellipsis">
      record
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperfservicesdatasetdataset_manager" class="md-nav__link">
    <span class="md-ellipsis">
      aiperf.services.dataset.dataset_manager
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.services.dataset.dataset_manager" class="md-nav__link">
    <span class="md-ellipsis">
      dataset_manager
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.services.dataset.dataset_manager.DatasetManager" class="md-nav__link">
    <span class="md-ellipsis">
      DatasetManager
    </span>
  </a>
  
    <nav class="md-nav" aria-label="DatasetManager">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#aiperf.services.dataset.dataset_manager.DatasetManager.service_type" class="md-nav__link">
    <span class="md-ellipsis">
      service_type
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.services.dataset.dataset_manager.main" class="md-nav__link">
    <span class="md-ellipsis">
      main
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperfservicesdatasetgeneratoraudio" class="md-nav__link">
    <span class="md-ellipsis">
      aiperf.services.dataset.generator.audio
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.services.dataset.generator.audio" class="md-nav__link">
    <span class="md-ellipsis">
      audio
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.services.dataset.generator.audio.AudioGenerator" class="md-nav__link">
    <span class="md-ellipsis">
      AudioGenerator
    </span>
  </a>
  
    <nav class="md-nav" aria-label="AudioGenerator">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#aiperf.services.dataset.generator.audio.AudioGenerator.create_synthetic_audio" class="md-nav__link">
    <span class="md-ellipsis">
      create_synthetic_audio
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperfservicesdatasetgeneratorimage" class="md-nav__link">
    <span class="md-ellipsis">
      aiperf.services.dataset.generator.image
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.services.dataset.generator.image" class="md-nav__link">
    <span class="md-ellipsis">
      image
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.services.dataset.generator.image.ImageGenerator" class="md-nav__link">
    <span class="md-ellipsis">
      ImageGenerator
    </span>
  </a>
  
    <nav class="md-nav" aria-label="ImageGenerator">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#aiperf.services.dataset.generator.image.ImageGenerator.create_synthetic_image" class="md-nav__link">
    <span class="md-ellipsis">
      create_synthetic_image
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperfservicesdatasetgeneratorprompt" class="md-nav__link">
    <span class="md-ellipsis">
      aiperf.services.dataset.generator.prompt
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.services.dataset.generator.prompt" class="md-nav__link">
    <span class="md-ellipsis">
      prompt
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.services.dataset.generator.prompt.PromptGenerator" class="md-nav__link">
    <span class="md-ellipsis">
      PromptGenerator
    </span>
  </a>
  
    <nav class="md-nav" aria-label="PromptGenerator">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#aiperf.services.dataset.generator.prompt.PromptGenerator.create_prefix_prompts_pool" class="md-nav__link">
    <span class="md-ellipsis">
      create_prefix_prompts_pool
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.services.dataset.generator.prompt.PromptGenerator.create_synthetic_prompt" class="md-nav__link">
    <span class="md-ellipsis">
      create_synthetic_prompt
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.services.dataset.generator.prompt.PromptGenerator.get_random_prefix_prompt" class="md-nav__link">
    <span class="md-ellipsis">
      get_random_prefix_prompt
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperfservicesdatasetgeneratorutils" class="md-nav__link">
    <span class="md-ellipsis">
      aiperf.services.dataset.generator.utils
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.services.dataset.generator.utils" class="md-nav__link">
    <span class="md-ellipsis">
      utils
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.services.dataset.generator.utils.encode_image" class="md-nav__link">
    <span class="md-ellipsis">
      encode_image
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperfservicespost_processor_managerpost_processor_manager" class="md-nav__link">
    <span class="md-ellipsis">
      aiperf.services.post_processor_manager.post_processor_manager
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.services.post_processor_manager.post_processor_manager" class="md-nav__link">
    <span class="md-ellipsis">
      post_processor_manager
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.services.post_processor_manager.post_processor_manager.PostProcessorManager" class="md-nav__link">
    <span class="md-ellipsis">
      PostProcessorManager
    </span>
  </a>
  
    <nav class="md-nav" aria-label="PostProcessorManager">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#aiperf.services.post_processor_manager.post_processor_manager.PostProcessorManager.service_type" class="md-nav__link">
    <span class="md-ellipsis">
      service_type
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.services.post_processor_manager.post_processor_manager.main" class="md-nav__link">
    <span class="md-ellipsis">
      main
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperfservicesrecords_managermetricsbase_metric" class="md-nav__link">
    <span class="md-ellipsis">
      aiperf.services.records_manager.metrics.base_metric
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.services.records_manager.metrics.base_metric" class="md-nav__link">
    <span class="md-ellipsis">
      base_metric
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.services.records_manager.metrics.base_metric.BaseMetric" class="md-nav__link">
    <span class="md-ellipsis">
      BaseMetric
    </span>
  </a>
  
    <nav class="md-nav" aria-label="BaseMetric">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#aiperf.services.records_manager.metrics.base_metric.BaseMetric.__init_subclass__" class="md-nav__link">
    <span class="md-ellipsis">
      __init_subclass__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.services.records_manager.metrics.base_metric.BaseMetric.get_all" class="md-nav__link">
    <span class="md-ellipsis">
      get_all
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.services.records_manager.metrics.base_metric.BaseMetric.update_value" class="md-nav__link">
    <span class="md-ellipsis">
      update_value
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.services.records_manager.metrics.base_metric.BaseMetric.values" class="md-nav__link">
    <span class="md-ellipsis">
      values
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperfservicesrecords_managermetricstypesbenchmark_duration_metric" class="md-nav__link">
    <span class="md-ellipsis">
      aiperf.services.records_manager.metrics.types.benchmark_duration_metric
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.services.records_manager.metrics.types.benchmark_duration_metric" class="md-nav__link">
    <span class="md-ellipsis">
      benchmark_duration_metric
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.services.records_manager.metrics.types.benchmark_duration_metric.BenchmarkDurationMetric" class="md-nav__link">
    <span class="md-ellipsis">
      BenchmarkDurationMetric
    </span>
  </a>
  
    <nav class="md-nav" aria-label="BenchmarkDurationMetric">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#aiperf.services.records_manager.metrics.types.benchmark_duration_metric.BenchmarkDurationMetric.values" class="md-nav__link">
    <span class="md-ellipsis">
      values
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperfservicesrecords_managermetricstypesmax_response_metric" class="md-nav__link">
    <span class="md-ellipsis">
      aiperf.services.records_manager.metrics.types.max_response_metric
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.services.records_manager.metrics.types.max_response_metric" class="md-nav__link">
    <span class="md-ellipsis">
      max_response_metric
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.services.records_manager.metrics.types.max_response_metric.MaxResponseMetric" class="md-nav__link">
    <span class="md-ellipsis">
      MaxResponseMetric
    </span>
  </a>
  
    <nav class="md-nav" aria-label="MaxResponseMetric">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#aiperf.services.records_manager.metrics.types.max_response_metric.MaxResponseMetric.update_value" class="md-nav__link">
    <span class="md-ellipsis">
      update_value
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.services.records_manager.metrics.types.max_response_metric.MaxResponseMetric.values" class="md-nav__link">
    <span class="md-ellipsis">
      values
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperfservicesrecords_managermetricstypesmin_request_metric" class="md-nav__link">
    <span class="md-ellipsis">
      aiperf.services.records_manager.metrics.types.min_request_metric
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.services.records_manager.metrics.types.min_request_metric" class="md-nav__link">
    <span class="md-ellipsis">
      min_request_metric
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.services.records_manager.metrics.types.min_request_metric.MinRequestMetric" class="md-nav__link">
    <span class="md-ellipsis">
      MinRequestMetric
    </span>
  </a>
  
    <nav class="md-nav" aria-label="MinRequestMetric">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#aiperf.services.records_manager.metrics.types.min_request_metric.MinRequestMetric.update_value" class="md-nav__link">
    <span class="md-ellipsis">
      update_value
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.services.records_manager.metrics.types.min_request_metric.MinRequestMetric.values" class="md-nav__link">
    <span class="md-ellipsis">
      values
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperfservicesrecords_managermetricstypesrequest_latency_metric" class="md-nav__link">
    <span class="md-ellipsis">
      aiperf.services.records_manager.metrics.types.request_latency_metric
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.services.records_manager.metrics.types.request_latency_metric" class="md-nav__link">
    <span class="md-ellipsis">
      request_latency_metric
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.services.records_manager.metrics.types.request_latency_metric.RequestLatencyMetric" class="md-nav__link">
    <span class="md-ellipsis">
      RequestLatencyMetric
    </span>
  </a>
  
    <nav class="md-nav" aria-label="RequestLatencyMetric">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#aiperf.services.records_manager.metrics.types.request_latency_metric.RequestLatencyMetric.update_value" class="md-nav__link">
    <span class="md-ellipsis">
      update_value
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.services.records_manager.metrics.types.request_latency_metric.RequestLatencyMetric.values" class="md-nav__link">
    <span class="md-ellipsis">
      values
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperfservicesrecords_managermetricstypesttft_metric" class="md-nav__link">
    <span class="md-ellipsis">
      aiperf.services.records_manager.metrics.types.ttft_metric
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.services.records_manager.metrics.types.ttft_metric" class="md-nav__link">
    <span class="md-ellipsis">
      ttft_metric
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.services.records_manager.metrics.types.ttft_metric.TTFTMetric" class="md-nav__link">
    <span class="md-ellipsis">
      TTFTMetric
    </span>
  </a>
  
    <nav class="md-nav" aria-label="TTFTMetric">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#aiperf.services.records_manager.metrics.types.ttft_metric.TTFTMetric.update_value" class="md-nav__link">
    <span class="md-ellipsis">
      update_value
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.services.records_manager.metrics.types.ttft_metric.TTFTMetric.values" class="md-nav__link">
    <span class="md-ellipsis">
      values
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperfservicesrecords_managermetricstypesttst_metric" class="md-nav__link">
    <span class="md-ellipsis">
      aiperf.services.records_manager.metrics.types.ttst_metric
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.services.records_manager.metrics.types.ttst_metric" class="md-nav__link">
    <span class="md-ellipsis">
      ttst_metric
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.services.records_manager.metrics.types.ttst_metric.TTSTMetric" class="md-nav__link">
    <span class="md-ellipsis">
      TTSTMetric
    </span>
  </a>
  
    <nav class="md-nav" aria-label="TTSTMetric">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#aiperf.services.records_manager.metrics.types.ttst_metric.TTSTMetric.update_value" class="md-nav__link">
    <span class="md-ellipsis">
      update_value
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.services.records_manager.metrics.types.ttst_metric.TTSTMetric.values" class="md-nav__link">
    <span class="md-ellipsis">
      values
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperfservicesrecords_managerpost_processorsmetric_summary" class="md-nav__link">
    <span class="md-ellipsis">
      aiperf.services.records_manager.post_processors.metric_summary
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.services.records_manager.post_processors.metric_summary" class="md-nav__link">
    <span class="md-ellipsis">
      metric_summary
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.services.records_manager.post_processors.metric_summary.MetricSummary" class="md-nav__link">
    <span class="md-ellipsis">
      MetricSummary
    </span>
  </a>
  
    <nav class="md-nav" aria-label="MetricSummary">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#aiperf.services.records_manager.post_processors.metric_summary.MetricSummary.process" class="md-nav__link">
    <span class="md-ellipsis">
      process
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperfservicesrecords_managerrecords" class="md-nav__link">
    <span class="md-ellipsis">
      aiperf.services.records_manager.records
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.services.records_manager.records" class="md-nav__link">
    <span class="md-ellipsis">
      records
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.services.records_manager.records.Records" class="md-nav__link">
    <span class="md-ellipsis">
      Records
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Records">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#aiperf.services.records_manager.records.Records.add_record" class="md-nav__link">
    <span class="md-ellipsis">
      add_record
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperfservicesrecords_managerrecords_manager" class="md-nav__link">
    <span class="md-ellipsis">
      aiperf.services.records_manager.records_manager
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.services.records_manager.records_manager" class="md-nav__link">
    <span class="md-ellipsis">
      records_manager
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.services.records_manager.records_manager.RecordsManager" class="md-nav__link">
    <span class="md-ellipsis">
      RecordsManager
    </span>
  </a>
  
    <nav class="md-nav" aria-label="RecordsManager">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#aiperf.services.records_manager.records_manager.RecordsManager.service_type" class="md-nav__link">
    <span class="md-ellipsis">
      service_type
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.services.records_manager.records_manager.main" class="md-nav__link">
    <span class="md-ellipsis">
      main
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperfservicesservice_managerbase" class="md-nav__link">
    <span class="md-ellipsis">
      aiperf.services.service_manager.base
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.services.service_manager.base" class="md-nav__link">
    <span class="md-ellipsis">
      base
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.services.service_manager.base.BaseServiceManager" class="md-nav__link">
    <span class="md-ellipsis">
      BaseServiceManager
    </span>
  </a>
  
    <nav class="md-nav" aria-label="BaseServiceManager">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#aiperf.services.service_manager.base.BaseServiceManager.initialize_all_services" class="md-nav__link">
    <span class="md-ellipsis">
      initialize_all_services
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.services.service_manager.base.BaseServiceManager.stop_all_services" class="md-nav__link">
    <span class="md-ellipsis">
      stop_all_services
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.services.service_manager.base.BaseServiceManager.wait_for_all_services_registration" class="md-nav__link">
    <span class="md-ellipsis">
      wait_for_all_services_registration
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.services.service_manager.base.BaseServiceManager.wait_for_all_services_start" class="md-nav__link">
    <span class="md-ellipsis">
      wait_for_all_services_start
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperfservicesservice_managerkubernetes" class="md-nav__link">
    <span class="md-ellipsis">
      aiperf.services.service_manager.kubernetes
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.services.service_manager.kubernetes" class="md-nav__link">
    <span class="md-ellipsis">
      kubernetes
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.services.service_manager.kubernetes.KubernetesServiceManager" class="md-nav__link">
    <span class="md-ellipsis">
      KubernetesServiceManager
    </span>
  </a>
  
    <nav class="md-nav" aria-label="KubernetesServiceManager">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#aiperf.services.service_manager.kubernetes.KubernetesServiceManager.initialize_all_services" class="md-nav__link">
    <span class="md-ellipsis">
      initialize_all_services
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.services.service_manager.kubernetes.KubernetesServiceManager.stop_all_services" class="md-nav__link">
    <span class="md-ellipsis">
      stop_all_services
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.services.service_manager.kubernetes.KubernetesServiceManager.wait_for_all_services_registration" class="md-nav__link">
    <span class="md-ellipsis">
      wait_for_all_services_registration
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.services.service_manager.kubernetes.KubernetesServiceManager.wait_for_all_services_start" class="md-nav__link">
    <span class="md-ellipsis">
      wait_for_all_services_start
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.services.service_manager.kubernetes.ServiceKubernetesRunInfo" class="md-nav__link">
    <span class="md-ellipsis">
      ServiceKubernetesRunInfo
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperfservicesservice_managermultiprocess" class="md-nav__link">
    <span class="md-ellipsis">
      aiperf.services.service_manager.multiprocess
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.services.service_manager.multiprocess" class="md-nav__link">
    <span class="md-ellipsis">
      multiprocess
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.services.service_manager.multiprocess.MultiProcessRunInfo" class="md-nav__link">
    <span class="md-ellipsis">
      MultiProcessRunInfo
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.services.service_manager.multiprocess.MultiProcessServiceManager" class="md-nav__link">
    <span class="md-ellipsis">
      MultiProcessServiceManager
    </span>
  </a>
  
    <nav class="md-nav" aria-label="MultiProcessServiceManager">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#aiperf.services.service_manager.multiprocess.MultiProcessServiceManager.initialize_all_services" class="md-nav__link">
    <span class="md-ellipsis">
      initialize_all_services
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.services.service_manager.multiprocess.MultiProcessServiceManager.stop_all_services" class="md-nav__link">
    <span class="md-ellipsis">
      stop_all_services
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.services.service_manager.multiprocess.MultiProcessServiceManager.wait_for_all_services_registration" class="md-nav__link">
    <span class="md-ellipsis">
      wait_for_all_services_registration
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.services.service_manager.multiprocess.MultiProcessServiceManager.wait_for_all_services_start" class="md-nav__link">
    <span class="md-ellipsis">
      wait_for_all_services_start
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperfservicessystem_controllersystem_controller" class="md-nav__link">
    <span class="md-ellipsis">
      aiperf.services.system_controller.system_controller
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.services.system_controller.system_controller" class="md-nav__link">
    <span class="md-ellipsis">
      system_controller
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.services.system_controller.system_controller.SystemController" class="md-nav__link">
    <span class="md-ellipsis">
      SystemController
    </span>
  </a>
  
    <nav class="md-nav" aria-label="SystemController">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#aiperf.services.system_controller.system_controller.SystemController.service_type" class="md-nav__link">
    <span class="md-ellipsis">
      service_type
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.services.system_controller.system_controller.SystemController.send_command_to_service" class="md-nav__link">
    <span class="md-ellipsis">
      send_command_to_service
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.services.system_controller.system_controller.SystemController.start_all_services" class="md-nav__link">
    <span class="md-ellipsis">
      start_all_services
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.services.system_controller.system_controller.main" class="md-nav__link">
    <span class="md-ellipsis">
      main
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperfservicestiming_managertiming_manager" class="md-nav__link">
    <span class="md-ellipsis">
      aiperf.services.timing_manager.timing_manager
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.services.timing_manager.timing_manager" class="md-nav__link">
    <span class="md-ellipsis">
      timing_manager
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.services.timing_manager.timing_manager.TimingManager" class="md-nav__link">
    <span class="md-ellipsis">
      TimingManager
    </span>
  </a>
  
    <nav class="md-nav" aria-label="TimingManager">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#aiperf.services.timing_manager.timing_manager.TimingManager.required_clients" class="md-nav__link">
    <span class="md-ellipsis">
      required_clients
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.services.timing_manager.timing_manager.TimingManager.service_type" class="md-nav__link">
    <span class="md-ellipsis">
      service_type
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.services.timing_manager.timing_manager.main" class="md-nav__link">
    <span class="md-ellipsis">
      main
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperfservicesworkerworker" class="md-nav__link">
    <span class="md-ellipsis">
      aiperf.services.worker.worker
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.services.worker.worker" class="md-nav__link">
    <span class="md-ellipsis">
      worker
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.services.worker.worker.Worker" class="md-nav__link">
    <span class="md-ellipsis">
      Worker
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Worker">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#aiperf.services.worker.worker.Worker.required_clients" class="md-nav__link">
    <span class="md-ellipsis">
      required_clients
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.services.worker.worker.Worker.service_type" class="md-nav__link">
    <span class="md-ellipsis">
      service_type
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.services.worker.worker.main" class="md-nav__link">
    <span class="md-ellipsis">
      main
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperfservicesworker_managerworker_manager" class="md-nav__link">
    <span class="md-ellipsis">
      aiperf.services.worker_manager.worker_manager
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.services.worker_manager.worker_manager" class="md-nav__link">
    <span class="md-ellipsis">
      worker_manager
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.services.worker_manager.worker_manager.WorkerManager" class="md-nav__link">
    <span class="md-ellipsis">
      WorkerManager
    </span>
  </a>
  
    <nav class="md-nav" aria-label="WorkerManager">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#aiperf.services.worker_manager.worker_manager.WorkerManager.service_type" class="md-nav__link">
    <span class="md-ellipsis">
      service_type
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.services.worker_manager.worker_manager.WorkerProcess" class="md-nav__link">
    <span class="md-ellipsis">
      WorkerProcess
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.services.worker_manager.worker_manager.main" class="md-nav__link">
    <span class="md-ellipsis">
      main
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperftestsbase_test_component_service" class="md-nav__link">
    <span class="md-ellipsis">
      aiperf.tests.base_test_component_service
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.tests.base_test_component_service" class="md-nav__link">
    <span class="md-ellipsis">
      base_test_component_service
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.tests.base_test_component_service.BaseTestComponentService" class="md-nav__link">
    <span class="md-ellipsis">
      BaseTestComponentService
    </span>
  </a>
  
    <nav class="md-nav" aria-label="BaseTestComponentService">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#aiperf.tests.base_test_component_service.BaseTestComponentService.service_class" class="md-nav__link">
    <span class="md-ellipsis">
      service_class
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.tests.base_test_component_service.BaseTestComponentService.test_service_heartbeat" class="md-nav__link">
    <span class="md-ellipsis">
      test_service_heartbeat
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.tests.base_test_component_service.BaseTestComponentService.test_service_registration" class="md-nav__link">
    <span class="md-ellipsis">
      test_service_registration
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.tests.base_test_component_service.BaseTestComponentService.test_service_status_update" class="md-nav__link">
    <span class="md-ellipsis">
      test_service_status_update
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperftestsbase_test_controller_service" class="md-nav__link">
    <span class="md-ellipsis">
      aiperf.tests.base_test_controller_service
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.tests.base_test_controller_service" class="md-nav__link">
    <span class="md-ellipsis">
      base_test_controller_service
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.tests.base_test_controller_service.BaseTestControllerService" class="md-nav__link">
    <span class="md-ellipsis">
      BaseTestControllerService
    </span>
  </a>
  
    <nav class="md-nav" aria-label="BaseTestControllerService">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#aiperf.tests.base_test_controller_service.BaseTestControllerService.test_controller_command_publishing" class="md-nav__link">
    <span class="md-ellipsis">
      test_controller_command_publishing
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperftestsbase_test_service" class="md-nav__link">
    <span class="md-ellipsis">
      aiperf.tests.base_test_service
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.tests.base_test_service" class="md-nav__link">
    <span class="md-ellipsis">
      base_test_service
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.tests.base_test_service.BaseTestService" class="md-nav__link">
    <span class="md-ellipsis">
      BaseTestService
    </span>
  </a>
  
    <nav class="md-nav" aria-label="BaseTestService">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#aiperf.tests.base_test_service.BaseTestService.initialized_service" class="md-nav__link">
    <span class="md-ellipsis">
      initialized_service
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.tests.base_test_service.BaseTestService.no_sleep" class="md-nav__link">
    <span class="md-ellipsis">
      no_sleep
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.tests.base_test_service.BaseTestService.patch_communication_factory" class="md-nav__link">
    <span class="md-ellipsis">
      patch_communication_factory
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.tests.base_test_service.BaseTestService.service_class" class="md-nav__link">
    <span class="md-ellipsis">
      service_class
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.tests.base_test_service.BaseTestService.service_config" class="md-nav__link">
    <span class="md-ellipsis">
      service_config
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.tests.base_test_service.BaseTestService.test_service_initialization" class="md-nav__link">
    <span class="md-ellipsis">
      test_service_initialization
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.tests.base_test_service.BaseTestService.test_service_run_does_not_start" class="md-nav__link">
    <span class="md-ellipsis">
      test_service_run_does_not_start
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.tests.base_test_service.BaseTestService.test_service_start_stop" class="md-nav__link">
    <span class="md-ellipsis">
      test_service_start_stop
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.tests.base_test_service.BaseTestService.test_service_state_transitions" class="md-nav__link">
    <span class="md-ellipsis">
      test_service_state_transitions
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.tests.base_test_service.BaseTestService.uninitialized_service" class="md-nav__link">
    <span class="md-ellipsis">
      uninitialized_service
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperftestscommsmock_zmq" class="md-nav__link">
    <span class="md-ellipsis">
      aiperf.tests.comms.mock_zmq
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.tests.comms.mock_zmq" class="md-nav__link">
    <span class="md-ellipsis">
      mock_zmq
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.tests.comms.mock_zmq.MockCommunicationData" class="md-nav__link">
    <span class="md-ellipsis">
      MockCommunicationData
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.tests.comms.mock_zmq.mock_zmq_communication" class="md-nav__link">
    <span class="md-ellipsis">
      mock_zmq_communication
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperftestscommstest_zmq_communication" class="md-nav__link">
    <span class="md-ellipsis">
      aiperf.tests.comms.test_zmq_communication
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.tests.comms.test_zmq_communication" class="md-nav__link">
    <span class="md-ellipsis">
      test_zmq_communication
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.tests.comms.test_zmq_communication.TestZMQCommunication" class="md-nav__link">
    <span class="md-ellipsis">
      TestZMQCommunication
    </span>
  </a>
  
    <nav class="md-nav" aria-label="TestZMQCommunication">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#aiperf.tests.comms.test_zmq_communication.TestZMQCommunication.mock_config" class="md-nav__link">
    <span class="md-ellipsis">
      mock_config
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.tests.comms.test_zmq_communication.TestZMQCommunication.test_create_clients" class="md-nav__link">
    <span class="md-ellipsis">
      test_create_clients
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.tests.comms.test_zmq_communication.TestZMQCommunication.test_initialization" class="md-nav__link">
    <span class="md-ellipsis">
      test_initialization
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.tests.comms.test_zmq_communication.TestZMQCommunication.test_initialization_failure" class="md-nav__link">
    <span class="md-ellipsis">
      test_initialization_failure
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.tests.comms.test_zmq_communication.TestZMQCommunication.test_message" class="md-nav__link">
    <span class="md-ellipsis">
      test_message
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.tests.comms.test_zmq_communication.TestZMQCommunication.test_publish_message" class="md-nav__link">
    <span class="md-ellipsis">
      test_publish_message
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.tests.comms.test_zmq_communication.TestZMQCommunication.test_shutdown" class="md-nav__link">
    <span class="md-ellipsis">
      test_shutdown
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.tests.comms.test_zmq_communication.TestZMQCommunication.test_subscribe_to_topic" class="md-nav__link">
    <span class="md-ellipsis">
      test_subscribe_to_topic
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.tests.comms.test_zmq_communication.TestZMQCommunication.zmq_communication" class="md-nav__link">
    <span class="md-ellipsis">
      zmq_communication
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperftestsconfigtest_audio_config" class="md-nav__link">
    <span class="md-ellipsis">
      aiperf.tests.config.test_audio_config
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.tests.config.test_audio_config" class="md-nav__link">
    <span class="md-ellipsis">
      test_audio_config
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.tests.config.test_audio_config.test_audio_config_custom_values" class="md-nav__link">
    <span class="md-ellipsis">
      test_audio_config_custom_values
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.tests.config.test_audio_config.test_audio_config_defaults" class="md-nav__link">
    <span class="md-ellipsis">
      test_audio_config_defaults
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperftestsconfigtest_base_config" class="md-nav__link">
    <span class="md-ellipsis">
      aiperf.tests.config.test_base_config
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.tests.config.test_base_config" class="md-nav__link">
    <span class="md-ellipsis">
      test_base_config
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.tests.config.test_base_config.test_attach_comments_with_verbose" class="md-nav__link">
    <span class="md-ellipsis">
      test_attach_comments_with_verbose
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.tests.config.test_base_config.test_is_a_nested_config" class="md-nav__link">
    <span class="md-ellipsis">
      test_is_a_nested_config
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.tests.config.test_base_config.test_preprocess_value_enum" class="md-nav__link">
    <span class="md-ellipsis">
      test_preprocess_value_enum
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.tests.config.test_base_config.test_serialize_to_yaml" class="md-nav__link">
    <span class="md-ellipsis">
      test_serialize_to_yaml
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.tests.config.test_base_config.test_should_add_field_to_template" class="md-nav__link">
    <span class="md-ellipsis">
      test_should_add_field_to_template
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperftestsconfigtest_endpoint_config" class="md-nav__link">
    <span class="md-ellipsis">
      aiperf.tests.config.test_endpoint_config
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.tests.config.test_endpoint_config" class="md-nav__link">
    <span class="md-ellipsis">
      test_endpoint_config
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.tests.config.test_endpoint_config.test_endpoint_config_custom_values" class="md-nav__link">
    <span class="md-ellipsis">
      test_endpoint_config_custom_values
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.tests.config.test_endpoint_config.test_endpoint_config_defaults" class="md-nav__link">
    <span class="md-ellipsis">
      test_endpoint_config_defaults
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.tests.config.test_endpoint_config.test_server_metrics_urls_validator" class="md-nav__link">
    <span class="md-ellipsis">
      test_server_metrics_urls_validator
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperftestsconfigtest_image_config" class="md-nav__link">
    <span class="md-ellipsis">
      aiperf.tests.config.test_image_config
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.tests.config.test_image_config" class="md-nav__link">
    <span class="md-ellipsis">
      test_image_config
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.tests.config.test_image_config.test_image_config_custom_values" class="md-nav__link">
    <span class="md-ellipsis">
      test_image_config_custom_values
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.tests.config.test_image_config.test_image_config_defaults" class="md-nav__link">
    <span class="md-ellipsis">
      test_image_config_defaults
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperftestsconfigtest_input_config" class="md-nav__link">
    <span class="md-ellipsis">
      aiperf.tests.config.test_input_config
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.tests.config.test_input_config" class="md-nav__link">
    <span class="md-ellipsis">
      test_input_config
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.tests.config.test_input_config.test_input_config_custom_values" class="md-nav__link">
    <span class="md-ellipsis">
      test_input_config_custom_values
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.tests.config.test_input_config.test_input_config_defaults" class="md-nav__link">
    <span class="md-ellipsis">
      test_input_config_defaults
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.tests.config.test_input_config.test_input_config_file_validation" class="md-nav__link">
    <span class="md-ellipsis">
      test_input_config_file_validation
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.tests.config.test_input_config.test_input_config_goodput_validation" class="md-nav__link">
    <span class="md-ellipsis">
      test_input_config_goodput_validation
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperftestsconfigtest_output_config" class="md-nav__link">
    <span class="md-ellipsis">
      aiperf.tests.config.test_output_config
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.tests.config.test_output_config" class="md-nav__link">
    <span class="md-ellipsis">
      test_output_config
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.tests.config.test_output_config.test_output_config_custom_values" class="md-nav__link">
    <span class="md-ellipsis">
      test_output_config_custom_values
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.tests.config.test_output_config.test_output_config_defaults" class="md-nav__link">
    <span class="md-ellipsis">
      test_output_config_defaults
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperftestsconfigtest_prompt_config" class="md-nav__link">
    <span class="md-ellipsis">
      aiperf.tests.config.test_prompt_config
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.tests.config.test_prompt_config" class="md-nav__link">
    <span class="md-ellipsis">
      test_prompt_config
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.tests.config.test_prompt_config.test_input_tokens_config_custom_values" class="md-nav__link">
    <span class="md-ellipsis">
      test_input_tokens_config_custom_values
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.tests.config.test_prompt_config.test_input_tokens_config_defaults" class="md-nav__link">
    <span class="md-ellipsis">
      test_input_tokens_config_defaults
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.tests.config.test_prompt_config.test_output_tokens_config_custom_values" class="md-nav__link">
    <span class="md-ellipsis">
      test_output_tokens_config_custom_values
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.tests.config.test_prompt_config.test_output_tokens_config_defaults" class="md-nav__link">
    <span class="md-ellipsis">
      test_output_tokens_config_defaults
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.tests.config.test_prompt_config.test_prefix_prompt_config_custom_values" class="md-nav__link">
    <span class="md-ellipsis">
      test_prefix_prompt_config_custom_values
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.tests.config.test_prompt_config.test_prefix_prompt_config_defaults" class="md-nav__link">
    <span class="md-ellipsis">
      test_prefix_prompt_config_defaults
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperftestsconfigtest_sessions_config" class="md-nav__link">
    <span class="md-ellipsis">
      aiperf.tests.config.test_sessions_config
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.tests.config.test_sessions_config" class="md-nav__link">
    <span class="md-ellipsis">
      test_sessions_config
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.tests.config.test_sessions_config.test_sessions_config_custom_values" class="md-nav__link">
    <span class="md-ellipsis">
      test_sessions_config_custom_values
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.tests.config.test_sessions_config.test_sessions_config_defaults" class="md-nav__link">
    <span class="md-ellipsis">
      test_sessions_config_defaults
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperftestsconfigtest_tokenizer_config" class="md-nav__link">
    <span class="md-ellipsis">
      aiperf.tests.config.test_tokenizer_config
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.tests.config.test_tokenizer_config" class="md-nav__link">
    <span class="md-ellipsis">
      test_tokenizer_config
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.tests.config.test_tokenizer_config.test_output_config_custom_values" class="md-nav__link">
    <span class="md-ellipsis">
      test_output_config_custom_values
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.tests.config.test_tokenizer_config.test_tokenizer_config_defaults" class="md-nav__link">
    <span class="md-ellipsis">
      test_tokenizer_config_defaults
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperftestsconfigtest_user_config" class="md-nav__link">
    <span class="md-ellipsis">
      aiperf.tests.config.test_user_config
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.tests.config.test_user_config" class="md-nav__link">
    <span class="md-ellipsis">
      test_user_config
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.tests.config.test_user_config.test_user_config_custom_values" class="md-nav__link">
    <span class="md-ellipsis">
      test_user_config_custom_values
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.tests.config.test_user_config.test_user_config_defaults" class="md-nav__link">
    <span class="md-ellipsis">
      test_user_config_defaults
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.tests.config.test_user_config.test_user_config_serialization_to_file" class="md-nav__link">
    <span class="md-ellipsis">
      test_user_config_serialization_to_file
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperftestsconftest" class="md-nav__link">
    <span class="md-ellipsis">
      aiperf.tests.conftest
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.tests.conftest" class="md-nav__link">
    <span class="md-ellipsis">
      conftest
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.tests.conftest.mock_communication" class="md-nav__link">
    <span class="md-ellipsis">
      mock_communication
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.tests.conftest.mock_hf_tokenizer" class="md-nav__link">
    <span class="md-ellipsis">
      mock_hf_tokenizer
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.tests.conftest.mock_zmq_context" class="md-nav__link">
    <span class="md-ellipsis">
      mock_zmq_context
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.tests.conftest.mock_zmq_socket" class="md-nav__link">
    <span class="md-ellipsis">
      mock_zmq_socket
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperftestsdata_exporterstest_console_exporter" class="md-nav__link">
    <span class="md-ellipsis">
      aiperf.tests.data_exporters.test_console_exporter
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.tests.data_exporters.test_console_exporter" class="md-nav__link">
    <span class="md-ellipsis">
      test_console_exporter
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperftestsdata_exporterstest_exporter_manager" class="md-nav__link">
    <span class="md-ellipsis">
      aiperf.tests.data_exporters.test_exporter_manager
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.tests.data_exporters.test_exporter_manager" class="md-nav__link">
    <span class="md-ellipsis">
      test_exporter_manager
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperftestsservicestest_dataset_manager" class="md-nav__link">
    <span class="md-ellipsis">
      aiperf.tests.services.test_dataset_manager
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.tests.services.test_dataset_manager" class="md-nav__link">
    <span class="md-ellipsis">
      test_dataset_manager
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.tests.services.test_dataset_manager.DatasetManagerTestConfig" class="md-nav__link">
    <span class="md-ellipsis">
      DatasetManagerTestConfig
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.tests.services.test_dataset_manager.TestDatasetManager" class="md-nav__link">
    <span class="md-ellipsis">
      TestDatasetManager
    </span>
  </a>
  
    <nav class="md-nav" aria-label="TestDatasetManager">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#aiperf.tests.services.test_dataset_manager.TestDatasetManager.dataset_config" class="md-nav__link">
    <span class="md-ellipsis">
      dataset_config
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.tests.services.test_dataset_manager.TestDatasetManager.service_class" class="md-nav__link">
    <span class="md-ellipsis">
      service_class
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.tests.services.test_dataset_manager.TestDatasetManager.test_dataset_manager_initialization" class="md-nav__link">
    <span class="md-ellipsis">
      test_dataset_manager_initialization
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperftestsservicestest_post_processor_manager" class="md-nav__link">
    <span class="md-ellipsis">
      aiperf.tests.services.test_post_processor_manager
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.tests.services.test_post_processor_manager" class="md-nav__link">
    <span class="md-ellipsis">
      test_post_processor_manager
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.tests.services.test_post_processor_manager.PostProcessorTestConfig" class="md-nav__link">
    <span class="md-ellipsis">
      PostProcessorTestConfig
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.tests.services.test_post_processor_manager.TestPostProcessorManager" class="md-nav__link">
    <span class="md-ellipsis">
      TestPostProcessorManager
    </span>
  </a>
  
    <nav class="md-nav" aria-label="TestPostProcessorManager">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#aiperf.tests.services.test_post_processor_manager.TestPostProcessorManager.processor_config" class="md-nav__link">
    <span class="md-ellipsis">
      processor_config
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.tests.services.test_post_processor_manager.TestPostProcessorManager.service_class" class="md-nav__link">
    <span class="md-ellipsis">
      service_class
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.tests.services.test_post_processor_manager.TestPostProcessorManager.test_post_processor_manager_initialization" class="md-nav__link">
    <span class="md-ellipsis">
      test_post_processor_manager_initialization
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperftestsservicestest_records_manager" class="md-nav__link">
    <span class="md-ellipsis">
      aiperf.tests.services.test_records_manager
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.tests.services.test_records_manager" class="md-nav__link">
    <span class="md-ellipsis">
      test_records_manager
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.tests.services.test_records_manager.RecordsManagerTestConfig" class="md-nav__link">
    <span class="md-ellipsis">
      RecordsManagerTestConfig
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.tests.services.test_records_manager.TestRecordsManager" class="md-nav__link">
    <span class="md-ellipsis">
      TestRecordsManager
    </span>
  </a>
  
    <nav class="md-nav" aria-label="TestRecordsManager">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#aiperf.tests.services.test_records_manager.TestRecordsManager.records_config" class="md-nav__link">
    <span class="md-ellipsis">
      records_config
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.tests.services.test_records_manager.TestRecordsManager.service_class" class="md-nav__link">
    <span class="md-ellipsis">
      service_class
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.tests.services.test_records_manager.TestRecordsManager.test_records_manager_initialization" class="md-nav__link">
    <span class="md-ellipsis">
      test_records_manager_initialization
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperftestsservicestest_system_controller" class="md-nav__link">
    <span class="md-ellipsis">
      aiperf.tests.services.test_system_controller
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.tests.services.test_system_controller" class="md-nav__link">
    <span class="md-ellipsis">
      test_system_controller
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.tests.services.test_system_controller.SystemControllerTestConfig" class="md-nav__link">
    <span class="md-ellipsis">
      SystemControllerTestConfig
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.tests.services.test_system_controller.TestSystemController" class="md-nav__link">
    <span class="md-ellipsis">
      TestSystemController
    </span>
  </a>
  
    <nav class="md-nav" aria-label="TestSystemController">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#aiperf.tests.services.test_system_controller.TestSystemController.controller_config" class="md-nav__link">
    <span class="md-ellipsis">
      controller_config
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.tests.services.test_system_controller.TestSystemController.service_class" class="md-nav__link">
    <span class="md-ellipsis">
      service_class
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.tests.services.test_system_controller.TestSystemController.service_manager_with_multiprocess" class="md-nav__link">
    <span class="md-ellipsis">
      service_manager_with_multiprocess
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.tests.services.test_system_controller.TestSystemController.test_controller_subscriptions" class="md-nav__link">
    <span class="md-ellipsis">
      test_controller_subscriptions
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.tests.services.test_system_controller.TestSystemController.test_service_run_does_start" class="md-nav__link">
    <span class="md-ellipsis">
      test_service_run_does_start
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperftestsservicestest_timing_manager" class="md-nav__link">
    <span class="md-ellipsis">
      aiperf.tests.services.test_timing_manager
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.tests.services.test_timing_manager" class="md-nav__link">
    <span class="md-ellipsis">
      test_timing_manager
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.tests.services.test_timing_manager.TestTimingManager" class="md-nav__link">
    <span class="md-ellipsis">
      TestTimingManager
    </span>
  </a>
  
    <nav class="md-nav" aria-label="TestTimingManager">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#aiperf.tests.services.test_timing_manager.TestTimingManager.service_class" class="md-nav__link">
    <span class="md-ellipsis">
      service_class
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.tests.services.test_timing_manager.TestTimingManager.test_timing_manager_initialization" class="md-nav__link">
    <span class="md-ellipsis">
      test_timing_manager_initialization
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.tests.services.test_timing_manager.TestTimingManager.timing_config" class="md-nav__link">
    <span class="md-ellipsis">
      timing_config
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.tests.services.test_timing_manager.TimingManagerTestConfig" class="md-nav__link">
    <span class="md-ellipsis">
      TimingManagerTestConfig
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperftestsservicestest_worker" class="md-nav__link">
    <span class="md-ellipsis">
      aiperf.tests.services.test_worker
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.tests.services.test_worker" class="md-nav__link">
    <span class="md-ellipsis">
      test_worker
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.tests.services.test_worker.TestWorker" class="md-nav__link">
    <span class="md-ellipsis">
      TestWorker
    </span>
  </a>
  
    <nav class="md-nav" aria-label="TestWorker">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#aiperf.tests.services.test_worker.TestWorker.service_class" class="md-nav__link">
    <span class="md-ellipsis">
      service_class
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.tests.services.test_worker.TestWorker.test_worker_initialization" class="md-nav__link">
    <span class="md-ellipsis">
      test_worker_initialization
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.tests.services.test_worker.TestWorker.worker_config" class="md-nav__link">
    <span class="md-ellipsis">
      worker_config
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.tests.services.test_worker.WorkerTestConfig" class="md-nav__link">
    <span class="md-ellipsis">
      WorkerTestConfig
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperftestsservicestest_worker_manager" class="md-nav__link">
    <span class="md-ellipsis">
      aiperf.tests.services.test_worker_manager
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.tests.services.test_worker_manager" class="md-nav__link">
    <span class="md-ellipsis">
      test_worker_manager
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.tests.services.test_worker_manager.TestWorkerManager" class="md-nav__link">
    <span class="md-ellipsis">
      TestWorkerManager
    </span>
  </a>
  
    <nav class="md-nav" aria-label="TestWorkerManager">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#aiperf.tests.services.test_worker_manager.TestWorkerManager.service_class" class="md-nav__link">
    <span class="md-ellipsis">
      service_class
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.tests.services.test_worker_manager.TestWorkerManager.test_worker_manager_initialization" class="md-nav__link">
    <span class="md-ellipsis">
      test_worker_manager_initialization
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aiperf.tests.services.test_worker_manager.TestWorkerManager.worker_manager_config" class="md-nav__link">
    <span class="md-ellipsis">
      worker_manager_config
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.tests.services.test_worker_manager.WorkerManagerTestConfig" class="md-nav__link">
    <span class="md-ellipsis">
      WorkerManagerTestConfig
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperfteststest_aiperf_task" class="md-nav__link">
    <span class="md-ellipsis">
      aiperf.tests.test_aiperf_task
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.tests.test_aiperf_task" class="md-nav__link">
    <span class="md-ellipsis">
      test_aiperf_task
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperfteststest_audio_generator" class="md-nav__link">
    <span class="md-ellipsis">
      aiperf.tests.test_audio_generator
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.tests.test_audio_generator" class="md-nav__link">
    <span class="md-ellipsis">
      test_audio_generator
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.tests.test_audio_generator.decode_audio" class="md-nav__link">
    <span class="md-ellipsis">
      decode_audio
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperfteststest_benchmark_duration_metric" class="md-nav__link">
    <span class="md-ellipsis">
      aiperf.tests.test_benchmark_duration_metric
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.tests.test_benchmark_duration_metric" class="md-nav__link">
    <span class="md-ellipsis">
      test_benchmark_duration_metric
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperfteststest_hooks" class="md-nav__link">
    <span class="md-ellipsis">
      aiperf.tests.test_hooks
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.tests.test_hooks" class="md-nav__link">
    <span class="md-ellipsis">
      test_hooks
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.tests.test_hooks.test_hook_decorators" class="md-nav__link">
    <span class="md-ellipsis">
      test_hook_decorators
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.tests.test_hooks.test_hook_inheritance" class="md-nav__link">
    <span class="md-ellipsis">
      test_hook_inheritance
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.tests.test_hooks.test_hook_ordering" class="md-nav__link">
    <span class="md-ellipsis">
      test_hook_ordering
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.tests.test_hooks.test_inheritance_hook_order" class="md-nav__link">
    <span class="md-ellipsis">
      test_inheritance_hook_order
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.tests.test_hooks.test_inheritance_hook_override" class="md-nav__link">
    <span class="md-ellipsis">
      test_inheritance_hook_override
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.tests.test_hooks.test_instance_additional_hooks" class="md-nav__link">
    <span class="md-ellipsis">
      test_instance_additional_hooks
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.tests.test_hooks.test_instance_additional_supported_hooks" class="md-nav__link">
    <span class="md-ellipsis">
      test_instance_additional_supported_hooks
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.tests.test_hooks.test_unsupported_hook_decorator" class="md-nav__link">
    <span class="md-ellipsis">
      test_unsupported_hook_decorator
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperfteststest_image_generator" class="md-nav__link">
    <span class="md-ellipsis">
      aiperf.tests.test_image_generator
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.tests.test_image_generator" class="md-nav__link">
    <span class="md-ellipsis">
      test_image_generator
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperfteststest_max_response_metric" class="md-nav__link">
    <span class="md-ellipsis">
      aiperf.tests.test_max_response_metric
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.tests.test_max_response_metric" class="md-nav__link">
    <span class="md-ellipsis">
      test_max_response_metric
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperfteststest_messages" class="md-nav__link">
    <span class="md-ellipsis">
      aiperf.tests.test_messages
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.tests.test_messages" class="md-nav__link">
    <span class="md-ellipsis">
      test_messages
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperfteststest_metric_summary" class="md-nav__link">
    <span class="md-ellipsis">
      aiperf.tests.test_metric_summary
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.tests.test_metric_summary" class="md-nav__link">
    <span class="md-ellipsis">
      test_metric_summary
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperfteststest_min_request_metric" class="md-nav__link">
    <span class="md-ellipsis">
      aiperf.tests.test_min_request_metric
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.tests.test_min_request_metric" class="md-nav__link">
    <span class="md-ellipsis">
      test_min_request_metric
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperfteststest_prompt_generator" class="md-nav__link">
    <span class="md-ellipsis">
      aiperf.tests.test_prompt_generator
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.tests.test_prompt_generator" class="md-nav__link">
    <span class="md-ellipsis">
      test_prompt_generator
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperfteststest_records" class="md-nav__link">
    <span class="md-ellipsis">
      aiperf.tests.test_records
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.tests.test_records" class="md-nav__link">
    <span class="md-ellipsis">
      test_records
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.tests.test_records.test_record_dataclass" class="md-nav__link">
    <span class="md-ellipsis">
      test_record_dataclass
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.tests.test_records.test_records_add_and_get_records" class="md-nav__link">
    <span class="md-ellipsis">
      test_records_add_and_get_records
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.tests.test_records.test_records_multiple_adds" class="md-nav__link">
    <span class="md-ellipsis">
      test_records_multiple_adds
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.tests.test_records.test_records_serialization_and_deserialization" class="md-nav__link">
    <span class="md-ellipsis">
      test_records_serialization_and_deserialization
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.tests.test_records.test_transaction_dataclass" class="md-nav__link">
    <span class="md-ellipsis">
      test_transaction_dataclass
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperfteststest_request_latency_metric" class="md-nav__link">
    <span class="md-ellipsis">
      aiperf.tests.test_request_latency_metric
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.tests.test_request_latency_metric" class="md-nav__link">
    <span class="md-ellipsis">
      test_request_latency_metric
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperfteststest_tokenizer" class="md-nav__link">
    <span class="md-ellipsis">
      aiperf.tests.test_tokenizer
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.tests.test_tokenizer" class="md-nav__link">
    <span class="md-ellipsis">
      test_tokenizer
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperfteststest_ttft_metric" class="md-nav__link">
    <span class="md-ellipsis">
      aiperf.tests.test_ttft_metric
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.tests.test_ttft_metric" class="md-nav__link">
    <span class="md-ellipsis">
      test_ttft_metric
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperfteststest_ttst_metric" class="md-nav__link">
    <span class="md-ellipsis">
      aiperf.tests.test_ttst_metric
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.tests.test_ttst_metric" class="md-nav__link">
    <span class="md-ellipsis">
      test_ttst_metric
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperftestsutilsasync_test_utils" class="md-nav__link">
    <span class="md-ellipsis">
      aiperf.tests.utils.async_test_utils
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.tests.utils.async_test_utils" class="md-nav__link">
    <span class="md-ellipsis">
      async_test_utils
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.tests.utils.async_test_utils.async_fixture" class="md-nav__link">
    <span class="md-ellipsis">
      async_fixture
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.tests.utils.async_test_utils.async_noop" class="md-nav__link">
    <span class="md-ellipsis">
      async_noop
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperftestsutilsmetric_test_utils" class="md-nav__link">
    <span class="md-ellipsis">
      aiperf.tests.utils.metric_test_utils
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aiperf.tests.utils.metric_test_utils" class="md-nav__link">
    <span class="md-ellipsis">
      metric_test_utils
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  



<h1 id="api-reference">API Reference<a class="headerlink" href="#api-reference" title="Permanent link">&para;</a></h1>
<p>This page contains the API documentation for all Python modules in the codebase (excluding <strong>init</strong>.py files).</p>
<h2 id="aiperfcli">aiperf.cli<a class="headerlink" href="#aiperfcli" title="Permanent link">&para;</a></h2>


<div class="doc doc-object doc-module">



<a id="aiperf.cli"></a>
    <div class="doc doc-contents first">









  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h2 id="aiperf.cli.main" class="doc doc-heading">
            <code class=" language-python"><span class="n">main</span><span class="p">()</span></code>

<a href="#aiperf.cli.main" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">

        <p>Main entry point for the AIPerf system.</p>


            <details class="quote">
              <summary>Source code in <code>aiperf/cli.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">main</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Main entry point for the AIPerf system.&quot;&quot;&quot;</span>
    <span class="n">parser</span> <span class="o">=</span> <span class="n">ArgumentParser</span><span class="p">(</span><span class="n">description</span><span class="o">=</span><span class="s2">&quot;AIPerf Benchmarking System&quot;</span><span class="p">)</span>
    <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s2">&quot;--config&quot;</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="nb">str</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s2">&quot;Path to configuration file&quot;</span><span class="p">)</span>
    <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span>
        <span class="s2">&quot;--log-level&quot;</span><span class="p">,</span>
        <span class="nb">type</span><span class="o">=</span><span class="nb">str</span><span class="p">,</span>
        <span class="n">default</span><span class="o">=</span><span class="s2">&quot;INFO&quot;</span><span class="p">,</span>
        <span class="n">choices</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;DEBUG&quot;</span><span class="p">,</span> <span class="s2">&quot;INFO&quot;</span><span class="p">,</span> <span class="s2">&quot;WARNING&quot;</span><span class="p">,</span> <span class="s2">&quot;ERROR&quot;</span><span class="p">,</span> <span class="s2">&quot;CRITICAL&quot;</span><span class="p">],</span>
        <span class="n">help</span><span class="o">=</span><span class="s2">&quot;Set the logging level&quot;</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span>
        <span class="s2">&quot;--run-type&quot;</span><span class="p">,</span>
        <span class="nb">type</span><span class="o">=</span><span class="nb">str</span><span class="p">,</span>
        <span class="n">default</span><span class="o">=</span><span class="s2">&quot;process&quot;</span><span class="p">,</span>
        <span class="n">choices</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;process&quot;</span><span class="p">,</span> <span class="s2">&quot;k8s&quot;</span><span class="p">],</span>
        <span class="n">help</span><span class="o">=</span><span class="s2">&quot;Process manager backend to use &quot;</span>
        <span class="s2">&quot;(multiprocessing: &#39;process&#39;, or kubernetes: &#39;k8s&#39;)&quot;</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">args</span> <span class="o">=</span> <span class="n">parser</span><span class="o">.</span><span class="n">parse_args</span><span class="p">()</span>

    <span class="c1"># Set logging level for the root logger (affects all loggers)</span>
    <span class="n">logging</span><span class="o">.</span><span class="n">root</span><span class="o">.</span><span class="n">setLevel</span><span class="p">(</span><span class="nb">getattr</span><span class="p">(</span><span class="n">logging</span><span class="p">,</span> <span class="n">args</span><span class="o">.</span><span class="n">log_level</span><span class="p">))</span>

    <span class="c1"># Set up logging to use Rich</span>
    <span class="n">handler</span> <span class="o">=</span> <span class="n">RichHandler</span><span class="p">(</span>
        <span class="n">rich_tracebacks</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">show_path</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">console</span><span class="o">=</span><span class="n">Console</span><span class="p">(),</span>
        <span class="n">tracebacks_show_locals</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">logging</span><span class="o">.</span><span class="n">root</span><span class="o">.</span><span class="n">addHandler</span><span class="p">(</span><span class="n">handler</span><span class="p">)</span>

    <span class="c1"># Load configuration</span>
    <span class="n">config</span> <span class="o">=</span> <span class="n">ServiceConfig</span><span class="p">(</span>
        <span class="n">service_run_type</span><span class="o">=</span><span class="n">args</span><span class="o">.</span><span class="n">run_type</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="k">if</span> <span class="n">args</span><span class="o">.</span><span class="n">config</span><span class="p">:</span>
        <span class="c1"># In a real implementation, this would load from the specified file</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Loading configuration from </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">args</span><span class="o">.</span><span class="n">config</span><span class="p">)</span>
        <span class="c1"># config.load_from_file(args.config)</span>

    <span class="c1"># Create and start the system controller</span>

    <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Starting AIPerf System&quot;</span><span class="p">)</span>
    <span class="n">bootstrap_and_run_service</span><span class="p">(</span><span class="n">SystemController</span><span class="p">,</span> <span class="n">service_config</span><span class="o">=</span><span class="n">config</span><span class="p">)</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;AIPerf System exited&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div><h2 id="aiperfcommonbootstrap">aiperf.common.bootstrap<a class="headerlink" href="#aiperfcommonbootstrap" title="Permanent link">&para;</a></h2>


<div class="doc doc-object doc-module">



<a id="aiperf.common.bootstrap"></a>
    <div class="doc doc-contents first">









  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h2 id="aiperf.common.bootstrap.bootstrap_and_run_service" class="doc doc-heading">
            <code class=" language-python"><span class="n">bootstrap_and_run_service</span><span class="p">(</span><span class="n">service_class</span><span class="p">,</span> <span class="n">service_config</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

<a href="#aiperf.common.bootstrap.bootstrap_and_run_service" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">

        <p>Bootstrap the service and run it.</p>
<p>This function will load the service configuration,
create an instance of the service, and run it.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>service_class</code>
            </td>
            <td>
                  <code><span title="type">type</span>[<a class="autorefs autorefs-internal" title="BaseService (aiperf.common.service.base_service.BaseService)" href="#aiperf.common.service.base_service.BaseService">BaseService</a>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The service class of the service to run</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>service_config</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="ServiceConfig (aiperf.common.config.service_config.ServiceConfig)" href="#aiperf.common.config.service_config.ServiceConfig">ServiceConfig</a> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The service configuration to use, if not provided, the service
configuration will be loaded from the config file</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>aiperf/common/bootstrap.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">bootstrap_and_run_service</span><span class="p">(</span>
    <span class="n">service_class</span><span class="p">:</span> <span class="nb">type</span><span class="p">[</span><span class="n">BaseService</span><span class="p">],</span> <span class="n">service_config</span><span class="p">:</span> <span class="n">ServiceConfig</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Bootstrap the service and run it.</span>

<span class="sd">    This function will load the service configuration,</span>
<span class="sd">    create an instance of the service, and run it.</span>

<span class="sd">    Args:</span>
<span class="sd">        service_class: The service class of the service to run</span>
<span class="sd">        service_config: The service configuration to use, if not provided, the service</span>
<span class="sd">            configuration will be loaded from the config file</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="kn">import</span><span class="w"> </span><span class="nn">uvloop</span>

    <span class="c1"># Load the service configuration</span>
    <span class="k">if</span> <span class="n">service_config</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="kn">from</span><span class="w"> </span><span class="nn">aiperf.common.config.loader</span><span class="w"> </span><span class="kn">import</span> <span class="n">load_service_config</span>

        <span class="n">service_config</span> <span class="o">=</span> <span class="n">load_service_config</span><span class="p">()</span>

    <span class="c1"># Create the service instance and run it</span>
    <span class="n">service</span> <span class="o">=</span> <span class="n">service_class</span><span class="p">(</span><span class="n">service_config</span><span class="o">=</span><span class="n">service_config</span><span class="p">)</span>
    <span class="n">uvloop</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">service</span><span class="o">.</span><span class="n">run_forever</span><span class="p">())</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div><h2 id="aiperfcommoncommsbase">aiperf.common.comms.base<a class="headerlink" href="#aiperfcommoncommsbase" title="Permanent link">&para;</a></h2>


<div class="doc doc-object doc-module">



<a id="aiperf.common.comms.base"></a>
    <div class="doc doc-contents first">









  <div class="doc doc-children">








<div class="doc doc-object doc-class">



<h2 id="aiperf.common.comms.base.BaseCommunication" class="doc doc-heading">
            <code>BaseCommunication</code>


<a href="#aiperf.common.comms.base.BaseCommunication" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="abc.ABC">ABC</span></code></p>


        <p>Base class for specifying the base communication layer for AIPerf components.</p>







              <details class="quote">
                <summary>Source code in <code>aiperf/common/comms/base.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 20</span>
<span class="normal"> 21</span>
<span class="normal"> 22</span>
<span class="normal"> 23</span>
<span class="normal"> 24</span>
<span class="normal"> 25</span>
<span class="normal"> 26</span>
<span class="normal"> 27</span>
<span class="normal"> 28</span>
<span class="normal"> 29</span>
<span class="normal"> 30</span>
<span class="normal"> 31</span>
<span class="normal"> 32</span>
<span class="normal"> 33</span>
<span class="normal"> 34</span>
<span class="normal"> 35</span>
<span class="normal"> 36</span>
<span class="normal"> 37</span>
<span class="normal"> 38</span>
<span class="normal"> 39</span>
<span class="normal"> 40</span>
<span class="normal"> 41</span>
<span class="normal"> 42</span>
<span class="normal"> 43</span>
<span class="normal"> 44</span>
<span class="normal"> 45</span>
<span class="normal"> 46</span>
<span class="normal"> 47</span>
<span class="normal"> 48</span>
<span class="normal"> 49</span>
<span class="normal"> 50</span>
<span class="normal"> 51</span>
<span class="normal"> 52</span>
<span class="normal"> 53</span>
<span class="normal"> 54</span>
<span class="normal"> 55</span>
<span class="normal"> 56</span>
<span class="normal"> 57</span>
<span class="normal"> 58</span>
<span class="normal"> 59</span>
<span class="normal"> 60</span>
<span class="normal"> 61</span>
<span class="normal"> 62</span>
<span class="normal"> 63</span>
<span class="normal"> 64</span>
<span class="normal"> 65</span>
<span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">BaseCommunication</span><span class="p">(</span><span class="n">ABC</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Base class for specifying the base communication layer for AIPerf components.&quot;&quot;&quot;</span>

    <span class="nd">@abstractmethod</span>
    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">initialize</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Initialize communication channels.&quot;&quot;&quot;</span>
        <span class="k">pass</span>

    <span class="nd">@property</span>
    <span class="nd">@abstractmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">is_initialized</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Check if communication channels are initialized.</span>

<span class="sd">        Returns:</span>
<span class="sd">            True if communication channels are initialized, False otherwise</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">pass</span>

    <span class="nd">@property</span>
    <span class="nd">@abstractmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">is_shutdown</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Check if communication channels are shutdown.</span>

<span class="sd">        Returns:</span>
<span class="sd">            True if communication channels are shutdown, False otherwise</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">pass</span>

    <span class="nd">@abstractmethod</span>
    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">shutdown</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Gracefully shutdown communication channels.&quot;&quot;&quot;</span>
        <span class="k">pass</span>

    <span class="nd">@abstractmethod</span>
    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">create_clients</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">client_types</span><span class="p">:</span> <span class="n">ClientType</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Create the communication clients.</span>

<span class="sd">        Args:</span>
<span class="sd">            *client_types: The client types to create</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">pass</span>

    <span class="nd">@abstractmethod</span>
    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">publish</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">topic</span><span class="p">:</span> <span class="n">Topic</span><span class="p">,</span> <span class="n">message</span><span class="p">:</span> <span class="n">Message</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Publish a message to a topic.</span>

<span class="sd">        Args:</span>
<span class="sd">            topic: Topic to publish to</span>
<span class="sd">            message: Message to publish</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">pass</span>

    <span class="nd">@abstractmethod</span>
    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">subscribe</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">topic</span><span class="p">:</span> <span class="n">Topic</span><span class="p">,</span>
        <span class="n">callback</span><span class="p">:</span> <span class="n">Callable</span><span class="p">[[</span><span class="n">Message</span><span class="p">],</span> <span class="n">Coroutine</span><span class="p">[</span><span class="n">Any</span><span class="p">,</span> <span class="n">Any</span><span class="p">,</span> <span class="kc">None</span><span class="p">]],</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Subscribe to a topic.</span>

<span class="sd">        Args:</span>
<span class="sd">            topic: Topic to subscribe to</span>
<span class="sd">            callback: Function to call when a message is received</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">pass</span>

    <span class="nd">@abstractmethod</span>
    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">request</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">topic</span><span class="p">:</span> <span class="n">Topic</span><span class="p">,</span>
        <span class="n">message</span><span class="p">:</span> <span class="n">Message</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Message</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Send a request and wait for a response.</span>

<span class="sd">        Args:</span>
<span class="sd">            topic: Topic to send request to</span>
<span class="sd">            message: Message to send</span>

<span class="sd">        Returns:</span>
<span class="sd">            Response message if successful</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">pass</span>

    <span class="nd">@abstractmethod</span>
    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">push</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">topic</span><span class="p">:</span> <span class="n">Topic</span><span class="p">,</span> <span class="n">message</span><span class="p">:</span> <span class="n">Message</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Push data to a target.</span>

<span class="sd">        Args:</span>
<span class="sd">            topic: Topic to push to</span>
<span class="sd">            message: Message to be pushed</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">pass</span>

    <span class="nd">@abstractmethod</span>
    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">register_pull_callback</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">message_type</span><span class="p">:</span> <span class="n">MessageType</span><span class="p">,</span>
        <span class="n">callback</span><span class="p">:</span> <span class="n">Callable</span><span class="p">[[</span><span class="n">Message</span><span class="p">],</span> <span class="n">Coroutine</span><span class="p">[</span><span class="n">Any</span><span class="p">,</span> <span class="n">Any</span><span class="p">,</span> <span class="kc">None</span><span class="p">]],</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Register a callback for a pull client.</span>

<span class="sd">        Args:</span>
<span class="sd">            message_type: The message type to register the callback for</span>
<span class="sd">            callback: The callback to register</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">pass</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">







<div class="doc doc-object doc-attribute">



<h3 id="aiperf.common.comms.base.BaseCommunication.is_initialized" class="doc doc-heading">
            <code class=" language-python"><span class="n">is_initialized</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-abstractmethod"><code>abstractmethod</code></small>
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

<a href="#aiperf.common.comms.base.BaseCommunication.is_initialized" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Check if communication channels are initialized.</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>True if communication channels are initialized, False otherwise</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="aiperf.common.comms.base.BaseCommunication.is_shutdown" class="doc doc-heading">
            <code class=" language-python"><span class="n">is_shutdown</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-abstractmethod"><code>abstractmethod</code></small>
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

<a href="#aiperf.common.comms.base.BaseCommunication.is_shutdown" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Check if communication channels are shutdown.</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>True if communication channels are shutdown, False otherwise</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

    </div>

</div>



<div class="doc doc-object doc-function">


<h3 id="aiperf.common.comms.base.BaseCommunication.create_clients" class="doc doc-heading">
            <code class=" language-python"><span class="n">create_clients</span><span class="p">(</span><span class="o">*</span><span class="n">client_types</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-abstractmethod"><code>abstractmethod</code></small>
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#aiperf.common.comms.base.BaseCommunication.create_clients" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Create the communication clients.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>*client_types</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="ClientType = PubClientType | SubClientType | PushClientType | PullClientType | ReqClientType | RepClientType

  
      module-attribute
   (aiperf.common.comms.client_enums.ClientType)" href="#aiperf.common.comms.client_enums.ClientType">ClientType</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The client types to create</p>
              </div>
            </td>
            <td>
                  <code>()</code>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>aiperf/common/comms/base.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@abstractmethod</span>
<span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">create_clients</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">client_types</span><span class="p">:</span> <span class="n">ClientType</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Create the communication clients.</span>

<span class="sd">    Args:</span>
<span class="sd">        *client_types: The client types to create</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">pass</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="aiperf.common.comms.base.BaseCommunication.initialize" class="doc doc-heading">
            <code class=" language-python"><span class="n">initialize</span><span class="p">()</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-abstractmethod"><code>abstractmethod</code></small>
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#aiperf.common.comms.base.BaseCommunication.initialize" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Initialize communication channels.</p>


            <details class="quote">
              <summary>Source code in <code>aiperf/common/comms/base.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@abstractmethod</span>
<span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">initialize</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Initialize communication channels.&quot;&quot;&quot;</span>
    <span class="k">pass</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="aiperf.common.comms.base.BaseCommunication.publish" class="doc doc-heading">
            <code class=" language-python"><span class="n">publish</span><span class="p">(</span><span class="n">topic</span><span class="p">,</span> <span class="n">message</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-abstractmethod"><code>abstractmethod</code></small>
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#aiperf.common.comms.base.BaseCommunication.publish" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Publish a message to a topic.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>topic</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="Topic (aiperf.common.enums.Topic)" href="#aiperf.common.enums.Topic">Topic</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Topic to publish to</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>message</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="Message (aiperf.common.messages.Message)" href="#aiperf.common.messages.Message">Message</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Message to publish</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>aiperf/common/comms/base.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@abstractmethod</span>
<span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">publish</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">topic</span><span class="p">:</span> <span class="n">Topic</span><span class="p">,</span> <span class="n">message</span><span class="p">:</span> <span class="n">Message</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Publish a message to a topic.</span>

<span class="sd">    Args:</span>
<span class="sd">        topic: Topic to publish to</span>
<span class="sd">        message: Message to publish</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">pass</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="aiperf.common.comms.base.BaseCommunication.push" class="doc doc-heading">
            <code class=" language-python"><span class="n">push</span><span class="p">(</span><span class="n">topic</span><span class="p">,</span> <span class="n">message</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-abstractmethod"><code>abstractmethod</code></small>
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#aiperf.common.comms.base.BaseCommunication.push" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Push data to a target.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>topic</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="Topic (aiperf.common.enums.Topic)" href="#aiperf.common.enums.Topic">Topic</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Topic to push to</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>message</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="Message (aiperf.common.messages.Message)" href="#aiperf.common.messages.Message">Message</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Message to be pushed</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>aiperf/common/comms/base.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@abstractmethod</span>
<span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">push</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">topic</span><span class="p">:</span> <span class="n">Topic</span><span class="p">,</span> <span class="n">message</span><span class="p">:</span> <span class="n">Message</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Push data to a target.</span>

<span class="sd">    Args:</span>
<span class="sd">        topic: Topic to push to</span>
<span class="sd">        message: Message to be pushed</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">pass</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="aiperf.common.comms.base.BaseCommunication.register_pull_callback" class="doc doc-heading">
            <code class=" language-python"><span class="n">register_pull_callback</span><span class="p">(</span><span class="n">message_type</span><span class="p">,</span> <span class="n">callback</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-abstractmethod"><code>abstractmethod</code></small>
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#aiperf.common.comms.base.BaseCommunication.register_pull_callback" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Register a callback for a pull client.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>message_type</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="MessageType (aiperf.common.enums.MessageType)" href="#aiperf.common.enums.MessageType">MessageType</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The message type to register the callback for</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>callback</code>
            </td>
            <td>
                  <code><span title="collections.abc.Callable">Callable</span>[[<a class="autorefs autorefs-internal" title="Message (aiperf.common.messages.Message)" href="#aiperf.common.messages.Message">Message</a>], <span title="collections.abc.Coroutine">Coroutine</span>[<span title="typing.Any">Any</span>, <span title="typing.Any">Any</span>, None]]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The callback to register</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>aiperf/common/comms/base.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@abstractmethod</span>
<span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">register_pull_callback</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">message_type</span><span class="p">:</span> <span class="n">MessageType</span><span class="p">,</span>
    <span class="n">callback</span><span class="p">:</span> <span class="n">Callable</span><span class="p">[[</span><span class="n">Message</span><span class="p">],</span> <span class="n">Coroutine</span><span class="p">[</span><span class="n">Any</span><span class="p">,</span> <span class="n">Any</span><span class="p">,</span> <span class="kc">None</span><span class="p">]],</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Register a callback for a pull client.</span>

<span class="sd">    Args:</span>
<span class="sd">        message_type: The message type to register the callback for</span>
<span class="sd">        callback: The callback to register</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">pass</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="aiperf.common.comms.base.BaseCommunication.request" class="doc doc-heading">
            <code class=" language-python"><span class="n">request</span><span class="p">(</span><span class="n">topic</span><span class="p">,</span> <span class="n">message</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-abstractmethod"><code>abstractmethod</code></small>
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#aiperf.common.comms.base.BaseCommunication.request" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Send a request and wait for a response.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>topic</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="Topic (aiperf.common.enums.Topic)" href="#aiperf.common.enums.Topic">Topic</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Topic to send request to</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>message</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="Message (aiperf.common.messages.Message)" href="#aiperf.common.messages.Message">Message</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Message to send</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="Message (aiperf.common.messages.Message)" href="#aiperf.common.messages.Message">Message</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Response message if successful</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>aiperf/common/comms/base.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@abstractmethod</span>
<span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">request</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">topic</span><span class="p">:</span> <span class="n">Topic</span><span class="p">,</span>
    <span class="n">message</span><span class="p">:</span> <span class="n">Message</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Message</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Send a request and wait for a response.</span>

<span class="sd">    Args:</span>
<span class="sd">        topic: Topic to send request to</span>
<span class="sd">        message: Message to send</span>

<span class="sd">    Returns:</span>
<span class="sd">        Response message if successful</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">pass</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="aiperf.common.comms.base.BaseCommunication.shutdown" class="doc doc-heading">
            <code class=" language-python"><span class="n">shutdown</span><span class="p">()</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-abstractmethod"><code>abstractmethod</code></small>
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#aiperf.common.comms.base.BaseCommunication.shutdown" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Gracefully shutdown communication channels.</p>


            <details class="quote">
              <summary>Source code in <code>aiperf/common/comms/base.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@abstractmethod</span>
<span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">shutdown</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Gracefully shutdown communication channels.&quot;&quot;&quot;</span>
    <span class="k">pass</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="aiperf.common.comms.base.BaseCommunication.subscribe" class="doc doc-heading">
            <code class=" language-python"><span class="n">subscribe</span><span class="p">(</span><span class="n">topic</span><span class="p">,</span> <span class="n">callback</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-abstractmethod"><code>abstractmethod</code></small>
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#aiperf.common.comms.base.BaseCommunication.subscribe" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Subscribe to a topic.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>topic</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="Topic (aiperf.common.enums.Topic)" href="#aiperf.common.enums.Topic">Topic</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Topic to subscribe to</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>callback</code>
            </td>
            <td>
                  <code><span title="collections.abc.Callable">Callable</span>[[<a class="autorefs autorefs-internal" title="Message (aiperf.common.messages.Message)" href="#aiperf.common.messages.Message">Message</a>], <span title="collections.abc.Coroutine">Coroutine</span>[<span title="typing.Any">Any</span>, <span title="typing.Any">Any</span>, None]]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Function to call when a message is received</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>aiperf/common/comms/base.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">72</span>
<span class="normal">73</span>
<span class="normal">74</span>
<span class="normal">75</span>
<span class="normal">76</span>
<span class="normal">77</span>
<span class="normal">78</span>
<span class="normal">79</span>
<span class="normal">80</span>
<span class="normal">81</span>
<span class="normal">82</span>
<span class="normal">83</span>
<span class="normal">84</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@abstractmethod</span>
<span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">subscribe</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">topic</span><span class="p">:</span> <span class="n">Topic</span><span class="p">,</span>
    <span class="n">callback</span><span class="p">:</span> <span class="n">Callable</span><span class="p">[[</span><span class="n">Message</span><span class="p">],</span> <span class="n">Coroutine</span><span class="p">[</span><span class="n">Any</span><span class="p">,</span> <span class="n">Any</span><span class="p">,</span> <span class="kc">None</span><span class="p">]],</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Subscribe to a topic.</span>

<span class="sd">    Args:</span>
<span class="sd">        topic: Topic to subscribe to</span>
<span class="sd">        callback: Function to call when a message is received</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">pass</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>




  </div>

    </div>

</div><h2 id="aiperfcommoncommsclient_enums">aiperf.common.comms.client_enums<a class="headerlink" href="#aiperfcommoncommsclient_enums" title="Permanent link">&para;</a></h2>


<div class="doc doc-object doc-module">



<a id="aiperf.common.comms.client_enums"></a>
    <div class="doc doc-contents first">









  <div class="doc doc-children">







<div class="doc doc-object doc-attribute">



<h2 id="aiperf.common.comms.client_enums.ClientType" class="doc doc-heading">
            <code class=" language-python"><span class="n">ClientType</span> <span class="o">=</span> <span class="n">PubClientType</span> <span class="o">|</span> <span class="n">SubClientType</span> <span class="o">|</span> <span class="n">PushClientType</span> <span class="o">|</span> <span class="n">PullClientType</span> <span class="o">|</span> <span class="n">ReqClientType</span> <span class="o">|</span> <span class="n">RepClientType</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-module-attribute"><code>module-attribute</code></small>
  </span>

<a href="#aiperf.common.comms.client_enums.ClientType" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">

        <p>Union of all client types.</p>

    </div>

</div>


<div class="doc doc-object doc-class">



<h2 id="aiperf.common.comms.client_enums.PubClientType" class="doc doc-heading">
            <code>PubClientType</code>


<a href="#aiperf.common.comms.client_enums.PubClientType" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="CaseInsensitiveStrEnum (aiperf.common.enums.CaseInsensitiveStrEnum)" href="#aiperf.common.enums.CaseInsensitiveStrEnum">CaseInsensitiveStrEnum</a></code></p>


        <p>Enum for specifying the client type for publishing messages. Includes a helper method
for retrieving the appropriate client type based on the topic.</p>







              <details class="quote">
                <summary>Source code in <code>aiperf/common/comms/client_enums.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">PubClientType</span><span class="p">(</span><span class="n">CaseInsensitiveStrEnum</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Enum for specifying the client type for publishing messages. Includes a helper method</span>
<span class="sd">    for retrieving the appropriate client type based on the topic.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">CONTROLLER</span> <span class="o">=</span> <span class="s2">&quot;controller_pub&quot;</span>
    <span class="n">COMPONENT</span> <span class="o">=</span> <span class="s2">&quot;component_pub&quot;</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">from_topic</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">topic</span><span class="p">:</span> <span class="n">Topic</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;PubClientType&quot;</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Determine the appropriate ClientType based on topic.</span>

<span class="sd">        Args:</span>
<span class="sd">            topic: The topic to communicate on</span>

<span class="sd">        Returns:</span>
<span class="sd">            The appropriate ClientType for the given topic</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">match</span> <span class="n">topic</span><span class="p">:</span>
            <span class="k">case</span> <span class="p">(</span>
                <span class="n">Topic</span><span class="o">.</span><span class="n">HEARTBEAT</span>
                <span class="o">|</span> <span class="n">Topic</span><span class="o">.</span><span class="n">REGISTRATION</span>
                <span class="o">|</span> <span class="n">Topic</span><span class="o">.</span><span class="n">STATUS</span>
                <span class="o">|</span> <span class="n">Topic</span><span class="o">.</span><span class="n">RESPONSE</span>
                <span class="o">|</span> <span class="n">Topic</span><span class="o">.</span><span class="n">CREDITS_COMPLETE</span>
                <span class="o">|</span> <span class="n">Topic</span><span class="o">.</span><span class="n">PROFILE_PROGRESS</span>
                <span class="o">|</span> <span class="n">Topic</span><span class="o">.</span><span class="n">PROFILE_RESULTS</span>
                <span class="o">|</span> <span class="n">Topic</span><span class="o">.</span><span class="n">PROFILE_STATS</span>
            <span class="p">):</span>
                <span class="k">return</span> <span class="bp">cls</span><span class="o">.</span><span class="n">COMPONENT</span>
            <span class="k">case</span> <span class="n">Topic</span><span class="o">.</span><span class="n">COMMAND</span><span class="p">:</span>
                <span class="k">return</span> <span class="bp">cls</span><span class="o">.</span><span class="n">CONTROLLER</span>
            <span class="k">case</span><span class="w"> </span><span class="k">_</span><span class="p">:</span>
                <span class="k">raise</span> <span class="n">CommunicationClientNotFoundError</span><span class="p">(</span>
                    <span class="sa">f</span><span class="s2">&quot;No client type found for topic </span><span class="si">{</span><span class="n">topic</span><span class="si">}</span><span class="s2">&quot;</span>
                <span class="p">)</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h3 id="aiperf.common.comms.client_enums.PubClientType.from_topic" class="doc doc-heading">
            <code class=" language-python"><span class="n">from_topic</span><span class="p">(</span><span class="n">topic</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-classmethod"><code>classmethod</code></small>
  </span>

<a href="#aiperf.common.comms.client_enums.PubClientType.from_topic" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Determine the appropriate ClientType based on topic.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>topic</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="Topic (aiperf.common.enums.Topic)" href="#aiperf.common.enums.Topic">Topic</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The topic to communicate on</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="PubClientType (aiperf.common.comms.client_enums.PubClientType)" href="#aiperf.common.comms.client_enums.PubClientType">PubClientType</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The appropriate ClientType for the given topic</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>aiperf/common/comms/client_enums.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@classmethod</span>
<span class="k">def</span><span class="w"> </span><span class="nf">from_topic</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">topic</span><span class="p">:</span> <span class="n">Topic</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;PubClientType&quot;</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Determine the appropriate ClientType based on topic.</span>

<span class="sd">    Args:</span>
<span class="sd">        topic: The topic to communicate on</span>

<span class="sd">    Returns:</span>
<span class="sd">        The appropriate ClientType for the given topic</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">match</span> <span class="n">topic</span><span class="p">:</span>
        <span class="k">case</span> <span class="p">(</span>
            <span class="n">Topic</span><span class="o">.</span><span class="n">HEARTBEAT</span>
            <span class="o">|</span> <span class="n">Topic</span><span class="o">.</span><span class="n">REGISTRATION</span>
            <span class="o">|</span> <span class="n">Topic</span><span class="o">.</span><span class="n">STATUS</span>
            <span class="o">|</span> <span class="n">Topic</span><span class="o">.</span><span class="n">RESPONSE</span>
            <span class="o">|</span> <span class="n">Topic</span><span class="o">.</span><span class="n">CREDITS_COMPLETE</span>
            <span class="o">|</span> <span class="n">Topic</span><span class="o">.</span><span class="n">PROFILE_PROGRESS</span>
            <span class="o">|</span> <span class="n">Topic</span><span class="o">.</span><span class="n">PROFILE_RESULTS</span>
            <span class="o">|</span> <span class="n">Topic</span><span class="o">.</span><span class="n">PROFILE_STATS</span>
        <span class="p">):</span>
            <span class="k">return</span> <span class="bp">cls</span><span class="o">.</span><span class="n">COMPONENT</span>
        <span class="k">case</span> <span class="n">Topic</span><span class="o">.</span><span class="n">COMMAND</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">cls</span><span class="o">.</span><span class="n">CONTROLLER</span>
        <span class="k">case</span><span class="w"> </span><span class="k">_</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">CommunicationClientNotFoundError</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;No client type found for topic </span><span class="si">{</span><span class="n">topic</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="aiperf.common.comms.client_enums.PullClientType" class="doc doc-heading">
            <code>PullClientType</code>


<a href="#aiperf.common.comms.client_enums.PullClientType" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="CaseInsensitiveStrEnum (aiperf.common.enums.CaseInsensitiveStrEnum)" href="#aiperf.common.enums.CaseInsensitiveStrEnum">CaseInsensitiveStrEnum</a></code></p>


        <p>Enum for specifying the client type for pulling messages. Includes a helper method
for retrieving the appropriate client type based on the topic.</p>







              <details class="quote">
                <summary>Source code in <code>aiperf/common/comms/client_enums.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">PullClientType</span><span class="p">(</span><span class="n">CaseInsensitiveStrEnum</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Enum for specifying the client type for pulling messages. Includes a helper method</span>
<span class="sd">    for retrieving the appropriate client type based on the topic.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">INFERENCE_RESULTS</span> <span class="o">=</span> <span class="s2">&quot;inference_results_pull&quot;</span>
    <span class="n">CREDIT_DROP</span> <span class="o">=</span> <span class="s2">&quot;credit_drop_pull&quot;</span>
    <span class="n">CREDIT_RETURN</span> <span class="o">=</span> <span class="s2">&quot;credit_return_pull&quot;</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">from_message_type</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">message_type</span><span class="p">:</span> <span class="n">MessageType</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;PullClientType&quot;</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Determine the appropriate ClientType based on message type.</span>

<span class="sd">        Args:</span>
<span class="sd">            message_type: The message type to communicate on</span>

<span class="sd">        Returns:</span>
<span class="sd">            The appropriate ClientType for the given message type</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">match</span> <span class="n">message_type</span><span class="p">:</span>
            <span class="k">case</span> <span class="n">MessageType</span><span class="o">.</span><span class="n">CREDIT_DROP</span><span class="p">:</span>
                <span class="k">return</span> <span class="bp">cls</span><span class="o">.</span><span class="n">CREDIT_DROP</span>
            <span class="k">case</span> <span class="n">MessageType</span><span class="o">.</span><span class="n">CREDIT_RETURN</span><span class="p">:</span>
                <span class="k">return</span> <span class="bp">cls</span><span class="o">.</span><span class="n">CREDIT_RETURN</span>
            <span class="k">case</span> <span class="n">MessageType</span><span class="o">.</span><span class="n">INFERENCE_RESULTS</span><span class="p">:</span>
                <span class="k">return</span> <span class="bp">cls</span><span class="o">.</span><span class="n">INFERENCE_RESULTS</span>
            <span class="k">case</span><span class="w"> </span><span class="k">_</span><span class="p">:</span>
                <span class="k">raise</span> <span class="n">CommunicationClientNotFoundError</span><span class="p">(</span>
                    <span class="sa">f</span><span class="s2">&quot;No client type found for message type </span><span class="si">{</span><span class="n">message_type</span><span class="si">}</span><span class="s2">&quot;</span>
                <span class="p">)</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h3 id="aiperf.common.comms.client_enums.PullClientType.from_message_type" class="doc doc-heading">
            <code class=" language-python"><span class="n">from_message_type</span><span class="p">(</span><span class="n">message_type</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-classmethod"><code>classmethod</code></small>
  </span>

<a href="#aiperf.common.comms.client_enums.PullClientType.from_message_type" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Determine the appropriate ClientType based on message type.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>message_type</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="MessageType (aiperf.common.enums.MessageType)" href="#aiperf.common.enums.MessageType">MessageType</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The message type to communicate on</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="PullClientType (aiperf.common.comms.client_enums.PullClientType)" href="#aiperf.common.comms.client_enums.PullClientType">PullClientType</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The appropriate ClientType for the given message type</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>aiperf/common/comms/client_enums.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@classmethod</span>
<span class="k">def</span><span class="w"> </span><span class="nf">from_message_type</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">message_type</span><span class="p">:</span> <span class="n">MessageType</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;PullClientType&quot;</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Determine the appropriate ClientType based on message type.</span>

<span class="sd">    Args:</span>
<span class="sd">        message_type: The message type to communicate on</span>

<span class="sd">    Returns:</span>
<span class="sd">        The appropriate ClientType for the given message type</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">match</span> <span class="n">message_type</span><span class="p">:</span>
        <span class="k">case</span> <span class="n">MessageType</span><span class="o">.</span><span class="n">CREDIT_DROP</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">cls</span><span class="o">.</span><span class="n">CREDIT_DROP</span>
        <span class="k">case</span> <span class="n">MessageType</span><span class="o">.</span><span class="n">CREDIT_RETURN</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">cls</span><span class="o">.</span><span class="n">CREDIT_RETURN</span>
        <span class="k">case</span> <span class="n">MessageType</span><span class="o">.</span><span class="n">INFERENCE_RESULTS</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">cls</span><span class="o">.</span><span class="n">INFERENCE_RESULTS</span>
        <span class="k">case</span><span class="w"> </span><span class="k">_</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">CommunicationClientNotFoundError</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;No client type found for message type </span><span class="si">{</span><span class="n">message_type</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="aiperf.common.comms.client_enums.PushClientType" class="doc doc-heading">
            <code>PushClientType</code>


<a href="#aiperf.common.comms.client_enums.PushClientType" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="CaseInsensitiveStrEnum (aiperf.common.enums.CaseInsensitiveStrEnum)" href="#aiperf.common.enums.CaseInsensitiveStrEnum">CaseInsensitiveStrEnum</a></code></p>


        <p>Enum for specifying the client type for pushing messages. Includes a helper method
for retrieving the appropriate client type based on the topic.</p>







              <details class="quote">
                <summary>Source code in <code>aiperf/common/comms/client_enums.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">PushClientType</span><span class="p">(</span><span class="n">CaseInsensitiveStrEnum</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Enum for specifying the client type for pushing messages. Includes a helper method</span>
<span class="sd">    for retrieving the appropriate client type based on the topic.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">INFERENCE_RESULTS</span> <span class="o">=</span> <span class="s2">&quot;inference_results_push&quot;</span>
    <span class="n">CREDIT_DROP</span> <span class="o">=</span> <span class="s2">&quot;credit_drop_push&quot;</span>
    <span class="n">CREDIT_RETURN</span> <span class="o">=</span> <span class="s2">&quot;credit_return_push&quot;</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">from_topic</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">topic</span><span class="p">:</span> <span class="n">Topic</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;PushClientType&quot;</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Determine the appropriate ClientType based on communication type and topic.</span>

<span class="sd">        Args:</span>
<span class="sd">            topic: The topic to communicate on</span>

<span class="sd">        Returns:</span>
<span class="sd">            The appropriate ClientType for the given topic</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">match</span> <span class="n">topic</span><span class="p">:</span>
            <span class="k">case</span> <span class="n">Topic</span><span class="o">.</span><span class="n">CREDIT_DROP</span><span class="p">:</span>
                <span class="k">return</span> <span class="bp">cls</span><span class="o">.</span><span class="n">CREDIT_DROP</span>
            <span class="k">case</span> <span class="n">Topic</span><span class="o">.</span><span class="n">CREDIT_RETURN</span><span class="p">:</span>
                <span class="k">return</span> <span class="bp">cls</span><span class="o">.</span><span class="n">CREDIT_RETURN</span>
            <span class="k">case</span> <span class="n">Topic</span><span class="o">.</span><span class="n">INFERENCE_RESULTS</span><span class="p">:</span>
                <span class="k">return</span> <span class="bp">cls</span><span class="o">.</span><span class="n">INFERENCE_RESULTS</span>
            <span class="k">case</span><span class="w"> </span><span class="k">_</span><span class="p">:</span>
                <span class="k">raise</span> <span class="n">CommunicationClientNotFoundError</span><span class="p">(</span>
                    <span class="sa">f</span><span class="s2">&quot;No client type found for topic </span><span class="si">{</span><span class="n">topic</span><span class="si">}</span><span class="s2">&quot;</span>
                <span class="p">)</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h3 id="aiperf.common.comms.client_enums.PushClientType.from_topic" class="doc doc-heading">
            <code class=" language-python"><span class="n">from_topic</span><span class="p">(</span><span class="n">topic</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-classmethod"><code>classmethod</code></small>
  </span>

<a href="#aiperf.common.comms.client_enums.PushClientType.from_topic" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Determine the appropriate ClientType based on communication type and topic.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>topic</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="Topic (aiperf.common.enums.Topic)" href="#aiperf.common.enums.Topic">Topic</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The topic to communicate on</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="PushClientType (aiperf.common.comms.client_enums.PushClientType)" href="#aiperf.common.comms.client_enums.PushClientType">PushClientType</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The appropriate ClientType for the given topic</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>aiperf/common/comms/client_enums.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@classmethod</span>
<span class="k">def</span><span class="w"> </span><span class="nf">from_topic</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">topic</span><span class="p">:</span> <span class="n">Topic</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;PushClientType&quot;</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Determine the appropriate ClientType based on communication type and topic.</span>

<span class="sd">    Args:</span>
<span class="sd">        topic: The topic to communicate on</span>

<span class="sd">    Returns:</span>
<span class="sd">        The appropriate ClientType for the given topic</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">match</span> <span class="n">topic</span><span class="p">:</span>
        <span class="k">case</span> <span class="n">Topic</span><span class="o">.</span><span class="n">CREDIT_DROP</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">cls</span><span class="o">.</span><span class="n">CREDIT_DROP</span>
        <span class="k">case</span> <span class="n">Topic</span><span class="o">.</span><span class="n">CREDIT_RETURN</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">cls</span><span class="o">.</span><span class="n">CREDIT_RETURN</span>
        <span class="k">case</span> <span class="n">Topic</span><span class="o">.</span><span class="n">INFERENCE_RESULTS</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">cls</span><span class="o">.</span><span class="n">INFERENCE_RESULTS</span>
        <span class="k">case</span><span class="w"> </span><span class="k">_</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">CommunicationClientNotFoundError</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;No client type found for topic </span><span class="si">{</span><span class="n">topic</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="aiperf.common.comms.client_enums.RepClientType" class="doc doc-heading">
            <code>RepClientType</code>


<a href="#aiperf.common.comms.client_enums.RepClientType" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="CaseInsensitiveStrEnum (aiperf.common.enums.CaseInsensitiveStrEnum)" href="#aiperf.common.enums.CaseInsensitiveStrEnum">CaseInsensitiveStrEnum</a></code></p>


        <p>Enum for specifying the client type for responding to messages. Includes a helper method
for retrieving the appropriate client type based on the topic.</p>







              <details class="quote">
                <summary>Source code in <code>aiperf/common/comms/client_enums.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">RepClientType</span><span class="p">(</span><span class="n">CaseInsensitiveStrEnum</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Enum for specifying the client type for responding to messages. Includes a helper method</span>
<span class="sd">    for retrieving the appropriate client type based on the topic.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">CONVERSATION_DATA</span> <span class="o">=</span> <span class="s2">&quot;conversation_data_rep&quot;</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">from_topic</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">topic</span><span class="p">:</span> <span class="n">Topic</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;RepClientType&quot;</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Determine the appropriate ClientType based on topic.</span>

<span class="sd">        Args:</span>
<span class="sd">            topic: The topic to communicate on</span>

<span class="sd">        Returns:</span>
<span class="sd">            The appropriate ClientType for the given topic</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">match</span> <span class="n">topic</span><span class="p">:</span>
            <span class="k">case</span> <span class="n">Topic</span><span class="o">.</span><span class="n">CONVERSATION_DATA</span><span class="p">:</span>
                <span class="k">return</span> <span class="bp">cls</span><span class="o">.</span><span class="n">CONVERSATION_DATA</span>
            <span class="k">case</span><span class="w"> </span><span class="k">_</span><span class="p">:</span>
                <span class="k">raise</span> <span class="n">CommunicationClientNotFoundError</span><span class="p">(</span>
                    <span class="sa">f</span><span class="s2">&quot;No client type found for topic </span><span class="si">{</span><span class="n">topic</span><span class="si">}</span><span class="s2">&quot;</span>
                <span class="p">)</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h3 id="aiperf.common.comms.client_enums.RepClientType.from_topic" class="doc doc-heading">
            <code class=" language-python"><span class="n">from_topic</span><span class="p">(</span><span class="n">topic</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-classmethod"><code>classmethod</code></small>
  </span>

<a href="#aiperf.common.comms.client_enums.RepClientType.from_topic" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Determine the appropriate ClientType based on topic.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>topic</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="Topic (aiperf.common.enums.Topic)" href="#aiperf.common.enums.Topic">Topic</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The topic to communicate on</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="RepClientType (aiperf.common.comms.client_enums.RepClientType)" href="#aiperf.common.comms.client_enums.RepClientType">RepClientType</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The appropriate ClientType for the given topic</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>aiperf/common/comms/client_enums.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@classmethod</span>
<span class="k">def</span><span class="w"> </span><span class="nf">from_topic</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">topic</span><span class="p">:</span> <span class="n">Topic</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;RepClientType&quot;</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Determine the appropriate ClientType based on topic.</span>

<span class="sd">    Args:</span>
<span class="sd">        topic: The topic to communicate on</span>

<span class="sd">    Returns:</span>
<span class="sd">        The appropriate ClientType for the given topic</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">match</span> <span class="n">topic</span><span class="p">:</span>
        <span class="k">case</span> <span class="n">Topic</span><span class="o">.</span><span class="n">CONVERSATION_DATA</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">cls</span><span class="o">.</span><span class="n">CONVERSATION_DATA</span>
        <span class="k">case</span><span class="w"> </span><span class="k">_</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">CommunicationClientNotFoundError</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;No client type found for topic </span><span class="si">{</span><span class="n">topic</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="aiperf.common.comms.client_enums.ReqClientType" class="doc doc-heading">
            <code>ReqClientType</code>


<a href="#aiperf.common.comms.client_enums.ReqClientType" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="CaseInsensitiveStrEnum (aiperf.common.enums.CaseInsensitiveStrEnum)" href="#aiperf.common.enums.CaseInsensitiveStrEnum">CaseInsensitiveStrEnum</a></code></p>


        <p>Enum for specifying the client type for requesting messages. Includes a helper method
for retrieving the appropriate client type based on the topic.</p>







              <details class="quote">
                <summary>Source code in <code>aiperf/common/comms/client_enums.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">ReqClientType</span><span class="p">(</span><span class="n">CaseInsensitiveStrEnum</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Enum for specifying the client type for requesting messages. Includes a helper method</span>
<span class="sd">    for retrieving the appropriate client type based on the topic.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">CONVERSATION_DATA</span> <span class="o">=</span> <span class="s2">&quot;conversation_data_req&quot;</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">from_topic</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">topic</span><span class="p">:</span> <span class="n">Topic</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;ReqClientType&quot;</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Determine the appropriate ClientType based on topic.</span>

<span class="sd">        Args:</span>
<span class="sd">            topic: The topic to communicate on</span>

<span class="sd">        Returns:</span>
<span class="sd">            The appropriate ClientType for the given topic</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">match</span> <span class="n">topic</span><span class="p">:</span>
            <span class="k">case</span> <span class="n">Topic</span><span class="o">.</span><span class="n">CONVERSATION_DATA</span><span class="p">:</span>
                <span class="k">return</span> <span class="bp">cls</span><span class="o">.</span><span class="n">CONVERSATION_DATA</span>
            <span class="k">case</span><span class="w"> </span><span class="k">_</span><span class="p">:</span>
                <span class="k">raise</span> <span class="n">CommunicationClientNotFoundError</span><span class="p">(</span>
                    <span class="sa">f</span><span class="s2">&quot;No client type found for topic </span><span class="si">{</span><span class="n">topic</span><span class="si">}</span><span class="s2">&quot;</span>
                <span class="p">)</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h3 id="aiperf.common.comms.client_enums.ReqClientType.from_topic" class="doc doc-heading">
            <code class=" language-python"><span class="n">from_topic</span><span class="p">(</span><span class="n">topic</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-classmethod"><code>classmethod</code></small>
  </span>

<a href="#aiperf.common.comms.client_enums.ReqClientType.from_topic" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Determine the appropriate ClientType based on topic.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>topic</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="Topic (aiperf.common.enums.Topic)" href="#aiperf.common.enums.Topic">Topic</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The topic to communicate on</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="ReqClientType (aiperf.common.comms.client_enums.ReqClientType)" href="#aiperf.common.comms.client_enums.ReqClientType">ReqClientType</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The appropriate ClientType for the given topic</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>aiperf/common/comms/client_enums.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@classmethod</span>
<span class="k">def</span><span class="w"> </span><span class="nf">from_topic</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">topic</span><span class="p">:</span> <span class="n">Topic</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;ReqClientType&quot;</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Determine the appropriate ClientType based on topic.</span>

<span class="sd">    Args:</span>
<span class="sd">        topic: The topic to communicate on</span>

<span class="sd">    Returns:</span>
<span class="sd">        The appropriate ClientType for the given topic</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">match</span> <span class="n">topic</span><span class="p">:</span>
        <span class="k">case</span> <span class="n">Topic</span><span class="o">.</span><span class="n">CONVERSATION_DATA</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">cls</span><span class="o">.</span><span class="n">CONVERSATION_DATA</span>
        <span class="k">case</span><span class="w"> </span><span class="k">_</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">CommunicationClientNotFoundError</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;No client type found for topic </span><span class="si">{</span><span class="n">topic</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="aiperf.common.comms.client_enums.SubClientType" class="doc doc-heading">
            <code>SubClientType</code>


<a href="#aiperf.common.comms.client_enums.SubClientType" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="CaseInsensitiveStrEnum (aiperf.common.enums.CaseInsensitiveStrEnum)" href="#aiperf.common.enums.CaseInsensitiveStrEnum">CaseInsensitiveStrEnum</a></code></p>


        <p>Enum for specifying the client type for subscribing to messages. Includes a helper method
for retrieving the appropriate client type based on the topic.</p>







              <details class="quote">
                <summary>Source code in <code>aiperf/common/comms/client_enums.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span>
<span class="normal">71</span>
<span class="normal">72</span>
<span class="normal">73</span>
<span class="normal">74</span>
<span class="normal">75</span>
<span class="normal">76</span>
<span class="normal">77</span>
<span class="normal">78</span>
<span class="normal">79</span>
<span class="normal">80</span>
<span class="normal">81</span>
<span class="normal">82</span>
<span class="normal">83</span>
<span class="normal">84</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">SubClientType</span><span class="p">(</span><span class="n">CaseInsensitiveStrEnum</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Enum for specifying the client type for subscribing to messages. Includes a helper method</span>
<span class="sd">    for retrieving the appropriate client type based on the topic.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">CONTROLLER</span> <span class="o">=</span> <span class="s2">&quot;controller_sub&quot;</span>
    <span class="n">COMPONENT</span> <span class="o">=</span> <span class="s2">&quot;component_sub&quot;</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">from_topic</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">topic</span><span class="p">:</span> <span class="n">Topic</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;SubClientType&quot;</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Determine the appropriate ClientType based on topic.</span>

<span class="sd">        Args:</span>
<span class="sd">            topic: The topic to communicate on</span>

<span class="sd">        Returns:</span>
<span class="sd">            The appropriate ClientType for the given topic</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">match</span> <span class="n">topic</span><span class="p">:</span>
            <span class="k">case</span> <span class="p">(</span>
                <span class="n">Topic</span><span class="o">.</span><span class="n">HEARTBEAT</span>
                <span class="o">|</span> <span class="n">Topic</span><span class="o">.</span><span class="n">REGISTRATION</span>
                <span class="o">|</span> <span class="n">Topic</span><span class="o">.</span><span class="n">STATUS</span>
                <span class="o">|</span> <span class="n">Topic</span><span class="o">.</span><span class="n">RESPONSE</span>
                <span class="o">|</span> <span class="n">Topic</span><span class="o">.</span><span class="n">CREDITS_COMPLETE</span>
                <span class="o">|</span> <span class="n">Topic</span><span class="o">.</span><span class="n">PROFILE_PROGRESS</span>
                <span class="o">|</span> <span class="n">Topic</span><span class="o">.</span><span class="n">PROFILE_RESULTS</span>
                <span class="o">|</span> <span class="n">Topic</span><span class="o">.</span><span class="n">PROFILE_STATS</span>
            <span class="p">):</span>
                <span class="k">return</span> <span class="bp">cls</span><span class="o">.</span><span class="n">COMPONENT</span>
            <span class="k">case</span> <span class="n">Topic</span><span class="o">.</span><span class="n">COMMAND</span><span class="p">:</span>
                <span class="k">return</span> <span class="bp">cls</span><span class="o">.</span><span class="n">CONTROLLER</span>
            <span class="k">case</span><span class="w"> </span><span class="k">_</span><span class="p">:</span>
                <span class="k">raise</span> <span class="n">CommunicationClientNotFoundError</span><span class="p">(</span>
                    <span class="sa">f</span><span class="s2">&quot;No client type found for topic </span><span class="si">{</span><span class="n">topic</span><span class="si">}</span><span class="s2">&quot;</span>
                <span class="p">)</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h3 id="aiperf.common.comms.client_enums.SubClientType.from_topic" class="doc doc-heading">
            <code class=" language-python"><span class="n">from_topic</span><span class="p">(</span><span class="n">topic</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-classmethod"><code>classmethod</code></small>
  </span>

<a href="#aiperf.common.comms.client_enums.SubClientType.from_topic" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Determine the appropriate ClientType based on topic.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>topic</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="Topic (aiperf.common.enums.Topic)" href="#aiperf.common.enums.Topic">Topic</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The topic to communicate on</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="SubClientType (aiperf.common.comms.client_enums.SubClientType)" href="#aiperf.common.comms.client_enums.SubClientType">SubClientType</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The appropriate ClientType for the given topic</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>aiperf/common/comms/client_enums.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span>
<span class="normal">71</span>
<span class="normal">72</span>
<span class="normal">73</span>
<span class="normal">74</span>
<span class="normal">75</span>
<span class="normal">76</span>
<span class="normal">77</span>
<span class="normal">78</span>
<span class="normal">79</span>
<span class="normal">80</span>
<span class="normal">81</span>
<span class="normal">82</span>
<span class="normal">83</span>
<span class="normal">84</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@classmethod</span>
<span class="k">def</span><span class="w"> </span><span class="nf">from_topic</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">topic</span><span class="p">:</span> <span class="n">Topic</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;SubClientType&quot;</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Determine the appropriate ClientType based on topic.</span>

<span class="sd">    Args:</span>
<span class="sd">        topic: The topic to communicate on</span>

<span class="sd">    Returns:</span>
<span class="sd">        The appropriate ClientType for the given topic</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">match</span> <span class="n">topic</span><span class="p">:</span>
        <span class="k">case</span> <span class="p">(</span>
            <span class="n">Topic</span><span class="o">.</span><span class="n">HEARTBEAT</span>
            <span class="o">|</span> <span class="n">Topic</span><span class="o">.</span><span class="n">REGISTRATION</span>
            <span class="o">|</span> <span class="n">Topic</span><span class="o">.</span><span class="n">STATUS</span>
            <span class="o">|</span> <span class="n">Topic</span><span class="o">.</span><span class="n">RESPONSE</span>
            <span class="o">|</span> <span class="n">Topic</span><span class="o">.</span><span class="n">CREDITS_COMPLETE</span>
            <span class="o">|</span> <span class="n">Topic</span><span class="o">.</span><span class="n">PROFILE_PROGRESS</span>
            <span class="o">|</span> <span class="n">Topic</span><span class="o">.</span><span class="n">PROFILE_RESULTS</span>
            <span class="o">|</span> <span class="n">Topic</span><span class="o">.</span><span class="n">PROFILE_STATS</span>
        <span class="p">):</span>
            <span class="k">return</span> <span class="bp">cls</span><span class="o">.</span><span class="n">COMPONENT</span>
        <span class="k">case</span> <span class="n">Topic</span><span class="o">.</span><span class="n">COMMAND</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">cls</span><span class="o">.</span><span class="n">CONTROLLER</span>
        <span class="k">case</span><span class="w"> </span><span class="k">_</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">CommunicationClientNotFoundError</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;No client type found for topic </span><span class="si">{</span><span class="n">topic</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>




  </div>

    </div>

</div><h2 id="aiperfcommoncommszmqclientsbase">aiperf.common.comms.zmq.clients.base<a class="headerlink" href="#aiperfcommoncommszmqclientsbase" title="Permanent link">&para;</a></h2>


<div class="doc doc-object doc-module">



<a id="aiperf.common.comms.zmq.clients.base"></a>
    <div class="doc doc-contents first">









  <div class="doc doc-children">








<div class="doc doc-object doc-class">



<h2 id="aiperf.common.comms.zmq.clients.base.BaseZMQClient" class="doc doc-heading">
            <code>BaseZMQClient</code>


<a href="#aiperf.common.comms.zmq.clients.base.BaseZMQClient" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="AIPerfTaskMixin (aiperf.common.hooks.AIPerfTaskMixin)" href="#aiperf.common.hooks.AIPerfTaskMixin">AIPerfTaskMixin</a></code></p>


        <p>Base class for all ZMQ clients.</p>
<p>This class provides a common interface for all ZMQ clients in the AIPerf
framework. It inherits from the :class:<code>AIPerfTaskMixin</code>, allowing derived
classes to implement specific hooks.</p>







              <details class="quote">
                <summary>Source code in <code>aiperf/common/comms/zmq/clients/base.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 19</span>
<span class="normal"> 20</span>
<span class="normal"> 21</span>
<span class="normal"> 22</span>
<span class="normal"> 23</span>
<span class="normal"> 24</span>
<span class="normal"> 25</span>
<span class="normal"> 26</span>
<span class="normal"> 27</span>
<span class="normal"> 28</span>
<span class="normal"> 29</span>
<span class="normal"> 30</span>
<span class="normal"> 31</span>
<span class="normal"> 32</span>
<span class="normal"> 33</span>
<span class="normal"> 34</span>
<span class="normal"> 35</span>
<span class="normal"> 36</span>
<span class="normal"> 37</span>
<span class="normal"> 38</span>
<span class="normal"> 39</span>
<span class="normal"> 40</span>
<span class="normal"> 41</span>
<span class="normal"> 42</span>
<span class="normal"> 43</span>
<span class="normal"> 44</span>
<span class="normal"> 45</span>
<span class="normal"> 46</span>
<span class="normal"> 47</span>
<span class="normal"> 48</span>
<span class="normal"> 49</span>
<span class="normal"> 50</span>
<span class="normal"> 51</span>
<span class="normal"> 52</span>
<span class="normal"> 53</span>
<span class="normal"> 54</span>
<span class="normal"> 55</span>
<span class="normal"> 56</span>
<span class="normal"> 57</span>
<span class="normal"> 58</span>
<span class="normal"> 59</span>
<span class="normal"> 60</span>
<span class="normal"> 61</span>
<span class="normal"> 62</span>
<span class="normal"> 63</span>
<span class="normal"> 64</span>
<span class="normal"> 65</span>
<span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@supports_hooks</span><span class="p">(</span>
    <span class="n">AIPerfHook</span><span class="o">.</span><span class="n">ON_INIT</span><span class="p">,</span>
    <span class="n">AIPerfHook</span><span class="o">.</span><span class="n">ON_STOP</span><span class="p">,</span>
    <span class="n">AIPerfHook</span><span class="o">.</span><span class="n">ON_CLEANUP</span><span class="p">,</span>
    <span class="n">AIPerfHook</span><span class="o">.</span><span class="n">AIPERF_TASK</span><span class="p">,</span>
<span class="p">)</span>
<span class="k">class</span><span class="w"> </span><span class="nc">BaseZMQClient</span><span class="p">(</span><span class="n">AIPerfTaskMixin</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Base class for all ZMQ clients.</span>

<span class="sd">    This class provides a common interface for all ZMQ clients in the AIPerf</span>
<span class="sd">    framework. It inherits from the :class:`AIPerfTaskMixin`, allowing derived</span>
<span class="sd">    classes to implement specific hooks.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">context</span><span class="p">:</span> <span class="n">zmq</span><span class="o">.</span><span class="n">asyncio</span><span class="o">.</span><span class="n">Context</span><span class="p">,</span>
        <span class="n">socket_type</span><span class="p">:</span> <span class="n">SocketType</span><span class="p">,</span>
        <span class="n">address</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">bind</span><span class="p">:</span> <span class="nb">bool</span><span class="p">,</span>
        <span class="n">socket_ops</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Initialize the ZMQ Base class.</span>

<span class="sd">        Args:</span>
<span class="sd">            context (zmq.asyncio.Context): The ZMQ context.</span>
<span class="sd">            address (str): The address to bind or connect to.</span>
<span class="sd">            bind (bool): Whether to bind or connect the socket.</span>
<span class="sd">            socket_type (SocketType): The type of ZMQ socket (PUB or SUB).</span>
<span class="sd">            socket_ops (dict, optional): Additional socket options to set.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span> <span class="o">=</span> <span class="n">logging</span><span class="o">.</span><span class="n">getLogger</span><span class="p">(</span><span class="vm">__name__</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">stop_event</span><span class="p">:</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">Event</span> <span class="o">=</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">Event</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">initialized_event</span><span class="p">:</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">Event</span> <span class="o">=</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">Event</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">context</span><span class="p">:</span> <span class="n">zmq</span><span class="o">.</span><span class="n">asyncio</span><span class="o">.</span><span class="n">Context</span> <span class="o">=</span> <span class="n">context</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">address</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">address</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">bind</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="n">bind</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">socket_type</span><span class="p">:</span> <span class="n">SocketType</span> <span class="o">=</span> <span class="n">socket_type</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_socket</span><span class="p">:</span> <span class="n">zmq</span><span class="o">.</span><span class="n">asyncio</span><span class="o">.</span><span class="n">Socket</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">socket_ops</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">=</span> <span class="n">socket_ops</span> <span class="ow">or</span> <span class="p">{}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">client_id</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">socket_type</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">_client_</span><span class="si">{</span><span class="n">uuid</span><span class="o">.</span><span class="n">uuid4</span><span class="p">()</span><span class="o">.</span><span class="n">hex</span><span class="p">[:</span><span class="mi">8</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">is_initialized</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Check if the client is initialized.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">initialized_event</span><span class="o">.</span><span class="n">is_set</span><span class="p">()</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">is_shutdown</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Check if the client is shutdown.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">stop_event</span><span class="o">.</span><span class="n">is_set</span><span class="p">()</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">socket_type_name</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get the name of the socket type.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">socket_type</span><span class="o">.</span><span class="n">name</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">socket</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">zmq</span><span class="o">.</span><span class="n">asyncio</span><span class="o">.</span><span class="n">Socket</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get the zmq socket for the client.</span>

<span class="sd">        Raises:</span>
<span class="sd">            CommunicationNotInitializedError: If the client is not initialized</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_socket</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">CommunicationNotInitializedError</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_socket</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_ensure_initialized</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Ensure the communication channels are initialized and not shutdown.</span>

<span class="sd">        Raises:</span>
<span class="sd">            CommunicationNotInitializedError: If the communication channels are not initialized.</span>
<span class="sd">            CommunicationShutdownError: If the communication channels are shutdown.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_initialized</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">CommunicationNotInitializedError</span><span class="p">()</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_shutdown</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">CommunicationShutdownError</span><span class="p">()</span>

    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">initialize</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Initialize the communication.</span>

<span class="sd">        This method will:</span>
<span class="sd">        - Create the zmq socket</span>
<span class="sd">        - Bind or connect the socket to the address</span>
<span class="sd">        - Set the socket options</span>
<span class="sd">        - Run the AIPerfHook.ON_INIT hooks</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_socket</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">context</span><span class="o">.</span><span class="n">socket</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">socket_type</span><span class="p">)</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">bind</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span>
                    <span class="s2">&quot;ZMQ </span><span class="si">%s</span><span class="s2"> socket initialized and bound to </span><span class="si">%s</span><span class="s2"> (</span><span class="si">%s</span><span class="s2">)&quot;</span><span class="p">,</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">socket_type_name</span><span class="p">,</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">address</span><span class="p">,</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">client_id</span><span class="p">,</span>
                <span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">socket</span><span class="o">.</span><span class="n">bind</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">address</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span>
                    <span class="s2">&quot;ZMQ </span><span class="si">%s</span><span class="s2"> socket initialized and connected to </span><span class="si">%s</span><span class="s2"> (</span><span class="si">%s</span><span class="s2">)&quot;</span><span class="p">,</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">socket_type_name</span><span class="p">,</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">address</span><span class="p">,</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">client_id</span><span class="p">,</span>
                <span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">socket</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">address</span><span class="p">)</span>

            <span class="c1"># Set safe timeouts for send and receive operations</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_socket</span><span class="o">.</span><span class="n">setsockopt</span><span class="p">(</span><span class="n">zmq</span><span class="o">.</span><span class="n">RCVTIMEO</span><span class="p">,</span> <span class="mi">30</span> <span class="o">*</span> <span class="mi">1000</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_socket</span><span class="o">.</span><span class="n">setsockopt</span><span class="p">(</span><span class="n">zmq</span><span class="o">.</span><span class="n">SNDTIMEO</span><span class="p">,</span> <span class="mi">30</span> <span class="o">*</span> <span class="mi">1000</span><span class="p">)</span>

            <span class="c1"># Set additional socket options requested by the caller</span>
            <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">val</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">socket_ops</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_socket</span><span class="o">.</span><span class="n">setsockopt</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="n">val</span><span class="p">)</span>

            <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">run_hooks</span><span class="p">(</span><span class="n">AIPerfHook</span><span class="o">.</span><span class="n">ON_INIT</span><span class="p">)</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">initialized_event</span><span class="o">.</span><span class="n">set</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span>
                <span class="s2">&quot;ZMQ </span><span class="si">%s</span><span class="s2"> socket initialized and connected to </span><span class="si">%s</span><span class="s2"> (</span><span class="si">%s</span><span class="s2">)&quot;</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">socket_type_name</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">address</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">client_id</span><span class="p">,</span>
            <span class="p">)</span>

        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">&quot;Exception initializing ZMQ socket: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">e</span><span class="p">)</span>
            <span class="k">raise</span> <span class="n">CommunicationInitializationError</span> <span class="kn">from</span><span class="w"> </span><span class="nn">e</span>

    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">shutdown</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Shutdown the communication.</span>

<span class="sd">        This method will:</span>
<span class="sd">        - Close the zmq socket</span>
<span class="sd">        - Run the AIPerfHook.ON_CLEANUP hooks</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_shutdown</span><span class="p">:</span>
            <span class="k">return</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">stop_event</span><span class="o">.</span><span class="n">is_set</span><span class="p">():</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">stop_event</span><span class="o">.</span><span class="n">set</span><span class="p">()</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_socket</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">socket</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span>
                    <span class="s2">&quot;ZMQ </span><span class="si">%s</span><span class="s2"> socket closed (</span><span class="si">%s</span><span class="s2">)&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">socket_type_name</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">client_id</span>
                <span class="p">)</span>

        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span>
                <span class="s2">&quot;Exception shutting down ZMQ socket: </span><span class="si">%s</span><span class="s2"> (</span><span class="si">%s</span><span class="s2">)&quot;</span><span class="p">,</span> <span class="n">e</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">client_id</span>
            <span class="p">)</span>
            <span class="k">raise</span> <span class="n">CommunicationShutdownError</span><span class="p">(</span><span class="s2">&quot;Failed to shutdown ZMQ socket&quot;</span><span class="p">)</span> <span class="kn">from</span><span class="w"> </span><span class="nn">e</span>

        <span class="k">finally</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_socket</span> <span class="o">=</span> <span class="kc">None</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">run_hooks</span><span class="p">(</span><span class="n">AIPerfHook</span><span class="o">.</span><span class="n">ON_STOP</span><span class="p">)</span>
            <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">run_hooks</span><span class="p">(</span><span class="n">AIPerfHook</span><span class="o">.</span><span class="n">ON_CLEANUP</span><span class="p">)</span>

        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span>
                <span class="s2">&quot;Exception cleaning up ZMQ socket: </span><span class="si">%s</span><span class="s2"> (</span><span class="si">%s</span><span class="s2">)&quot;</span><span class="p">,</span> <span class="n">e</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">client_id</span>
            <span class="p">)</span>
            <span class="k">raise</span> <span class="n">CommunicationError</span><span class="p">(</span><span class="s2">&quot;Failed to cleanup ZMQ socket&quot;</span><span class="p">)</span> <span class="kn">from</span><span class="w"> </span><span class="nn">e</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">







<div class="doc doc-object doc-attribute">



<h3 id="aiperf.common.comms.zmq.clients.base.BaseZMQClient.is_initialized" class="doc doc-heading">
            <code class=" language-python"><span class="n">is_initialized</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

<a href="#aiperf.common.comms.zmq.clients.base.BaseZMQClient.is_initialized" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Check if the client is initialized.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="aiperf.common.comms.zmq.clients.base.BaseZMQClient.is_shutdown" class="doc doc-heading">
            <code class=" language-python"><span class="n">is_shutdown</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

<a href="#aiperf.common.comms.zmq.clients.base.BaseZMQClient.is_shutdown" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Check if the client is shutdown.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="aiperf.common.comms.zmq.clients.base.BaseZMQClient.socket" class="doc doc-heading">
            <code class=" language-python"><span class="n">socket</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

<a href="#aiperf.common.comms.zmq.clients.base.BaseZMQClient.socket" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Get the zmq socket for the client.</p>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="CommunicationNotInitializedError (aiperf.common.exceptions.CommunicationNotInitializedError)" href="#aiperf.common.exceptions.CommunicationNotInitializedError">CommunicationNotInitializedError</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If the client is not initialized</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="aiperf.common.comms.zmq.clients.base.BaseZMQClient.socket_type_name" class="doc doc-heading">
            <code class=" language-python"><span class="n">socket_type_name</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

<a href="#aiperf.common.comms.zmq.clients.base.BaseZMQClient.socket_type_name" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Get the name of the socket type.</p>

    </div>

</div>



<div class="doc doc-object doc-function">


<h3 id="aiperf.common.comms.zmq.clients.base.BaseZMQClient.__init__" class="doc doc-heading">
            <code class=" language-python"><span class="fm">__init__</span><span class="p">(</span><span class="n">context</span><span class="p">,</span> <span class="n">socket_type</span><span class="p">,</span> <span class="n">address</span><span class="p">,</span> <span class="n">bind</span><span class="p">,</span> <span class="n">socket_ops</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

<a href="#aiperf.common.comms.zmq.clients.base.BaseZMQClient.__init__" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Initialize the ZMQ Base class.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>context</code>
            </td>
            <td>
                  <code><span title="zmq.asyncio.Context">Context</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The ZMQ context.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>address</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The address to bind or connect to.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>bind</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Whether to bind or connect the socket.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>socket_type</code>
            </td>
            <td>
                  <code><span title="zmq.SocketType">SocketType</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The type of ZMQ socket (PUB or SUB).</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>socket_ops</code>
            </td>
            <td>
                  <code><span title="dict">dict</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Additional socket options to set.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>aiperf/common/comms/zmq/clients/base.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">context</span><span class="p">:</span> <span class="n">zmq</span><span class="o">.</span><span class="n">asyncio</span><span class="o">.</span><span class="n">Context</span><span class="p">,</span>
    <span class="n">socket_type</span><span class="p">:</span> <span class="n">SocketType</span><span class="p">,</span>
    <span class="n">address</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">bind</span><span class="p">:</span> <span class="nb">bool</span><span class="p">,</span>
    <span class="n">socket_ops</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Initialize the ZMQ Base class.</span>

<span class="sd">    Args:</span>
<span class="sd">        context (zmq.asyncio.Context): The ZMQ context.</span>
<span class="sd">        address (str): The address to bind or connect to.</span>
<span class="sd">        bind (bool): Whether to bind or connect the socket.</span>
<span class="sd">        socket_type (SocketType): The type of ZMQ socket (PUB or SUB).</span>
<span class="sd">        socket_ops (dict, optional): Additional socket options to set.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">logger</span> <span class="o">=</span> <span class="n">logging</span><span class="o">.</span><span class="n">getLogger</span><span class="p">(</span><span class="vm">__name__</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">stop_event</span><span class="p">:</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">Event</span> <span class="o">=</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">Event</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">initialized_event</span><span class="p">:</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">Event</span> <span class="o">=</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">Event</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">context</span><span class="p">:</span> <span class="n">zmq</span><span class="o">.</span><span class="n">asyncio</span><span class="o">.</span><span class="n">Context</span> <span class="o">=</span> <span class="n">context</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">address</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">address</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">bind</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="n">bind</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">socket_type</span><span class="p">:</span> <span class="n">SocketType</span> <span class="o">=</span> <span class="n">socket_type</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_socket</span><span class="p">:</span> <span class="n">zmq</span><span class="o">.</span><span class="n">asyncio</span><span class="o">.</span><span class="n">Socket</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">socket_ops</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">=</span> <span class="n">socket_ops</span> <span class="ow">or</span> <span class="p">{}</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">client_id</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">socket_type</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">_client_</span><span class="si">{</span><span class="n">uuid</span><span class="o">.</span><span class="n">uuid4</span><span class="p">()</span><span class="o">.</span><span class="n">hex</span><span class="p">[:</span><span class="mi">8</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span>
    <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="aiperf.common.comms.zmq.clients.base.BaseZMQClient.initialize" class="doc doc-heading">
            <code class=" language-python"><span class="n">initialize</span><span class="p">()</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#aiperf.common.comms.zmq.clients.base.BaseZMQClient.initialize" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Initialize the communication.</p>
<p>This method will:
- Create the zmq socket
- Bind or connect the socket to the address
- Set the socket options
- Run the AIPerfHook.ON_INIT hooks</p>


            <details class="quote">
              <summary>Source code in <code>aiperf/common/comms/zmq/clients/base.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">initialize</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Initialize the communication.</span>

<span class="sd">    This method will:</span>
<span class="sd">    - Create the zmq socket</span>
<span class="sd">    - Bind or connect the socket to the address</span>
<span class="sd">    - Set the socket options</span>
<span class="sd">    - Run the AIPerfHook.ON_INIT hooks</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_socket</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">context</span><span class="o">.</span><span class="n">socket</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">socket_type</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">bind</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span>
                <span class="s2">&quot;ZMQ </span><span class="si">%s</span><span class="s2"> socket initialized and bound to </span><span class="si">%s</span><span class="s2"> (</span><span class="si">%s</span><span class="s2">)&quot;</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">socket_type_name</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">address</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">client_id</span><span class="p">,</span>
            <span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">socket</span><span class="o">.</span><span class="n">bind</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">address</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span>
                <span class="s2">&quot;ZMQ </span><span class="si">%s</span><span class="s2"> socket initialized and connected to </span><span class="si">%s</span><span class="s2"> (</span><span class="si">%s</span><span class="s2">)&quot;</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">socket_type_name</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">address</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">client_id</span><span class="p">,</span>
            <span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">socket</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">address</span><span class="p">)</span>

        <span class="c1"># Set safe timeouts for send and receive operations</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_socket</span><span class="o">.</span><span class="n">setsockopt</span><span class="p">(</span><span class="n">zmq</span><span class="o">.</span><span class="n">RCVTIMEO</span><span class="p">,</span> <span class="mi">30</span> <span class="o">*</span> <span class="mi">1000</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_socket</span><span class="o">.</span><span class="n">setsockopt</span><span class="p">(</span><span class="n">zmq</span><span class="o">.</span><span class="n">SNDTIMEO</span><span class="p">,</span> <span class="mi">30</span> <span class="o">*</span> <span class="mi">1000</span><span class="p">)</span>

        <span class="c1"># Set additional socket options requested by the caller</span>
        <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">val</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">socket_ops</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_socket</span><span class="o">.</span><span class="n">setsockopt</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="n">val</span><span class="p">)</span>

        <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">run_hooks</span><span class="p">(</span><span class="n">AIPerfHook</span><span class="o">.</span><span class="n">ON_INIT</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">initialized_event</span><span class="o">.</span><span class="n">set</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span>
            <span class="s2">&quot;ZMQ </span><span class="si">%s</span><span class="s2"> socket initialized and connected to </span><span class="si">%s</span><span class="s2"> (</span><span class="si">%s</span><span class="s2">)&quot;</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">socket_type_name</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">address</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">client_id</span><span class="p">,</span>
        <span class="p">)</span>

    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">&quot;Exception initializing ZMQ socket: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">e</span><span class="p">)</span>
        <span class="k">raise</span> <span class="n">CommunicationInitializationError</span> <span class="kn">from</span><span class="w"> </span><span class="nn">e</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="aiperf.common.comms.zmq.clients.base.BaseZMQClient.shutdown" class="doc doc-heading">
            <code class=" language-python"><span class="n">shutdown</span><span class="p">()</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#aiperf.common.comms.zmq.clients.base.BaseZMQClient.shutdown" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Shutdown the communication.</p>
<p>This method will:
- Close the zmq socket
- Run the AIPerfHook.ON_CLEANUP hooks</p>


            <details class="quote">
              <summary>Source code in <code>aiperf/common/comms/zmq/clients/base.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">shutdown</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Shutdown the communication.</span>

<span class="sd">    This method will:</span>
<span class="sd">    - Close the zmq socket</span>
<span class="sd">    - Run the AIPerfHook.ON_CLEANUP hooks</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_shutdown</span><span class="p">:</span>
        <span class="k">return</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">stop_event</span><span class="o">.</span><span class="n">is_set</span><span class="p">():</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">stop_event</span><span class="o">.</span><span class="n">set</span><span class="p">()</span>

    <span class="k">try</span><span class="p">:</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_socket</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">socket</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span>
                <span class="s2">&quot;ZMQ </span><span class="si">%s</span><span class="s2"> socket closed (</span><span class="si">%s</span><span class="s2">)&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">socket_type_name</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">client_id</span>
            <span class="p">)</span>

    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span>
            <span class="s2">&quot;Exception shutting down ZMQ socket: </span><span class="si">%s</span><span class="s2"> (</span><span class="si">%s</span><span class="s2">)&quot;</span><span class="p">,</span> <span class="n">e</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">client_id</span>
        <span class="p">)</span>
        <span class="k">raise</span> <span class="n">CommunicationShutdownError</span><span class="p">(</span><span class="s2">&quot;Failed to shutdown ZMQ socket&quot;</span><span class="p">)</span> <span class="kn">from</span><span class="w"> </span><span class="nn">e</span>

    <span class="k">finally</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_socket</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="k">try</span><span class="p">:</span>
        <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">run_hooks</span><span class="p">(</span><span class="n">AIPerfHook</span><span class="o">.</span><span class="n">ON_STOP</span><span class="p">)</span>
        <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">run_hooks</span><span class="p">(</span><span class="n">AIPerfHook</span><span class="o">.</span><span class="n">ON_CLEANUP</span><span class="p">)</span>

    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span>
            <span class="s2">&quot;Exception cleaning up ZMQ socket: </span><span class="si">%s</span><span class="s2"> (</span><span class="si">%s</span><span class="s2">)&quot;</span><span class="p">,</span> <span class="n">e</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">client_id</span>
        <span class="p">)</span>
        <span class="k">raise</span> <span class="n">CommunicationError</span><span class="p">(</span><span class="s2">&quot;Failed to cleanup ZMQ socket&quot;</span><span class="p">)</span> <span class="kn">from</span><span class="w"> </span><span class="nn">e</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>




  </div>

    </div>

</div><h2 id="aiperfcommoncommszmqclientspub">aiperf.common.comms.zmq.clients.pub<a class="headerlink" href="#aiperfcommoncommszmqclientspub" title="Permanent link">&para;</a></h2>


<div class="doc doc-object doc-module">



<a id="aiperf.common.comms.zmq.clients.pub"></a>
    <div class="doc doc-contents first">









  <div class="doc doc-children">








<div class="doc doc-object doc-class">



<h2 id="aiperf.common.comms.zmq.clients.pub.ZMQPubClient" class="doc doc-heading">
            <code>ZMQPubClient</code>


<a href="#aiperf.common.comms.zmq.clients.pub.ZMQPubClient" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="BaseZMQClient (aiperf.common.comms.zmq.clients.base.BaseZMQClient)" href="#aiperf.common.comms.zmq.clients.base.BaseZMQClient">BaseZMQClient</a></code></p>








              <details class="quote">
                <summary>Source code in <code>aiperf/common/comms/zmq/clients/pub.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">ZMQPubClient</span><span class="p">(</span><span class="n">BaseZMQClient</span><span class="p">):</span>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">context</span><span class="p">:</span> <span class="n">zmq</span><span class="o">.</span><span class="n">asyncio</span><span class="o">.</span><span class="n">Context</span><span class="p">,</span>
        <span class="n">address</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">bind</span><span class="p">:</span> <span class="nb">bool</span><span class="p">,</span>
        <span class="n">socket_ops</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Initialize the ZMQ Publisher class.</span>

<span class="sd">        Args:</span>
<span class="sd">            context (zmq.asyncio.Context): The ZMQ context.</span>
<span class="sd">            address (str): The address to bind or connect to.</span>
<span class="sd">            bind (bool): Whether to bind or connect the socket.</span>
<span class="sd">            socket_ops (dict, optional): Additional socket options to set.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">context</span><span class="p">,</span> <span class="n">SocketType</span><span class="o">.</span><span class="n">PUB</span><span class="p">,</span> <span class="n">address</span><span class="p">,</span> <span class="n">bind</span><span class="p">,</span> <span class="n">socket_ops</span><span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">publish</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">topic</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">message</span><span class="p">:</span> <span class="n">Message</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Publish a message to a topic.</span>

<span class="sd">        Args:</span>
<span class="sd">            topic: Topic to publish to</span>
<span class="sd">            message: Message to publish (must be a Pydantic model)</span>

<span class="sd">        Raises:</span>
<span class="sd">            CommunicationNotInitializedError: If the client is not initialized</span>
<span class="sd">            CommunicationPublishError: If the message was not published successfully</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_ensure_initialized</span><span class="p">()</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="c1"># Serialize message using Pydantic&#39;s built-in method</span>
            <span class="n">message_json</span> <span class="o">=</span> <span class="n">message</span><span class="o">.</span><span class="n">model_dump_json</span><span class="p">()</span>

            <span class="c1"># Publish message</span>
            <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">socket</span><span class="o">.</span><span class="n">send_multipart</span><span class="p">([</span><span class="n">topic</span><span class="o">.</span><span class="n">encode</span><span class="p">(),</span> <span class="n">message_json</span><span class="o">.</span><span class="n">encode</span><span class="p">()])</span>

        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">&quot;Exception publishing message to topic </span><span class="si">%s</span><span class="s2">: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">topic</span><span class="p">,</span> <span class="n">e</span><span class="p">)</span>
            <span class="k">raise</span> <span class="n">CommunicationPublishError</span><span class="p">(</span>
                <span class="s2">&quot;Failed to publish message to topic </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">topic</span>
            <span class="p">)</span> <span class="kn">from</span><span class="w"> </span><span class="nn">e</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h3 id="aiperf.common.comms.zmq.clients.pub.ZMQPubClient.__init__" class="doc doc-heading">
            <code class=" language-python"><span class="fm">__init__</span><span class="p">(</span><span class="n">context</span><span class="p">,</span> <span class="n">address</span><span class="p">,</span> <span class="n">bind</span><span class="p">,</span> <span class="n">socket_ops</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

<a href="#aiperf.common.comms.zmq.clients.pub.ZMQPubClient.__init__" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Initialize the ZMQ Publisher class.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>context</code>
            </td>
            <td>
                  <code><span title="zmq.asyncio.Context">Context</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The ZMQ context.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>address</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The address to bind or connect to.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>bind</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Whether to bind or connect the socket.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>socket_ops</code>
            </td>
            <td>
                  <code><span title="dict">dict</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Additional socket options to set.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>aiperf/common/comms/zmq/clients/pub.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">context</span><span class="p">:</span> <span class="n">zmq</span><span class="o">.</span><span class="n">asyncio</span><span class="o">.</span><span class="n">Context</span><span class="p">,</span>
    <span class="n">address</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">bind</span><span class="p">:</span> <span class="nb">bool</span><span class="p">,</span>
    <span class="n">socket_ops</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Initialize the ZMQ Publisher class.</span>

<span class="sd">    Args:</span>
<span class="sd">        context (zmq.asyncio.Context): The ZMQ context.</span>
<span class="sd">        address (str): The address to bind or connect to.</span>
<span class="sd">        bind (bool): Whether to bind or connect the socket.</span>
<span class="sd">        socket_ops (dict, optional): Additional socket options to set.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">context</span><span class="p">,</span> <span class="n">SocketType</span><span class="o">.</span><span class="n">PUB</span><span class="p">,</span> <span class="n">address</span><span class="p">,</span> <span class="n">bind</span><span class="p">,</span> <span class="n">socket_ops</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="aiperf.common.comms.zmq.clients.pub.ZMQPubClient.publish" class="doc doc-heading">
            <code class=" language-python"><span class="n">publish</span><span class="p">(</span><span class="n">topic</span><span class="p">,</span> <span class="n">message</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#aiperf.common.comms.zmq.clients.pub.ZMQPubClient.publish" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Publish a message to a topic.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>topic</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Topic to publish to</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>message</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="Message (aiperf.common.messages.Message)" href="#aiperf.common.messages.Message">Message</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Message to publish (must be a Pydantic model)</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="CommunicationNotInitializedError">CommunicationNotInitializedError</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If the client is not initialized</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="CommunicationPublishError (aiperf.common.exceptions.CommunicationPublishError)" href="#aiperf.common.exceptions.CommunicationPublishError">CommunicationPublishError</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If the message was not published successfully</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>aiperf/common/comms/zmq/clients/pub.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">publish</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">topic</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">message</span><span class="p">:</span> <span class="n">Message</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Publish a message to a topic.</span>

<span class="sd">    Args:</span>
<span class="sd">        topic: Topic to publish to</span>
<span class="sd">        message: Message to publish (must be a Pydantic model)</span>

<span class="sd">    Raises:</span>
<span class="sd">        CommunicationNotInitializedError: If the client is not initialized</span>
<span class="sd">        CommunicationPublishError: If the message was not published successfully</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_ensure_initialized</span><span class="p">()</span>

    <span class="k">try</span><span class="p">:</span>
        <span class="c1"># Serialize message using Pydantic&#39;s built-in method</span>
        <span class="n">message_json</span> <span class="o">=</span> <span class="n">message</span><span class="o">.</span><span class="n">model_dump_json</span><span class="p">()</span>

        <span class="c1"># Publish message</span>
        <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">socket</span><span class="o">.</span><span class="n">send_multipart</span><span class="p">([</span><span class="n">topic</span><span class="o">.</span><span class="n">encode</span><span class="p">(),</span> <span class="n">message_json</span><span class="o">.</span><span class="n">encode</span><span class="p">()])</span>

    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">&quot;Exception publishing message to topic </span><span class="si">%s</span><span class="s2">: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">topic</span><span class="p">,</span> <span class="n">e</span><span class="p">)</span>
        <span class="k">raise</span> <span class="n">CommunicationPublishError</span><span class="p">(</span>
            <span class="s2">&quot;Failed to publish message to topic </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">topic</span>
        <span class="p">)</span> <span class="kn">from</span><span class="w"> </span><span class="nn">e</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>




  </div>

    </div>

</div><h2 id="aiperfcommoncommszmqclientspull">aiperf.common.comms.zmq.clients.pull<a class="headerlink" href="#aiperfcommoncommszmqclientspull" title="Permanent link">&para;</a></h2>


<div class="doc doc-object doc-module">



<a id="aiperf.common.comms.zmq.clients.pull"></a>
    <div class="doc doc-contents first">









  <div class="doc doc-children">








<div class="doc doc-object doc-class">



<h2 id="aiperf.common.comms.zmq.clients.pull.ZMQPullClient" class="doc doc-heading">
            <code>ZMQPullClient</code>


<a href="#aiperf.common.comms.zmq.clients.pull.ZMQPullClient" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="BaseZMQClient (aiperf.common.comms.zmq.clients.base.BaseZMQClient)" href="#aiperf.common.comms.zmq.clients.base.BaseZMQClient">BaseZMQClient</a></code></p>








              <details class="quote">
                <summary>Source code in <code>aiperf/common/comms/zmq/clients/pull.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span>
<span class="normal">71</span>
<span class="normal">72</span>
<span class="normal">73</span>
<span class="normal">74</span>
<span class="normal">75</span>
<span class="normal">76</span>
<span class="normal">77</span>
<span class="normal">78</span>
<span class="normal">79</span>
<span class="normal">80</span>
<span class="normal">81</span>
<span class="normal">82</span>
<span class="normal">83</span>
<span class="normal">84</span>
<span class="normal">85</span>
<span class="normal">86</span>
<span class="normal">87</span>
<span class="normal">88</span>
<span class="normal">89</span>
<span class="normal">90</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">ZMQPullClient</span><span class="p">(</span><span class="n">BaseZMQClient</span><span class="p">):</span>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">context</span><span class="p">:</span> <span class="n">zmq</span><span class="o">.</span><span class="n">asyncio</span><span class="o">.</span><span class="n">Context</span><span class="p">,</span>
        <span class="n">address</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">bind</span><span class="p">:</span> <span class="nb">bool</span><span class="p">,</span>
        <span class="n">socket_ops</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Initialize the ZMQ Puller class.</span>

<span class="sd">        Args:</span>
<span class="sd">            context (zmq.asyncio.Context): The ZMQ context.</span>
<span class="sd">            address (str): The address to bind or connect to.</span>
<span class="sd">            bind (bool): Whether to bind or connect the socket.</span>
<span class="sd">            socket_ops (dict, optional): Additional socket options to set.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">context</span><span class="p">,</span> <span class="n">SocketType</span><span class="o">.</span><span class="n">PULL</span><span class="p">,</span> <span class="n">address</span><span class="p">,</span> <span class="n">bind</span><span class="p">,</span> <span class="n">socket_ops</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_pull_callbacks</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">list</span><span class="p">[</span><span class="n">Callable</span><span class="p">[[</span><span class="n">Message</span><span class="p">],</span> <span class="kc">None</span><span class="p">]]]</span> <span class="o">=</span> <span class="p">{}</span>

    <span class="nd">@aiperf_task</span>
    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">_pull_receiver</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Background task for receiving data from the pull socket.</span>

<span class="sd">        This method is a coroutine that will run indefinitely until the client is</span>
<span class="sd">        shutdown. It will wait for messages from the socket and handle them.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">while</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_shutdown</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_initialized</span><span class="p">:</span>
                    <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">initialized_event</span><span class="o">.</span><span class="n">wait</span><span class="p">()</span>

                <span class="c1"># Receive data</span>
                <span class="n">message_bytes</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">socket</span><span class="o">.</span><span class="n">recv</span><span class="p">()</span>
                <span class="n">message_json</span> <span class="o">=</span> <span class="n">message_bytes</span><span class="o">.</span><span class="n">decode</span><span class="p">()</span>

                <span class="c1"># Parse JSON into a Message object</span>
                <span class="n">message</span> <span class="o">=</span> <span class="n">Message</span><span class="o">.</span><span class="n">from_json</span><span class="p">(</span><span class="n">message_json</span><span class="p">)</span>
                <span class="n">topic</span> <span class="o">=</span> <span class="n">message</span><span class="o">.</span><span class="n">message_type</span>

                <span class="c1"># Call callbacks with Message object</span>
                <span class="k">if</span> <span class="n">topic</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_pull_callbacks</span><span class="p">:</span>
                    <span class="k">await</span> <span class="n">call_all_functions</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_pull_callbacks</span><span class="p">[</span><span class="n">topic</span><span class="p">],</span> <span class="n">message</span><span class="p">)</span>

            <span class="k">except</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">CancelledError</span><span class="p">:</span>
                <span class="k">break</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Exception receiving data from pull socket: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
                <span class="k">await</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mf">0.1</span><span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">register_pull_callback</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">message_type</span><span class="p">:</span> <span class="n">MessageType</span><span class="p">,</span>
        <span class="n">callback</span><span class="p">:</span> <span class="n">Callable</span><span class="p">[[</span><span class="n">Message</span><span class="p">],</span> <span class="n">Coroutine</span><span class="p">[</span><span class="n">Any</span><span class="p">,</span> <span class="n">Any</span><span class="p">,</span> <span class="kc">None</span><span class="p">]],</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Register a ZMQ Pull data callback from a message type.</span>

<span class="sd">        Args:</span>
<span class="sd">            message_type:</span>
<span class="sd">            callback: function to call when data is received.</span>

<span class="sd">        Raises:</span>
<span class="sd">            CommunicationNotInitializedError: If the client is not initialized</span>
<span class="sd">            CommunicationPullError: If an exception occurred registering the pull callback</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_ensure_initialized</span><span class="p">()</span>

        <span class="c1"># Register callback</span>
        <span class="k">if</span> <span class="n">message_type</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_pull_callbacks</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_pull_callbacks</span><span class="p">[</span><span class="n">message_type</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_pull_callbacks</span><span class="p">[</span><span class="n">message_type</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">callback</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h3 id="aiperf.common.comms.zmq.clients.pull.ZMQPullClient.__init__" class="doc doc-heading">
            <code class=" language-python"><span class="fm">__init__</span><span class="p">(</span><span class="n">context</span><span class="p">,</span> <span class="n">address</span><span class="p">,</span> <span class="n">bind</span><span class="p">,</span> <span class="n">socket_ops</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

<a href="#aiperf.common.comms.zmq.clients.pull.ZMQPullClient.__init__" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Initialize the ZMQ Puller class.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>context</code>
            </td>
            <td>
                  <code><span title="zmq.asyncio.Context">Context</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The ZMQ context.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>address</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The address to bind or connect to.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>bind</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Whether to bind or connect the socket.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>socket_ops</code>
            </td>
            <td>
                  <code><span title="dict">dict</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Additional socket options to set.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>aiperf/common/comms/zmq/clients/pull.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">context</span><span class="p">:</span> <span class="n">zmq</span><span class="o">.</span><span class="n">asyncio</span><span class="o">.</span><span class="n">Context</span><span class="p">,</span>
    <span class="n">address</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">bind</span><span class="p">:</span> <span class="nb">bool</span><span class="p">,</span>
    <span class="n">socket_ops</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Initialize the ZMQ Puller class.</span>

<span class="sd">    Args:</span>
<span class="sd">        context (zmq.asyncio.Context): The ZMQ context.</span>
<span class="sd">        address (str): The address to bind or connect to.</span>
<span class="sd">        bind (bool): Whether to bind or connect the socket.</span>
<span class="sd">        socket_ops (dict, optional): Additional socket options to set.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">context</span><span class="p">,</span> <span class="n">SocketType</span><span class="o">.</span><span class="n">PULL</span><span class="p">,</span> <span class="n">address</span><span class="p">,</span> <span class="n">bind</span><span class="p">,</span> <span class="n">socket_ops</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_pull_callbacks</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">list</span><span class="p">[</span><span class="n">Callable</span><span class="p">[[</span><span class="n">Message</span><span class="p">],</span> <span class="kc">None</span><span class="p">]]]</span> <span class="o">=</span> <span class="p">{}</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="aiperf.common.comms.zmq.clients.pull.ZMQPullClient.register_pull_callback" class="doc doc-heading">
            <code class=" language-python"><span class="n">register_pull_callback</span><span class="p">(</span><span class="n">message_type</span><span class="p">,</span> <span class="n">callback</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#aiperf.common.comms.zmq.clients.pull.ZMQPullClient.register_pull_callback" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Register a ZMQ Pull data callback from a message type.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>message_type</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="MessageType (aiperf.common.enums.MessageType)" href="#aiperf.common.enums.MessageType">MessageType</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>callback</code>
            </td>
            <td>
                  <code><span title="collections.abc.Callable">Callable</span>[[<a class="autorefs autorefs-internal" title="Message (aiperf.common.messages.Message)" href="#aiperf.common.messages.Message">Message</a>], <span title="typing.Coroutine">Coroutine</span>[<span title="typing.Any">Any</span>, <span title="typing.Any">Any</span>, None]]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>function to call when data is received.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="CommunicationNotInitializedError">CommunicationNotInitializedError</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If the client is not initialized</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                  <code><span title="CommunicationPullError">CommunicationPullError</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If an exception occurred registering the pull callback</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>aiperf/common/comms/zmq/clients/pull.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">70</span>
<span class="normal">71</span>
<span class="normal">72</span>
<span class="normal">73</span>
<span class="normal">74</span>
<span class="normal">75</span>
<span class="normal">76</span>
<span class="normal">77</span>
<span class="normal">78</span>
<span class="normal">79</span>
<span class="normal">80</span>
<span class="normal">81</span>
<span class="normal">82</span>
<span class="normal">83</span>
<span class="normal">84</span>
<span class="normal">85</span>
<span class="normal">86</span>
<span class="normal">87</span>
<span class="normal">88</span>
<span class="normal">89</span>
<span class="normal">90</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">register_pull_callback</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">message_type</span><span class="p">:</span> <span class="n">MessageType</span><span class="p">,</span>
    <span class="n">callback</span><span class="p">:</span> <span class="n">Callable</span><span class="p">[[</span><span class="n">Message</span><span class="p">],</span> <span class="n">Coroutine</span><span class="p">[</span><span class="n">Any</span><span class="p">,</span> <span class="n">Any</span><span class="p">,</span> <span class="kc">None</span><span class="p">]],</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Register a ZMQ Pull data callback from a message type.</span>

<span class="sd">    Args:</span>
<span class="sd">        message_type:</span>
<span class="sd">        callback: function to call when data is received.</span>

<span class="sd">    Raises:</span>
<span class="sd">        CommunicationNotInitializedError: If the client is not initialized</span>
<span class="sd">        CommunicationPullError: If an exception occurred registering the pull callback</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_ensure_initialized</span><span class="p">()</span>

    <span class="c1"># Register callback</span>
    <span class="k">if</span> <span class="n">message_type</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_pull_callbacks</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_pull_callbacks</span><span class="p">[</span><span class="n">message_type</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_pull_callbacks</span><span class="p">[</span><span class="n">message_type</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">callback</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>




  </div>

    </div>

</div><h2 id="aiperfcommoncommszmqclientspush">aiperf.common.comms.zmq.clients.push<a class="headerlink" href="#aiperfcommoncommszmqclientspush" title="Permanent link">&para;</a></h2>


<div class="doc doc-object doc-module">



<a id="aiperf.common.comms.zmq.clients.push"></a>
    <div class="doc doc-contents first">









  <div class="doc doc-children">








<div class="doc doc-object doc-class">



<h2 id="aiperf.common.comms.zmq.clients.push.ZMQPushClient" class="doc doc-heading">
            <code>ZMQPushClient</code>


<a href="#aiperf.common.comms.zmq.clients.push.ZMQPushClient" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="BaseZMQClient (aiperf.common.comms.zmq.clients.base.BaseZMQClient)" href="#aiperf.common.comms.zmq.clients.base.BaseZMQClient">BaseZMQClient</a></code></p>








              <details class="quote">
                <summary>Source code in <code>aiperf/common/comms/zmq/clients/push.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">ZMQPushClient</span><span class="p">(</span><span class="n">BaseZMQClient</span><span class="p">):</span>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">context</span><span class="p">:</span> <span class="n">zmq</span><span class="o">.</span><span class="n">asyncio</span><span class="o">.</span><span class="n">Context</span><span class="p">,</span>
        <span class="n">address</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">bind</span><span class="p">:</span> <span class="nb">bool</span><span class="p">,</span>
        <span class="n">socket_ops</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Initialize the ZMQ Pusher class.</span>

<span class="sd">        Args:</span>
<span class="sd">            context (zmq.asyncio.Context): The ZMQ context.</span>
<span class="sd">            address (str): The address to bind or connect to.</span>
<span class="sd">            bind (bool): Whether to bind or connect the socket.</span>
<span class="sd">            socket_ops (dict, optional): Additional socket options to set.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">context</span><span class="p">,</span> <span class="n">SocketType</span><span class="o">.</span><span class="n">PUSH</span><span class="p">,</span> <span class="n">address</span><span class="p">,</span> <span class="n">bind</span><span class="p">,</span> <span class="n">socket_ops</span><span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">push</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">message</span><span class="p">:</span> <span class="n">Message</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Push data to a target.</span>

<span class="sd">        Args:</span>
<span class="sd">            message: Message to be sent must be a Message object</span>

<span class="sd">        Raises:</span>
<span class="sd">            CommunicationNotInitializedError: If the client is not initialized</span>
<span class="sd">            CommunicationPushError: If the data was not pushed successfully</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_ensure_initialized</span><span class="p">()</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="c1"># Serialize data directly using Pydantic&#39;s built-in method</span>
            <span class="n">data_json</span> <span class="o">=</span> <span class="n">message</span><span class="o">.</span><span class="n">model_dump_json</span><span class="p">()</span>

            <span class="c1"># Send data</span>
            <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">socket</span><span class="o">.</span><span class="n">send_string</span><span class="p">(</span><span class="n">data_json</span><span class="p">)</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Pushed json data: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">data_json</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Exception pushing data: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">e</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="k">raise</span> <span class="n">CommunicationPushError</span> <span class="kn">from</span><span class="w"> </span><span class="nn">e</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h3 id="aiperf.common.comms.zmq.clients.push.ZMQPushClient.__init__" class="doc doc-heading">
            <code class=" language-python"><span class="fm">__init__</span><span class="p">(</span><span class="n">context</span><span class="p">,</span> <span class="n">address</span><span class="p">,</span> <span class="n">bind</span><span class="p">,</span> <span class="n">socket_ops</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

<a href="#aiperf.common.comms.zmq.clients.push.ZMQPushClient.__init__" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Initialize the ZMQ Pusher class.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>context</code>
            </td>
            <td>
                  <code><span title="zmq.asyncio.Context">Context</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The ZMQ context.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>address</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The address to bind or connect to.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>bind</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Whether to bind or connect the socket.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>socket_ops</code>
            </td>
            <td>
                  <code><span title="dict">dict</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Additional socket options to set.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>aiperf/common/comms/zmq/clients/push.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">context</span><span class="p">:</span> <span class="n">zmq</span><span class="o">.</span><span class="n">asyncio</span><span class="o">.</span><span class="n">Context</span><span class="p">,</span>
    <span class="n">address</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">bind</span><span class="p">:</span> <span class="nb">bool</span><span class="p">,</span>
    <span class="n">socket_ops</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Initialize the ZMQ Pusher class.</span>

<span class="sd">    Args:</span>
<span class="sd">        context (zmq.asyncio.Context): The ZMQ context.</span>
<span class="sd">        address (str): The address to bind or connect to.</span>
<span class="sd">        bind (bool): Whether to bind or connect the socket.</span>
<span class="sd">        socket_ops (dict, optional): Additional socket options to set.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">context</span><span class="p">,</span> <span class="n">SocketType</span><span class="o">.</span><span class="n">PUSH</span><span class="p">,</span> <span class="n">address</span><span class="p">,</span> <span class="n">bind</span><span class="p">,</span> <span class="n">socket_ops</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="aiperf.common.comms.zmq.clients.push.ZMQPushClient.push" class="doc doc-heading">
            <code class=" language-python"><span class="n">push</span><span class="p">(</span><span class="n">message</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#aiperf.common.comms.zmq.clients.push.ZMQPushClient.push" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Push data to a target.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>message</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="Message (aiperf.common.messages.Message)" href="#aiperf.common.messages.Message">Message</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Message to be sent must be a Message object</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="CommunicationNotInitializedError">CommunicationNotInitializedError</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If the client is not initialized</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="CommunicationPushError (aiperf.common.exceptions.CommunicationPushError)" href="#aiperf.common.exceptions.CommunicationPushError">CommunicationPushError</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If the data was not pushed successfully</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>aiperf/common/comms/zmq/clients/push.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">push</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">message</span><span class="p">:</span> <span class="n">Message</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Push data to a target.</span>

<span class="sd">    Args:</span>
<span class="sd">        message: Message to be sent must be a Message object</span>

<span class="sd">    Raises:</span>
<span class="sd">        CommunicationNotInitializedError: If the client is not initialized</span>
<span class="sd">        CommunicationPushError: If the data was not pushed successfully</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_ensure_initialized</span><span class="p">()</span>

    <span class="k">try</span><span class="p">:</span>
        <span class="c1"># Serialize data directly using Pydantic&#39;s built-in method</span>
        <span class="n">data_json</span> <span class="o">=</span> <span class="n">message</span><span class="o">.</span><span class="n">model_dump_json</span><span class="p">()</span>

        <span class="c1"># Send data</span>
        <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">socket</span><span class="o">.</span><span class="n">send_string</span><span class="p">(</span><span class="n">data_json</span><span class="p">)</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Pushed json data: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">data_json</span><span class="p">)</span>
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Exception pushing data: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">e</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">raise</span> <span class="n">CommunicationPushError</span> <span class="kn">from</span><span class="w"> </span><span class="nn">e</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>




  </div>

    </div>

</div><h2 id="aiperfcommoncommszmqclientsrep">aiperf.common.comms.zmq.clients.rep<a class="headerlink" href="#aiperfcommoncommszmqclientsrep" title="Permanent link">&para;</a></h2>


<div class="doc doc-object doc-module">



<a id="aiperf.common.comms.zmq.clients.rep"></a>
    <div class="doc doc-contents first">









  <div class="doc doc-children">








<div class="doc doc-object doc-class">



<h2 id="aiperf.common.comms.zmq.clients.rep.ZMQRepClient" class="doc doc-heading">
            <code>ZMQRepClient</code>


<a href="#aiperf.common.comms.zmq.clients.rep.ZMQRepClient" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="BaseZMQClient (aiperf.common.comms.zmq.clients.base.BaseZMQClient)" href="#aiperf.common.comms.zmq.clients.base.BaseZMQClient">BaseZMQClient</a></code></p>








              <details class="quote">
                <summary>Source code in <code>aiperf/common/comms/zmq/clients/rep.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 17</span>
<span class="normal"> 18</span>
<span class="normal"> 19</span>
<span class="normal"> 20</span>
<span class="normal"> 21</span>
<span class="normal"> 22</span>
<span class="normal"> 23</span>
<span class="normal"> 24</span>
<span class="normal"> 25</span>
<span class="normal"> 26</span>
<span class="normal"> 27</span>
<span class="normal"> 28</span>
<span class="normal"> 29</span>
<span class="normal"> 30</span>
<span class="normal"> 31</span>
<span class="normal"> 32</span>
<span class="normal"> 33</span>
<span class="normal"> 34</span>
<span class="normal"> 35</span>
<span class="normal"> 36</span>
<span class="normal"> 37</span>
<span class="normal"> 38</span>
<span class="normal"> 39</span>
<span class="normal"> 40</span>
<span class="normal"> 41</span>
<span class="normal"> 42</span>
<span class="normal"> 43</span>
<span class="normal"> 44</span>
<span class="normal"> 45</span>
<span class="normal"> 46</span>
<span class="normal"> 47</span>
<span class="normal"> 48</span>
<span class="normal"> 49</span>
<span class="normal"> 50</span>
<span class="normal"> 51</span>
<span class="normal"> 52</span>
<span class="normal"> 53</span>
<span class="normal"> 54</span>
<span class="normal"> 55</span>
<span class="normal"> 56</span>
<span class="normal"> 57</span>
<span class="normal"> 58</span>
<span class="normal"> 59</span>
<span class="normal"> 60</span>
<span class="normal"> 61</span>
<span class="normal"> 62</span>
<span class="normal"> 63</span>
<span class="normal"> 64</span>
<span class="normal"> 65</span>
<span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">ZMQRepClient</span><span class="p">(</span><span class="n">BaseZMQClient</span><span class="p">):</span>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">context</span><span class="p">:</span> <span class="n">zmq</span><span class="o">.</span><span class="n">asyncio</span><span class="o">.</span><span class="n">Context</span><span class="p">,</span>
        <span class="n">address</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">bind</span><span class="p">:</span> <span class="nb">bool</span><span class="p">,</span>
        <span class="n">socket_ops</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Initialize the ZMQ REP class.</span>

<span class="sd">        Args:</span>
<span class="sd">            context (zmq.asyncio.Context): The ZMQ context.</span>
<span class="sd">            address (str): The address to bind or connect to.</span>
<span class="sd">            bind (bool): Whether to bind or connect the socket.</span>
<span class="sd">            socket_ops (dict, optional): Additional socket options to set.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">context</span><span class="p">,</span> <span class="n">SocketType</span><span class="o">.</span><span class="n">REP</span><span class="p">,</span> <span class="n">address</span><span class="p">,</span> <span class="n">bind</span><span class="p">,</span> <span class="n">socket_ops</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_response_futures</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_response_data</span> <span class="o">=</span> <span class="p">{}</span>

    <span class="nd">@on_cleanup</span>
    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">_cleanup</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Clean up any pending futures.&quot;&quot;&quot;</span>
        <span class="c1"># Resolve any pending futures with errors</span>
        <span class="k">for</span> <span class="n">_</span><span class="p">,</span> <span class="n">future</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_response_futures</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">future</span><span class="o">.</span><span class="n">done</span><span class="p">():</span>
                <span class="n">future</span><span class="o">.</span><span class="n">set_exception</span><span class="p">(</span><span class="ne">ConnectionError</span><span class="p">(</span><span class="s2">&quot;Socket was shut down&quot;</span><span class="p">))</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_response_futures</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_response_data</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>

    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">wait_for_request</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">timeout</span><span class="p">:</span> <span class="nb">float</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Message</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Wait for a request to arrive.</span>

<span class="sd">        Args:</span>
<span class="sd">            timeout: Timeout in seconds or None for no timeout</span>

<span class="sd">        Returns:</span>
<span class="sd">            Message or Exception if request was not received successfully</span>

<span class="sd">        Raises:</span>
<span class="sd">            CommunicationNotInitializedError: If the client is not initialized</span>
<span class="sd">            CommunicationResponseError: If the request was not received successfully</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_ensure_initialized</span><span class="p">()</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="c1"># Create a future for the next request</span>
            <span class="n">request_id</span> <span class="o">=</span> <span class="s2">&quot;next_request&quot;</span>  <span class="c1"># Special ID for the next request</span>
            <span class="n">future</span> <span class="o">=</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">Future</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_response_futures</span><span class="p">[</span><span class="n">request_id</span><span class="p">]</span> <span class="o">=</span> <span class="n">future</span>

            <span class="k">try</span><span class="p">:</span>
                <span class="c1"># Wait for the request with optional timeout</span>
                <span class="k">if</span> <span class="n">timeout</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="n">request_json</span> <span class="o">=</span> <span class="k">await</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">wait_for</span><span class="p">(</span><span class="n">future</span><span class="p">,</span> <span class="n">timeout</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">request_json</span> <span class="o">=</span> <span class="k">await</span> <span class="n">future</span>

                <span class="c1"># Parse the request</span>
                <span class="n">request</span> <span class="o">=</span> <span class="n">MessageTypeAdapter</span><span class="o">.</span><span class="n">validate_json</span><span class="p">(</span><span class="n">request_json</span><span class="p">)</span>
                <span class="k">return</span> <span class="n">request</span>

            <span class="k">except</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">TimeoutError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Timeout waiting for request&quot;</span><span class="p">)</span>
                <span class="k">raise</span> <span class="n">CommunicationResponseError</span><span class="p">(</span><span class="s2">&quot;Timeout waiting for request&quot;</span><span class="p">)</span> <span class="kn">from</span><span class="w"> </span><span class="nn">e</span>

            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Exception waiting for request: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
                <span class="k">raise</span> <span class="n">CommunicationResponseError</span><span class="p">(</span><span class="s2">&quot;Exception waiting for request&quot;</span><span class="p">)</span> <span class="kn">from</span><span class="w"> </span><span class="nn">e</span>

            <span class="k">finally</span><span class="p">:</span>
                <span class="c1"># Clean up future</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_response_futures</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="n">request_id</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>

        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Exception waiting for request: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="k">raise</span> <span class="n">CommunicationResponseError</span><span class="p">(</span><span class="s2">&quot;Exception waiting for request&quot;</span><span class="p">)</span> <span class="kn">from</span><span class="w"> </span><span class="nn">e</span>

    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">respond</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">target</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">response</span><span class="p">:</span> <span class="n">Message</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Send a response to a request.</span>

<span class="sd">        Args:</span>
<span class="sd">            target: Target component to send response to</span>
<span class="sd">            response: Response message (must be a Message instance)</span>

<span class="sd">        Raises:</span>
<span class="sd">            CommunicationNotInitializedError: If the client is not initialized</span>
<span class="sd">            CommunicationResponseError: If the response was not sent successfully</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_ensure_initialized</span><span class="p">()</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="c1"># Serialize response using Pydantic&#39;s built-in method</span>
            <span class="n">response_json</span> <span class="o">=</span> <span class="n">response</span><span class="o">.</span><span class="n">model_dump_json</span><span class="p">()</span>

            <span class="c1"># Send response</span>
            <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">socket</span><span class="o">.</span><span class="n">send_string</span><span class="p">(</span><span class="n">response_json</span><span class="p">)</span>

        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Exception sending response to </span><span class="si">{</span><span class="n">target</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="k">raise</span> <span class="n">CommunicationResponseError</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Exception sending response to </span><span class="si">{</span><span class="n">target</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="p">)</span> <span class="kn">from</span><span class="w"> </span><span class="nn">e</span>

    <span class="nd">@aiperf_task</span>
    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">_rep_receiver</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Background task for receiving requests and sending responses.</span>

<span class="sd">        This method is a coroutine that will run indefinitely until the client is</span>
<span class="sd">        shutdown. It will wait for requests from the socket and send responses.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">while</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_shutdown</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_initialized</span><span class="p">:</span>
                    <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">initialized_event</span><span class="o">.</span><span class="n">wait</span><span class="p">()</span>

                <span class="c1"># Receive request</span>
                <span class="n">request_json</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">socket</span><span class="o">.</span><span class="n">recv_string</span><span class="p">()</span>

                <span class="c1"># Parse JSON to create RequestData object</span>
                <span class="n">request</span> <span class="o">=</span> <span class="n">MessageTypeAdapter</span><span class="o">.</span><span class="n">validate_json</span><span class="p">(</span><span class="n">request_json</span><span class="p">)</span>
                <span class="n">request_id</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">request_id</span>

                <span class="c1"># Store request data</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_response_data</span><span class="p">[</span><span class="n">request_id</span><span class="p">]</span> <span class="o">=</span> <span class="n">request</span>

                <span class="c1"># Check for special &quot;next_request&quot; future</span>
                <span class="k">if</span> <span class="s2">&quot;next_request&quot;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_response_futures</span><span class="p">:</span>
                    <span class="n">future</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_response_futures</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s2">&quot;next_request&quot;</span><span class="p">)</span>
                    <span class="k">if</span> <span class="ow">not</span> <span class="n">future</span><span class="o">.</span><span class="n">done</span><span class="p">():</span>
                        <span class="n">future</span><span class="o">.</span><span class="n">set_result</span><span class="p">(</span><span class="n">request_json</span><span class="p">)</span>
                <span class="c1"># Resolve future if it exists for the specific request ID</span>
                <span class="k">elif</span> <span class="n">request_id</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_response_futures</span><span class="p">:</span>
                    <span class="n">future</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_response_futures</span><span class="p">[</span><span class="n">request_id</span><span class="p">]</span>
                    <span class="k">if</span> <span class="ow">not</span> <span class="n">future</span><span class="o">.</span><span class="n">done</span><span class="p">():</span>
                        <span class="n">future</span><span class="o">.</span><span class="n">set_result</span><span class="p">(</span><span class="n">request_json</span><span class="p">)</span>
            <span class="k">except</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">CancelledError</span><span class="p">:</span>
                <span class="k">break</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Exception receiving request: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
                <span class="k">await</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mf">0.1</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h3 id="aiperf.common.comms.zmq.clients.rep.ZMQRepClient.__init__" class="doc doc-heading">
            <code class=" language-python"><span class="fm">__init__</span><span class="p">(</span><span class="n">context</span><span class="p">,</span> <span class="n">address</span><span class="p">,</span> <span class="n">bind</span><span class="p">,</span> <span class="n">socket_ops</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

<a href="#aiperf.common.comms.zmq.clients.rep.ZMQRepClient.__init__" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Initialize the ZMQ REP class.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>context</code>
            </td>
            <td>
                  <code><span title="zmq.asyncio.Context">Context</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The ZMQ context.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>address</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The address to bind or connect to.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>bind</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Whether to bind or connect the socket.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>socket_ops</code>
            </td>
            <td>
                  <code><span title="dict">dict</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Additional socket options to set.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>aiperf/common/comms/zmq/clients/rep.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">context</span><span class="p">:</span> <span class="n">zmq</span><span class="o">.</span><span class="n">asyncio</span><span class="o">.</span><span class="n">Context</span><span class="p">,</span>
    <span class="n">address</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">bind</span><span class="p">:</span> <span class="nb">bool</span><span class="p">,</span>
    <span class="n">socket_ops</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Initialize the ZMQ REP class.</span>

<span class="sd">    Args:</span>
<span class="sd">        context (zmq.asyncio.Context): The ZMQ context.</span>
<span class="sd">        address (str): The address to bind or connect to.</span>
<span class="sd">        bind (bool): Whether to bind or connect the socket.</span>
<span class="sd">        socket_ops (dict, optional): Additional socket options to set.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">context</span><span class="p">,</span> <span class="n">SocketType</span><span class="o">.</span><span class="n">REP</span><span class="p">,</span> <span class="n">address</span><span class="p">,</span> <span class="n">bind</span><span class="p">,</span> <span class="n">socket_ops</span><span class="p">)</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">_response_futures</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_response_data</span> <span class="o">=</span> <span class="p">{}</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="aiperf.common.comms.zmq.clients.rep.ZMQRepClient.respond" class="doc doc-heading">
            <code class=" language-python"><span class="n">respond</span><span class="p">(</span><span class="n">target</span><span class="p">,</span> <span class="n">response</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#aiperf.common.comms.zmq.clients.rep.ZMQRepClient.respond" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Send a response to a request.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>target</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Target component to send response to</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>response</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="Message (aiperf.common.messages.Message)" href="#aiperf.common.messages.Message">Message</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Response message (must be a Message instance)</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="CommunicationNotInitializedError">CommunicationNotInitializedError</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If the client is not initialized</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="CommunicationResponseError (aiperf.common.exceptions.CommunicationResponseError)" href="#aiperf.common.exceptions.CommunicationResponseError">CommunicationResponseError</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If the response was not sent successfully</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>aiperf/common/comms/zmq/clients/rep.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">respond</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">target</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">response</span><span class="p">:</span> <span class="n">Message</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Send a response to a request.</span>

<span class="sd">    Args:</span>
<span class="sd">        target: Target component to send response to</span>
<span class="sd">        response: Response message (must be a Message instance)</span>

<span class="sd">    Raises:</span>
<span class="sd">        CommunicationNotInitializedError: If the client is not initialized</span>
<span class="sd">        CommunicationResponseError: If the response was not sent successfully</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_ensure_initialized</span><span class="p">()</span>

    <span class="k">try</span><span class="p">:</span>
        <span class="c1"># Serialize response using Pydantic&#39;s built-in method</span>
        <span class="n">response_json</span> <span class="o">=</span> <span class="n">response</span><span class="o">.</span><span class="n">model_dump_json</span><span class="p">()</span>

        <span class="c1"># Send response</span>
        <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">socket</span><span class="o">.</span><span class="n">send_string</span><span class="p">(</span><span class="n">response_json</span><span class="p">)</span>

    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Exception sending response to </span><span class="si">{</span><span class="n">target</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">raise</span> <span class="n">CommunicationResponseError</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;Exception sending response to </span><span class="si">{</span><span class="n">target</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="p">)</span> <span class="kn">from</span><span class="w"> </span><span class="nn">e</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="aiperf.common.comms.zmq.clients.rep.ZMQRepClient.wait_for_request" class="doc doc-heading">
            <code class=" language-python"><span class="n">wait_for_request</span><span class="p">(</span><span class="n">timeout</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#aiperf.common.comms.zmq.clients.rep.ZMQRepClient.wait_for_request" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Wait for a request to arrive.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>timeout</code>
            </td>
            <td>
                  <code><span title="float">float</span> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Timeout in seconds or None for no timeout</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="Message (aiperf.common.messages.Message)" href="#aiperf.common.messages.Message">Message</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Message or Exception if request was not received successfully</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="CommunicationNotInitializedError">CommunicationNotInitializedError</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If the client is not initialized</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="CommunicationResponseError (aiperf.common.exceptions.CommunicationResponseError)" href="#aiperf.common.exceptions.CommunicationResponseError">CommunicationResponseError</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If the request was not received successfully</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>aiperf/common/comms/zmq/clients/rep.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span>
<span class="normal">71</span>
<span class="normal">72</span>
<span class="normal">73</span>
<span class="normal">74</span>
<span class="normal">75</span>
<span class="normal">76</span>
<span class="normal">77</span>
<span class="normal">78</span>
<span class="normal">79</span>
<span class="normal">80</span>
<span class="normal">81</span>
<span class="normal">82</span>
<span class="normal">83</span>
<span class="normal">84</span>
<span class="normal">85</span>
<span class="normal">86</span>
<span class="normal">87</span>
<span class="normal">88</span>
<span class="normal">89</span>
<span class="normal">90</span>
<span class="normal">91</span>
<span class="normal">92</span>
<span class="normal">93</span>
<span class="normal">94</span>
<span class="normal">95</span>
<span class="normal">96</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">wait_for_request</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">timeout</span><span class="p">:</span> <span class="nb">float</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Message</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Wait for a request to arrive.</span>

<span class="sd">    Args:</span>
<span class="sd">        timeout: Timeout in seconds or None for no timeout</span>

<span class="sd">    Returns:</span>
<span class="sd">        Message or Exception if request was not received successfully</span>

<span class="sd">    Raises:</span>
<span class="sd">        CommunicationNotInitializedError: If the client is not initialized</span>
<span class="sd">        CommunicationResponseError: If the request was not received successfully</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_ensure_initialized</span><span class="p">()</span>

    <span class="k">try</span><span class="p">:</span>
        <span class="c1"># Create a future for the next request</span>
        <span class="n">request_id</span> <span class="o">=</span> <span class="s2">&quot;next_request&quot;</span>  <span class="c1"># Special ID for the next request</span>
        <span class="n">future</span> <span class="o">=</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">Future</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_response_futures</span><span class="p">[</span><span class="n">request_id</span><span class="p">]</span> <span class="o">=</span> <span class="n">future</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="c1"># Wait for the request with optional timeout</span>
            <span class="k">if</span> <span class="n">timeout</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">request_json</span> <span class="o">=</span> <span class="k">await</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">wait_for</span><span class="p">(</span><span class="n">future</span><span class="p">,</span> <span class="n">timeout</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">request_json</span> <span class="o">=</span> <span class="k">await</span> <span class="n">future</span>

            <span class="c1"># Parse the request</span>
            <span class="n">request</span> <span class="o">=</span> <span class="n">MessageTypeAdapter</span><span class="o">.</span><span class="n">validate_json</span><span class="p">(</span><span class="n">request_json</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">request</span>

        <span class="k">except</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">TimeoutError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Timeout waiting for request&quot;</span><span class="p">)</span>
            <span class="k">raise</span> <span class="n">CommunicationResponseError</span><span class="p">(</span><span class="s2">&quot;Timeout waiting for request&quot;</span><span class="p">)</span> <span class="kn">from</span><span class="w"> </span><span class="nn">e</span>

        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Exception waiting for request: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="k">raise</span> <span class="n">CommunicationResponseError</span><span class="p">(</span><span class="s2">&quot;Exception waiting for request&quot;</span><span class="p">)</span> <span class="kn">from</span><span class="w"> </span><span class="nn">e</span>

        <span class="k">finally</span><span class="p">:</span>
            <span class="c1"># Clean up future</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_response_futures</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="n">request_id</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>

    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Exception waiting for request: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">raise</span> <span class="n">CommunicationResponseError</span><span class="p">(</span><span class="s2">&quot;Exception waiting for request&quot;</span><span class="p">)</span> <span class="kn">from</span><span class="w"> </span><span class="nn">e</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>




  </div>

    </div>

</div><h2 id="aiperfcommoncommszmqclientsreq">aiperf.common.comms.zmq.clients.req<a class="headerlink" href="#aiperfcommoncommszmqclientsreq" title="Permanent link">&para;</a></h2>


<div class="doc doc-object doc-module">



<a id="aiperf.common.comms.zmq.clients.req"></a>
    <div class="doc doc-contents first">









  <div class="doc doc-children">








<div class="doc doc-object doc-class">



<h2 id="aiperf.common.comms.zmq.clients.req.ZMQReqClient" class="doc doc-heading">
            <code>ZMQReqClient</code>


<a href="#aiperf.common.comms.zmq.clients.req.ZMQReqClient" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="BaseZMQClient (aiperf.common.comms.zmq.clients.base.BaseZMQClient)" href="#aiperf.common.comms.zmq.clients.base.BaseZMQClient">BaseZMQClient</a></code></p>








              <details class="quote">
                <summary>Source code in <code>aiperf/common/comms/zmq/clients/req.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 21</span>
<span class="normal"> 22</span>
<span class="normal"> 23</span>
<span class="normal"> 24</span>
<span class="normal"> 25</span>
<span class="normal"> 26</span>
<span class="normal"> 27</span>
<span class="normal"> 28</span>
<span class="normal"> 29</span>
<span class="normal"> 30</span>
<span class="normal"> 31</span>
<span class="normal"> 32</span>
<span class="normal"> 33</span>
<span class="normal"> 34</span>
<span class="normal"> 35</span>
<span class="normal"> 36</span>
<span class="normal"> 37</span>
<span class="normal"> 38</span>
<span class="normal"> 39</span>
<span class="normal"> 40</span>
<span class="normal"> 41</span>
<span class="normal"> 42</span>
<span class="normal"> 43</span>
<span class="normal"> 44</span>
<span class="normal"> 45</span>
<span class="normal"> 46</span>
<span class="normal"> 47</span>
<span class="normal"> 48</span>
<span class="normal"> 49</span>
<span class="normal"> 50</span>
<span class="normal"> 51</span>
<span class="normal"> 52</span>
<span class="normal"> 53</span>
<span class="normal"> 54</span>
<span class="normal"> 55</span>
<span class="normal"> 56</span>
<span class="normal"> 57</span>
<span class="normal"> 58</span>
<span class="normal"> 59</span>
<span class="normal"> 60</span>
<span class="normal"> 61</span>
<span class="normal"> 62</span>
<span class="normal"> 63</span>
<span class="normal"> 64</span>
<span class="normal"> 65</span>
<span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">ZMQReqClient</span><span class="p">(</span><span class="n">BaseZMQClient</span><span class="p">):</span>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">context</span><span class="p">:</span> <span class="n">zmq</span><span class="o">.</span><span class="n">asyncio</span><span class="o">.</span><span class="n">Context</span><span class="p">,</span>
        <span class="n">address</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">bind</span><span class="p">:</span> <span class="nb">bool</span><span class="p">,</span>
        <span class="n">socket_ops</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Initialize the ZMQ Req class.</span>

<span class="sd">        Args:</span>
<span class="sd">            context (zmq.asyncio.Context): The ZMQ context.</span>
<span class="sd">            address (str): The address to bind or connect to.</span>
<span class="sd">            bind (bool): Whether to bind or connect the socket.</span>
<span class="sd">            socket_ops (dict, optional): Additional socket options to set.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">context</span><span class="p">,</span> <span class="n">SocketType</span><span class="o">.</span><span class="n">REQ</span><span class="p">,</span> <span class="n">address</span><span class="p">,</span> <span class="n">bind</span><span class="p">,</span> <span class="n">socket_ops</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_response_futures</span> <span class="o">=</span> <span class="p">{}</span>

    <span class="nd">@aiperf_task</span>
    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">_process_messages</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Process incoming response messages in the background.</span>

<span class="sd">        This method is a coroutine that will run indefinitely until the client is</span>
<span class="sd">        shutdown. It will wait for messages from the socket and handle them.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">while</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_shutdown</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_initialized</span><span class="p">:</span>
                    <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">initialized_event</span><span class="o">.</span><span class="n">wait</span><span class="p">()</span>

                <span class="n">response_json</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">socket</span><span class="o">.</span><span class="n">recv_string</span><span class="p">()</span>
                <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_handle_response</span><span class="p">(</span><span class="n">response_json</span><span class="p">)</span>
            <span class="k">except</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">CancelledError</span><span class="p">:</span>
                <span class="k">break</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Exception processing messages: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
                <span class="k">await</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mf">0.1</span><span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">_handle_response</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">response_json</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Handle a response message.</span>

<span class="sd">        Args:</span>
<span class="sd">            response_json: The JSON response string</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">response</span> <span class="o">=</span> <span class="n">MessageTypeAdapter</span><span class="o">.</span><span class="n">validate_json</span><span class="p">(</span><span class="n">response_json</span><span class="p">)</span>
            <span class="n">request_id</span> <span class="o">=</span> <span class="n">response</span><span class="o">.</span><span class="n">request_id</span>

            <span class="k">if</span> <span class="n">request_id</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_response_futures</span><span class="p">:</span>
                <span class="n">future</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_response_futures</span><span class="p">[</span><span class="n">request_id</span><span class="p">]</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="n">future</span><span class="o">.</span><span class="n">done</span><span class="p">():</span>
                    <span class="n">future</span><span class="o">.</span><span class="n">set_result</span><span class="p">(</span><span class="n">response_json</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span>
                    <span class="sa">f</span><span class="s2">&quot;Received response for unknown request ID: </span><span class="si">{</span><span class="n">request_id</span><span class="si">}</span><span class="s2">&quot;</span>
                <span class="p">)</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Exception handling response: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="k">raise</span> <span class="n">CommunicationRequestError</span><span class="p">(</span><span class="s2">&quot;Exception handling response&quot;</span><span class="p">)</span> <span class="kn">from</span><span class="w"> </span><span class="nn">e</span>

    <span class="nd">@on_cleanup</span>
    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">_cleanup</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Clean up any pending futures.&quot;&quot;&quot;</span>
        <span class="c1"># Resolve any pending futures with errors</span>
        <span class="k">for</span> <span class="n">request_id</span><span class="p">,</span> <span class="n">future</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_response_futures</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">future</span><span class="o">.</span><span class="n">done</span><span class="p">():</span>
                <span class="n">error_response</span> <span class="o">=</span> <span class="n">ErrorMessage</span><span class="p">(</span>
                    <span class="n">service_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">client_id</span><span class="p">,</span>
                    <span class="n">request_id</span><span class="o">=</span><span class="n">request_id</span><span class="p">,</span>
                    <span class="n">error_message</span><span class="o">=</span><span class="s2">&quot;Socket was shut down&quot;</span><span class="p">,</span>
                <span class="p">)</span>
                <span class="n">future</span><span class="o">.</span><span class="n">set_result</span><span class="p">(</span><span class="n">error_response</span><span class="o">.</span><span class="n">model_dump_json</span><span class="p">())</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_response_futures</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>

    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">request</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">target</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">request_data</span><span class="p">:</span> <span class="n">Message</span><span class="p">,</span>
        <span class="n">timeout</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">5.0</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Message</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Send a request and wait for a response.</span>

<span class="sd">        Args:</span>
<span class="sd">            target: Target component to send request to</span>
<span class="sd">            request_data: Request data (must be a RequestData instance)</span>
<span class="sd">            timeout: Timeout in seconds</span>

<span class="sd">        Returns:</span>
<span class="sd">            ResponseData object</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_ensure_initialized</span><span class="p">()</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="c1"># Generate request ID if not provided</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">request_data</span><span class="o">.</span><span class="n">request_id</span><span class="p">:</span>
                <span class="n">request_data</span><span class="o">.</span><span class="n">request_id</span> <span class="o">=</span> <span class="n">uuid</span><span class="o">.</span><span class="n">uuid4</span><span class="p">()</span><span class="o">.</span><span class="n">hex</span>

            <span class="c1"># Serialize request</span>
            <span class="n">request_json</span> <span class="o">=</span> <span class="n">request_data</span><span class="o">.</span><span class="n">model_dump_json</span><span class="p">()</span>

            <span class="c1"># Create future for response</span>
            <span class="n">future</span> <span class="o">=</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">Future</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_response_futures</span><span class="p">[</span><span class="n">request_data</span><span class="o">.</span><span class="n">request_id</span><span class="p">]</span> <span class="o">=</span> <span class="n">future</span>

            <span class="c1"># Send request</span>
            <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">socket</span><span class="o">.</span><span class="n">send_string</span><span class="p">(</span><span class="n">request_json</span><span class="p">)</span>

            <span class="c1"># Wait for response with timeout</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">response_json</span> <span class="o">=</span> <span class="k">await</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">wait_for</span><span class="p">(</span><span class="n">future</span><span class="p">,</span> <span class="n">timeout</span><span class="p">)</span>
                <span class="n">response</span> <span class="o">=</span> <span class="n">MessageTypeAdapter</span><span class="o">.</span><span class="n">validate_json</span><span class="p">(</span><span class="n">response_json</span><span class="p">)</span>
                <span class="k">return</span> <span class="n">response</span>

            <span class="k">except</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">TimeoutError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span>
                    <span class="sa">f</span><span class="s2">&quot;Timeout waiting for response to request </span><span class="si">{</span><span class="n">request_data</span><span class="o">.</span><span class="n">request_id</span><span class="si">}</span><span class="s2">&quot;</span>
                <span class="p">)</span>
                <span class="k">raise</span> <span class="n">CommunicationRequestError</span><span class="p">(</span>
                    <span class="sa">f</span><span class="s2">&quot;Timeout waiting for response to request </span><span class="si">{</span><span class="n">request_data</span><span class="o">.</span><span class="n">request_id</span><span class="si">}</span><span class="s2">&quot;</span>
                <span class="p">)</span> <span class="kn">from</span><span class="w"> </span><span class="nn">e</span>

            <span class="k">finally</span><span class="p">:</span>
                <span class="c1"># Clean up future</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_response_futures</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="n">request_data</span><span class="o">.</span><span class="n">request_id</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>

        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Exception sending request to </span><span class="si">{</span><span class="n">target</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="k">raise</span> <span class="n">CommunicationRequestError</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Exception sending request to </span><span class="si">{</span><span class="n">target</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="p">)</span> <span class="kn">from</span><span class="w"> </span><span class="nn">e</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h3 id="aiperf.common.comms.zmq.clients.req.ZMQReqClient.__init__" class="doc doc-heading">
            <code class=" language-python"><span class="fm">__init__</span><span class="p">(</span><span class="n">context</span><span class="p">,</span> <span class="n">address</span><span class="p">,</span> <span class="n">bind</span><span class="p">,</span> <span class="n">socket_ops</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

<a href="#aiperf.common.comms.zmq.clients.req.ZMQReqClient.__init__" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Initialize the ZMQ Req class.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>context</code>
            </td>
            <td>
                  <code><span title="zmq.asyncio.Context">Context</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The ZMQ context.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>address</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The address to bind or connect to.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>bind</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Whether to bind or connect the socket.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>socket_ops</code>
            </td>
            <td>
                  <code><span title="dict">dict</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Additional socket options to set.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>aiperf/common/comms/zmq/clients/req.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">context</span><span class="p">:</span> <span class="n">zmq</span><span class="o">.</span><span class="n">asyncio</span><span class="o">.</span><span class="n">Context</span><span class="p">,</span>
    <span class="n">address</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">bind</span><span class="p">:</span> <span class="nb">bool</span><span class="p">,</span>
    <span class="n">socket_ops</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Initialize the ZMQ Req class.</span>

<span class="sd">    Args:</span>
<span class="sd">        context (zmq.asyncio.Context): The ZMQ context.</span>
<span class="sd">        address (str): The address to bind or connect to.</span>
<span class="sd">        bind (bool): Whether to bind or connect the socket.</span>
<span class="sd">        socket_ops (dict, optional): Additional socket options to set.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">context</span><span class="p">,</span> <span class="n">SocketType</span><span class="o">.</span><span class="n">REQ</span><span class="p">,</span> <span class="n">address</span><span class="p">,</span> <span class="n">bind</span><span class="p">,</span> <span class="n">socket_ops</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_response_futures</span> <span class="o">=</span> <span class="p">{}</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="aiperf.common.comms.zmq.clients.req.ZMQReqClient.request" class="doc doc-heading">
            <code class=" language-python"><span class="n">request</span><span class="p">(</span><span class="n">target</span><span class="p">,</span> <span class="n">request_data</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="mf">5.0</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#aiperf.common.comms.zmq.clients.req.ZMQReqClient.request" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Send a request and wait for a response.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>target</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Target component to send request to</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>request_data</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="Message (aiperf.common.messages.Message)" href="#aiperf.common.messages.Message">Message</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Request data (must be a RequestData instance)</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>timeout</code>
            </td>
            <td>
                  <code><span title="float">float</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Timeout in seconds</p>
              </div>
            </td>
            <td>
                  <code>5.0</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="Message (aiperf.common.messages.Message)" href="#aiperf.common.messages.Message">Message</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>ResponseData object</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>aiperf/common/comms/zmq/clients/req.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">request</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">target</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">request_data</span><span class="p">:</span> <span class="n">Message</span><span class="p">,</span>
    <span class="n">timeout</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">5.0</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Message</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Send a request and wait for a response.</span>

<span class="sd">    Args:</span>
<span class="sd">        target: Target component to send request to</span>
<span class="sd">        request_data: Request data (must be a RequestData instance)</span>
<span class="sd">        timeout: Timeout in seconds</span>

<span class="sd">    Returns:</span>
<span class="sd">        ResponseData object</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_ensure_initialized</span><span class="p">()</span>

    <span class="k">try</span><span class="p">:</span>
        <span class="c1"># Generate request ID if not provided</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">request_data</span><span class="o">.</span><span class="n">request_id</span><span class="p">:</span>
            <span class="n">request_data</span><span class="o">.</span><span class="n">request_id</span> <span class="o">=</span> <span class="n">uuid</span><span class="o">.</span><span class="n">uuid4</span><span class="p">()</span><span class="o">.</span><span class="n">hex</span>

        <span class="c1"># Serialize request</span>
        <span class="n">request_json</span> <span class="o">=</span> <span class="n">request_data</span><span class="o">.</span><span class="n">model_dump_json</span><span class="p">()</span>

        <span class="c1"># Create future for response</span>
        <span class="n">future</span> <span class="o">=</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">Future</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_response_futures</span><span class="p">[</span><span class="n">request_data</span><span class="o">.</span><span class="n">request_id</span><span class="p">]</span> <span class="o">=</span> <span class="n">future</span>

        <span class="c1"># Send request</span>
        <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">socket</span><span class="o">.</span><span class="n">send_string</span><span class="p">(</span><span class="n">request_json</span><span class="p">)</span>

        <span class="c1"># Wait for response with timeout</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">response_json</span> <span class="o">=</span> <span class="k">await</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">wait_for</span><span class="p">(</span><span class="n">future</span><span class="p">,</span> <span class="n">timeout</span><span class="p">)</span>
            <span class="n">response</span> <span class="o">=</span> <span class="n">MessageTypeAdapter</span><span class="o">.</span><span class="n">validate_json</span><span class="p">(</span><span class="n">response_json</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">response</span>

        <span class="k">except</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">TimeoutError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Timeout waiting for response to request </span><span class="si">{</span><span class="n">request_data</span><span class="o">.</span><span class="n">request_id</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="p">)</span>
            <span class="k">raise</span> <span class="n">CommunicationRequestError</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Timeout waiting for response to request </span><span class="si">{</span><span class="n">request_data</span><span class="o">.</span><span class="n">request_id</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="p">)</span> <span class="kn">from</span><span class="w"> </span><span class="nn">e</span>

        <span class="k">finally</span><span class="p">:</span>
            <span class="c1"># Clean up future</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_response_futures</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="n">request_data</span><span class="o">.</span><span class="n">request_id</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>

    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Exception sending request to </span><span class="si">{</span><span class="n">target</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">raise</span> <span class="n">CommunicationRequestError</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;Exception sending request to </span><span class="si">{</span><span class="n">target</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="p">)</span> <span class="kn">from</span><span class="w"> </span><span class="nn">e</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>




  </div>

    </div>

</div><h2 id="aiperfcommoncommszmqclientssub">aiperf.common.comms.zmq.clients.sub<a class="headerlink" href="#aiperfcommoncommszmqclientssub" title="Permanent link">&para;</a></h2>


<div class="doc doc-object doc-module">



<a id="aiperf.common.comms.zmq.clients.sub"></a>
    <div class="doc doc-contents first">









  <div class="doc doc-children">








<div class="doc doc-object doc-class">



<h2 id="aiperf.common.comms.zmq.clients.sub.ZMQSubClient" class="doc doc-heading">
            <code>ZMQSubClient</code>


<a href="#aiperf.common.comms.zmq.clients.sub.ZMQSubClient" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="BaseZMQClient (aiperf.common.comms.zmq.clients.base.BaseZMQClient)" href="#aiperf.common.comms.zmq.clients.base.BaseZMQClient">BaseZMQClient</a></code></p>








              <details class="quote">
                <summary>Source code in <code>aiperf/common/comms/zmq/clients/sub.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 20</span>
<span class="normal"> 21</span>
<span class="normal"> 22</span>
<span class="normal"> 23</span>
<span class="normal"> 24</span>
<span class="normal"> 25</span>
<span class="normal"> 26</span>
<span class="normal"> 27</span>
<span class="normal"> 28</span>
<span class="normal"> 29</span>
<span class="normal"> 30</span>
<span class="normal"> 31</span>
<span class="normal"> 32</span>
<span class="normal"> 33</span>
<span class="normal"> 34</span>
<span class="normal"> 35</span>
<span class="normal"> 36</span>
<span class="normal"> 37</span>
<span class="normal"> 38</span>
<span class="normal"> 39</span>
<span class="normal"> 40</span>
<span class="normal"> 41</span>
<span class="normal"> 42</span>
<span class="normal"> 43</span>
<span class="normal"> 44</span>
<span class="normal"> 45</span>
<span class="normal"> 46</span>
<span class="normal"> 47</span>
<span class="normal"> 48</span>
<span class="normal"> 49</span>
<span class="normal"> 50</span>
<span class="normal"> 51</span>
<span class="normal"> 52</span>
<span class="normal"> 53</span>
<span class="normal"> 54</span>
<span class="normal"> 55</span>
<span class="normal"> 56</span>
<span class="normal"> 57</span>
<span class="normal"> 58</span>
<span class="normal"> 59</span>
<span class="normal"> 60</span>
<span class="normal"> 61</span>
<span class="normal"> 62</span>
<span class="normal"> 63</span>
<span class="normal"> 64</span>
<span class="normal"> 65</span>
<span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">ZMQSubClient</span><span class="p">(</span><span class="n">BaseZMQClient</span><span class="p">):</span>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">context</span><span class="p">:</span> <span class="n">zmq</span><span class="o">.</span><span class="n">asyncio</span><span class="o">.</span><span class="n">Context</span><span class="p">,</span>
        <span class="n">address</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">bind</span><span class="p">:</span> <span class="nb">bool</span><span class="p">,</span>
        <span class="n">socket_ops</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Initialize the ZMQ Subscriber class.</span>

<span class="sd">        Args:</span>
<span class="sd">            context (zmq.asyncio.Context): The ZMQ context.</span>
<span class="sd">            address (str): The address to bind or connect to.</span>
<span class="sd">            bind (bool): Whether to bind or connect the socket.</span>
<span class="sd">            socket_ops (dict, optional): Additional socket options to set.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">context</span><span class="p">,</span> <span class="n">SocketType</span><span class="o">.</span><span class="n">SUB</span><span class="p">,</span> <span class="n">address</span><span class="p">,</span> <span class="n">bind</span><span class="p">,</span> <span class="n">socket_ops</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_subscribers</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">list</span><span class="p">[</span><span class="n">Callable</span><span class="p">[[</span><span class="n">Message</span><span class="p">],</span> <span class="n">Any</span><span class="p">]]]</span> <span class="o">=</span> <span class="p">{}</span>

    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">subscribe</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">topic</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">callback</span><span class="p">:</span> <span class="n">Callable</span><span class="p">[[</span><span class="n">Message</span><span class="p">],</span> <span class="n">Any</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Subscribe to a topic.</span>

<span class="sd">        Args:</span>
<span class="sd">            topic: Topic to subscribe to</span>
<span class="sd">            callback: Function to call when a message is received (receives Message object)</span>

<span class="sd">        Raises:</span>
<span class="sd">            Exception if subscription was not successful, None otherwise</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_ensure_initialized</span><span class="p">()</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="c1"># Subscribe to topic</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">socket</span><span class="o">.</span><span class="n">subscribe</span><span class="p">(</span><span class="n">topic</span><span class="o">.</span><span class="n">encode</span><span class="p">())</span>

            <span class="c1"># Register callback</span>
            <span class="k">if</span> <span class="n">topic</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_subscribers</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_subscribers</span><span class="p">[</span><span class="n">topic</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_subscribers</span><span class="p">[</span><span class="n">topic</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">callback</span><span class="p">)</span>

            <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Subscribed to topic: </span><span class="si">%s</span><span class="s2">, </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">topic</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_subscribers</span><span class="p">[</span><span class="n">topic</span><span class="p">])</span>

        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">&quot;Exception subscribing to topic </span><span class="si">%s</span><span class="s2">: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">topic</span><span class="p">,</span> <span class="n">e</span><span class="p">)</span>
            <span class="k">raise</span> <span class="n">CommunicationSubscribeError</span> <span class="kn">from</span><span class="w"> </span><span class="nn">e</span>

    <span class="nd">@aiperf_task</span>
    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">_sub_receiver</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Background task for receiving messages from subscribed topics.</span>

<span class="sd">        This method is a coroutine that will run indefinitely until the client is</span>
<span class="sd">        shutdown. It will wait for messages from the socket and handle them.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">while</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_shutdown</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_initialized</span><span class="p">:</span>
                    <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span>
                        <span class="s2">&quot;Sub client </span><span class="si">%s</span><span class="s2"> waiting for initialization&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">client_id</span>
                    <span class="p">)</span>
                    <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">initialized_event</span><span class="o">.</span><span class="n">wait</span><span class="p">()</span>
                    <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Sub client </span><span class="si">%s</span><span class="s2"> initialized&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">client_id</span><span class="p">)</span>

                <span class="c1"># Receive message</span>
                <span class="p">(</span>
                    <span class="n">topic_bytes</span><span class="p">,</span>
                    <span class="n">message_bytes</span><span class="p">,</span>
                <span class="p">)</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">socket</span><span class="o">.</span><span class="n">recv_multipart</span><span class="p">()</span>
                <span class="n">topic</span> <span class="o">=</span> <span class="n">topic_bytes</span><span class="o">.</span><span class="n">decode</span><span class="p">()</span>
                <span class="n">message_json</span> <span class="o">=</span> <span class="n">message_bytes</span><span class="o">.</span><span class="n">decode</span><span class="p">()</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span>
                    <span class="s2">&quot;Client </span><span class="si">%s</span><span class="s2"> received message from topic: &#39;</span><span class="si">%s</span><span class="s2">&#39;, message: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">client_id</span><span class="p">,</span>
                    <span class="n">topic</span><span class="p">,</span>
                    <span class="n">message_json</span><span class="p">,</span>
                <span class="p">)</span>

                <span class="n">message</span> <span class="o">=</span> <span class="n">Message</span><span class="o">.</span><span class="n">from_json</span><span class="p">(</span><span class="n">message_json</span><span class="p">)</span>

                <span class="c1"># Call callbacks with the parsed message object</span>
                <span class="k">if</span> <span class="n">topic</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_subscribers</span><span class="p">:</span>
                    <span class="k">await</span> <span class="n">call_all_functions</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_subscribers</span><span class="p">[</span><span class="n">topic</span><span class="p">],</span> <span class="n">message</span><span class="p">)</span>

            <span class="k">except</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">CancelledError</span><span class="p">:</span>
                <span class="k">break</span>
            <span class="k">except</span> <span class="n">zmq</span><span class="o">.</span><span class="n">Again</span><span class="p">:</span>
                <span class="c1"># Handle ZMQ timeout or interruption</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span>
                    <span class="s2">&quot;ZMQ recv timeout due to no messages. trying again @ </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">address</span><span class="p">,</span>
                <span class="p">)</span>
                <span class="k">await</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mf">0.001</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span>
                    <span class="s2">&quot;Exception receiving message from subscription: </span><span class="si">%s</span><span class="s2">, </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span>
                    <span class="n">e</span><span class="p">,</span>
                    <span class="nb">type</span><span class="p">(</span><span class="n">e</span><span class="p">),</span>
                <span class="p">)</span>
                <span class="k">await</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mf">0.1</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h3 id="aiperf.common.comms.zmq.clients.sub.ZMQSubClient.__init__" class="doc doc-heading">
            <code class=" language-python"><span class="fm">__init__</span><span class="p">(</span><span class="n">context</span><span class="p">,</span> <span class="n">address</span><span class="p">,</span> <span class="n">bind</span><span class="p">,</span> <span class="n">socket_ops</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

<a href="#aiperf.common.comms.zmq.clients.sub.ZMQSubClient.__init__" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Initialize the ZMQ Subscriber class.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>context</code>
            </td>
            <td>
                  <code><span title="zmq.asyncio.Context">Context</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The ZMQ context.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>address</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The address to bind or connect to.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>bind</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Whether to bind or connect the socket.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>socket_ops</code>
            </td>
            <td>
                  <code><span title="dict">dict</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Additional socket options to set.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>aiperf/common/comms/zmq/clients/sub.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">context</span><span class="p">:</span> <span class="n">zmq</span><span class="o">.</span><span class="n">asyncio</span><span class="o">.</span><span class="n">Context</span><span class="p">,</span>
    <span class="n">address</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">bind</span><span class="p">:</span> <span class="nb">bool</span><span class="p">,</span>
    <span class="n">socket_ops</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Initialize the ZMQ Subscriber class.</span>

<span class="sd">    Args:</span>
<span class="sd">        context (zmq.asyncio.Context): The ZMQ context.</span>
<span class="sd">        address (str): The address to bind or connect to.</span>
<span class="sd">        bind (bool): Whether to bind or connect the socket.</span>
<span class="sd">        socket_ops (dict, optional): Additional socket options to set.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">context</span><span class="p">,</span> <span class="n">SocketType</span><span class="o">.</span><span class="n">SUB</span><span class="p">,</span> <span class="n">address</span><span class="p">,</span> <span class="n">bind</span><span class="p">,</span> <span class="n">socket_ops</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_subscribers</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">list</span><span class="p">[</span><span class="n">Callable</span><span class="p">[[</span><span class="n">Message</span><span class="p">],</span> <span class="n">Any</span><span class="p">]]]</span> <span class="o">=</span> <span class="p">{}</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="aiperf.common.comms.zmq.clients.sub.ZMQSubClient.subscribe" class="doc doc-heading">
            <code class=" language-python"><span class="n">subscribe</span><span class="p">(</span><span class="n">topic</span><span class="p">,</span> <span class="n">callback</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#aiperf.common.comms.zmq.clients.sub.ZMQSubClient.subscribe" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Subscribe to a topic.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>topic</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Topic to subscribe to</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>callback</code>
            </td>
            <td>
                  <code><span title="collections.abc.Callable">Callable</span>[[<a class="autorefs autorefs-internal" title="Message (aiperf.common.messages.Message)" href="#aiperf.common.messages.Message">Message</a>], <span title="typing.Any">Any</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Function to call when a message is received (receives Message object)</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>aiperf/common/comms/zmq/clients/sub.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">subscribe</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">topic</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">callback</span><span class="p">:</span> <span class="n">Callable</span><span class="p">[[</span><span class="n">Message</span><span class="p">],</span> <span class="n">Any</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Subscribe to a topic.</span>

<span class="sd">    Args:</span>
<span class="sd">        topic: Topic to subscribe to</span>
<span class="sd">        callback: Function to call when a message is received (receives Message object)</span>

<span class="sd">    Raises:</span>
<span class="sd">        Exception if subscription was not successful, None otherwise</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_ensure_initialized</span><span class="p">()</span>

    <span class="k">try</span><span class="p">:</span>
        <span class="c1"># Subscribe to topic</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">socket</span><span class="o">.</span><span class="n">subscribe</span><span class="p">(</span><span class="n">topic</span><span class="o">.</span><span class="n">encode</span><span class="p">())</span>

        <span class="c1"># Register callback</span>
        <span class="k">if</span> <span class="n">topic</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_subscribers</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_subscribers</span><span class="p">[</span><span class="n">topic</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_subscribers</span><span class="p">[</span><span class="n">topic</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">callback</span><span class="p">)</span>

        <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Subscribed to topic: </span><span class="si">%s</span><span class="s2">, </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">topic</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_subscribers</span><span class="p">[</span><span class="n">topic</span><span class="p">])</span>

    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">&quot;Exception subscribing to topic </span><span class="si">%s</span><span class="s2">: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">topic</span><span class="p">,</span> <span class="n">e</span><span class="p">)</span>
        <span class="k">raise</span> <span class="n">CommunicationSubscribeError</span> <span class="kn">from</span><span class="w"> </span><span class="nn">e</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>




  </div>

    </div>

</div><h2 id="aiperfcommoncommszmqzmq_comms">aiperf.common.comms.zmq.zmq_comms<a class="headerlink" href="#aiperfcommoncommszmqzmq_comms" title="Permanent link">&para;</a></h2>


<div class="doc doc-object doc-module">



<a id="aiperf.common.comms.zmq.zmq_comms"></a>
    <div class="doc doc-contents first">









  <div class="doc doc-children">








<div class="doc doc-object doc-class">



<h2 id="aiperf.common.comms.zmq.zmq_comms.ZMQCommunication" class="doc doc-heading">
            <code>ZMQCommunication</code>


<a href="#aiperf.common.comms.zmq.zmq_comms.ZMQCommunication" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="BaseCommunication (aiperf.common.comms.base.BaseCommunication)" href="#aiperf.common.comms.base.BaseCommunication">BaseCommunication</a></code></p>


        <p>ZeroMQ-based implementation of the Communication interface.</p>
<p>Uses ZeroMQ for publish/subscribe and request/reply patterns to
facilitate communication between AIPerf components.</p>







              <details class="quote">
                <summary>Source code in <code>aiperf/common/comms/zmq/zmq_comms.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 46</span>
<span class="normal"> 47</span>
<span class="normal"> 48</span>
<span class="normal"> 49</span>
<span class="normal"> 50</span>
<span class="normal"> 51</span>
<span class="normal"> 52</span>
<span class="normal"> 53</span>
<span class="normal"> 54</span>
<span class="normal"> 55</span>
<span class="normal"> 56</span>
<span class="normal"> 57</span>
<span class="normal"> 58</span>
<span class="normal"> 59</span>
<span class="normal"> 60</span>
<span class="normal"> 61</span>
<span class="normal"> 62</span>
<span class="normal"> 63</span>
<span class="normal"> 64</span>
<span class="normal"> 65</span>
<span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span>
<span class="normal">278</span>
<span class="normal">279</span>
<span class="normal">280</span>
<span class="normal">281</span>
<span class="normal">282</span>
<span class="normal">283</span>
<span class="normal">284</span>
<span class="normal">285</span>
<span class="normal">286</span>
<span class="normal">287</span>
<span class="normal">288</span>
<span class="normal">289</span>
<span class="normal">290</span>
<span class="normal">291</span>
<span class="normal">292</span>
<span class="normal">293</span>
<span class="normal">294</span>
<span class="normal">295</span>
<span class="normal">296</span>
<span class="normal">297</span>
<span class="normal">298</span>
<span class="normal">299</span>
<span class="normal">300</span>
<span class="normal">301</span>
<span class="normal">302</span>
<span class="normal">303</span>
<span class="normal">304</span>
<span class="normal">305</span>
<span class="normal">306</span>
<span class="normal">307</span>
<span class="normal">308</span>
<span class="normal">309</span>
<span class="normal">310</span>
<span class="normal">311</span>
<span class="normal">312</span>
<span class="normal">313</span>
<span class="normal">314</span>
<span class="normal">315</span>
<span class="normal">316</span>
<span class="normal">317</span>
<span class="normal">318</span>
<span class="normal">319</span>
<span class="normal">320</span>
<span class="normal">321</span>
<span class="normal">322</span>
<span class="normal">323</span>
<span class="normal">324</span>
<span class="normal">325</span>
<span class="normal">326</span>
<span class="normal">327</span>
<span class="normal">328</span>
<span class="normal">329</span>
<span class="normal">330</span>
<span class="normal">331</span>
<span class="normal">332</span>
<span class="normal">333</span>
<span class="normal">334</span>
<span class="normal">335</span>
<span class="normal">336</span>
<span class="normal">337</span>
<span class="normal">338</span>
<span class="normal">339</span>
<span class="normal">340</span>
<span class="normal">341</span>
<span class="normal">342</span>
<span class="normal">343</span>
<span class="normal">344</span>
<span class="normal">345</span>
<span class="normal">346</span>
<span class="normal">347</span>
<span class="normal">348</span>
<span class="normal">349</span>
<span class="normal">350</span>
<span class="normal">351</span>
<span class="normal">352</span>
<span class="normal">353</span>
<span class="normal">354</span>
<span class="normal">355</span>
<span class="normal">356</span>
<span class="normal">357</span>
<span class="normal">358</span>
<span class="normal">359</span>
<span class="normal">360</span>
<span class="normal">361</span>
<span class="normal">362</span>
<span class="normal">363</span>
<span class="normal">364</span>
<span class="normal">365</span>
<span class="normal">366</span>
<span class="normal">367</span>
<span class="normal">368</span>
<span class="normal">369</span>
<span class="normal">370</span>
<span class="normal">371</span>
<span class="normal">372</span>
<span class="normal">373</span>
<span class="normal">374</span>
<span class="normal">375</span>
<span class="normal">376</span>
<span class="normal">377</span>
<span class="normal">378</span>
<span class="normal">379</span>
<span class="normal">380</span>
<span class="normal">381</span>
<span class="normal">382</span>
<span class="normal">383</span>
<span class="normal">384</span>
<span class="normal">385</span>
<span class="normal">386</span>
<span class="normal">387</span>
<span class="normal">388</span>
<span class="normal">389</span>
<span class="normal">390</span>
<span class="normal">391</span>
<span class="normal">392</span>
<span class="normal">393</span>
<span class="normal">394</span>
<span class="normal">395</span>
<span class="normal">396</span>
<span class="normal">397</span>
<span class="normal">398</span>
<span class="normal">399</span>
<span class="normal">400</span>
<span class="normal">401</span>
<span class="normal">402</span>
<span class="normal">403</span>
<span class="normal">404</span>
<span class="normal">405</span>
<span class="normal">406</span>
<span class="normal">407</span>
<span class="normal">408</span>
<span class="normal">409</span>
<span class="normal">410</span>
<span class="normal">411</span>
<span class="normal">412</span>
<span class="normal">413</span>
<span class="normal">414</span>
<span class="normal">415</span>
<span class="normal">416</span>
<span class="normal">417</span>
<span class="normal">418</span>
<span class="normal">419</span>
<span class="normal">420</span>
<span class="normal">421</span>
<span class="normal">422</span>
<span class="normal">423</span>
<span class="normal">424</span>
<span class="normal">425</span>
<span class="normal">426</span>
<span class="normal">427</span>
<span class="normal">428</span>
<span class="normal">429</span>
<span class="normal">430</span>
<span class="normal">431</span>
<span class="normal">432</span>
<span class="normal">433</span>
<span class="normal">434</span>
<span class="normal">435</span>
<span class="normal">436</span>
<span class="normal">437</span>
<span class="normal">438</span>
<span class="normal">439</span>
<span class="normal">440</span>
<span class="normal">441</span>
<span class="normal">442</span>
<span class="normal">443</span>
<span class="normal">444</span>
<span class="normal">445</span>
<span class="normal">446</span>
<span class="normal">447</span>
<span class="normal">448</span>
<span class="normal">449</span>
<span class="normal">450</span>
<span class="normal">451</span>
<span class="normal">452</span>
<span class="normal">453</span>
<span class="normal">454</span>
<span class="normal">455</span>
<span class="normal">456</span>
<span class="normal">457</span>
<span class="normal">458</span>
<span class="normal">459</span>
<span class="normal">460</span>
<span class="normal">461</span>
<span class="normal">462</span>
<span class="normal">463</span>
<span class="normal">464</span>
<span class="normal">465</span>
<span class="normal">466</span>
<span class="normal">467</span>
<span class="normal">468</span>
<span class="normal">469</span>
<span class="normal">470</span>
<span class="normal">471</span>
<span class="normal">472</span>
<span class="normal">473</span>
<span class="normal">474</span>
<span class="normal">475</span>
<span class="normal">476</span>
<span class="normal">477</span>
<span class="normal">478</span>
<span class="normal">479</span>
<span class="normal">480</span>
<span class="normal">481</span>
<span class="normal">482</span>
<span class="normal">483</span>
<span class="normal">484</span>
<span class="normal">485</span>
<span class="normal">486</span>
<span class="normal">487</span>
<span class="normal">488</span>
<span class="normal">489</span>
<span class="normal">490</span>
<span class="normal">491</span>
<span class="normal">492</span>
<span class="normal">493</span>
<span class="normal">494</span>
<span class="normal">495</span>
<span class="normal">496</span>
<span class="normal">497</span>
<span class="normal">498</span>
<span class="normal">499</span>
<span class="normal">500</span>
<span class="normal">501</span>
<span class="normal">502</span>
<span class="normal">503</span>
<span class="normal">504</span>
<span class="normal">505</span>
<span class="normal">506</span>
<span class="normal">507</span>
<span class="normal">508</span>
<span class="normal">509</span>
<span class="normal">510</span>
<span class="normal">511</span>
<span class="normal">512</span>
<span class="normal">513</span>
<span class="normal">514</span>
<span class="normal">515</span>
<span class="normal">516</span>
<span class="normal">517</span>
<span class="normal">518</span>
<span class="normal">519</span>
<span class="normal">520</span>
<span class="normal">521</span>
<span class="normal">522</span>
<span class="normal">523</span>
<span class="normal">524</span>
<span class="normal">525</span>
<span class="normal">526</span>
<span class="normal">527</span>
<span class="normal">528</span>
<span class="normal">529</span>
<span class="normal">530</span>
<span class="normal">531</span>
<span class="normal">532</span>
<span class="normal">533</span>
<span class="normal">534</span>
<span class="normal">535</span>
<span class="normal">536</span>
<span class="normal">537</span>
<span class="normal">538</span>
<span class="normal">539</span>
<span class="normal">540</span>
<span class="normal">541</span>
<span class="normal">542</span>
<span class="normal">543</span>
<span class="normal">544</span>
<span class="normal">545</span>
<span class="normal">546</span>
<span class="normal">547</span>
<span class="normal">548</span>
<span class="normal">549</span>
<span class="normal">550</span>
<span class="normal">551</span>
<span class="normal">552</span>
<span class="normal">553</span>
<span class="normal">554</span>
<span class="normal">555</span>
<span class="normal">556</span>
<span class="normal">557</span>
<span class="normal">558</span>
<span class="normal">559</span>
<span class="normal">560</span>
<span class="normal">561</span>
<span class="normal">562</span>
<span class="normal">563</span>
<span class="normal">564</span>
<span class="normal">565</span>
<span class="normal">566</span>
<span class="normal">567</span>
<span class="normal">568</span>
<span class="normal">569</span>
<span class="normal">570</span>
<span class="normal">571</span>
<span class="normal">572</span>
<span class="normal">573</span>
<span class="normal">574</span>
<span class="normal">575</span>
<span class="normal">576</span>
<span class="normal">577</span>
<span class="normal">578</span>
<span class="normal">579</span>
<span class="normal">580</span>
<span class="normal">581</span>
<span class="normal">582</span>
<span class="normal">583</span>
<span class="normal">584</span>
<span class="normal">585</span>
<span class="normal">586</span>
<span class="normal">587</span>
<span class="normal">588</span>
<span class="normal">589</span>
<span class="normal">590</span>
<span class="normal">591</span>
<span class="normal">592</span>
<span class="normal">593</span>
<span class="normal">594</span>
<span class="normal">595</span>
<span class="normal">596</span>
<span class="normal">597</span>
<span class="normal">598</span>
<span class="normal">599</span>
<span class="normal">600</span>
<span class="normal">601</span>
<span class="normal">602</span>
<span class="normal">603</span>
<span class="normal">604</span>
<span class="normal">605</span>
<span class="normal">606</span>
<span class="normal">607</span>
<span class="normal">608</span>
<span class="normal">609</span>
<span class="normal">610</span>
<span class="normal">611</span>
<span class="normal">612</span>
<span class="normal">613</span>
<span class="normal">614</span>
<span class="normal">615</span>
<span class="normal">616</span>
<span class="normal">617</span>
<span class="normal">618</span>
<span class="normal">619</span>
<span class="normal">620</span>
<span class="normal">621</span>
<span class="normal">622</span>
<span class="normal">623</span>
<span class="normal">624</span>
<span class="normal">625</span>
<span class="normal">626</span>
<span class="normal">627</span>
<span class="normal">628</span>
<span class="normal">629</span>
<span class="normal">630</span>
<span class="normal">631</span>
<span class="normal">632</span>
<span class="normal">633</span>
<span class="normal">634</span>
<span class="normal">635</span>
<span class="normal">636</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@CommunicationFactory</span><span class="o">.</span><span class="n">register</span><span class="p">(</span><span class="n">CommunicationBackend</span><span class="o">.</span><span class="n">ZMQ_TCP</span><span class="p">)</span>
<span class="k">class</span><span class="w"> </span><span class="nc">ZMQCommunication</span><span class="p">(</span><span class="n">BaseCommunication</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;ZeroMQ-based implementation of the Communication interface.</span>

<span class="sd">    Uses ZeroMQ for publish/subscribe and request/reply patterns to</span>
<span class="sd">    facilitate communication between AIPerf components.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">config</span><span class="p">:</span> <span class="n">ZMQCommunicationConfig</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Initialize ZMQ communication.</span>

<span class="sd">        Args:</span>
<span class="sd">            config: ZMQCommunicationConfig object with configuration parameters</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">stop_event</span><span class="p">:</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">Event</span> <span class="o">=</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">Event</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">initialized_event</span><span class="p">:</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">Event</span> <span class="o">=</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">Event</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">config</span> <span class="o">=</span> <span class="n">config</span> <span class="ow">or</span> <span class="n">ZMQCommunicationConfig</span><span class="p">()</span>

        <span class="c1"># Generate client_id if not provided</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">client_id</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">client_id</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;client_</span><span class="si">{</span><span class="n">uuid</span><span class="o">.</span><span class="n">uuid4</span><span class="p">()</span><span class="o">.</span><span class="n">hex</span><span class="p">[:</span><span class="mi">8</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_context</span><span class="p">:</span> <span class="n">zmq</span><span class="o">.</span><span class="n">asyncio</span><span class="o">.</span><span class="n">Context</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">clients</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="n">ClientType</span><span class="p">,</span> <span class="n">ZMQClient</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span>
            <span class="s2">&quot;ZMQ communication using protocol: </span><span class="si">%s</span><span class="s2"> with client ID: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span>
            <span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">protocol_config</span><span class="p">)</span><span class="o">.</span><span class="vm">__name__</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">client_id</span><span class="p">,</span>
        <span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">context</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">zmq</span><span class="o">.</span><span class="n">asyncio</span><span class="o">.</span><span class="n">Context</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get the ZeroMQ context.</span>

<span class="sd">        Returns:</span>
<span class="sd">            ZeroMQ context</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_context</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">CommunicationNotInitializedError</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_context</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">is_initialized</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Check if communication channels are initialized.</span>

<span class="sd">        Returns:</span>
<span class="sd">            True if communication channels are initialized, False otherwise</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">initialized_event</span><span class="o">.</span><span class="n">is_set</span><span class="p">()</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">is_shutdown</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Check if communication channels are shutdown.</span>

<span class="sd">        Returns:</span>
<span class="sd">            True if communication channels are shutdown, False otherwise</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">stop_event</span><span class="o">.</span><span class="n">is_set</span><span class="p">()</span>

    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">initialize</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Initialize communication channels.</span>

<span class="sd">        Returns:</span>
<span class="sd">            True if initialization was successful, False otherwise</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_initialized</span><span class="p">:</span>
            <span class="k">return</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_context</span> <span class="o">=</span> <span class="n">zmq</span><span class="o">.</span><span class="n">asyncio</span><span class="o">.</span><span class="n">Context</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">initialized_event</span><span class="o">.</span><span class="n">set</span><span class="p">()</span>

    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">shutdown</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Gracefully shutdown communication channels.</span>

<span class="sd">        This method will wait for all clients to shutdown before shutting down</span>
<span class="sd">        the context.</span>

<span class="sd">        Returns:</span>
<span class="sd">            True if shutdown was successful, False otherwise</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_shutdown</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;ZMQ communication already shutdown&quot;</span><span class="p">)</span>
            <span class="k">return</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">stop_event</span><span class="o">.</span><span class="n">is_set</span><span class="p">():</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">stop_event</span><span class="o">.</span><span class="n">set</span><span class="p">()</span>

            <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Shutting down ZMQ communication for client </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">client_id</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="p">)</span>
            <span class="k">await</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">gather</span><span class="p">(</span>
                <span class="o">*</span><span class="p">(</span><span class="n">client</span><span class="o">.</span><span class="n">shutdown</span><span class="p">()</span> <span class="k">for</span> <span class="n">client</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">clients</span><span class="o">.</span><span class="n">values</span><span class="p">())</span>
            <span class="p">)</span>

            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">context</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">context</span><span class="o">.</span><span class="n">term</span><span class="p">()</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">_context</span> <span class="o">=</span> <span class="kc">None</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;ZMQ communication shutdown successfully&quot;</span><span class="p">)</span>

        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Exception shutting down ZMQ communication: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="k">raise</span> <span class="n">CommunicationShutdownError</span><span class="p">(</span>
                <span class="s2">&quot;Failed to shutdown ZMQ communication&quot;</span>
            <span class="p">)</span> <span class="kn">from</span><span class="w"> </span><span class="nn">e</span>

        <span class="k">finally</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">clients</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_context</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_ensure_initialized</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Ensure the communication channels are initialized.</span>

<span class="sd">        Raises:</span>
<span class="sd">            CommunicationNotInitializedError: If the communication channels are not</span>
<span class="sd">                initialized</span>
<span class="sd">            CommunicationShutdownError: If the communication channels are shutdown</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_initialized</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">CommunicationNotInitializedError</span><span class="p">()</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_shutdown</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">CommunicationShutdownError</span><span class="p">()</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_create_pub_client</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">client_type</span><span class="p">:</span> <span class="n">PubClientType</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ZMQPubClient</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Create a ZMQ publisher client based on the client type.</span>

<span class="sd">        Args:</span>
<span class="sd">            client_type: The type of client to create</span>

<span class="sd">        Returns:</span>
<span class="sd">            ZMQPubClient instance</span>

<span class="sd">        Raises:</span>
<span class="sd">            CommunicationClientCreationError: If the client type is invalid</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">match</span> <span class="n">client_type</span><span class="p">:</span>
            <span class="k">case</span> <span class="n">PubClientType</span><span class="o">.</span><span class="n">CONTROLLER</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">ZMQPubClient</span><span class="p">(</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">context</span><span class="p">,</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">controller_pub_sub_address</span><span class="p">,</span>
                    <span class="n">bind</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                <span class="p">)</span>

            <span class="k">case</span> <span class="n">PubClientType</span><span class="o">.</span><span class="n">COMPONENT</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">ZMQPubClient</span><span class="p">(</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">context</span><span class="p">,</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">component_pub_sub_address</span><span class="p">,</span>
                    <span class="n">bind</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                <span class="p">)</span>

            <span class="k">case</span><span class="w"> </span><span class="k">_</span><span class="p">:</span>
                <span class="k">raise</span> <span class="n">CommunicationClientCreationError</span><span class="p">(</span>
                    <span class="sa">f</span><span class="s2">&quot;Invalid client type: </span><span class="si">{</span><span class="n">client_type</span><span class="si">}</span><span class="s2">&quot;</span>
                <span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_create_sub_client</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">client_type</span><span class="p">:</span> <span class="n">SubClientType</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ZMQSubClient</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Create a ZMQ subscriber client based on the client type.</span>

<span class="sd">        Args:</span>
<span class="sd">            client_type: The type of client to create</span>

<span class="sd">        Returns:</span>
<span class="sd">            ZMQSubClient instance</span>

<span class="sd">        Raises:</span>
<span class="sd">            CommunicationClientCreationError: If the client type is invalid</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">match</span> <span class="n">client_type</span><span class="p">:</span>
            <span class="k">case</span> <span class="n">SubClientType</span><span class="o">.</span><span class="n">CONTROLLER</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">ZMQSubClient</span><span class="p">(</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">context</span><span class="p">,</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">controller_pub_sub_address</span><span class="p">,</span>
                    <span class="n">bind</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                <span class="p">)</span>

            <span class="k">case</span> <span class="n">SubClientType</span><span class="o">.</span><span class="n">COMPONENT</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">ZMQSubClient</span><span class="p">(</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">context</span><span class="p">,</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">component_pub_sub_address</span><span class="p">,</span>
                    <span class="n">bind</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                <span class="p">)</span>

            <span class="k">case</span><span class="w"> </span><span class="k">_</span><span class="p">:</span>
                <span class="k">raise</span> <span class="n">CommunicationClientCreationError</span><span class="p">(</span>
                    <span class="sa">f</span><span class="s2">&quot;Invalid client type: </span><span class="si">{</span><span class="n">client_type</span><span class="si">}</span><span class="s2">&quot;</span>
                <span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_create_push_client</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">client_type</span><span class="p">:</span> <span class="n">PushClientType</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ZMQPushClient</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Create a ZMQ push client based on the client type.</span>

<span class="sd">        Args:</span>
<span class="sd">            client_type: The type of client to create</span>

<span class="sd">        Returns:</span>
<span class="sd">            ZMQPushClient instance</span>

<span class="sd">        Raises:</span>
<span class="sd">            CommunicationClientCreationError: If the client type is invalid</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">match</span> <span class="n">client_type</span><span class="p">:</span>
            <span class="k">case</span> <span class="n">PushClientType</span><span class="o">.</span><span class="n">INFERENCE_RESULTS</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">ZMQPushClient</span><span class="p">(</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">context</span><span class="p">,</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">inference_push_pull_address</span><span class="p">,</span>
                    <span class="n">bind</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>  <span class="c1"># Workers are the pushers</span>
                <span class="p">)</span>

            <span class="k">case</span> <span class="n">PushClientType</span><span class="o">.</span><span class="n">CREDIT_DROP</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">ZMQPushClient</span><span class="p">(</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">context</span><span class="p">,</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">credit_drop_address</span><span class="p">,</span>
                    <span class="n">bind</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                <span class="p">)</span>

            <span class="k">case</span> <span class="n">PushClientType</span><span class="o">.</span><span class="n">CREDIT_RETURN</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">ZMQPushClient</span><span class="p">(</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">context</span><span class="p">,</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">credit_return_address</span><span class="p">,</span>
                    <span class="n">bind</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                <span class="p">)</span>

            <span class="k">case</span> <span class="n">PushClientType</span><span class="o">.</span><span class="n">RECORDS</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">ZMQPushClient</span><span class="p">(</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">context</span><span class="p">,</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">records_address</span><span class="p">,</span>
                    <span class="n">bind</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                <span class="p">)</span>

            <span class="k">case</span><span class="w"> </span><span class="k">_</span><span class="p">:</span>
                <span class="k">raise</span> <span class="n">CommunicationClientCreationError</span><span class="p">(</span>
                    <span class="sa">f</span><span class="s2">&quot;Invalid client type: </span><span class="si">{</span><span class="n">client_type</span><span class="si">}</span><span class="s2">&quot;</span>
                <span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_create_pull_client</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">client_type</span><span class="p">:</span> <span class="n">PullClientType</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ZMQPullClient</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Create a ZMQ pull client based on the client type.</span>

<span class="sd">        Args:</span>
<span class="sd">            client_type: The type of client to create</span>

<span class="sd">        Returns:</span>
<span class="sd">            ZMQPullClient instance</span>

<span class="sd">        Raises:</span>
<span class="sd">            CommunicationClientCreationError: If the client type is invalid</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">match</span> <span class="n">client_type</span><span class="p">:</span>
            <span class="k">case</span> <span class="n">PullClientType</span><span class="o">.</span><span class="n">INFERENCE_RESULTS</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">ZMQPullClient</span><span class="p">(</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">context</span><span class="p">,</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">inference_push_pull_address</span><span class="p">,</span>
                    <span class="n">bind</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>  <span class="c1"># Records manager is the pull</span>
                <span class="p">)</span>

            <span class="k">case</span> <span class="n">PullClientType</span><span class="o">.</span><span class="n">CREDIT_DROP</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">ZMQPullClient</span><span class="p">(</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">context</span><span class="p">,</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">credit_drop_address</span><span class="p">,</span>
                    <span class="n">bind</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                <span class="p">)</span>

            <span class="k">case</span> <span class="n">PullClientType</span><span class="o">.</span><span class="n">CREDIT_RETURN</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">ZMQPullClient</span><span class="p">(</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">context</span><span class="p">,</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">credit_return_address</span><span class="p">,</span>
                    <span class="n">bind</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                <span class="p">)</span>

            <span class="k">case</span> <span class="n">PushClientType</span><span class="o">.</span><span class="n">RECORDS</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">ZMQPullClient</span><span class="p">(</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">context</span><span class="p">,</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">records_address</span><span class="p">,</span>
                    <span class="n">bind</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                <span class="p">)</span>

            <span class="k">case</span><span class="w"> </span><span class="k">_</span><span class="p">:</span>
                <span class="k">raise</span> <span class="n">CommunicationClientCreationError</span><span class="p">(</span>
                    <span class="sa">f</span><span class="s2">&quot;Invalid client type: </span><span class="si">{</span><span class="n">client_type</span><span class="si">}</span><span class="s2">&quot;</span>
                <span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_create_req_client</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">client_type</span><span class="p">:</span> <span class="n">ReqClientType</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ZMQReqClient</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Create a ZMQ request client based on the client type.</span>

<span class="sd">        Args:</span>
<span class="sd">            client_type: The type of client to create</span>

<span class="sd">        Returns:</span>
<span class="sd">            ZMQReqClient instance</span>

<span class="sd">        Raises:</span>
<span class="sd">            CommunicationClientCreationError: If the client type is invalid</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">match</span> <span class="n">client_type</span><span class="p">:</span>
            <span class="k">case</span> <span class="n">ReqClientType</span><span class="o">.</span><span class="n">CONVERSATION_DATA</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">ZMQReqClient</span><span class="p">(</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">context</span><span class="p">,</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">conversation_data_address</span><span class="p">,</span>
                    <span class="n">bind</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>  <span class="c1"># Worker manager is the request</span>
                <span class="p">)</span>
            <span class="k">case</span><span class="w"> </span><span class="k">_</span><span class="p">:</span>
                <span class="k">raise</span> <span class="n">CommunicationClientCreationError</span><span class="p">(</span>
                    <span class="sa">f</span><span class="s2">&quot;Invalid client type: </span><span class="si">{</span><span class="n">client_type</span><span class="si">}</span><span class="s2">&quot;</span>
                <span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_create_rep_client</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">client_type</span><span class="p">:</span> <span class="n">RepClientType</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ZMQRepClient</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Create a ZMQ reply client based on the client type.</span>

<span class="sd">        Args:</span>
<span class="sd">            client_type: The type of client to create</span>

<span class="sd">        Returns:</span>
<span class="sd">            ZMQRepClient instance</span>

<span class="sd">        Raises:</span>
<span class="sd">            CommunicationClientCreationError: If the client type is invalid</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">match</span> <span class="n">client_type</span><span class="p">:</span>
            <span class="k">case</span> <span class="n">RepClientType</span><span class="o">.</span><span class="n">CONVERSATION_DATA</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">ZMQRepClient</span><span class="p">(</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">context</span><span class="p">,</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">conversation_data_address</span><span class="p">,</span>
                    <span class="n">bind</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>  <span class="c1"># Data manager is the reply</span>
                <span class="p">)</span>

            <span class="k">case</span><span class="w"> </span><span class="k">_</span><span class="p">:</span>
                <span class="k">raise</span> <span class="n">CommunicationClientCreationError</span><span class="p">(</span>
                    <span class="sa">f</span><span class="s2">&quot;Invalid client type: </span><span class="si">{</span><span class="n">client_type</span><span class="si">}</span><span class="s2">&quot;</span>
                <span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">create_clients</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">types</span><span class="p">:</span> <span class="n">ClientType</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Create and initialize ZMQ clients based on the client types.</span>

<span class="sd">        Args:</span>
<span class="sd">            types: List of ClientType enums indicating the types of clients to</span>
<span class="sd">            create and initialize</span>

<span class="sd">        Raises:</span>
<span class="sd">            CommunicationClientCreationError: If the clients were not created</span>
<span class="sd">                successfully</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">for</span> <span class="n">client_type</span> <span class="ow">in</span> <span class="n">types</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">client_type</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">clients</span><span class="p">:</span>
                <span class="k">continue</span>

            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">client_type</span><span class="p">,</span> <span class="n">PubClientType</span><span class="p">):</span>
                <span class="n">client</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_create_pub_client</span><span class="p">(</span><span class="n">client_type</span><span class="p">)</span>

            <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">client_type</span><span class="p">,</span> <span class="n">SubClientType</span><span class="p">):</span>
                <span class="n">client</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_create_sub_client</span><span class="p">(</span><span class="n">client_type</span><span class="p">)</span>

            <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">client_type</span><span class="p">,</span> <span class="n">PushClientType</span><span class="p">):</span>
                <span class="n">client</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_create_push_client</span><span class="p">(</span><span class="n">client_type</span><span class="p">)</span>

            <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">client_type</span><span class="p">,</span> <span class="n">PullClientType</span><span class="p">):</span>
                <span class="n">client</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_create_pull_client</span><span class="p">(</span><span class="n">client_type</span><span class="p">)</span>

            <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">client_type</span><span class="p">,</span> <span class="n">ReqClientType</span><span class="p">):</span>
                <span class="n">client</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_create_req_client</span><span class="p">(</span><span class="n">client_type</span><span class="p">)</span>

            <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">client_type</span><span class="p">,</span> <span class="n">RepClientType</span><span class="p">):</span>
                <span class="n">client</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_create_rep_client</span><span class="p">(</span><span class="n">client_type</span><span class="p">)</span>

            <span class="k">else</span><span class="p">:</span>
                <span class="k">raise</span> <span class="n">CommunicationClientCreationError</span><span class="p">(</span>
                    <span class="sa">f</span><span class="s2">&quot;Invalid client type: </span><span class="si">{</span><span class="n">client_type</span><span class="si">}</span><span class="s2">&quot;</span>
                <span class="p">)</span>

            <span class="k">await</span> <span class="n">client</span><span class="o">.</span><span class="n">initialize</span><span class="p">()</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">clients</span><span class="p">[</span><span class="n">client_type</span><span class="p">]</span> <span class="o">=</span> <span class="n">client</span>

    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">publish</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">topic</span><span class="p">:</span> <span class="n">Topic</span><span class="p">,</span> <span class="n">message</span><span class="p">:</span> <span class="n">Message</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Publish a message to a topic. If the client type is not found, it will</span>
<span class="sd">        be created.</span>

<span class="sd">        Args:</span>
<span class="sd">            topic: The topic to publish the message to</span>
<span class="sd">            message: The message to publish</span>

<span class="sd">        Raises:</span>
<span class="sd">            CommunicationPublishError: If the message was not published successfully</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_ensure_initialized</span><span class="p">()</span>
        <span class="n">client_type</span> <span class="o">=</span> <span class="n">PubClientType</span><span class="o">.</span><span class="n">from_topic</span><span class="p">(</span><span class="n">topic</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">client_type</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">clients</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span>
                <span class="s2">&quot;Client type </span><span class="si">%s</span><span class="s2"> not found for pub topic </span><span class="si">%s</span><span class="s2">, creating client&quot;</span><span class="p">,</span>
                <span class="n">client_type</span><span class="p">,</span>
                <span class="n">topic</span><span class="p">,</span>
            <span class="p">)</span>
            <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">create_clients</span><span class="p">(</span><span class="n">client_type</span><span class="p">)</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">clients</span><span class="p">[</span><span class="n">client_type</span><span class="p">]</span><span class="o">.</span><span class="n">publish</span><span class="p">(</span><span class="n">topic</span><span class="p">,</span> <span class="n">message</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span>
                <span class="s2">&quot;Exception publishing message to topic: </span><span class="si">%s</span><span class="s2">, message: </span><span class="si">%s</span><span class="s2">, error: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span>
                <span class="n">topic</span><span class="p">,</span>
                <span class="n">message</span><span class="p">,</span>
                <span class="n">e</span><span class="p">,</span>
            <span class="p">)</span>
            <span class="k">raise</span> <span class="n">CommunicationPublishError</span><span class="p">()</span> <span class="kn">from</span><span class="w"> </span><span class="nn">e</span>

    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">subscribe</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">topic</span><span class="p">:</span> <span class="n">Topic</span><span class="p">,</span>
        <span class="n">callback</span><span class="p">:</span> <span class="n">Callable</span><span class="p">[[</span><span class="n">Message</span><span class="p">],</span> <span class="n">Coroutine</span><span class="p">[</span><span class="n">Any</span><span class="p">,</span> <span class="n">Any</span><span class="p">,</span> <span class="kc">None</span><span class="p">]],</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Subscribe to a topic. If the proper ZMQ client type is not found, it</span>
<span class="sd">        will be created.</span>

<span class="sd">        Args:</span>
<span class="sd">            topic: The topic to subscribe to</span>
<span class="sd">            callback: The callback to call when a message is received</span>

<span class="sd">        Raises:</span>
<span class="sd">            CommunicationSubscribeError: If there was an error subscribing to the</span>
<span class="sd">                topic</span>
<span class="sd">            CommunicationNotInitializedError: If the communication channels are not</span>
<span class="sd">                initialized</span>
<span class="sd">            CommunicationShutdownError: If the communication channels are shutdown</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_ensure_initialized</span><span class="p">()</span>

        <span class="n">client_type</span> <span class="o">=</span> <span class="n">SubClientType</span><span class="o">.</span><span class="n">from_topic</span><span class="p">(</span><span class="n">topic</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">client_type</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">clients</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span>
                <span class="s2">&quot;Client type </span><span class="si">%s</span><span class="s2"> not found for sub topic </span><span class="si">%s</span><span class="s2">, creating client&quot;</span><span class="p">,</span>
                <span class="n">client_type</span><span class="p">,</span>
                <span class="n">topic</span><span class="p">,</span>
            <span class="p">)</span>
            <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">create_clients</span><span class="p">(</span><span class="n">client_type</span><span class="p">)</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">clients</span><span class="p">[</span><span class="n">client_type</span><span class="p">]</span><span class="o">.</span><span class="n">subscribe</span><span class="p">(</span><span class="n">topic</span><span class="p">,</span> <span class="n">callback</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Exception subscribing to topic: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="k">raise</span> <span class="n">CommunicationSubscribeError</span><span class="p">()</span> <span class="kn">from</span><span class="w"> </span><span class="nn">e</span>

    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">request</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">target</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">request_data</span><span class="p">:</span> <span class="n">Message</span><span class="p">,</span>
        <span class="n">timeout</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">5.0</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Message</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Request a message from a target. If the proper ZMQ client type is not</span>
<span class="sd">        found, it will be created.</span>

<span class="sd">        Args:</span>
<span class="sd">            target: The target to request from</span>
<span class="sd">            request_data: The data to request</span>
<span class="sd">            timeout: The timeout for the request</span>

<span class="sd">        Returns:</span>
<span class="sd">            The response from the target</span>

<span class="sd">        Raises:</span>
<span class="sd">            CommunicationRequestError: If there was an error requesting from the</span>
<span class="sd">                target</span>
<span class="sd">            CommunicationNotInitializedError: If the communication channels are not</span>
<span class="sd">                initialized</span>
<span class="sd">            CommunicationShutdownError: If the communication channels are shutdown</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_ensure_initialized</span><span class="p">()</span>

        <span class="n">client_type</span> <span class="o">=</span> <span class="n">ReqClientType</span><span class="o">.</span><span class="n">from_topic</span><span class="p">(</span><span class="n">target</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">client_type</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">clients</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span>
                <span class="s2">&quot;Client type </span><span class="si">%s</span><span class="s2"> not found for req topic </span><span class="si">%s</span><span class="s2">, creating client&quot;</span><span class="p">,</span>
                <span class="n">client_type</span><span class="p">,</span>
                <span class="n">target</span><span class="p">,</span>
            <span class="p">)</span>
            <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">create_clients</span><span class="p">(</span><span class="n">client_type</span><span class="p">)</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="k">return</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">clients</span><span class="p">[</span><span class="n">client_type</span><span class="p">]</span><span class="o">.</span><span class="n">request</span><span class="p">(</span>
                <span class="n">target</span><span class="p">,</span> <span class="n">request_data</span><span class="p">,</span> <span class="n">timeout</span>
            <span class="p">)</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Exception requesting from </span><span class="si">{</span><span class="n">target</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="k">raise</span> <span class="n">CommunicationRequestError</span><span class="p">()</span> <span class="kn">from</span><span class="w"> </span><span class="nn">e</span>

    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">respond</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">target</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">response</span><span class="p">:</span> <span class="n">Message</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Respond to a request. If the proper ZMQ client type is not found, it</span>
<span class="sd">        will be created.</span>

<span class="sd">        Args:</span>
<span class="sd">            target: The target to respond to</span>
<span class="sd">            response: The response to send</span>

<span class="sd">        Raises:</span>
<span class="sd">            CommunicationRespondError: If there was an error responding to the</span>
<span class="sd">                target</span>
<span class="sd">            CommunicationNotInitializedError: If the communication channels are not</span>
<span class="sd">                initialized</span>
<span class="sd">            CommunicationShutdownError: If the communication channels are shutdown</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_ensure_initialized</span><span class="p">()</span>

        <span class="n">client_type</span> <span class="o">=</span> <span class="n">RepClientType</span><span class="o">.</span><span class="n">from_topic</span><span class="p">(</span><span class="n">target</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">client_type</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">clients</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span>
                <span class="s2">&quot;Client type </span><span class="si">%s</span><span class="s2"> not found for rep topic </span><span class="si">%s</span><span class="s2">, creating client&quot;</span><span class="p">,</span>
                <span class="n">client_type</span><span class="p">,</span>
                <span class="n">target</span><span class="p">,</span>
            <span class="p">)</span>
            <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">create_clients</span><span class="p">(</span><span class="n">client_type</span><span class="p">)</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">clients</span><span class="p">[</span><span class="n">client_type</span><span class="p">]</span><span class="o">.</span><span class="n">respond</span><span class="p">(</span><span class="n">target</span><span class="p">,</span> <span class="n">response</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Exception responding to </span><span class="si">{</span><span class="n">target</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="k">raise</span> <span class="n">CommunicationResponseError</span><span class="p">()</span> <span class="kn">from</span><span class="w"> </span><span class="nn">e</span>

    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">push</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">topic</span><span class="p">:</span> <span class="n">Topic</span><span class="p">,</span> <span class="n">message</span><span class="p">:</span> <span class="n">Message</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Push a message to a topic. If the proper ZMQ client type is not found,</span>
<span class="sd">        it will be created.</span>

<span class="sd">        Args:</span>
<span class="sd">            topic: The topic to push the message to</span>
<span class="sd">            message: The message to push</span>

<span class="sd">        Raises:</span>
<span class="sd">            CommunicationPushError: If there was an error pushing the message</span>
<span class="sd">            CommunicationNotInitializedError: If the communication channels are not</span>
<span class="sd">                initialized</span>
<span class="sd">            CommunicationShutdownError: If the communication channels are shutdown</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_ensure_initialized</span><span class="p">()</span>

        <span class="n">client_type</span> <span class="o">=</span> <span class="n">PushClientType</span><span class="o">.</span><span class="n">from_topic</span><span class="p">(</span><span class="n">topic</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">client_type</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">clients</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span>
                <span class="s2">&quot;Client type </span><span class="si">%s</span><span class="s2"> not found for push, creating client&quot;</span><span class="p">,</span>
                <span class="n">client_type</span><span class="p">,</span>
            <span class="p">)</span>
            <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">create_clients</span><span class="p">(</span><span class="n">client_type</span><span class="p">)</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">clients</span><span class="p">[</span><span class="n">client_type</span><span class="p">]</span><span class="o">.</span><span class="n">push</span><span class="p">(</span><span class="n">message</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Exception pushing data: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="k">raise</span> <span class="n">CommunicationPushError</span><span class="p">()</span> <span class="kn">from</span><span class="w"> </span><span class="nn">e</span>

    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">register_pull_callback</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">message_type</span><span class="p">:</span> <span class="n">MessageType</span><span class="p">,</span>
        <span class="n">callback</span><span class="p">:</span> <span class="n">Callable</span><span class="p">[[</span><span class="n">Message</span><span class="p">],</span> <span class="n">Coroutine</span><span class="p">[</span><span class="n">Any</span><span class="p">,</span> <span class="n">Any</span><span class="p">,</span> <span class="kc">None</span><span class="p">]],</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Register a callback for a pull client.</span>

<span class="sd">        Args:</span>
<span class="sd">            message_type: The message type to register the callback for</span>
<span class="sd">            callback: The callback to register</span>

<span class="sd">        Raises:</span>
<span class="sd">            CommunicationClientCreationError: If the client type is invalid</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Pulling data for </span><span class="si">{</span><span class="n">message_type</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_ensure_initialized</span><span class="p">()</span>

        <span class="n">client_type</span> <span class="o">=</span> <span class="n">PullClientType</span><span class="o">.</span><span class="n">from_message_type</span><span class="p">(</span><span class="n">message_type</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">client_type</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">clients</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span>
                <span class="s2">&quot;Client type </span><span class="si">%r</span><span class="s2"> not found for pull, creating client&quot;</span><span class="p">,</span>
                <span class="n">client_type</span><span class="p">,</span>
            <span class="p">)</span>
            <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">create_clients</span><span class="p">(</span><span class="n">client_type</span><span class="p">)</span>

        <span class="c1"># Only adds to the callback list, does not block, and does not raise an exception</span>
        <span class="k">await</span> <span class="n">cast</span><span class="p">(</span><span class="n">ZMQPullClient</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">clients</span><span class="p">[</span><span class="n">client_type</span><span class="p">])</span><span class="o">.</span><span class="n">register_pull_callback</span><span class="p">(</span>
            <span class="n">message_type</span><span class="p">,</span> <span class="n">callback</span>
        <span class="p">)</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">







<div class="doc doc-object doc-attribute">



<h3 id="aiperf.common.comms.zmq.zmq_comms.ZMQCommunication.context" class="doc doc-heading">
            <code class=" language-python"><span class="n">context</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

<a href="#aiperf.common.comms.zmq.zmq_comms.ZMQCommunication.context" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Get the ZeroMQ context.</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="zmq.asyncio.Context">Context</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>ZeroMQ context</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="aiperf.common.comms.zmq.zmq_comms.ZMQCommunication.is_initialized" class="doc doc-heading">
            <code class=" language-python"><span class="n">is_initialized</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

<a href="#aiperf.common.comms.zmq.zmq_comms.ZMQCommunication.is_initialized" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Check if communication channels are initialized.</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>True if communication channels are initialized, False otherwise</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="aiperf.common.comms.zmq.zmq_comms.ZMQCommunication.is_shutdown" class="doc doc-heading">
            <code class=" language-python"><span class="n">is_shutdown</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

<a href="#aiperf.common.comms.zmq.zmq_comms.ZMQCommunication.is_shutdown" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Check if communication channels are shutdown.</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>True if communication channels are shutdown, False otherwise</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

    </div>

</div>



<div class="doc doc-object doc-function">


<h3 id="aiperf.common.comms.zmq.zmq_comms.ZMQCommunication.__init__" class="doc doc-heading">
            <code class=" language-python"><span class="fm">__init__</span><span class="p">(</span><span class="n">config</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

<a href="#aiperf.common.comms.zmq.zmq_comms.ZMQCommunication.__init__" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Initialize ZMQ communication.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>config</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="ZMQCommunicationConfig (aiperf.common.models.ZMQCommunicationConfig)" href="#aiperf.common.models.ZMQCommunicationConfig">ZMQCommunicationConfig</a> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>ZMQCommunicationConfig object with configuration parameters</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>aiperf/common/comms/zmq/zmq_comms.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span>
<span class="normal">71</span>
<span class="normal">72</span>
<span class="normal">73</span>
<span class="normal">74</span>
<span class="normal">75</span>
<span class="normal">76</span>
<span class="normal">77</span>
<span class="normal">78</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">config</span><span class="p">:</span> <span class="n">ZMQCommunicationConfig</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Initialize ZMQ communication.</span>

<span class="sd">    Args:</span>
<span class="sd">        config: ZMQCommunicationConfig object with configuration parameters</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">stop_event</span><span class="p">:</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">Event</span> <span class="o">=</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">Event</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">initialized_event</span><span class="p">:</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">Event</span> <span class="o">=</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">Event</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">config</span> <span class="o">=</span> <span class="n">config</span> <span class="ow">or</span> <span class="n">ZMQCommunicationConfig</span><span class="p">()</span>

    <span class="c1"># Generate client_id if not provided</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">client_id</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">client_id</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;client_</span><span class="si">{</span><span class="n">uuid</span><span class="o">.</span><span class="n">uuid4</span><span class="p">()</span><span class="o">.</span><span class="n">hex</span><span class="p">[:</span><span class="mi">8</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">_context</span><span class="p">:</span> <span class="n">zmq</span><span class="o">.</span><span class="n">asyncio</span><span class="o">.</span><span class="n">Context</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">clients</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="n">ClientType</span><span class="p">,</span> <span class="n">ZMQClient</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>

    <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span>
        <span class="s2">&quot;ZMQ communication using protocol: </span><span class="si">%s</span><span class="s2"> with client ID: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span>
        <span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">protocol_config</span><span class="p">)</span><span class="o">.</span><span class="vm">__name__</span><span class="p">,</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">client_id</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="aiperf.common.comms.zmq.zmq_comms.ZMQCommunication.create_clients" class="doc doc-heading">
            <code class=" language-python"><span class="n">create_clients</span><span class="p">(</span><span class="o">*</span><span class="n">types</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#aiperf.common.comms.zmq.zmq_comms.ZMQCommunication.create_clients" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Create and initialize ZMQ clients based on the client types.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>types</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="ClientType = PubClientType | SubClientType | PushClientType | PullClientType | ReqClientType | RepClientType

  
      module-attribute
   (aiperf.common.comms.client_enums.ClientType)" href="#aiperf.common.comms.client_enums.ClientType">ClientType</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>List of ClientType enums indicating the types of clients to</p>
              </div>
            </td>
            <td>
                  <code>()</code>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="CommunicationClientCreationError (aiperf.common.exceptions.CommunicationClientCreationError)" href="#aiperf.common.exceptions.CommunicationClientCreationError">CommunicationClientCreationError</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If the clients were not created
successfully</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>aiperf/common/comms/zmq/zmq_comms.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">379</span>
<span class="normal">380</span>
<span class="normal">381</span>
<span class="normal">382</span>
<span class="normal">383</span>
<span class="normal">384</span>
<span class="normal">385</span>
<span class="normal">386</span>
<span class="normal">387</span>
<span class="normal">388</span>
<span class="normal">389</span>
<span class="normal">390</span>
<span class="normal">391</span>
<span class="normal">392</span>
<span class="normal">393</span>
<span class="normal">394</span>
<span class="normal">395</span>
<span class="normal">396</span>
<span class="normal">397</span>
<span class="normal">398</span>
<span class="normal">399</span>
<span class="normal">400</span>
<span class="normal">401</span>
<span class="normal">402</span>
<span class="normal">403</span>
<span class="normal">404</span>
<span class="normal">405</span>
<span class="normal">406</span>
<span class="normal">407</span>
<span class="normal">408</span>
<span class="normal">409</span>
<span class="normal">410</span>
<span class="normal">411</span>
<span class="normal">412</span>
<span class="normal">413</span>
<span class="normal">414</span>
<span class="normal">415</span>
<span class="normal">416</span>
<span class="normal">417</span>
<span class="normal">418</span>
<span class="normal">419</span>
<span class="normal">420</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">create_clients</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">types</span><span class="p">:</span> <span class="n">ClientType</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Create and initialize ZMQ clients based on the client types.</span>

<span class="sd">    Args:</span>
<span class="sd">        types: List of ClientType enums indicating the types of clients to</span>
<span class="sd">        create and initialize</span>

<span class="sd">    Raises:</span>
<span class="sd">        CommunicationClientCreationError: If the clients were not created</span>
<span class="sd">            successfully</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">for</span> <span class="n">client_type</span> <span class="ow">in</span> <span class="n">types</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">client_type</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">clients</span><span class="p">:</span>
            <span class="k">continue</span>

        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">client_type</span><span class="p">,</span> <span class="n">PubClientType</span><span class="p">):</span>
            <span class="n">client</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_create_pub_client</span><span class="p">(</span><span class="n">client_type</span><span class="p">)</span>

        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">client_type</span><span class="p">,</span> <span class="n">SubClientType</span><span class="p">):</span>
            <span class="n">client</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_create_sub_client</span><span class="p">(</span><span class="n">client_type</span><span class="p">)</span>

        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">client_type</span><span class="p">,</span> <span class="n">PushClientType</span><span class="p">):</span>
            <span class="n">client</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_create_push_client</span><span class="p">(</span><span class="n">client_type</span><span class="p">)</span>

        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">client_type</span><span class="p">,</span> <span class="n">PullClientType</span><span class="p">):</span>
            <span class="n">client</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_create_pull_client</span><span class="p">(</span><span class="n">client_type</span><span class="p">)</span>

        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">client_type</span><span class="p">,</span> <span class="n">ReqClientType</span><span class="p">):</span>
            <span class="n">client</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_create_req_client</span><span class="p">(</span><span class="n">client_type</span><span class="p">)</span>

        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">client_type</span><span class="p">,</span> <span class="n">RepClientType</span><span class="p">):</span>
            <span class="n">client</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_create_rep_client</span><span class="p">(</span><span class="n">client_type</span><span class="p">)</span>

        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">CommunicationClientCreationError</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Invalid client type: </span><span class="si">{</span><span class="n">client_type</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="p">)</span>

        <span class="k">await</span> <span class="n">client</span><span class="o">.</span><span class="n">initialize</span><span class="p">()</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">clients</span><span class="p">[</span><span class="n">client_type</span><span class="p">]</span> <span class="o">=</span> <span class="n">client</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="aiperf.common.comms.zmq.zmq_comms.ZMQCommunication.initialize" class="doc doc-heading">
            <code class=" language-python"><span class="n">initialize</span><span class="p">()</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#aiperf.common.comms.zmq.zmq_comms.ZMQCommunication.initialize" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Initialize communication channels.</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code>None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>True if initialization was successful, False otherwise</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>aiperf/common/comms/zmq/zmq_comms.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">initialize</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Initialize communication channels.</span>

<span class="sd">    Returns:</span>
<span class="sd">        True if initialization was successful, False otherwise</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_initialized</span><span class="p">:</span>
        <span class="k">return</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">_context</span> <span class="o">=</span> <span class="n">zmq</span><span class="o">.</span><span class="n">asyncio</span><span class="o">.</span><span class="n">Context</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">initialized_event</span><span class="o">.</span><span class="n">set</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="aiperf.common.comms.zmq.zmq_comms.ZMQCommunication.publish" class="doc doc-heading">
            <code class=" language-python"><span class="n">publish</span><span class="p">(</span><span class="n">topic</span><span class="p">,</span> <span class="n">message</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#aiperf.common.comms.zmq.zmq_comms.ZMQCommunication.publish" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Publish a message to a topic. If the client type is not found, it will
be created.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>topic</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="Topic (aiperf.common.enums.Topic)" href="#aiperf.common.enums.Topic">Topic</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The topic to publish the message to</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>message</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="Message (aiperf.common.messages.Message)" href="#aiperf.common.messages.Message">Message</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The message to publish</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="CommunicationPublishError (aiperf.common.exceptions.CommunicationPublishError)" href="#aiperf.common.exceptions.CommunicationPublishError">CommunicationPublishError</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If the message was not published successfully</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>aiperf/common/comms/zmq/zmq_comms.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">422</span>
<span class="normal">423</span>
<span class="normal">424</span>
<span class="normal">425</span>
<span class="normal">426</span>
<span class="normal">427</span>
<span class="normal">428</span>
<span class="normal">429</span>
<span class="normal">430</span>
<span class="normal">431</span>
<span class="normal">432</span>
<span class="normal">433</span>
<span class="normal">434</span>
<span class="normal">435</span>
<span class="normal">436</span>
<span class="normal">437</span>
<span class="normal">438</span>
<span class="normal">439</span>
<span class="normal">440</span>
<span class="normal">441</span>
<span class="normal">442</span>
<span class="normal">443</span>
<span class="normal">444</span>
<span class="normal">445</span>
<span class="normal">446</span>
<span class="normal">447</span>
<span class="normal">448</span>
<span class="normal">449</span>
<span class="normal">450</span>
<span class="normal">451</span>
<span class="normal">452</span>
<span class="normal">453</span>
<span class="normal">454</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">publish</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">topic</span><span class="p">:</span> <span class="n">Topic</span><span class="p">,</span> <span class="n">message</span><span class="p">:</span> <span class="n">Message</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Publish a message to a topic. If the client type is not found, it will</span>
<span class="sd">    be created.</span>

<span class="sd">    Args:</span>
<span class="sd">        topic: The topic to publish the message to</span>
<span class="sd">        message: The message to publish</span>

<span class="sd">    Raises:</span>
<span class="sd">        CommunicationPublishError: If the message was not published successfully</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">_ensure_initialized</span><span class="p">()</span>
    <span class="n">client_type</span> <span class="o">=</span> <span class="n">PubClientType</span><span class="o">.</span><span class="n">from_topic</span><span class="p">(</span><span class="n">topic</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">client_type</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">clients</span><span class="p">:</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span>
            <span class="s2">&quot;Client type </span><span class="si">%s</span><span class="s2"> not found for pub topic </span><span class="si">%s</span><span class="s2">, creating client&quot;</span><span class="p">,</span>
            <span class="n">client_type</span><span class="p">,</span>
            <span class="n">topic</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">create_clients</span><span class="p">(</span><span class="n">client_type</span><span class="p">)</span>

    <span class="k">try</span><span class="p">:</span>
        <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">clients</span><span class="p">[</span><span class="n">client_type</span><span class="p">]</span><span class="o">.</span><span class="n">publish</span><span class="p">(</span><span class="n">topic</span><span class="p">,</span> <span class="n">message</span><span class="p">)</span>
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span>
            <span class="s2">&quot;Exception publishing message to topic: </span><span class="si">%s</span><span class="s2">, message: </span><span class="si">%s</span><span class="s2">, error: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span>
            <span class="n">topic</span><span class="p">,</span>
            <span class="n">message</span><span class="p">,</span>
            <span class="n">e</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="k">raise</span> <span class="n">CommunicationPublishError</span><span class="p">()</span> <span class="kn">from</span><span class="w"> </span><span class="nn">e</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="aiperf.common.comms.zmq.zmq_comms.ZMQCommunication.push" class="doc doc-heading">
            <code class=" language-python"><span class="n">push</span><span class="p">(</span><span class="n">topic</span><span class="p">,</span> <span class="n">message</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#aiperf.common.comms.zmq.zmq_comms.ZMQCommunication.push" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Push a message to a topic. If the proper ZMQ client type is not found,
it will be created.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>topic</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="Topic (aiperf.common.enums.Topic)" href="#aiperf.common.enums.Topic">Topic</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The topic to push the message to</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>message</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="Message (aiperf.common.messages.Message)" href="#aiperf.common.messages.Message">Message</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The message to push</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="CommunicationPushError (aiperf.common.exceptions.CommunicationPushError)" href="#aiperf.common.exceptions.CommunicationPushError">CommunicationPushError</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If there was an error pushing the message</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="CommunicationNotInitializedError (aiperf.common.exceptions.CommunicationNotInitializedError)" href="#aiperf.common.exceptions.CommunicationNotInitializedError">CommunicationNotInitializedError</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If the communication channels are not
initialized</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="CommunicationShutdownError (aiperf.common.exceptions.CommunicationShutdownError)" href="#aiperf.common.exceptions.CommunicationShutdownError">CommunicationShutdownError</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If the communication channels are shutdown</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>aiperf/common/comms/zmq/zmq_comms.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">573</span>
<span class="normal">574</span>
<span class="normal">575</span>
<span class="normal">576</span>
<span class="normal">577</span>
<span class="normal">578</span>
<span class="normal">579</span>
<span class="normal">580</span>
<span class="normal">581</span>
<span class="normal">582</span>
<span class="normal">583</span>
<span class="normal">584</span>
<span class="normal">585</span>
<span class="normal">586</span>
<span class="normal">587</span>
<span class="normal">588</span>
<span class="normal">589</span>
<span class="normal">590</span>
<span class="normal">591</span>
<span class="normal">592</span>
<span class="normal">593</span>
<span class="normal">594</span>
<span class="normal">595</span>
<span class="normal">596</span>
<span class="normal">597</span>
<span class="normal">598</span>
<span class="normal">599</span>
<span class="normal">600</span>
<span class="normal">601</span>
<span class="normal">602</span>
<span class="normal">603</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">push</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">topic</span><span class="p">:</span> <span class="n">Topic</span><span class="p">,</span> <span class="n">message</span><span class="p">:</span> <span class="n">Message</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Push a message to a topic. If the proper ZMQ client type is not found,</span>
<span class="sd">    it will be created.</span>

<span class="sd">    Args:</span>
<span class="sd">        topic: The topic to push the message to</span>
<span class="sd">        message: The message to push</span>

<span class="sd">    Raises:</span>
<span class="sd">        CommunicationPushError: If there was an error pushing the message</span>
<span class="sd">        CommunicationNotInitializedError: If the communication channels are not</span>
<span class="sd">            initialized</span>
<span class="sd">        CommunicationShutdownError: If the communication channels are shutdown</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">_ensure_initialized</span><span class="p">()</span>

    <span class="n">client_type</span> <span class="o">=</span> <span class="n">PushClientType</span><span class="o">.</span><span class="n">from_topic</span><span class="p">(</span><span class="n">topic</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">client_type</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">clients</span><span class="p">:</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span>
            <span class="s2">&quot;Client type </span><span class="si">%s</span><span class="s2"> not found for push, creating client&quot;</span><span class="p">,</span>
            <span class="n">client_type</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">create_clients</span><span class="p">(</span><span class="n">client_type</span><span class="p">)</span>

    <span class="k">try</span><span class="p">:</span>
        <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">clients</span><span class="p">[</span><span class="n">client_type</span><span class="p">]</span><span class="o">.</span><span class="n">push</span><span class="p">(</span><span class="n">message</span><span class="p">)</span>
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Exception pushing data: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">raise</span> <span class="n">CommunicationPushError</span><span class="p">()</span> <span class="kn">from</span><span class="w"> </span><span class="nn">e</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="aiperf.common.comms.zmq.zmq_comms.ZMQCommunication.register_pull_callback" class="doc doc-heading">
            <code class=" language-python"><span class="n">register_pull_callback</span><span class="p">(</span><span class="n">message_type</span><span class="p">,</span> <span class="n">callback</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#aiperf.common.comms.zmq.zmq_comms.ZMQCommunication.register_pull_callback" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Register a callback for a pull client.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>message_type</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="MessageType (aiperf.common.enums.MessageType)" href="#aiperf.common.enums.MessageType">MessageType</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The message type to register the callback for</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>callback</code>
            </td>
            <td>
                  <code><span title="collections.abc.Callable">Callable</span>[[<a class="autorefs autorefs-internal" title="Message (aiperf.common.messages.Message)" href="#aiperf.common.messages.Message">Message</a>], <span title="collections.abc.Coroutine">Coroutine</span>[<span title="typing.Any">Any</span>, <span title="typing.Any">Any</span>, None]]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The callback to register</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="CommunicationClientCreationError (aiperf.common.exceptions.CommunicationClientCreationError)" href="#aiperf.common.exceptions.CommunicationClientCreationError">CommunicationClientCreationError</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If the client type is invalid</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>aiperf/common/comms/zmq/zmq_comms.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">605</span>
<span class="normal">606</span>
<span class="normal">607</span>
<span class="normal">608</span>
<span class="normal">609</span>
<span class="normal">610</span>
<span class="normal">611</span>
<span class="normal">612</span>
<span class="normal">613</span>
<span class="normal">614</span>
<span class="normal">615</span>
<span class="normal">616</span>
<span class="normal">617</span>
<span class="normal">618</span>
<span class="normal">619</span>
<span class="normal">620</span>
<span class="normal">621</span>
<span class="normal">622</span>
<span class="normal">623</span>
<span class="normal">624</span>
<span class="normal">625</span>
<span class="normal">626</span>
<span class="normal">627</span>
<span class="normal">628</span>
<span class="normal">629</span>
<span class="normal">630</span>
<span class="normal">631</span>
<span class="normal">632</span>
<span class="normal">633</span>
<span class="normal">634</span>
<span class="normal">635</span>
<span class="normal">636</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">register_pull_callback</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">message_type</span><span class="p">:</span> <span class="n">MessageType</span><span class="p">,</span>
    <span class="n">callback</span><span class="p">:</span> <span class="n">Callable</span><span class="p">[[</span><span class="n">Message</span><span class="p">],</span> <span class="n">Coroutine</span><span class="p">[</span><span class="n">Any</span><span class="p">,</span> <span class="n">Any</span><span class="p">,</span> <span class="kc">None</span><span class="p">]],</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Register a callback for a pull client.</span>

<span class="sd">    Args:</span>
<span class="sd">        message_type: The message type to register the callback for</span>
<span class="sd">        callback: The callback to register</span>

<span class="sd">    Raises:</span>
<span class="sd">        CommunicationClientCreationError: If the client type is invalid</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Pulling data for </span><span class="si">{</span><span class="n">message_type</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">_ensure_initialized</span><span class="p">()</span>

    <span class="n">client_type</span> <span class="o">=</span> <span class="n">PullClientType</span><span class="o">.</span><span class="n">from_message_type</span><span class="p">(</span><span class="n">message_type</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">client_type</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">clients</span><span class="p">:</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span>
            <span class="s2">&quot;Client type </span><span class="si">%r</span><span class="s2"> not found for pull, creating client&quot;</span><span class="p">,</span>
            <span class="n">client_type</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">create_clients</span><span class="p">(</span><span class="n">client_type</span><span class="p">)</span>

    <span class="c1"># Only adds to the callback list, does not block, and does not raise an exception</span>
    <span class="k">await</span> <span class="n">cast</span><span class="p">(</span><span class="n">ZMQPullClient</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">clients</span><span class="p">[</span><span class="n">client_type</span><span class="p">])</span><span class="o">.</span><span class="n">register_pull_callback</span><span class="p">(</span>
        <span class="n">message_type</span><span class="p">,</span> <span class="n">callback</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="aiperf.common.comms.zmq.zmq_comms.ZMQCommunication.request" class="doc doc-heading">
            <code class=" language-python"><span class="n">request</span><span class="p">(</span><span class="n">target</span><span class="p">,</span> <span class="n">request_data</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="mf">5.0</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#aiperf.common.comms.zmq.zmq_comms.ZMQCommunication.request" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Request a message from a target. If the proper ZMQ client type is not
found, it will be created.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>target</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The target to request from</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>request_data</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="Message (aiperf.common.messages.Message)" href="#aiperf.common.messages.Message">Message</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The data to request</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>timeout</code>
            </td>
            <td>
                  <code><span title="float">float</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The timeout for the request</p>
              </div>
            </td>
            <td>
                  <code>5.0</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="Message (aiperf.common.messages.Message)" href="#aiperf.common.messages.Message">Message</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The response from the target</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="CommunicationRequestError (aiperf.common.exceptions.CommunicationRequestError)" href="#aiperf.common.exceptions.CommunicationRequestError">CommunicationRequestError</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If there was an error requesting from the
target</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="CommunicationNotInitializedError (aiperf.common.exceptions.CommunicationNotInitializedError)" href="#aiperf.common.exceptions.CommunicationNotInitializedError">CommunicationNotInitializedError</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If the communication channels are not
initialized</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="CommunicationShutdownError (aiperf.common.exceptions.CommunicationShutdownError)" href="#aiperf.common.exceptions.CommunicationShutdownError">CommunicationShutdownError</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If the communication channels are shutdown</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>aiperf/common/comms/zmq/zmq_comms.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">494</span>
<span class="normal">495</span>
<span class="normal">496</span>
<span class="normal">497</span>
<span class="normal">498</span>
<span class="normal">499</span>
<span class="normal">500</span>
<span class="normal">501</span>
<span class="normal">502</span>
<span class="normal">503</span>
<span class="normal">504</span>
<span class="normal">505</span>
<span class="normal">506</span>
<span class="normal">507</span>
<span class="normal">508</span>
<span class="normal">509</span>
<span class="normal">510</span>
<span class="normal">511</span>
<span class="normal">512</span>
<span class="normal">513</span>
<span class="normal">514</span>
<span class="normal">515</span>
<span class="normal">516</span>
<span class="normal">517</span>
<span class="normal">518</span>
<span class="normal">519</span>
<span class="normal">520</span>
<span class="normal">521</span>
<span class="normal">522</span>
<span class="normal">523</span>
<span class="normal">524</span>
<span class="normal">525</span>
<span class="normal">526</span>
<span class="normal">527</span>
<span class="normal">528</span>
<span class="normal">529</span>
<span class="normal">530</span>
<span class="normal">531</span>
<span class="normal">532</span>
<span class="normal">533</span>
<span class="normal">534</span>
<span class="normal">535</span>
<span class="normal">536</span>
<span class="normal">537</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">request</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">target</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">request_data</span><span class="p">:</span> <span class="n">Message</span><span class="p">,</span>
    <span class="n">timeout</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">5.0</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Message</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Request a message from a target. If the proper ZMQ client type is not</span>
<span class="sd">    found, it will be created.</span>

<span class="sd">    Args:</span>
<span class="sd">        target: The target to request from</span>
<span class="sd">        request_data: The data to request</span>
<span class="sd">        timeout: The timeout for the request</span>

<span class="sd">    Returns:</span>
<span class="sd">        The response from the target</span>

<span class="sd">    Raises:</span>
<span class="sd">        CommunicationRequestError: If there was an error requesting from the</span>
<span class="sd">            target</span>
<span class="sd">        CommunicationNotInitializedError: If the communication channels are not</span>
<span class="sd">            initialized</span>
<span class="sd">        CommunicationShutdownError: If the communication channels are shutdown</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">_ensure_initialized</span><span class="p">()</span>

    <span class="n">client_type</span> <span class="o">=</span> <span class="n">ReqClientType</span><span class="o">.</span><span class="n">from_topic</span><span class="p">(</span><span class="n">target</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">client_type</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">clients</span><span class="p">:</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span>
            <span class="s2">&quot;Client type </span><span class="si">%s</span><span class="s2"> not found for req topic </span><span class="si">%s</span><span class="s2">, creating client&quot;</span><span class="p">,</span>
            <span class="n">client_type</span><span class="p">,</span>
            <span class="n">target</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">create_clients</span><span class="p">(</span><span class="n">client_type</span><span class="p">)</span>

    <span class="k">try</span><span class="p">:</span>
        <span class="k">return</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">clients</span><span class="p">[</span><span class="n">client_type</span><span class="p">]</span><span class="o">.</span><span class="n">request</span><span class="p">(</span>
            <span class="n">target</span><span class="p">,</span> <span class="n">request_data</span><span class="p">,</span> <span class="n">timeout</span>
        <span class="p">)</span>
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Exception requesting from </span><span class="si">{</span><span class="n">target</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">raise</span> <span class="n">CommunicationRequestError</span><span class="p">()</span> <span class="kn">from</span><span class="w"> </span><span class="nn">e</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="aiperf.common.comms.zmq.zmq_comms.ZMQCommunication.respond" class="doc doc-heading">
            <code class=" language-python"><span class="n">respond</span><span class="p">(</span><span class="n">target</span><span class="p">,</span> <span class="n">response</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#aiperf.common.comms.zmq.zmq_comms.ZMQCommunication.respond" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Respond to a request. If the proper ZMQ client type is not found, it
will be created.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>target</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The target to respond to</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>response</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="Message (aiperf.common.messages.Message)" href="#aiperf.common.messages.Message">Message</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The response to send</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="CommunicationRespondError">CommunicationRespondError</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If there was an error responding to the
target</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="CommunicationNotInitializedError (aiperf.common.exceptions.CommunicationNotInitializedError)" href="#aiperf.common.exceptions.CommunicationNotInitializedError">CommunicationNotInitializedError</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If the communication channels are not
initialized</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="CommunicationShutdownError (aiperf.common.exceptions.CommunicationShutdownError)" href="#aiperf.common.exceptions.CommunicationShutdownError">CommunicationShutdownError</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If the communication channels are shutdown</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>aiperf/common/comms/zmq/zmq_comms.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">539</span>
<span class="normal">540</span>
<span class="normal">541</span>
<span class="normal">542</span>
<span class="normal">543</span>
<span class="normal">544</span>
<span class="normal">545</span>
<span class="normal">546</span>
<span class="normal">547</span>
<span class="normal">548</span>
<span class="normal">549</span>
<span class="normal">550</span>
<span class="normal">551</span>
<span class="normal">552</span>
<span class="normal">553</span>
<span class="normal">554</span>
<span class="normal">555</span>
<span class="normal">556</span>
<span class="normal">557</span>
<span class="normal">558</span>
<span class="normal">559</span>
<span class="normal">560</span>
<span class="normal">561</span>
<span class="normal">562</span>
<span class="normal">563</span>
<span class="normal">564</span>
<span class="normal">565</span>
<span class="normal">566</span>
<span class="normal">567</span>
<span class="normal">568</span>
<span class="normal">569</span>
<span class="normal">570</span>
<span class="normal">571</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">respond</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">target</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">response</span><span class="p">:</span> <span class="n">Message</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Respond to a request. If the proper ZMQ client type is not found, it</span>
<span class="sd">    will be created.</span>

<span class="sd">    Args:</span>
<span class="sd">        target: The target to respond to</span>
<span class="sd">        response: The response to send</span>

<span class="sd">    Raises:</span>
<span class="sd">        CommunicationRespondError: If there was an error responding to the</span>
<span class="sd">            target</span>
<span class="sd">        CommunicationNotInitializedError: If the communication channels are not</span>
<span class="sd">            initialized</span>
<span class="sd">        CommunicationShutdownError: If the communication channels are shutdown</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">_ensure_initialized</span><span class="p">()</span>

    <span class="n">client_type</span> <span class="o">=</span> <span class="n">RepClientType</span><span class="o">.</span><span class="n">from_topic</span><span class="p">(</span><span class="n">target</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">client_type</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">clients</span><span class="p">:</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span>
            <span class="s2">&quot;Client type </span><span class="si">%s</span><span class="s2"> not found for rep topic </span><span class="si">%s</span><span class="s2">, creating client&quot;</span><span class="p">,</span>
            <span class="n">client_type</span><span class="p">,</span>
            <span class="n">target</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">create_clients</span><span class="p">(</span><span class="n">client_type</span><span class="p">)</span>

    <span class="k">try</span><span class="p">:</span>
        <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">clients</span><span class="p">[</span><span class="n">client_type</span><span class="p">]</span><span class="o">.</span><span class="n">respond</span><span class="p">(</span><span class="n">target</span><span class="p">,</span> <span class="n">response</span><span class="p">)</span>
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Exception responding to </span><span class="si">{</span><span class="n">target</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">raise</span> <span class="n">CommunicationResponseError</span><span class="p">()</span> <span class="kn">from</span><span class="w"> </span><span class="nn">e</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="aiperf.common.comms.zmq.zmq_comms.ZMQCommunication.shutdown" class="doc doc-heading">
            <code class=" language-python"><span class="n">shutdown</span><span class="p">()</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#aiperf.common.comms.zmq.zmq_comms.ZMQCommunication.shutdown" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Gracefully shutdown communication channels.</p>
<p>This method will wait for all clients to shutdown before shutting down
the context.</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code>None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>True if shutdown was successful, False otherwise</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>aiperf/common/comms/zmq/zmq_comms.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">shutdown</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Gracefully shutdown communication channels.</span>

<span class="sd">    This method will wait for all clients to shutdown before shutting down</span>
<span class="sd">    the context.</span>

<span class="sd">    Returns:</span>
<span class="sd">        True if shutdown was successful, False otherwise</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_shutdown</span><span class="p">:</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;ZMQ communication already shutdown&quot;</span><span class="p">)</span>
        <span class="k">return</span>

    <span class="k">try</span><span class="p">:</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">stop_event</span><span class="o">.</span><span class="n">is_set</span><span class="p">():</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">stop_event</span><span class="o">.</span><span class="n">set</span><span class="p">()</span>

        <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;Shutting down ZMQ communication for client </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">client_id</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="p">)</span>
        <span class="k">await</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">gather</span><span class="p">(</span>
            <span class="o">*</span><span class="p">(</span><span class="n">client</span><span class="o">.</span><span class="n">shutdown</span><span class="p">()</span> <span class="k">for</span> <span class="n">client</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">clients</span><span class="o">.</span><span class="n">values</span><span class="p">())</span>
        <span class="p">)</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">context</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">context</span><span class="o">.</span><span class="n">term</span><span class="p">()</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_context</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;ZMQ communication shutdown successfully&quot;</span><span class="p">)</span>

    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Exception shutting down ZMQ communication: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">raise</span> <span class="n">CommunicationShutdownError</span><span class="p">(</span>
            <span class="s2">&quot;Failed to shutdown ZMQ communication&quot;</span>
        <span class="p">)</span> <span class="kn">from</span><span class="w"> </span><span class="nn">e</span>

    <span class="k">finally</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">clients</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_context</span> <span class="o">=</span> <span class="kc">None</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="aiperf.common.comms.zmq.zmq_comms.ZMQCommunication.subscribe" class="doc doc-heading">
            <code class=" language-python"><span class="n">subscribe</span><span class="p">(</span><span class="n">topic</span><span class="p">,</span> <span class="n">callback</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#aiperf.common.comms.zmq.zmq_comms.ZMQCommunication.subscribe" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Subscribe to a topic. If the proper ZMQ client type is not found, it
will be created.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>topic</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="Topic (aiperf.common.enums.Topic)" href="#aiperf.common.enums.Topic">Topic</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The topic to subscribe to</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>callback</code>
            </td>
            <td>
                  <code><span title="collections.abc.Callable">Callable</span>[[<a class="autorefs autorefs-internal" title="Message (aiperf.common.messages.Message)" href="#aiperf.common.messages.Message">Message</a>], <span title="collections.abc.Coroutine">Coroutine</span>[<span title="typing.Any">Any</span>, <span title="typing.Any">Any</span>, None]]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The callback to call when a message is received</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="CommunicationSubscribeError (aiperf.common.exceptions.CommunicationSubscribeError)" href="#aiperf.common.exceptions.CommunicationSubscribeError">CommunicationSubscribeError</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If there was an error subscribing to the
topic</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="CommunicationNotInitializedError (aiperf.common.exceptions.CommunicationNotInitializedError)" href="#aiperf.common.exceptions.CommunicationNotInitializedError">CommunicationNotInitializedError</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If the communication channels are not
initialized</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="CommunicationShutdownError (aiperf.common.exceptions.CommunicationShutdownError)" href="#aiperf.common.exceptions.CommunicationShutdownError">CommunicationShutdownError</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If the communication channels are shutdown</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>aiperf/common/comms/zmq/zmq_comms.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">456</span>
<span class="normal">457</span>
<span class="normal">458</span>
<span class="normal">459</span>
<span class="normal">460</span>
<span class="normal">461</span>
<span class="normal">462</span>
<span class="normal">463</span>
<span class="normal">464</span>
<span class="normal">465</span>
<span class="normal">466</span>
<span class="normal">467</span>
<span class="normal">468</span>
<span class="normal">469</span>
<span class="normal">470</span>
<span class="normal">471</span>
<span class="normal">472</span>
<span class="normal">473</span>
<span class="normal">474</span>
<span class="normal">475</span>
<span class="normal">476</span>
<span class="normal">477</span>
<span class="normal">478</span>
<span class="normal">479</span>
<span class="normal">480</span>
<span class="normal">481</span>
<span class="normal">482</span>
<span class="normal">483</span>
<span class="normal">484</span>
<span class="normal">485</span>
<span class="normal">486</span>
<span class="normal">487</span>
<span class="normal">488</span>
<span class="normal">489</span>
<span class="normal">490</span>
<span class="normal">491</span>
<span class="normal">492</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">subscribe</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">topic</span><span class="p">:</span> <span class="n">Topic</span><span class="p">,</span>
    <span class="n">callback</span><span class="p">:</span> <span class="n">Callable</span><span class="p">[[</span><span class="n">Message</span><span class="p">],</span> <span class="n">Coroutine</span><span class="p">[</span><span class="n">Any</span><span class="p">,</span> <span class="n">Any</span><span class="p">,</span> <span class="kc">None</span><span class="p">]],</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Subscribe to a topic. If the proper ZMQ client type is not found, it</span>
<span class="sd">    will be created.</span>

<span class="sd">    Args:</span>
<span class="sd">        topic: The topic to subscribe to</span>
<span class="sd">        callback: The callback to call when a message is received</span>

<span class="sd">    Raises:</span>
<span class="sd">        CommunicationSubscribeError: If there was an error subscribing to the</span>
<span class="sd">            topic</span>
<span class="sd">        CommunicationNotInitializedError: If the communication channels are not</span>
<span class="sd">            initialized</span>
<span class="sd">        CommunicationShutdownError: If the communication channels are shutdown</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">_ensure_initialized</span><span class="p">()</span>

    <span class="n">client_type</span> <span class="o">=</span> <span class="n">SubClientType</span><span class="o">.</span><span class="n">from_topic</span><span class="p">(</span><span class="n">topic</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">client_type</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">clients</span><span class="p">:</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span>
            <span class="s2">&quot;Client type </span><span class="si">%s</span><span class="s2"> not found for sub topic </span><span class="si">%s</span><span class="s2">, creating client&quot;</span><span class="p">,</span>
            <span class="n">client_type</span><span class="p">,</span>
            <span class="n">topic</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">create_clients</span><span class="p">(</span><span class="n">client_type</span><span class="p">)</span>

    <span class="k">try</span><span class="p">:</span>
        <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">clients</span><span class="p">[</span><span class="n">client_type</span><span class="p">]</span><span class="o">.</span><span class="n">subscribe</span><span class="p">(</span><span class="n">topic</span><span class="p">,</span> <span class="n">callback</span><span class="p">)</span>
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Exception subscribing to topic: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">raise</span> <span class="n">CommunicationSubscribeError</span><span class="p">()</span> <span class="kn">from</span><span class="w"> </span><span class="nn">e</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>




  </div>

    </div>

</div><h2 id="aiperfcommonconfigbase_config">aiperf.common.config.base_config<a class="headerlink" href="#aiperfcommonconfigbase_config" title="Permanent link">&para;</a></h2>


<div class="doc doc-object doc-module">



<a id="aiperf.common.config.base_config"></a>
    <div class="doc doc-contents first">









  <div class="doc doc-children">








<div class="doc doc-object doc-class">



<h2 id="aiperf.common.config.base_config.BaseConfig" class="doc doc-heading">
            <code>BaseConfig</code>


<a href="#aiperf.common.config.base_config.BaseConfig" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="pydantic.BaseModel">BaseModel</span></code></p>








              <details class="quote">
                <summary>Source code in <code>aiperf/common/config/base_config.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 17</span>
<span class="normal"> 18</span>
<span class="normal"> 19</span>
<span class="normal"> 20</span>
<span class="normal"> 21</span>
<span class="normal"> 22</span>
<span class="normal"> 23</span>
<span class="normal"> 24</span>
<span class="normal"> 25</span>
<span class="normal"> 26</span>
<span class="normal"> 27</span>
<span class="normal"> 28</span>
<span class="normal"> 29</span>
<span class="normal"> 30</span>
<span class="normal"> 31</span>
<span class="normal"> 32</span>
<span class="normal"> 33</span>
<span class="normal"> 34</span>
<span class="normal"> 35</span>
<span class="normal"> 36</span>
<span class="normal"> 37</span>
<span class="normal"> 38</span>
<span class="normal"> 39</span>
<span class="normal"> 40</span>
<span class="normal"> 41</span>
<span class="normal"> 42</span>
<span class="normal"> 43</span>
<span class="normal"> 44</span>
<span class="normal"> 45</span>
<span class="normal"> 46</span>
<span class="normal"> 47</span>
<span class="normal"> 48</span>
<span class="normal"> 49</span>
<span class="normal"> 50</span>
<span class="normal"> 51</span>
<span class="normal"> 52</span>
<span class="normal"> 53</span>
<span class="normal"> 54</span>
<span class="normal"> 55</span>
<span class="normal"> 56</span>
<span class="normal"> 57</span>
<span class="normal"> 58</span>
<span class="normal"> 59</span>
<span class="normal"> 60</span>
<span class="normal"> 61</span>
<span class="normal"> 62</span>
<span class="normal"> 63</span>
<span class="normal"> 64</span>
<span class="normal"> 65</span>
<span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">BaseConfig</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">serialize_to_yaml</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">verbose</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span> <span class="n">indent</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">4</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Serialize a Pydantic model to a YAML string.</span>

<span class="sd">        Args:</span>
<span class="sd">            verbose: Whether to include verbose comments in the YAML output.</span>
<span class="sd">            indent: The per-level indentation to use.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Dump model to dict with context (flags propagate recursively)</span>
        <span class="n">context</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;verbose&quot;</span><span class="p">:</span> <span class="n">verbose</span><span class="p">,</span>
        <span class="p">}</span>

        <span class="n">data</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">model_dump</span><span class="p">(</span><span class="n">context</span><span class="o">=</span><span class="n">context</span><span class="p">)</span>

        <span class="c1"># Attach comments recursively</span>
        <span class="n">commented_data</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_attach_comments</span><span class="p">(</span>
            <span class="n">data</span><span class="o">=</span><span class="n">data</span><span class="p">,</span>
            <span class="n">model</span><span class="o">=</span><span class="bp">self</span><span class="p">,</span>
            <span class="n">context</span><span class="o">=</span><span class="n">context</span><span class="p">,</span>
            <span class="n">indent</span><span class="o">=</span><span class="n">indent</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="c1"># Dump to YAML</span>
        <span class="n">yaml</span> <span class="o">=</span> <span class="n">YAML</span><span class="p">(</span><span class="n">pure</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="n">yaml</span><span class="o">.</span><span class="n">indent</span><span class="p">(</span><span class="n">mapping</span><span class="o">=</span><span class="n">indent</span><span class="p">,</span> <span class="n">sequence</span><span class="o">=</span><span class="n">indent</span><span class="p">,</span> <span class="n">offset</span><span class="o">=</span><span class="n">indent</span><span class="p">)</span>

        <span class="n">stream</span> <span class="o">=</span> <span class="n">io</span><span class="o">.</span><span class="n">StringIO</span><span class="p">()</span>
        <span class="n">yaml</span><span class="o">.</span><span class="n">dump</span><span class="p">(</span><span class="n">commented_data</span><span class="p">,</span> <span class="n">stream</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">stream</span><span class="o">.</span><span class="n">getvalue</span><span class="p">()</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">_attach_comments</span><span class="p">(</span>
        <span class="n">data</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span>
        <span class="n">model</span><span class="p">:</span> <span class="n">BaseModel</span><span class="p">,</span>
        <span class="n">context</span><span class="p">:</span> <span class="nb">dict</span><span class="p">,</span>
        <span class="n">indent</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
        <span class="n">indent_level</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Any</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Recursively convert dicts to ruamel.yaml CommentedMap and attach comments from</span>
<span class="sd">        Pydantic field descriptions, or based on context (e.g., verbose flag).</span>

<span class="sd">        Args:</span>
<span class="sd">            data: The raw data to convert to a CommentedMap.</span>
<span class="sd">            model: The Pydantic model that contains the field descriptions.</span>
<span class="sd">            context: The Pydantic serializer context which contains the serializer flags.</span>
<span class="sd">            indent: The per-level indentation to use for the comments.</span>
<span class="sd">            indent_level: The current level of indentation. The actual indentation is</span>
<span class="sd">                `indent * indent_level`.</span>

<span class="sd">        Returns:</span>
<span class="sd">            The data with comments attached.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
            <span class="c1"># Create a CommentedMap to store the commented data. This is a special type of</span>
            <span class="c1"># dict provided by the ruamel.yaml library that preserves the order of the keys and</span>
            <span class="c1"># allows for comments to be attached to the keys.</span>
            <span class="n">commented_map</span> <span class="o">=</span> <span class="n">CommentedMap</span><span class="p">()</span>

            <span class="k">for</span> <span class="n">field_name</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">data</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                <span class="n">field</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="n">model_fields</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">field_name</span><span class="p">)</span>

                <span class="k">if</span> <span class="ow">not</span> <span class="n">BaseConfig</span><span class="o">.</span><span class="n">_should_add_field_to_template</span><span class="p">(</span><span class="n">field</span><span class="p">):</span>
                    <span class="k">continue</span>

                <span class="k">if</span> <span class="n">BaseConfig</span><span class="o">.</span><span class="n">_is_a_nested_config</span><span class="p">(</span><span class="n">field</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
                    <span class="c1"># Recursively process nested models</span>
                    <span class="n">commented_map</span><span class="p">[</span><span class="n">field_name</span><span class="p">]</span> <span class="o">=</span> <span class="n">BaseConfig</span><span class="o">.</span><span class="n">_attach_comments</span><span class="p">(</span>
                        <span class="n">value</span><span class="p">,</span>
                        <span class="nb">getattr</span><span class="p">(</span><span class="n">model</span><span class="p">,</span> <span class="n">field_name</span><span class="p">),</span>
                        <span class="n">context</span><span class="o">=</span><span class="n">context</span><span class="p">,</span>
                        <span class="n">indent</span><span class="o">=</span><span class="n">indent</span><span class="p">,</span>
                        <span class="n">indent_level</span><span class="o">=</span><span class="n">indent_level</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span>
                    <span class="p">)</span>

                    <span class="n">commented_map</span><span class="o">.</span><span class="n">yaml_set_comment_before_after_key</span><span class="p">(</span>
                        <span class="n">field_name</span><span class="p">,</span>
                        <span class="n">before</span><span class="o">=</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">,</span>
                        <span class="n">indent</span><span class="o">=</span><span class="n">indent</span> <span class="o">*</span> <span class="p">(</span><span class="n">indent_level</span> <span class="o">+</span> <span class="mi">1</span><span class="p">),</span>
                    <span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="c1"># Attach the value to the commented map</span>
                    <span class="n">commented_map</span><span class="p">[</span><span class="n">field_name</span><span class="p">]</span> <span class="o">=</span> <span class="n">BaseConfig</span><span class="o">.</span><span class="n">_preprocess_value</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>

                <span class="c1"># Attach comment if verbose and description exists</span>
                <span class="k">if</span> <span class="n">context</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;verbose&quot;</span><span class="p">)</span> <span class="ow">and</span> <span class="n">field</span> <span class="ow">and</span> <span class="n">field</span><span class="o">.</span><span class="n">description</span><span class="p">:</span>
                    <span class="c1"># Set the comment before the key, with the specified indentation</span>
                    <span class="n">commented_map</span><span class="o">.</span><span class="n">yaml_set_comment_before_after_key</span><span class="p">(</span>
                        <span class="n">field_name</span><span class="p">,</span>
                        <span class="n">before</span><span class="o">=</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span> <span class="o">+</span> <span class="n">field</span><span class="o">.</span><span class="n">description</span><span class="p">,</span>
                        <span class="n">indent</span><span class="o">=</span><span class="n">indent</span> <span class="o">*</span> <span class="n">indent_level</span><span class="p">,</span>
                    <span class="p">)</span>

            <span class="k">return</span> <span class="n">commented_map</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">_should_add_field_to_template</span><span class="p">(</span><span class="n">field</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
        <span class="c1"># Check if the field should be added to the template based on json_schema_extra</span>
        <span class="c1"># and the add_to_template flag.</span>
        <span class="c1"># If add_to_template is False, we skip adding the field to the template.</span>
        <span class="c1"># If add_to_template is True or not present, we include the field in the template.</span>
        <span class="k">if</span> <span class="n">field</span> <span class="ow">and</span> <span class="n">field</span><span class="o">.</span><span class="n">json_schema_extra</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">field</span><span class="o">.</span><span class="n">json_schema_extra</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">ADD_TO_TEMPLATE</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">True</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">_is_a_nested_config</span><span class="p">(</span><span class="n">field</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
        <span class="k">return</span> <span class="p">(</span>
            <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="nb">dict</span><span class="p">)</span>
            <span class="ow">and</span> <span class="n">field</span>
            <span class="ow">and</span> <span class="nb">issubclass</span><span class="p">(</span><span class="n">field</span><span class="o">.</span><span class="n">annotation</span><span class="p">,</span> <span class="n">BaseModel</span><span class="p">)</span>
        <span class="p">)</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">_preprocess_value</span><span class="p">(</span><span class="n">value</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Any</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Preprocess the value before serialization.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">Enum</span><span class="p">):</span>
            <span class="k">return</span> <span class="nb">str</span><span class="p">(</span><span class="n">value</span><span class="o">.</span><span class="n">value</span><span class="p">)</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">Path</span><span class="p">):</span>
            <span class="k">return</span> <span class="nb">str</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">value</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h3 id="aiperf.common.config.base_config.BaseConfig.serialize_to_yaml" class="doc doc-heading">
            <code class=" language-python"><span class="n">serialize_to_yaml</span><span class="p">(</span><span class="n">verbose</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">indent</span><span class="o">=</span><span class="mi">4</span><span class="p">)</span></code>

<a href="#aiperf.common.config.base_config.BaseConfig.serialize_to_yaml" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Serialize a Pydantic model to a YAML string.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>verbose</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Whether to include verbose comments in the YAML output.</p>
              </div>
            </td>
            <td>
                  <code>False</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>indent</code>
            </td>
            <td>
                  <code><span title="int">int</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The per-level indentation to use.</p>
              </div>
            </td>
            <td>
                  <code>4</code>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>aiperf/common/config/base_config.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">serialize_to_yaml</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">verbose</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span> <span class="n">indent</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">4</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Serialize a Pydantic model to a YAML string.</span>

<span class="sd">    Args:</span>
<span class="sd">        verbose: Whether to include verbose comments in the YAML output.</span>
<span class="sd">        indent: The per-level indentation to use.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Dump model to dict with context (flags propagate recursively)</span>
    <span class="n">context</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s2">&quot;verbose&quot;</span><span class="p">:</span> <span class="n">verbose</span><span class="p">,</span>
    <span class="p">}</span>

    <span class="n">data</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">model_dump</span><span class="p">(</span><span class="n">context</span><span class="o">=</span><span class="n">context</span><span class="p">)</span>

    <span class="c1"># Attach comments recursively</span>
    <span class="n">commented_data</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_attach_comments</span><span class="p">(</span>
        <span class="n">data</span><span class="o">=</span><span class="n">data</span><span class="p">,</span>
        <span class="n">model</span><span class="o">=</span><span class="bp">self</span><span class="p">,</span>
        <span class="n">context</span><span class="o">=</span><span class="n">context</span><span class="p">,</span>
        <span class="n">indent</span><span class="o">=</span><span class="n">indent</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="c1"># Dump to YAML</span>
    <span class="n">yaml</span> <span class="o">=</span> <span class="n">YAML</span><span class="p">(</span><span class="n">pure</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">yaml</span><span class="o">.</span><span class="n">indent</span><span class="p">(</span><span class="n">mapping</span><span class="o">=</span><span class="n">indent</span><span class="p">,</span> <span class="n">sequence</span><span class="o">=</span><span class="n">indent</span><span class="p">,</span> <span class="n">offset</span><span class="o">=</span><span class="n">indent</span><span class="p">)</span>

    <span class="n">stream</span> <span class="o">=</span> <span class="n">io</span><span class="o">.</span><span class="n">StringIO</span><span class="p">()</span>
    <span class="n">yaml</span><span class="o">.</span><span class="n">dump</span><span class="p">(</span><span class="n">commented_data</span><span class="p">,</span> <span class="n">stream</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">stream</span><span class="o">.</span><span class="n">getvalue</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>




  </div>

    </div>

</div><h2 id="aiperfcommonconfigconfig_defaults">aiperf.common.config.config_defaults<a class="headerlink" href="#aiperfcommonconfigconfig_defaults" title="Permanent link">&para;</a></h2>


<div class="doc doc-object doc-module">



<a id="aiperf.common.config.config_defaults"></a>
    <div class="doc doc-contents first">









  <div class="doc doc-children">











  </div>

    </div>

</div><h2 id="aiperfcommonconfigconfig_validators">aiperf.common.config.config_validators<a class="headerlink" href="#aiperfcommonconfigconfig_validators" title="Permanent link">&para;</a></h2>


<div class="doc doc-object doc-module">



<a id="aiperf.common.config.config_validators"></a>
    <div class="doc doc-contents first">









  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h2 id="aiperf.common.config.config_validators.parse_file" class="doc doc-heading">
            <code class=" language-python"><span class="n">parse_file</span><span class="p">(</span><span class="n">value</span><span class="p">)</span></code>

<a href="#aiperf.common.config.config_validators.parse_file" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">

        <p>Parses the given string value and returns a Path object if the value represents
a valid file, directory, or a specific synthetic/payload format. Returns None if
the input value is empty.
Args:
    value (str): The string value to parse.
Returns:
    Optional[Path]: A Path object if the value is valid, or None if the value is empty.
Raises:
    ValueError: If the value is not a valid file or directory and does not match
                the synthetic/payload format.</p>


            <details class="quote">
              <summary>Source code in <code>aiperf/common/config/config_validators.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">parse_file</span><span class="p">(</span><span class="n">value</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Path</span> <span class="o">|</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Parses the given string value and returns a Path object if the value represents</span>
<span class="sd">    a valid file, directory, or a specific synthetic/payload format. Returns None if</span>
<span class="sd">    the input value is empty.</span>
<span class="sd">    Args:</span>
<span class="sd">        value (str): The string value to parse.</span>
<span class="sd">    Returns:</span>
<span class="sd">        Optional[Path]: A Path object if the value is valid, or None if the value is empty.</span>
<span class="sd">    Raises:</span>
<span class="sd">        ValueError: If the value is not a valid file or directory and does not match</span>
<span class="sd">                    the synthetic/payload format.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="n">value</span><span class="p">:</span>
        <span class="k">return</span> <span class="kc">None</span>
    <span class="k">elif</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Expected a string, but got </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">value</span><span class="p">)</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="k">elif</span> <span class="n">value</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;synthetic:&quot;</span><span class="p">)</span> <span class="ow">or</span> <span class="n">value</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;payload&quot;</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">Path</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">path</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">path</span><span class="o">.</span><span class="n">is_file</span><span class="p">()</span> <span class="ow">or</span> <span class="n">path</span><span class="o">.</span><span class="n">is_dir</span><span class="p">():</span>
            <span class="k">return</span> <span class="n">path</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;&#39;</span><span class="si">{</span><span class="n">value</span><span class="si">}</span><span class="s2">&#39; is not a valid file or directory&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="aiperf.common.config.config_validators.parse_goodput" class="doc doc-heading">
            <code class=" language-python"><span class="n">parse_goodput</span><span class="p">(</span><span class="n">goodputs</span><span class="p">)</span></code>

<a href="#aiperf.common.config.config_validators.parse_goodput" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">

        <p>Parses and validates a dictionary of goodput values, ensuring that all values
are non-negative integers or floats, and converts them to floats.
Args:
    goodputs (Dict[str, Any]): A dictionary where keys are target metric names
        (strings) and values are the corresponding goodput values.
Returns:
    Dict[str, float]: A dictionary with the same keys as the input, but with
        all values converted to floats.
Raises:
    ValueError: If any value in the input dictionary is not an integer or float,
        or if any value is negative.</p>


            <details class="quote">
              <summary>Source code in <code>aiperf/common/config/config_validators.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">71</span>
<span class="normal">72</span>
<span class="normal">73</span>
<span class="normal">74</span>
<span class="normal">75</span>
<span class="normal">76</span>
<span class="normal">77</span>
<span class="normal">78</span>
<span class="normal">79</span>
<span class="normal">80</span>
<span class="normal">81</span>
<span class="normal">82</span>
<span class="normal">83</span>
<span class="normal">84</span>
<span class="normal">85</span>
<span class="normal">86</span>
<span class="normal">87</span>
<span class="normal">88</span>
<span class="normal">89</span>
<span class="normal">90</span>
<span class="normal">91</span>
<span class="normal">92</span>
<span class="normal">93</span>
<span class="normal">94</span>
<span class="normal">95</span>
<span class="normal">96</span>
<span class="normal">97</span>
<span class="normal">98</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">parse_goodput</span><span class="p">(</span><span class="n">goodputs</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">float</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Parses and validates a dictionary of goodput values, ensuring that all values</span>
<span class="sd">    are non-negative integers or floats, and converts them to floats.</span>
<span class="sd">    Args:</span>
<span class="sd">        goodputs (Dict[str, Any]): A dictionary where keys are target metric names</span>
<span class="sd">            (strings) and values are the corresponding goodput values.</span>
<span class="sd">    Returns:</span>
<span class="sd">        Dict[str, float]: A dictionary with the same keys as the input, but with</span>
<span class="sd">            all values converted to floats.</span>
<span class="sd">    Raises:</span>
<span class="sd">        ValueError: If any value in the input dictionary is not an integer or float,</span>
<span class="sd">            or if any value is negative.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">constraints</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="k">for</span> <span class="n">target_metric</span><span class="p">,</span> <span class="n">target_value</span> <span class="ow">in</span> <span class="n">goodputs</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">target_value</span><span class="p">,</span> <span class="p">(</span><span class="nb">int</span> <span class="o">|</span> <span class="nb">float</span><span class="p">)):</span>
            <span class="k">if</span> <span class="n">target_value</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                    <span class="sa">f</span><span class="s2">&quot;User Config: Goodput values must be non-negative (</span><span class="si">{</span><span class="n">target_metric</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">target_value</span><span class="si">}</span><span class="s2">)&quot;</span>
                <span class="p">)</span>

            <span class="n">constraints</span><span class="p">[</span><span class="n">target_metric</span><span class="p">]</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">target_value</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;User Config: Goodput values must be integers or floats&quot;</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">constraints</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="aiperf.common.config.config_validators.parse_str_or_list" class="doc doc-heading">
            <code class=" language-python"><span class="n">parse_str_or_list</span><span class="p">(</span><span class="nb">input</span><span class="p">)</span></code>

<a href="#aiperf.common.config.config_validators.parse_str_or_list" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">

        <p>Parses the input to ensure it is either a string or a list. If the input is a string,
it splits the string by commas and trims any whitespace around each element, returning
the result as a list. If the input is already a list, it is returned as-is. If the input
is neither a string nor a list, a ValueError is raised.
Args:
    input (Any): The input to be parsed. Expected to be a string or a list.
Returns:
    list: A list of strings derived from the input.
Raises:
    ValueError: If the input is neither a string nor a list.</p>


            <details class="quote">
              <summary>Source code in <code>aiperf/common/config/config_validators.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">parse_str_or_list</span><span class="p">(</span><span class="nb">input</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="n">Any</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Parses the input to ensure it is either a string or a list. If the input is a string,</span>
<span class="sd">    it splits the string by commas and trims any whitespace around each element, returning</span>
<span class="sd">    the result as a list. If the input is already a list, it is returned as-is. If the input</span>
<span class="sd">    is neither a string nor a list, a ValueError is raised.</span>
<span class="sd">    Args:</span>
<span class="sd">        input (Any): The input to be parsed. Expected to be a string or a list.</span>
<span class="sd">    Returns:</span>
<span class="sd">        list: A list of strings derived from the input.</span>
<span class="sd">    Raises:</span>
<span class="sd">        ValueError: If the input is neither a string nor a list.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="nb">input</span><span class="p">)</span> <span class="ow">is</span> <span class="nb">str</span><span class="p">:</span>
        <span class="n">output</span> <span class="o">=</span> <span class="p">[</span><span class="nb">input</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span> <span class="k">for</span> <span class="nb">input</span> <span class="ow">in</span> <span class="nb">input</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;,&quot;</span><span class="p">)]</span>
    <span class="k">elif</span> <span class="nb">type</span><span class="p">(</span><span class="nb">input</span><span class="p">)</span> <span class="ow">is</span> <span class="nb">list</span><span class="p">:</span>
        <span class="n">output</span> <span class="o">=</span> <span class="nb">input</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;User Config: </span><span class="si">{</span><span class="nb">input</span><span class="si">}</span><span class="s2"> - must be a string or list&quot;</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">output</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="aiperf.common.config.config_validators.parse_str_or_list_of_positive_values" class="doc doc-heading">
            <code class=" language-python"><span class="n">parse_str_or_list_of_positive_values</span><span class="p">(</span><span class="nb">input</span><span class="p">)</span></code>

<a href="#aiperf.common.config.config_validators.parse_str_or_list_of_positive_values" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">

        <p>Parses the input to ensure it is a list of positive integers or floats.
This function first converts the input into a list using <code>parse_str_or_list</code>.
It then validates that each value in the list is either an integer or a float
and that all values are strictly greater than zero. If any value fails this
validation, a <code>ValueError</code> is raised.
Args:
    input (Any): The input to be parsed. It can be a string or a list.
Returns:
    List[Any]: A list of positive integers or floats.
Raises:
    ValueError: If any value in the parsed list is not a positive integer or float.</p>


            <details class="quote">
              <summary>Source code in <code>aiperf/common/config/config_validators.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">parse_str_or_list_of_positive_values</span><span class="p">(</span><span class="nb">input</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="n">Any</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Parses the input to ensure it is a list of positive integers or floats.</span>
<span class="sd">    This function first converts the input into a list using `parse_str_or_list`.</span>
<span class="sd">    It then validates that each value in the list is either an integer or a float</span>
<span class="sd">    and that all values are strictly greater than zero. If any value fails this</span>
<span class="sd">    validation, a `ValueError` is raised.</span>
<span class="sd">    Args:</span>
<span class="sd">        input (Any): The input to be parsed. It can be a string or a list.</span>
<span class="sd">    Returns:</span>
<span class="sd">        List[Any]: A list of positive integers or floats.</span>
<span class="sd">    Raises:</span>
<span class="sd">        ValueError: If any value in the parsed list is not a positive integer or float.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">output</span> <span class="o">=</span> <span class="n">parse_str_or_list</span><span class="p">(</span><span class="nb">input</span><span class="p">)</span>

    <span class="k">for</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">output</span><span class="p">:</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="p">(</span><span class="nb">int</span> <span class="o">|</span> <span class="nb">float</span><span class="p">))</span> <span class="ow">or</span> <span class="n">value</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;User Config: </span><span class="si">{</span><span class="n">output</span><span class="si">}</span><span class="s2"> - all values </span><span class="si">{</span><span class="n">value</span><span class="si">}</span><span class="s2"> must be a positive integer or float&quot;</span>
            <span class="p">)</span>

    <span class="k">return</span> <span class="n">output</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div><h2 id="aiperfcommonconfigendpointendpoint_config">aiperf.common.config.endpoint.endpoint_config<a class="headerlink" href="#aiperfcommonconfigendpointendpoint_config" title="Permanent link">&para;</a></h2>


<div class="doc doc-object doc-module">



<a id="aiperf.common.config.endpoint.endpoint_config"></a>
    <div class="doc doc-contents first">









  <div class="doc doc-children">








<div class="doc doc-object doc-class">



<h2 id="aiperf.common.config.endpoint.endpoint_config.EndPointConfig" class="doc doc-heading">
            <code>EndPointConfig</code>


<a href="#aiperf.common.config.endpoint.endpoint_config.EndPointConfig" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="BaseConfig (aiperf.common.config.base_config.BaseConfig)" href="#aiperf.common.config.base_config.BaseConfig">BaseConfig</a></code></p>


        <p>A configuration class for defining endpoint related settings.</p>







              <details class="quote">
                <summary>Source code in <code>aiperf/common/config/endpoint/endpoint_config.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span>
<span class="normal">71</span>
<span class="normal">72</span>
<span class="normal">73</span>
<span class="normal">74</span>
<span class="normal">75</span>
<span class="normal">76</span>
<span class="normal">77</span>
<span class="normal">78</span>
<span class="normal">79</span>
<span class="normal">80</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">EndPointConfig</span><span class="p">(</span><span class="n">BaseConfig</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A configuration class for defining endpoint related settings.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">model_selection_strategy</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span>
        <span class="n">ModelSelectionStrategy</span><span class="p">,</span>
        <span class="n">Field</span><span class="p">(</span>
            <span class="n">description</span><span class="o">=</span><span class="s2">&quot;When multiple models are specified, this is how a specific model should be assigned to a prompt. </span><span class="se">\</span>
<span class="s2">            </span><span class="se">\n</span><span class="s2">round_robin: nth prompt in the list gets assigned to n-mod len(models). </span><span class="se">\</span>
<span class="s2">            </span><span class="se">\n</span><span class="s2">random: assignment is uniformly random&quot;</span><span class="p">,</span>
        <span class="p">),</span>
    <span class="p">]</span> <span class="o">=</span> <span class="n">EndPointDefaults</span><span class="o">.</span><span class="n">MODEL_SELECTION_STRATEGY</span>

    <span class="n">backend</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span>
        <span class="n">RequestPayloadType</span><span class="p">,</span>
        <span class="n">Field</span><span class="p">(</span>
            <span class="n">description</span><span class="o">=</span><span class="s2">&quot;When benchmarking Triton, this is the backend of the model.&quot;</span><span class="p">,</span>
        <span class="p">),</span>
    <span class="p">]</span> <span class="o">=</span> <span class="n">EndPointDefaults</span><span class="o">.</span><span class="n">BACKEND</span>

    <span class="n">custom</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span>
        <span class="nb">str</span><span class="p">,</span>
        <span class="n">Field</span><span class="p">(</span>
            <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Set a custom endpoint that differs from the OpenAI defaults.&quot;</span><span class="p">,</span>
        <span class="p">),</span>
    <span class="p">]</span> <span class="o">=</span> <span class="n">EndPointDefaults</span><span class="o">.</span><span class="n">CUSTOM</span>

    <span class="nb">type</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span>
        <span class="nb">str</span><span class="p">,</span>
        <span class="n">Field</span><span class="p">(</span>
            <span class="n">description</span><span class="o">=</span><span class="s2">&quot;The type to send requests to on the server.&quot;</span><span class="p">,</span>
        <span class="p">),</span>
    <span class="p">]</span> <span class="o">=</span> <span class="n">EndPointDefaults</span><span class="o">.</span><span class="n">TYPE</span>

    <span class="n">streaming</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span>
        <span class="nb">bool</span><span class="p">,</span>
        <span class="n">Field</span><span class="p">(</span>
            <span class="n">description</span><span class="o">=</span><span class="s2">&quot;An option to enable the use of the streaming API.&quot;</span><span class="p">,</span>
        <span class="p">),</span>
    <span class="p">]</span> <span class="o">=</span> <span class="n">EndPointDefaults</span><span class="o">.</span><span class="n">STREAMING</span>

    <span class="n">server_metrics_urls</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span>
        <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span>
        <span class="n">Field</span><span class="p">(</span>
            <span class="n">description</span><span class="o">=</span><span class="s2">&quot;The list of Triton server metrics URLs. </span><span class="se">\</span>
<span class="s2">            </span><span class="se">\n</span><span class="s2">These are used for Telemetry metric reporting with Triton.&quot;</span><span class="p">,</span>
        <span class="p">),</span>
        <span class="n">BeforeValidator</span><span class="p">(</span><span class="n">parse_str_or_list</span><span class="p">),</span>
    <span class="p">]</span> <span class="o">=</span> <span class="n">EndPointDefaults</span><span class="o">.</span><span class="n">SERVER_METRICS_URLS</span>

    <span class="n">url</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span>
        <span class="nb">str</span><span class="p">,</span>
        <span class="n">Field</span><span class="p">(</span>
            <span class="n">description</span><span class="o">=</span><span class="s2">&quot;URL of the endpoint to target for benchmarking.&quot;</span><span class="p">,</span>
        <span class="p">),</span>
    <span class="p">]</span> <span class="o">=</span> <span class="n">EndPointDefaults</span><span class="o">.</span><span class="n">URL</span>

    <span class="n">grpc_method</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span>
        <span class="nb">str</span><span class="p">,</span>
        <span class="n">Field</span><span class="p">(</span>
            <span class="n">description</span><span class="o">=</span><span class="s2">&quot;A fully-qualified gRPC method name in &quot;</span>
            <span class="s2">&quot;&#39;&lt;package&gt;.&lt;service&gt;/&lt;method&gt;&#39; format.&quot;</span>
            <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">The option is only supported by dynamic gRPC service kind and is&quot;</span>
            <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">required to identify the RPC to use when sending requests to the server.&quot;</span><span class="p">,</span>
        <span class="p">),</span>
    <span class="p">]</span> <span class="o">=</span> <span class="n">EndPointDefaults</span><span class="o">.</span><span class="n">GRPC_METHOD</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">











  </div>

    </div>

</div>




  </div>

    </div>

</div><h2 id="aiperfcommonconfiginputaudio_config">aiperf.common.config.input.audio_config<a class="headerlink" href="#aiperfcommonconfiginputaudio_config" title="Permanent link">&para;</a></h2>


<div class="doc doc-object doc-module">



<a id="aiperf.common.config.input.audio_config"></a>
    <div class="doc doc-contents first">









  <div class="doc doc-children">








<div class="doc doc-object doc-class">



<h2 id="aiperf.common.config.input.audio_config.AudioConfig" class="doc doc-heading">
            <code>AudioConfig</code>


<a href="#aiperf.common.config.input.audio_config.AudioConfig" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="BaseConfig (aiperf.common.config.base_config.BaseConfig)" href="#aiperf.common.config.base_config.BaseConfig">BaseConfig</a></code></p>


        <p>A configuration class for defining audio related settings.</p>







              <details class="quote">
                <summary>Source code in <code>aiperf/common/config/input/audio_config.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span>
<span class="normal">71</span>
<span class="normal">72</span>
<span class="normal">73</span>
<span class="normal">74</span>
<span class="normal">75</span>
<span class="normal">76</span>
<span class="normal">77</span>
<span class="normal">78</span>
<span class="normal">79</span>
<span class="normal">80</span>
<span class="normal">81</span>
<span class="normal">82</span>
<span class="normal">83</span>
<span class="normal">84</span>
<span class="normal">85</span>
<span class="normal">86</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">AudioConfig</span><span class="p">(</span><span class="n">BaseConfig</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A configuration class for defining audio related settings.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">batch_size</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span>
        <span class="nb">int</span><span class="p">,</span>
        <span class="n">Field</span><span class="p">(</span>
            <span class="n">ge</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
            <span class="n">description</span><span class="o">=</span><span class="s2">&quot;The batch size of audio requests GenAI-Perf should send.</span><span class="se">\</span>
<span class="s2">            </span><span class="se">\n</span><span class="s2">This is currently supported with the OpenAI `multimodal` endpoint type&quot;</span><span class="p">,</span>
        <span class="p">),</span>
    <span class="p">]</span> <span class="o">=</span> <span class="n">AudioDefaults</span><span class="o">.</span><span class="n">BATCH_SIZE</span>

    <span class="n">length</span><span class="p">:</span> <span class="n">AudioLengthConfig</span> <span class="o">=</span> <span class="n">AudioLengthConfig</span><span class="p">()</span>

    <span class="nb">format</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span>
        <span class="n">AudioFormat</span><span class="p">,</span>
        <span class="n">Field</span><span class="p">(</span>
            <span class="n">description</span><span class="o">=</span><span class="s2">&quot;The format of the audio files (wav or mp3).&quot;</span><span class="p">,</span>
        <span class="p">),</span>
    <span class="p">]</span> <span class="o">=</span> <span class="n">AudioDefaults</span><span class="o">.</span><span class="n">FORMAT</span>

    <span class="n">depths</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span>
        <span class="nb">list</span><span class="p">[</span><span class="nb">int</span><span class="p">],</span>
        <span class="n">Field</span><span class="p">(</span>
            <span class="n">min_length</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
            <span class="n">description</span><span class="o">=</span><span class="s2">&quot;A list of audio bit depths to randomly select from in bits.&quot;</span><span class="p">,</span>
        <span class="p">),</span>
        <span class="n">BeforeValidator</span><span class="p">(</span><span class="n">parse_str_or_list_of_positive_values</span><span class="p">),</span>
    <span class="p">]</span> <span class="o">=</span> <span class="n">AudioDefaults</span><span class="o">.</span><span class="n">DEPTHS</span>

    <span class="n">sample_rates</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span>
        <span class="nb">list</span><span class="p">[</span><span class="nb">float</span><span class="p">],</span>
        <span class="n">Field</span><span class="p">(</span>
            <span class="n">min_length</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
            <span class="n">description</span><span class="o">=</span><span class="s2">&quot;A list of audio sample rates to randomly select from in kHz.&quot;</span><span class="p">,</span>
        <span class="p">),</span>
        <span class="n">BeforeValidator</span><span class="p">(</span><span class="n">parse_str_or_list_of_positive_values</span><span class="p">),</span>
    <span class="p">]</span> <span class="o">=</span> <span class="n">AudioDefaults</span><span class="o">.</span><span class="n">SAMPLE_RATES</span>

    <span class="n">num_channels</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span>
        <span class="nb">int</span><span class="p">,</span>
        <span class="n">Field</span><span class="p">(</span>
            <span class="n">ge</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
            <span class="n">le</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span>
            <span class="n">description</span><span class="o">=</span><span class="s2">&quot;The number of audio channels to use for the audio data generation.&quot;</span><span class="p">,</span>
        <span class="p">),</span>
    <span class="p">]</span> <span class="o">=</span> <span class="n">AudioDefaults</span><span class="o">.</span><span class="n">NUM_CHANNELS</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">











  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="aiperf.common.config.input.audio_config.AudioLengthConfig" class="doc doc-heading">
            <code>AudioLengthConfig</code>


<a href="#aiperf.common.config.input.audio_config.AudioLengthConfig" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="BaseConfig (aiperf.common.config.base_config.BaseConfig)" href="#aiperf.common.config.base_config.BaseConfig">BaseConfig</a></code></p>


        <p>A configuration class for defining audio length related settings.</p>







              <details class="quote">
                <summary>Source code in <code>aiperf/common/config/input/audio_config.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">AudioLengthConfig</span><span class="p">(</span><span class="n">BaseConfig</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A configuration class for defining audio length related settings.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">mean</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span>
        <span class="nb">float</span><span class="p">,</span>
        <span class="n">Field</span><span class="p">(</span>
            <span class="n">ge</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
            <span class="n">description</span><span class="o">=</span><span class="s2">&quot;The mean length of the audio in seconds.&quot;</span><span class="p">,</span>
        <span class="p">),</span>
    <span class="p">]</span> <span class="o">=</span> <span class="n">AudioDefaults</span><span class="o">.</span><span class="n">LENGTH_MEAN</span>

    <span class="n">stddev</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span>
        <span class="nb">float</span><span class="p">,</span>
        <span class="n">Field</span><span class="p">(</span>
            <span class="n">ge</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
            <span class="n">description</span><span class="o">=</span><span class="s2">&quot;The standard deviation of the length of the audio in seconds.&quot;</span><span class="p">,</span>
        <span class="p">),</span>
    <span class="p">]</span> <span class="o">=</span> <span class="n">AudioDefaults</span><span class="o">.</span><span class="n">LENGTH_STDDEV</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">











  </div>

    </div>

</div>




  </div>

    </div>

</div><h2 id="aiperfcommonconfiginputimage_config">aiperf.common.config.input.image_config<a class="headerlink" href="#aiperfcommonconfiginputimage_config" title="Permanent link">&para;</a></h2>


<div class="doc doc-object doc-module">



<a id="aiperf.common.config.input.image_config"></a>
    <div class="doc doc-contents first">









  <div class="doc doc-children">








<div class="doc doc-object doc-class">



<h2 id="aiperf.common.config.input.image_config.ImageConfig" class="doc doc-heading">
            <code>ImageConfig</code>


<a href="#aiperf.common.config.input.image_config.ImageConfig" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="BaseConfig (aiperf.common.config.base_config.BaseConfig)" href="#aiperf.common.config.base_config.BaseConfig">BaseConfig</a></code></p>


        <p>A configuration class for defining image related settings.</p>







              <details class="quote">
                <summary>Source code in <code>aiperf/common/config/input/image_config.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span>
<span class="normal">71</span>
<span class="normal">72</span>
<span class="normal">73</span>
<span class="normal">74</span>
<span class="normal">75</span>
<span class="normal">76</span>
<span class="normal">77</span>
<span class="normal">78</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">ImageConfig</span><span class="p">(</span><span class="n">BaseConfig</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A configuration class for defining image related settings.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">width</span><span class="p">:</span> <span class="n">ImageWidthConfig</span> <span class="o">=</span> <span class="n">ImageWidthConfig</span><span class="p">()</span>
    <span class="n">height</span><span class="p">:</span> <span class="n">ImageHeightConfig</span> <span class="o">=</span> <span class="n">ImageHeightConfig</span><span class="p">()</span>
    <span class="n">batch_size</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span>
        <span class="nb">int</span><span class="p">,</span>
        <span class="n">Field</span><span class="p">(</span>
            <span class="n">ge</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
            <span class="n">description</span><span class="o">=</span><span class="s2">&quot;The image batch size of the requests AI-Perf should send.</span><span class="se">\</span>
<span class="s2">            </span><span class="se">\n</span><span class="s2">This is currently supported with the image retrieval endpoint type.&quot;</span><span class="p">,</span>
        <span class="p">),</span>
    <span class="p">]</span> <span class="o">=</span> <span class="n">ImageDefaults</span><span class="o">.</span><span class="n">BATCH_SIZE</span>

    <span class="nb">format</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span>
        <span class="n">ImageFormat</span><span class="p">,</span>
        <span class="n">Field</span><span class="p">(</span>
            <span class="n">description</span><span class="o">=</span><span class="s2">&quot;The compression format of the images.&quot;</span><span class="p">,</span>
        <span class="p">),</span>
    <span class="p">]</span> <span class="o">=</span> <span class="n">ImageDefaults</span><span class="o">.</span><span class="n">FORMAT</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">











  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="aiperf.common.config.input.image_config.ImageHeightConfig" class="doc doc-heading">
            <code>ImageHeightConfig</code>


<a href="#aiperf.common.config.input.image_config.ImageHeightConfig" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="BaseConfig (aiperf.common.config.base_config.BaseConfig)" href="#aiperf.common.config.base_config.BaseConfig">BaseConfig</a></code></p>


        <p>A configuration class for defining image height related settings.</p>







              <details class="quote">
                <summary>Source code in <code>aiperf/common/config/input/image_config.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">ImageHeightConfig</span><span class="p">(</span><span class="n">BaseConfig</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A configuration class for defining image height related settings.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">mean</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span>
        <span class="nb">float</span><span class="p">,</span>
        <span class="n">Field</span><span class="p">(</span>
            <span class="n">ge</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
            <span class="n">description</span><span class="o">=</span><span class="s2">&quot;The mean height of images when generating synthetic image data.&quot;</span><span class="p">,</span>
        <span class="p">),</span>
    <span class="p">]</span> <span class="o">=</span> <span class="n">ImageDefaults</span><span class="o">.</span><span class="n">HEIGHT_MEAN</span>

    <span class="n">stddev</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span>
        <span class="nb">float</span><span class="p">,</span>
        <span class="n">Field</span><span class="p">(</span>
            <span class="n">ge</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
            <span class="n">description</span><span class="o">=</span><span class="s2">&quot;The standard deviation of height of images when generating synthetic image data.&quot;</span><span class="p">,</span>
        <span class="p">),</span>
    <span class="p">]</span> <span class="o">=</span> <span class="n">ImageDefaults</span><span class="o">.</span><span class="n">HEIGHT_STDDEV</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">











  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="aiperf.common.config.input.image_config.ImageWidthConfig" class="doc doc-heading">
            <code>ImageWidthConfig</code>


<a href="#aiperf.common.config.input.image_config.ImageWidthConfig" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="BaseConfig (aiperf.common.config.base_config.BaseConfig)" href="#aiperf.common.config.base_config.BaseConfig">BaseConfig</a></code></p>


        <p>A configuration class for defining image width related settings.</p>







              <details class="quote">
                <summary>Source code in <code>aiperf/common/config/input/image_config.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">ImageWidthConfig</span><span class="p">(</span><span class="n">BaseConfig</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A configuration class for defining image width related settings.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">mean</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span>
        <span class="nb">float</span><span class="p">,</span>
        <span class="n">Field</span><span class="p">(</span>
            <span class="n">ge</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
            <span class="n">description</span><span class="o">=</span><span class="s2">&quot;The mean width of images when generating synthetic image data.&quot;</span><span class="p">,</span>
        <span class="p">),</span>
    <span class="p">]</span> <span class="o">=</span> <span class="n">ImageDefaults</span><span class="o">.</span><span class="n">WIDTH_MEAN</span>

    <span class="n">stddev</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span>
        <span class="nb">float</span><span class="p">,</span>
        <span class="n">Field</span><span class="p">(</span>
            <span class="n">ge</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
            <span class="n">description</span><span class="o">=</span><span class="s2">&quot;The standard deviation of width of images when generating synthetic image data.&quot;</span><span class="p">,</span>
        <span class="p">),</span>
    <span class="p">]</span> <span class="o">=</span> <span class="n">ImageDefaults</span><span class="o">.</span><span class="n">WIDTH_STDDEV</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">











  </div>

    </div>

</div>




  </div>

    </div>

</div><h2 id="aiperfcommonconfiginputinput_config">aiperf.common.config.input.input_config<a class="headerlink" href="#aiperfcommonconfiginputinput_config" title="Permanent link">&para;</a></h2>


<div class="doc doc-object doc-module">



<a id="aiperf.common.config.input.input_config"></a>
    <div class="doc doc-contents first">









  <div class="doc doc-children">








<div class="doc doc-object doc-class">



<h2 id="aiperf.common.config.input.input_config.InputConfig" class="doc doc-heading">
            <code>InputConfig</code>


<a href="#aiperf.common.config.input.input_config.InputConfig" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="BaseConfig (aiperf.common.config.base_config.BaseConfig)" href="#aiperf.common.config.base_config.BaseConfig">BaseConfig</a></code></p>


        <p>A configuration class for defining input related settings.</p>







              <details class="quote">
                <summary>Source code in <code>aiperf/common/config/input/input_config.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span>
<span class="normal">71</span>
<span class="normal">72</span>
<span class="normal">73</span>
<span class="normal">74</span>
<span class="normal">75</span>
<span class="normal">76</span>
<span class="normal">77</span>
<span class="normal">78</span>
<span class="normal">79</span>
<span class="normal">80</span>
<span class="normal">81</span>
<span class="normal">82</span>
<span class="normal">83</span>
<span class="normal">84</span>
<span class="normal">85</span>
<span class="normal">86</span>
<span class="normal">87</span>
<span class="normal">88</span>
<span class="normal">89</span>
<span class="normal">90</span>
<span class="normal">91</span>
<span class="normal">92</span>
<span class="normal">93</span>
<span class="normal">94</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">InputConfig</span><span class="p">(</span><span class="n">BaseConfig</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A configuration class for defining input related settings.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">batch_size</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span>
        <span class="nb">int</span><span class="p">,</span>
        <span class="n">Field</span><span class="p">(</span>
            <span class="n">description</span><span class="o">=</span><span class="s2">&quot;The batch size of text requests GenAI-Perf should send.</span><span class="se">\</span>
<span class="s2">            </span><span class="se">\n</span><span class="s2">This is currently supported with the embeddings and rankings endpoint types&quot;</span><span class="p">,</span>
        <span class="p">),</span>
    <span class="p">]</span> <span class="o">=</span> <span class="n">InputDefaults</span><span class="o">.</span><span class="n">BATCH_SIZE</span>

    <span class="n">extra</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span>
        <span class="n">Any</span><span class="p">,</span>
        <span class="n">Field</span><span class="p">(</span>
            <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Provide additional inputs to include with every request.</span><span class="se">\</span>
<span class="s2">            </span><span class="se">\n</span><span class="s2">Inputs should be in an &#39;input_name:value&#39; format.&quot;</span><span class="p">,</span>
        <span class="p">),</span>
    <span class="p">]</span> <span class="o">=</span> <span class="n">InputDefaults</span><span class="o">.</span><span class="n">EXTRA</span>

    <span class="n">goodput</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span>
        <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">],</span>
        <span class="n">Field</span><span class="p">(</span>
            <span class="n">description</span><span class="o">=</span><span class="s2">&quot;An option to provide constraints in order to compute goodput.</span><span class="se">\</span>
<span class="s2">            </span><span class="se">\n</span><span class="s2">Specify goodput constraints as &#39;key:value&#39; pairs,</span><span class="se">\</span>
<span class="s2">            </span><span class="se">\n</span><span class="s2">where the key is a valid metric name, and the value is a number representing</span><span class="se">\</span>
<span class="s2">            </span><span class="se">\n</span><span class="s2">either milliseconds or a throughput value per second.</span><span class="se">\</span>
<span class="s2">            </span><span class="se">\n</span><span class="s2">For example:</span><span class="se">\</span>
<span class="s2">            </span><span class="se">\n</span><span class="s2">  request_latency:300</span><span class="se">\</span>
<span class="s2">            </span><span class="se">\n</span><span class="s2">  output_token_throughput_per_user:600&quot;</span><span class="p">,</span>
        <span class="p">),</span>
        <span class="n">BeforeValidator</span><span class="p">(</span><span class="n">parse_goodput</span><span class="p">),</span>
    <span class="p">]</span> <span class="o">=</span> <span class="n">InputDefaults</span><span class="o">.</span><span class="n">GOODPUT</span>

    <span class="n">header</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span>
        <span class="n">Any</span><span class="p">,</span>
        <span class="n">Field</span><span class="p">(</span>
            <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Adds a custom header to the requests.</span><span class="se">\</span>
<span class="s2">            </span><span class="se">\n</span><span class="s2">Headers must be specified as &#39;Header:Value&#39; pairs.&quot;</span><span class="p">,</span>
        <span class="p">),</span>
    <span class="p">]</span> <span class="o">=</span> <span class="n">InputDefaults</span><span class="o">.</span><span class="n">HEADER</span>

    <span class="n">file</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span>
        <span class="n">Any</span><span class="p">,</span>
        <span class="n">Field</span><span class="p">(</span>
            <span class="n">description</span><span class="o">=</span><span class="s2">&quot;The file or directory containing the content to use for profiling.</span><span class="se">\</span>
<span class="s2">            </span><span class="se">\n</span><span class="s2">Example:</span><span class="se">\</span>
<span class="s2">            </span><span class="se">\n</span><span class="s2">  text: </span><span class="se">\&quot;</span><span class="s2">Your prompt here</span><span class="se">\&quot;\</span>
<span class="s2">            </span><span class="se">\n\n</span><span class="s2">To use synthetic files for a converter that needs multiple files,</span><span class="se">\</span>
<span class="s2">            </span><span class="se">\n</span><span class="s2">prefix the path with &#39;synthetic:&#39; followed by a comma-separated list of file names.</span><span class="se">\</span>
<span class="s2">            </span><span class="se">\n</span><span class="s2">The synthetic filenames should not have extensions.</span><span class="se">\</span>
<span class="s2">            </span><span class="se">\n</span><span class="s2">Example:</span><span class="se">\</span>
<span class="s2">            </span><span class="se">\n</span><span class="s2">  synthetic: queries,passages&quot;</span><span class="p">,</span>
        <span class="p">),</span>
        <span class="n">BeforeValidator</span><span class="p">(</span><span class="n">parse_file</span><span class="p">),</span>
    <span class="p">]</span> <span class="o">=</span> <span class="n">InputDefaults</span><span class="o">.</span><span class="n">FILE</span>

    <span class="n">num_dataset_entries</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span>
        <span class="nb">int</span><span class="p">,</span>
        <span class="n">Field</span><span class="p">(</span>
            <span class="n">ge</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
            <span class="n">description</span><span class="o">=</span><span class="s2">&quot;The number of unique payloads to sample from.</span><span class="se">\</span>
<span class="s2">            </span><span class="se">\n</span><span class="s2">These will be reused until benchmarking is complete.&quot;</span><span class="p">,</span>
        <span class="p">),</span>
    <span class="p">]</span> <span class="o">=</span> <span class="n">InputDefaults</span><span class="o">.</span><span class="n">NUM_DATASET_ENTRIES</span>

    <span class="n">random_seed</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span>
        <span class="nb">int</span><span class="p">,</span>
        <span class="n">Field</span><span class="p">(</span>
            <span class="n">description</span><span class="o">=</span><span class="s2">&quot;The seed used to generate random values.&quot;</span><span class="p">,</span>
        <span class="p">),</span>
    <span class="p">]</span> <span class="o">=</span> <span class="n">InputDefaults</span><span class="o">.</span><span class="n">RANDOM_SEED</span>

    <span class="n">audio</span><span class="p">:</span> <span class="n">AudioConfig</span> <span class="o">=</span> <span class="n">AudioConfig</span><span class="p">()</span>
    <span class="n">image</span><span class="p">:</span> <span class="n">ImageConfig</span> <span class="o">=</span> <span class="n">ImageConfig</span><span class="p">()</span>
    <span class="n">prompt</span><span class="p">:</span> <span class="n">PromptConfig</span> <span class="o">=</span> <span class="n">PromptConfig</span><span class="p">()</span>
    <span class="n">sessions</span><span class="p">:</span> <span class="n">SessionsConfig</span> <span class="o">=</span> <span class="n">SessionsConfig</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">











  </div>

    </div>

</div>




  </div>

    </div>

</div><h2 id="aiperfcommonconfiginputprompt_config">aiperf.common.config.input.prompt_config<a class="headerlink" href="#aiperfcommonconfiginputprompt_config" title="Permanent link">&para;</a></h2>


<div class="doc doc-object doc-module">



<a id="aiperf.common.config.input.prompt_config"></a>
    <div class="doc doc-contents first">









  <div class="doc doc-children">








<div class="doc doc-object doc-class">



<h2 id="aiperf.common.config.input.prompt_config.InputTokensConfig" class="doc doc-heading">
            <code>InputTokensConfig</code>


<a href="#aiperf.common.config.input.prompt_config.InputTokensConfig" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="BaseConfig (aiperf.common.config.base_config.BaseConfig)" href="#aiperf.common.config.base_config.BaseConfig">BaseConfig</a></code></p>


        <p>A configuration class for defining input token related settings.</p>







              <details class="quote">
                <summary>Source code in <code>aiperf/common/config/input/prompt_config.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">InputTokensConfig</span><span class="p">(</span><span class="n">BaseConfig</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A configuration class for defining input token related settings.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">mean</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span>
        <span class="nb">int</span><span class="p">,</span>
        <span class="n">Field</span><span class="p">(</span>
            <span class="n">ge</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
            <span class="n">description</span><span class="o">=</span><span class="s2">&quot;The mean of number of tokens in the generated prompts when using synthetic data.&quot;</span><span class="p">,</span>
        <span class="p">),</span>
    <span class="p">]</span> <span class="o">=</span> <span class="n">InputTokensDefaults</span><span class="o">.</span><span class="n">MEAN</span>

    <span class="n">stddev</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span>
        <span class="nb">float</span><span class="p">,</span>
        <span class="n">Field</span><span class="p">(</span>
            <span class="n">ge</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
            <span class="n">description</span><span class="o">=</span><span class="s2">&quot;The standard deviation of number of tokens in the generated prompts when using synthetic data.&quot;</span><span class="p">,</span>
        <span class="p">),</span>
    <span class="p">]</span> <span class="o">=</span> <span class="n">InputTokensDefaults</span><span class="o">.</span><span class="n">STDDEV</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">











  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="aiperf.common.config.input.prompt_config.OutputTokensConfig" class="doc doc-heading">
            <code>OutputTokensConfig</code>


<a href="#aiperf.common.config.input.prompt_config.OutputTokensConfig" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="BaseConfig (aiperf.common.config.base_config.BaseConfig)" href="#aiperf.common.config.base_config.BaseConfig">BaseConfig</a></code></p>


        <p>A configuration class for defining output token related settings.</p>







              <details class="quote">
                <summary>Source code in <code>aiperf/common/config/input/prompt_config.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">OutputTokensConfig</span><span class="p">(</span><span class="n">BaseConfig</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A configuration class for defining output token related settings.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">mean</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span>
        <span class="nb">int</span><span class="p">,</span>
        <span class="n">Field</span><span class="p">(</span>
            <span class="n">ge</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
            <span class="n">description</span><span class="o">=</span><span class="s2">&quot;The mean number of tokens in each output.&quot;</span><span class="p">,</span>
        <span class="p">),</span>
    <span class="p">]</span> <span class="o">=</span> <span class="n">OutputTokensDefaults</span><span class="o">.</span><span class="n">MEAN</span>

    <span class="n">deterministic</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span>
        <span class="nb">bool</span><span class="p">,</span>
        <span class="n">Field</span><span class="p">(</span>
            <span class="n">description</span><span class="o">=</span><span class="p">(</span>
                <span class="s2">&quot;This can be set to improve the precision of the mean by setting the</span><span class="se">\n</span><span class="s2">&quot;</span>
                <span class="s2">&quot;minimum number of tokens equal to the requested number of tokens.</span><span class="se">\n</span><span class="s2">&quot;</span>
                <span class="s2">&quot;This is currently supported with Triton.&quot;</span>
            <span class="p">),</span>
        <span class="p">),</span>
    <span class="p">]</span> <span class="o">=</span> <span class="n">OutputTokensDefaults</span><span class="o">.</span><span class="n">DETERMINISTIC</span>

    <span class="n">stddev</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span>
        <span class="nb">float</span><span class="p">,</span>
        <span class="n">Field</span><span class="p">(</span>
            <span class="n">ge</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
            <span class="n">description</span><span class="o">=</span><span class="s2">&quot;The standard deviation of the number of tokens in each output.&quot;</span><span class="p">,</span>
        <span class="p">),</span>
    <span class="p">]</span> <span class="o">=</span> <span class="n">OutputTokensDefaults</span><span class="o">.</span><span class="n">STDDEV</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">











  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="aiperf.common.config.input.prompt_config.PrefixPromptConfig" class="doc doc-heading">
            <code>PrefixPromptConfig</code>


<a href="#aiperf.common.config.input.prompt_config.PrefixPromptConfig" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="BaseConfig (aiperf.common.config.base_config.BaseConfig)" href="#aiperf.common.config.base_config.BaseConfig">BaseConfig</a></code></p>


        <p>A configuration class for defining prefix prompt related settings.</p>







              <details class="quote">
                <summary>Source code in <code>aiperf/common/config/input/prompt_config.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">71</span>
<span class="normal">72</span>
<span class="normal">73</span>
<span class="normal">74</span>
<span class="normal">75</span>
<span class="normal">76</span>
<span class="normal">77</span>
<span class="normal">78</span>
<span class="normal">79</span>
<span class="normal">80</span>
<span class="normal">81</span>
<span class="normal">82</span>
<span class="normal">83</span>
<span class="normal">84</span>
<span class="normal">85</span>
<span class="normal">86</span>
<span class="normal">87</span>
<span class="normal">88</span>
<span class="normal">89</span>
<span class="normal">90</span>
<span class="normal">91</span>
<span class="normal">92</span>
<span class="normal">93</span>
<span class="normal">94</span>
<span class="normal">95</span>
<span class="normal">96</span>
<span class="normal">97</span>
<span class="normal">98</span>
<span class="normal">99</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">PrefixPromptConfig</span><span class="p">(</span><span class="n">BaseConfig</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A configuration class for defining prefix prompt related settings.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">pool_size</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span>
        <span class="nb">int</span><span class="p">,</span>
        <span class="n">Field</span><span class="p">(</span>
            <span class="n">ge</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
            <span class="n">description</span><span class="o">=</span><span class="p">(</span>
                <span class="s2">&quot;The total size of the prefix prompt pool to select prefixes from.</span><span class="se">\n</span><span class="s2">&quot;</span>
                <span class="s2">&quot;If this value is not zero, these are prompts that are prepended to input prompts.</span><span class="se">\n</span><span class="s2">&quot;</span>
                <span class="s2">&quot;This is useful for benchmarking models that use a K-V cache.&quot;</span>
            <span class="p">),</span>
        <span class="p">),</span>
    <span class="p">]</span> <span class="o">=</span> <span class="n">PrefixPromptDefaults</span><span class="o">.</span><span class="n">POOL_SIZE</span>

    <span class="n">length</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span>
        <span class="nb">int</span><span class="p">,</span>
        <span class="n">Field</span><span class="p">(</span>
            <span class="n">ge</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
            <span class="n">description</span><span class="o">=</span><span class="p">(</span>
                <span class="s2">&quot;The number of tokens in each prefix prompt.</span><span class="se">\n</span><span class="s2">&quot;</span>
                <span class="s1">&#39;This is only used if &quot;num&quot; is greater than zero.</span><span class="se">\n</span><span class="s1">&#39;</span>
                <span class="s2">&quot;Note that due to the prefix and user prompts being concatenated,</span><span class="se">\n</span><span class="s2">&quot;</span>
                <span class="s2">&quot;the number of tokens in the final prompt may be off by one.&quot;</span>
            <span class="p">),</span>
        <span class="p">),</span>
    <span class="p">]</span> <span class="o">=</span> <span class="n">PrefixPromptDefaults</span><span class="o">.</span><span class="n">LENGTH</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">











  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="aiperf.common.config.input.prompt_config.PromptConfig" class="doc doc-heading">
            <code>PromptConfig</code>


<a href="#aiperf.common.config.input.prompt_config.PromptConfig" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="BaseConfig (aiperf.common.config.base_config.BaseConfig)" href="#aiperf.common.config.base_config.BaseConfig">BaseConfig</a></code></p>


        <p>A configuration class for defining prompt related settings.</p>







              <details class="quote">
                <summary>Source code in <code>aiperf/common/config/input/prompt_config.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">PromptConfig</span><span class="p">(</span><span class="n">BaseConfig</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A configuration class for defining prompt related settings.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">input_tokens</span><span class="p">:</span> <span class="n">InputTokensConfig</span> <span class="o">=</span> <span class="n">InputTokensConfig</span><span class="p">()</span>
    <span class="n">output_tokens</span><span class="p">:</span> <span class="n">OutputTokensConfig</span> <span class="o">=</span> <span class="n">OutputTokensConfig</span><span class="p">()</span>
    <span class="n">prefix_prompt</span><span class="p">:</span> <span class="n">PrefixPromptConfig</span> <span class="o">=</span> <span class="n">PrefixPromptConfig</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">











  </div>

    </div>

</div>




  </div>

    </div>

</div><h2 id="aiperfcommonconfiginputsessions_config">aiperf.common.config.input.sessions_config<a class="headerlink" href="#aiperfcommonconfiginputsessions_config" title="Permanent link">&para;</a></h2>


<div class="doc doc-object doc-module">



<a id="aiperf.common.config.input.sessions_config"></a>
    <div class="doc doc-contents first">









  <div class="doc doc-children">








<div class="doc doc-object doc-class">



<h2 id="aiperf.common.config.input.sessions_config.SessionTurnDelayConfig" class="doc doc-heading">
            <code>SessionTurnDelayConfig</code>


<a href="#aiperf.common.config.input.sessions_config.SessionTurnDelayConfig" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="BaseConfig (aiperf.common.config.base_config.BaseConfig)" href="#aiperf.common.config.base_config.BaseConfig">BaseConfig</a></code></p>


        <p>A configuration class for defining session turn delay related settings.</p>







              <details class="quote">
                <summary>Source code in <code>aiperf/common/config/input/sessions_config.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">SessionTurnDelayConfig</span><span class="p">(</span><span class="n">BaseConfig</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A configuration class for defining session turn delay related settings.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">mean</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span>
        <span class="nb">float</span><span class="p">,</span>
        <span class="n">Field</span><span class="p">(</span>
            <span class="n">ge</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
            <span class="n">description</span><span class="o">=</span><span class="s2">&quot;The mean delay (in ms) between turns in a session&quot;</span><span class="p">,</span>
        <span class="p">),</span>
    <span class="p">]</span> <span class="o">=</span> <span class="n">SessionTurnDelayDefaults</span><span class="o">.</span><span class="n">MEAN</span>

    <span class="n">stddev</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span>
        <span class="nb">float</span><span class="p">,</span>
        <span class="n">Field</span><span class="p">(</span>
            <span class="n">ge</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
            <span class="n">description</span><span class="o">=</span><span class="s2">&quot;The standard deviation (in ms) of the delay between turns in a session&quot;</span><span class="p">,</span>
        <span class="p">),</span>
    <span class="p">]</span> <span class="o">=</span> <span class="n">SessionTurnDelayDefaults</span><span class="o">.</span><span class="n">STDDEV</span>

    <span class="n">ratio</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span>
        <span class="nb">float</span><span class="p">,</span>
        <span class="n">Field</span><span class="p">(</span>
            <span class="n">ge</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
            <span class="n">description</span><span class="o">=</span><span class="s2">&quot;A ratio to scale multi-turn delays when using a payload file&quot;</span><span class="p">,</span>
        <span class="p">),</span>
    <span class="p">]</span> <span class="o">=</span> <span class="n">SessionTurnDelayDefaults</span><span class="o">.</span><span class="n">RATIO</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">











  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="aiperf.common.config.input.sessions_config.SessionTurnsConfig" class="doc doc-heading">
            <code>SessionTurnsConfig</code>


<a href="#aiperf.common.config.input.sessions_config.SessionTurnsConfig" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="BaseConfig (aiperf.common.config.base_config.BaseConfig)" href="#aiperf.common.config.base_config.BaseConfig">BaseConfig</a></code></p>


        <p>A configuration class for defining session turns related settings.</p>







              <details class="quote">
                <summary>Source code in <code>aiperf/common/config/input/sessions_config.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">SessionTurnsConfig</span><span class="p">(</span><span class="n">BaseConfig</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A configuration class for defining session turns related settings.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">mean</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span>
        <span class="nb">float</span><span class="p">,</span>
        <span class="n">Field</span><span class="p">(</span>
            <span class="n">ge</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
            <span class="n">description</span><span class="o">=</span><span class="s2">&quot;The mean number of turns in a session&quot;</span><span class="p">,</span>
        <span class="p">),</span>
    <span class="p">]</span> <span class="o">=</span> <span class="n">SessionTurnsDefaults</span><span class="o">.</span><span class="n">MEAN</span>

    <span class="n">stddev</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span>
        <span class="nb">float</span><span class="p">,</span>
        <span class="n">Field</span><span class="p">(</span>
            <span class="n">ge</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
            <span class="n">description</span><span class="o">=</span><span class="s2">&quot;The standard deviation of the number of turns in a session&quot;</span><span class="p">,</span>
        <span class="p">),</span>
    <span class="p">]</span> <span class="o">=</span> <span class="n">SessionTurnsDefaults</span><span class="o">.</span><span class="n">STDDEV</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">











  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="aiperf.common.config.input.sessions_config.SessionsConfig" class="doc doc-heading">
            <code>SessionsConfig</code>


<a href="#aiperf.common.config.input.sessions_config.SessionsConfig" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="BaseConfig (aiperf.common.config.base_config.BaseConfig)" href="#aiperf.common.config.base_config.BaseConfig">BaseConfig</a></code></p>


        <p>A configuration class for defining sessions related settings.</p>







              <details class="quote">
                <summary>Source code in <code>aiperf/common/config/input/sessions_config.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span>
<span class="normal">71</span>
<span class="normal">72</span>
<span class="normal">73</span>
<span class="normal">74</span>
<span class="normal">75</span>
<span class="normal">76</span>
<span class="normal">77</span>
<span class="normal">78</span>
<span class="normal">79</span>
<span class="normal">80</span>
<span class="normal">81</span>
<span class="normal">82</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">SessionsConfig</span><span class="p">(</span><span class="n">BaseConfig</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A configuration class for defining sessions related settings.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">num</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span>
        <span class="nb">int</span><span class="p">,</span>
        <span class="n">Field</span><span class="p">(</span>
            <span class="n">ge</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
            <span class="n">description</span><span class="o">=</span><span class="s2">&quot;The number of sessions to simulate&quot;</span><span class="p">,</span>
        <span class="p">),</span>
    <span class="p">]</span> <span class="o">=</span> <span class="n">SessionsDefaults</span><span class="o">.</span><span class="n">NUM</span>

    <span class="n">turns</span><span class="p">:</span> <span class="n">SessionTurnsConfig</span> <span class="o">=</span> <span class="n">SessionTurnsConfig</span><span class="p">()</span>
    <span class="n">turn_delay</span><span class="p">:</span> <span class="n">SessionTurnDelayConfig</span> <span class="o">=</span> <span class="n">SessionTurnDelayConfig</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">











  </div>

    </div>

</div>




  </div>

    </div>

</div><h2 id="aiperfcommonconfigloader">aiperf.common.config.loader<a class="headerlink" href="#aiperfcommonconfigloader" title="Permanent link">&para;</a></h2>


<div class="doc doc-object doc-module">



<a id="aiperf.common.config.loader"></a>
    <div class="doc doc-contents first">









  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h2 id="aiperf.common.config.loader.load_service_config" class="doc doc-heading">
            <code class=" language-python"><span class="n">load_service_config</span><span class="p">()</span></code>

<a href="#aiperf.common.config.loader.load_service_config" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">

        <p>Load the service configuration.</p>


            <details class="quote">
              <summary>Source code in <code>aiperf/common/config/loader.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">6</span>
<span class="normal">7</span>
<span class="normal">8</span>
<span class="normal">9</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">load_service_config</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="n">ServiceConfig</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Load the service configuration.&quot;&quot;&quot;</span>
    <span class="c1"># TODO: implement</span>
    <span class="k">return</span> <span class="n">ServiceConfig</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div><h2 id="aiperfcommonconfigoutputoutput_config">aiperf.common.config.output.output_config<a class="headerlink" href="#aiperfcommonconfigoutputoutput_config" title="Permanent link">&para;</a></h2>


<div class="doc doc-object doc-module">



<a id="aiperf.common.config.output.output_config"></a>
    <div class="doc doc-contents first">









  <div class="doc doc-children">








<div class="doc doc-object doc-class">



<h2 id="aiperf.common.config.output.output_config.OutputConfig" class="doc doc-heading">
            <code>OutputConfig</code>


<a href="#aiperf.common.config.output.output_config.OutputConfig" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="BaseConfig (aiperf.common.config.base_config.BaseConfig)" href="#aiperf.common.config.base_config.BaseConfig">BaseConfig</a></code></p>


        <p>A configuration class for defining output related settings.</p>







              <details class="quote">
                <summary>Source code in <code>aiperf/common/config/output/output_config.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">OutputConfig</span><span class="p">(</span><span class="n">BaseConfig</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A configuration class for defining output related settings.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">artifact_directory</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span>
        <span class="n">Path</span><span class="p">,</span>
        <span class="n">Field</span><span class="p">(</span>
            <span class="n">description</span><span class="o">=</span><span class="s2">&quot;The directory to store all the (output) artifacts generated by</span><span class="se">\n</span><span class="s2">AI-Perf.&quot;</span><span class="p">,</span>
        <span class="p">),</span>
    <span class="p">]</span> <span class="o">=</span> <span class="n">OutputDefaults</span><span class="o">.</span><span class="n">ARTIFACT_DIRECTORY</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">











  </div>

    </div>

</div>




  </div>

    </div>

</div><h2 id="aiperfcommonconfigservice_config">aiperf.common.config.service_config<a class="headerlink" href="#aiperfcommonconfigservice_config" title="Permanent link">&para;</a></h2>


<div class="doc doc-object doc-module">



<a id="aiperf.common.config.service_config"></a>
    <div class="doc doc-contents first">









  <div class="doc doc-children">








<div class="doc doc-object doc-class">



<h2 id="aiperf.common.config.service_config.ServiceConfig" class="doc doc-heading">
            <code>ServiceConfig</code>


<a href="#aiperf.common.config.service_config.ServiceConfig" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="pydantic.BaseModel">BaseModel</span></code></p>


        <p>Base configuration for all services.</p>
<p>This class provides the common configuration parameters needed by all services.</p>







              <details class="quote">
                <summary>Source code in <code>aiperf/common/config/service_config.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">ServiceConfig</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Base configuration for all services.</span>

<span class="sd">    This class provides the common configuration parameters needed by all services.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="c1"># TODO: this needs to be cleaned up and finalized</span>

    <span class="n">service_run_type</span><span class="p">:</span> <span class="n">ServiceRunType</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">default</span><span class="o">=</span><span class="n">ServiceRunType</span><span class="o">.</span><span class="n">MULTIPROCESSING</span><span class="p">,</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Type of service run (MULTIPROCESSING, KUBERNETES)&quot;</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">comm_backend</span><span class="p">:</span> <span class="n">CommunicationBackend</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">default</span><span class="o">=</span><span class="n">CommunicationBackend</span><span class="o">.</span><span class="n">ZMQ_TCP</span><span class="p">,</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Communication backend to use&quot;</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">comm_config</span><span class="p">:</span> <span class="n">BaseZMQCommunicationConfig</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">default</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Communication configuration&quot;</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">heartbeat_timeout</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">default</span><span class="o">=</span><span class="mf">60.0</span><span class="p">,</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Time in seconds after which a service is considered dead if no &quot;</span>
        <span class="s2">&quot;heartbeat received&quot;</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">registration_timeout</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">default</span><span class="o">=</span><span class="mf">60.0</span><span class="p">,</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Time in seconds to wait for all required services to register&quot;</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">command_timeout</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">default</span><span class="o">=</span><span class="mf">10.0</span><span class="p">,</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Default timeout for command responses&quot;</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">heartbeat_interval</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">default</span><span class="o">=</span><span class="mf">10.0</span><span class="p">,</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Interval in seconds between heartbeat messages&quot;</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">min_workers</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">default</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Minimum number of idle workers to maintain&quot;</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">max_workers</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">default</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Maximum number of workers to create&quot;</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">target_idle_workers</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">default</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Target number of idle workers to maintain&quot;</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">











  </div>

    </div>

</div>




  </div>

    </div>

</div><h2 id="aiperfcommonconfigtokenizertokenizer_config">aiperf.common.config.tokenizer.tokenizer_config<a class="headerlink" href="#aiperfcommonconfigtokenizertokenizer_config" title="Permanent link">&para;</a></h2>


<div class="doc doc-object doc-module">



<a id="aiperf.common.config.tokenizer.tokenizer_config"></a>
    <div class="doc doc-contents first">









  <div class="doc doc-children">








<div class="doc doc-object doc-class">



<h2 id="aiperf.common.config.tokenizer.tokenizer_config.TokenizerConfig" class="doc doc-heading">
            <code>TokenizerConfig</code>


<a href="#aiperf.common.config.tokenizer.tokenizer_config.TokenizerConfig" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="BaseConfig (aiperf.common.config.base_config.BaseConfig)" href="#aiperf.common.config.base_config.BaseConfig">BaseConfig</a></code></p>


        <p>A configuration class for defining tokenizer related settings.</p>







              <details class="quote">
                <summary>Source code in <code>aiperf/common/config/tokenizer/tokenizer_config.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">TokenizerConfig</span><span class="p">(</span><span class="n">BaseConfig</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A configuration class for defining tokenizer related settings.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">name</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span>
        <span class="nb">str</span><span class="p">,</span>
        <span class="n">Field</span><span class="p">(</span>
            <span class="n">description</span><span class="o">=</span><span class="p">(</span>
                <span class="s2">&quot;The HuggingFace tokenizer to use to interpret token metrics &quot;</span>
                <span class="s2">&quot;from prompts and responses. The value can be the &quot;</span>
                <span class="s2">&quot;name of a tokenizer or the filepath of the tokenizer. &quot;</span>
                <span class="s2">&quot;The default value is the model name.&quot;</span>
            <span class="p">),</span>
        <span class="p">),</span>
    <span class="p">]</span> <span class="o">=</span> <span class="n">TokenizerDefaults</span><span class="o">.</span><span class="n">NAME</span>

    <span class="n">revision</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span>
        <span class="nb">str</span><span class="p">,</span>
        <span class="n">Field</span><span class="p">(</span>
            <span class="n">description</span><span class="o">=</span><span class="p">(</span>
                <span class="s2">&quot;The specific model version to use. &quot;</span>
                <span class="s2">&quot;It can be a branch name, tag name, or commit ID.&quot;</span>
            <span class="p">),</span>
        <span class="p">),</span>
    <span class="p">]</span> <span class="o">=</span> <span class="n">TokenizerDefaults</span><span class="o">.</span><span class="n">REVISION</span>

    <span class="n">trust_remote_code</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span>
        <span class="nb">bool</span><span class="p">,</span>
        <span class="n">Field</span><span class="p">(</span>
            <span class="n">description</span><span class="o">=</span><span class="p">(</span>
                <span class="s2">&quot;Allows custom tokenizer to be downloaded and executed. &quot;</span>
                <span class="s2">&quot;This carries security risks and should only be used for repositories you trust. &quot;</span>
                <span class="s2">&quot;This is only necessary for custom tokenizers stored in HuggingFace Hub.&quot;</span>
            <span class="p">),</span>
        <span class="p">),</span>
    <span class="p">]</span> <span class="o">=</span> <span class="n">TokenizerDefaults</span><span class="o">.</span><span class="n">TRUST_REMOTE_CODE</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">











  </div>

    </div>

</div>




  </div>

    </div>

</div><h2 id="aiperfcommonconfiguser_config">aiperf.common.config.user_config<a class="headerlink" href="#aiperfcommonconfiguser_config" title="Permanent link">&para;</a></h2>


<div class="doc doc-object doc-module">



<a id="aiperf.common.config.user_config"></a>
    <div class="doc doc-contents first">









  <div class="doc doc-children">








<div class="doc doc-object doc-class">



<h2 id="aiperf.common.config.user_config.UserConfig" class="doc doc-heading">
            <code>UserConfig</code>


<a href="#aiperf.common.config.user_config.UserConfig" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="BaseConfig (aiperf.common.config.base_config.BaseConfig)" href="#aiperf.common.config.base_config.BaseConfig">BaseConfig</a></code></p>


        <p>A configuration class for defining top-level user settings.</p>







              <details class="quote">
                <summary>Source code in <code>aiperf/common/config/user_config.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">UserConfig</span><span class="p">(</span><span class="n">BaseConfig</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A configuration class for defining top-level user settings.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">model_names</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span>
        <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span>
        <span class="n">Field</span><span class="p">(</span>
            <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Model name(s) to be benchmarked. Can be a comma-separated list or a single model name.&quot;</span><span class="p">,</span>
        <span class="p">),</span>
        <span class="n">BeforeValidator</span><span class="p">(</span><span class="n">parse_str_or_list</span><span class="p">),</span>
    <span class="p">]</span> <span class="o">=</span> <span class="n">UserDefaults</span><span class="o">.</span><span class="n">MODEL_NAMES</span>

    <span class="n">verbose</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span>
        <span class="nb">bool</span><span class="p">,</span>
        <span class="n">Field</span><span class="p">(</span>
            <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Enable verbose output.&quot;</span><span class="p">,</span>
            <span class="n">json_schema_extra</span><span class="o">=</span><span class="p">{</span><span class="n">ADD_TO_TEMPLATE</span><span class="p">:</span> <span class="kc">False</span><span class="p">},</span>
        <span class="p">),</span>
    <span class="p">]</span> <span class="o">=</span> <span class="n">UserDefaults</span><span class="o">.</span><span class="n">VERBOSE</span>

    <span class="n">template_filename</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span>
        <span class="nb">str</span><span class="p">,</span>
        <span class="n">Field</span><span class="p">(</span>
            <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Path to the template file.&quot;</span><span class="p">,</span>
            <span class="n">json_schema_extra</span><span class="o">=</span><span class="p">{</span><span class="n">ADD_TO_TEMPLATE</span><span class="p">:</span> <span class="kc">False</span><span class="p">},</span>
        <span class="p">),</span>
    <span class="p">]</span> <span class="o">=</span> <span class="n">UserDefaults</span><span class="o">.</span><span class="n">TEMPLATE_FILENAME</span>

    <span class="n">endpoint</span><span class="p">:</span> <span class="n">EndPointConfig</span> <span class="o">=</span> <span class="n">EndPointConfig</span><span class="p">()</span>
    <span class="nb">input</span><span class="p">:</span> <span class="n">InputConfig</span> <span class="o">=</span> <span class="n">InputConfig</span><span class="p">()</span>
    <span class="n">output</span><span class="p">:</span> <span class="n">OutputConfig</span> <span class="o">=</span> <span class="n">OutputConfig</span><span class="p">()</span>
    <span class="n">tokenizer</span><span class="p">:</span> <span class="n">TokenizerConfig</span> <span class="o">=</span> <span class="n">TokenizerConfig</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">











  </div>

    </div>

</div>




  </div>

    </div>

</div><h2 id="aiperfcommonconfigzmq_config">aiperf.common.config.zmq_config<a class="headerlink" href="#aiperfcommonconfigzmq_config" title="Permanent link">&para;</a></h2>


<div class="doc doc-object doc-module">



<a id="aiperf.common.config.zmq_config"></a>
    <div class="doc doc-contents first">









  <div class="doc doc-children">








<div class="doc doc-object doc-class">



<h2 id="aiperf.common.config.zmq_config.BaseZMQCommunicationConfig" class="doc doc-heading">
            <code>BaseZMQCommunicationConfig</code>


<a href="#aiperf.common.config.zmq_config.BaseZMQCommunicationConfig" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="pydantic.BaseModel">BaseModel</span></code>, <code><span title="abc.ABC">ABC</span></code></p>


        <p>Configuration for ZMQ communication.</p>







              <details class="quote">
                <summary>Source code in <code>aiperf/common/config/zmq_config.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">BaseZMQCommunicationConfig</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">,</span> <span class="n">ABC</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Configuration for ZMQ communication.&quot;&quot;&quot;</span>

    <span class="nd">@property</span>
    <span class="nd">@abstractmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">controller_pub_sub_address</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get the controller pub/sub address based on protocol configuration.&quot;&quot;&quot;</span>
        <span class="o">...</span>

    <span class="nd">@property</span>
    <span class="nd">@abstractmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">component_pub_sub_address</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get the component pub/sub address based on protocol configuration.&quot;&quot;&quot;</span>
        <span class="o">...</span>

    <span class="nd">@property</span>
    <span class="nd">@abstractmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">inference_push_pull_address</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get the inference push/pull address based on protocol configuration.&quot;&quot;&quot;</span>
        <span class="o">...</span>

    <span class="nd">@property</span>
    <span class="nd">@abstractmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">records_address</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get the records address based on protocol configuration.&quot;&quot;&quot;</span>
        <span class="o">...</span>

    <span class="nd">@property</span>
    <span class="nd">@abstractmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">conversation_data_address</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get the conversation data address based on protocol configuration.&quot;&quot;&quot;</span>
        <span class="o">...</span>

    <span class="nd">@property</span>
    <span class="nd">@abstractmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">credit_drop_address</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get the credit drop address based on protocol configuration.&quot;&quot;&quot;</span>
        <span class="o">...</span>

    <span class="nd">@property</span>
    <span class="nd">@abstractmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">credit_return_address</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get the credit return address based on protocol configuration.&quot;&quot;&quot;</span>
        <span class="o">...</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">







<div class="doc doc-object doc-attribute">



<h3 id="aiperf.common.config.zmq_config.BaseZMQCommunicationConfig.component_pub_sub_address" class="doc doc-heading">
            <code class=" language-python"><span class="n">component_pub_sub_address</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-abstractmethod"><code>abstractmethod</code></small>
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

<a href="#aiperf.common.config.zmq_config.BaseZMQCommunicationConfig.component_pub_sub_address" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Get the component pub/sub address based on protocol configuration.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="aiperf.common.config.zmq_config.BaseZMQCommunicationConfig.controller_pub_sub_address" class="doc doc-heading">
            <code class=" language-python"><span class="n">controller_pub_sub_address</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-abstractmethod"><code>abstractmethod</code></small>
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

<a href="#aiperf.common.config.zmq_config.BaseZMQCommunicationConfig.controller_pub_sub_address" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Get the controller pub/sub address based on protocol configuration.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="aiperf.common.config.zmq_config.BaseZMQCommunicationConfig.conversation_data_address" class="doc doc-heading">
            <code class=" language-python"><span class="n">conversation_data_address</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-abstractmethod"><code>abstractmethod</code></small>
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

<a href="#aiperf.common.config.zmq_config.BaseZMQCommunicationConfig.conversation_data_address" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Get the conversation data address based on protocol configuration.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="aiperf.common.config.zmq_config.BaseZMQCommunicationConfig.credit_drop_address" class="doc doc-heading">
            <code class=" language-python"><span class="n">credit_drop_address</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-abstractmethod"><code>abstractmethod</code></small>
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

<a href="#aiperf.common.config.zmq_config.BaseZMQCommunicationConfig.credit_drop_address" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Get the credit drop address based on protocol configuration.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="aiperf.common.config.zmq_config.BaseZMQCommunicationConfig.credit_return_address" class="doc doc-heading">
            <code class=" language-python"><span class="n">credit_return_address</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-abstractmethod"><code>abstractmethod</code></small>
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

<a href="#aiperf.common.config.zmq_config.BaseZMQCommunicationConfig.credit_return_address" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Get the credit return address based on protocol configuration.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="aiperf.common.config.zmq_config.BaseZMQCommunicationConfig.inference_push_pull_address" class="doc doc-heading">
            <code class=" language-python"><span class="n">inference_push_pull_address</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-abstractmethod"><code>abstractmethod</code></small>
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

<a href="#aiperf.common.config.zmq_config.BaseZMQCommunicationConfig.inference_push_pull_address" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Get the inference push/pull address based on protocol configuration.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="aiperf.common.config.zmq_config.BaseZMQCommunicationConfig.records_address" class="doc doc-heading">
            <code class=" language-python"><span class="n">records_address</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-abstractmethod"><code>abstractmethod</code></small>
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

<a href="#aiperf.common.config.zmq_config.BaseZMQCommunicationConfig.records_address" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Get the records address based on protocol configuration.</p>

    </div>

</div>





  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="aiperf.common.config.zmq_config.ZMQIPCConfig" class="doc doc-heading">
            <code>ZMQIPCConfig</code>


<a href="#aiperf.common.config.zmq_config.ZMQIPCConfig" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="BaseZMQCommunicationConfig (aiperf.common.config.zmq_config.BaseZMQCommunicationConfig)" href="#aiperf.common.config.zmq_config.BaseZMQCommunicationConfig">BaseZMQCommunicationConfig</a></code></p>


        <p>Configuration for IPC transport.</p>







              <details class="quote">
                <summary>Source code in <code>aiperf/common/config/zmq_config.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">ZMQIPCConfig</span><span class="p">(</span><span class="n">BaseZMQCommunicationConfig</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Configuration for IPC transport.&quot;&quot;&quot;</span>

    <span class="n">path</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="s2">&quot;/tmp/aiperf&quot;</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Path for IPC sockets&quot;</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">controller_pub_sub_address</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get the controller pub/sub address based on protocol configuration.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;ipc://</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">path</span><span class="si">}</span><span class="s2">/controller_pub_sub.ipc&quot;</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">component_pub_sub_address</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get the component pub/sub address based on protocol configuration.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;ipc://</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">path</span><span class="si">}</span><span class="s2">/component_pub_sub.ipc&quot;</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">inference_push_pull_address</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get the inference push/pull address based on protocol configuration.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;ipc://</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">path</span><span class="si">}</span><span class="s2">/inference_push_pull.ipc&quot;</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">records_address</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get the records address based on protocol configuration.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;ipc://</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">path</span><span class="si">}</span><span class="s2">/records.ipc&quot;</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">conversation_data_address</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get the conversation data address based on protocol configuration.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;ipc://</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">path</span><span class="si">}</span><span class="s2">/conversation_data.ipc&quot;</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">credit_drop_address</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get the credit drop address based on protocol configuration.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;ipc://</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">path</span><span class="si">}</span><span class="s2">/credit_drop.ipc&quot;</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">credit_return_address</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get the credit return address based on protocol configuration.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;ipc://</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">path</span><span class="si">}</span><span class="s2">/credit_return.ipc&quot;</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">







<div class="doc doc-object doc-attribute">



<h3 id="aiperf.common.config.zmq_config.ZMQIPCConfig.component_pub_sub_address" class="doc doc-heading">
            <code class=" language-python"><span class="n">component_pub_sub_address</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

<a href="#aiperf.common.config.zmq_config.ZMQIPCConfig.component_pub_sub_address" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Get the component pub/sub address based on protocol configuration.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="aiperf.common.config.zmq_config.ZMQIPCConfig.controller_pub_sub_address" class="doc doc-heading">
            <code class=" language-python"><span class="n">controller_pub_sub_address</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

<a href="#aiperf.common.config.zmq_config.ZMQIPCConfig.controller_pub_sub_address" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Get the controller pub/sub address based on protocol configuration.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="aiperf.common.config.zmq_config.ZMQIPCConfig.conversation_data_address" class="doc doc-heading">
            <code class=" language-python"><span class="n">conversation_data_address</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

<a href="#aiperf.common.config.zmq_config.ZMQIPCConfig.conversation_data_address" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Get the conversation data address based on protocol configuration.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="aiperf.common.config.zmq_config.ZMQIPCConfig.credit_drop_address" class="doc doc-heading">
            <code class=" language-python"><span class="n">credit_drop_address</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

<a href="#aiperf.common.config.zmq_config.ZMQIPCConfig.credit_drop_address" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Get the credit drop address based on protocol configuration.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="aiperf.common.config.zmq_config.ZMQIPCConfig.credit_return_address" class="doc doc-heading">
            <code class=" language-python"><span class="n">credit_return_address</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

<a href="#aiperf.common.config.zmq_config.ZMQIPCConfig.credit_return_address" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Get the credit return address based on protocol configuration.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="aiperf.common.config.zmq_config.ZMQIPCConfig.inference_push_pull_address" class="doc doc-heading">
            <code class=" language-python"><span class="n">inference_push_pull_address</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

<a href="#aiperf.common.config.zmq_config.ZMQIPCConfig.inference_push_pull_address" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Get the inference push/pull address based on protocol configuration.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="aiperf.common.config.zmq_config.ZMQIPCConfig.records_address" class="doc doc-heading">
            <code class=" language-python"><span class="n">records_address</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

<a href="#aiperf.common.config.zmq_config.ZMQIPCConfig.records_address" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Get the records address based on protocol configuration.</p>

    </div>

</div>





  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="aiperf.common.config.zmq_config.ZMQInprocConfig" class="doc doc-heading">
            <code>ZMQInprocConfig</code>


<a href="#aiperf.common.config.zmq_config.ZMQInprocConfig" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="ZMQIPCConfig (aiperf.common.config.zmq_config.ZMQIPCConfig)" href="#aiperf.common.config.zmq_config.ZMQIPCConfig">ZMQIPCConfig</a></code></p>


        <p>Configuration for in-process transport. Note that communications between workers
is still done over IPC sockets.</p>







              <details class="quote">
                <summary>Source code in <code>aiperf/common/config/zmq_config.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">ZMQInprocConfig</span><span class="p">(</span><span class="n">ZMQIPCConfig</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Configuration for in-process transport. Note that communications between workers</span>
<span class="sd">    is still done over IPC sockets.&quot;&quot;&quot;</span>

    <span class="n">name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="s2">&quot;aiperf&quot;</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Name for in-process sockets&quot;</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">controller_pub_sub_address</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get the controller pub/sub address based on protocol configuration.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;inproc://</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">_controller_pub_sub&quot;</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">component_pub_sub_address</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get the component pub/sub address based on protocol configuration.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;inproc://</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">_component_pub_sub&quot;</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">







<div class="doc doc-object doc-attribute">



<h3 id="aiperf.common.config.zmq_config.ZMQInprocConfig.component_pub_sub_address" class="doc doc-heading">
            <code class=" language-python"><span class="n">component_pub_sub_address</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

<a href="#aiperf.common.config.zmq_config.ZMQInprocConfig.component_pub_sub_address" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Get the component pub/sub address based on protocol configuration.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="aiperf.common.config.zmq_config.ZMQInprocConfig.controller_pub_sub_address" class="doc doc-heading">
            <code class=" language-python"><span class="n">controller_pub_sub_address</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

<a href="#aiperf.common.config.zmq_config.ZMQInprocConfig.controller_pub_sub_address" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Get the controller pub/sub address based on protocol configuration.</p>

    </div>

</div>





  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="aiperf.common.config.zmq_config.ZMQTCPTransportConfig" class="doc doc-heading">
            <code>ZMQTCPTransportConfig</code>


<a href="#aiperf.common.config.zmq_config.ZMQTCPTransportConfig" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="BaseZMQCommunicationConfig (aiperf.common.config.zmq_config.BaseZMQCommunicationConfig)" href="#aiperf.common.config.zmq_config.BaseZMQCommunicationConfig">BaseZMQCommunicationConfig</a></code></p>


        <p>Configuration for TCP transport.</p>







              <details class="quote">
                <summary>Source code in <code>aiperf/common/config/zmq_config.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 55</span>
<span class="normal"> 56</span>
<span class="normal"> 57</span>
<span class="normal"> 58</span>
<span class="normal"> 59</span>
<span class="normal"> 60</span>
<span class="normal"> 61</span>
<span class="normal"> 62</span>
<span class="normal"> 63</span>
<span class="normal"> 64</span>
<span class="normal"> 65</span>
<span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">ZMQTCPTransportConfig</span><span class="p">(</span><span class="n">BaseZMQCommunicationConfig</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Configuration for TCP transport.&quot;&quot;&quot;</span>

    <span class="n">host</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">default</span><span class="o">=</span><span class="s2">&quot;0.0.0.0&quot;</span><span class="p">,</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Host address for TCP connections&quot;</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">controller_pub_sub_port</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">default</span><span class="o">=</span><span class="mi">5555</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Port for controller pub/sub messages&quot;</span>
    <span class="p">)</span>
    <span class="n">component_pub_sub_port</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">default</span><span class="o">=</span><span class="mi">5556</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Port for component pub/sub messages&quot;</span>
    <span class="p">)</span>
    <span class="n">inference_push_pull_port</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">default</span><span class="o">=</span><span class="mi">5557</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Port for inference push/pull messages&quot;</span>
    <span class="p">)</span>
    <span class="n">req_rep_port</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">default</span><span class="o">=</span><span class="mi">5558</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Port for sending and receiving requests&quot;</span>
    <span class="p">)</span>
    <span class="n">push_pull_port</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">default</span><span class="o">=</span><span class="mi">5559</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Port for pushing and pulling data&quot;</span>
    <span class="p">)</span>
    <span class="n">records_port</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="mi">5560</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Port for record data&quot;</span><span class="p">)</span>
    <span class="n">conversation_data_port</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">default</span><span class="o">=</span><span class="mi">5561</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Port for conversation data&quot;</span>
    <span class="p">)</span>
    <span class="n">credit_drop_port</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">default</span><span class="o">=</span><span class="mi">5562</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Port for credit drop operations&quot;</span>
    <span class="p">)</span>
    <span class="n">credit_return_port</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">default</span><span class="o">=</span><span class="mi">5563</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Port for credit return operations&quot;</span>
    <span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">controller_pub_sub_address</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get the controller pub/sub address based on protocol configuration.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;tcp://</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">host</span><span class="si">}</span><span class="s2">:</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">controller_pub_sub_port</span><span class="si">}</span><span class="s2">&quot;</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">component_pub_sub_address</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get the component pub/sub address based on protocol configuration.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;tcp://</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">host</span><span class="si">}</span><span class="s2">:</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">component_pub_sub_port</span><span class="si">}</span><span class="s2">&quot;</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">inference_push_pull_address</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get the inference push/pull address based on protocol configuration.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;tcp://</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">host</span><span class="si">}</span><span class="s2">:</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">inference_push_pull_port</span><span class="si">}</span><span class="s2">&quot;</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">records_address</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get the records address based on protocol configuration.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;tcp://</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">host</span><span class="si">}</span><span class="s2">:</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">records_port</span><span class="si">}</span><span class="s2">&quot;</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">conversation_data_address</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get the conversation data address based on protocol configuration.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;tcp://</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">host</span><span class="si">}</span><span class="s2">:</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">conversation_data_port</span><span class="si">}</span><span class="s2">&quot;</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">credit_drop_address</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get the credit drop address based on protocol configuration.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;tcp://</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">host</span><span class="si">}</span><span class="s2">:</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">credit_drop_port</span><span class="si">}</span><span class="s2">&quot;</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">credit_return_address</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get the credit return address based on protocol configuration.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;tcp://</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">host</span><span class="si">}</span><span class="s2">:</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">credit_return_port</span><span class="si">}</span><span class="s2">&quot;</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">







<div class="doc doc-object doc-attribute">



<h3 id="aiperf.common.config.zmq_config.ZMQTCPTransportConfig.component_pub_sub_address" class="doc doc-heading">
            <code class=" language-python"><span class="n">component_pub_sub_address</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

<a href="#aiperf.common.config.zmq_config.ZMQTCPTransportConfig.component_pub_sub_address" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Get the component pub/sub address based on protocol configuration.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="aiperf.common.config.zmq_config.ZMQTCPTransportConfig.controller_pub_sub_address" class="doc doc-heading">
            <code class=" language-python"><span class="n">controller_pub_sub_address</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

<a href="#aiperf.common.config.zmq_config.ZMQTCPTransportConfig.controller_pub_sub_address" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Get the controller pub/sub address based on protocol configuration.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="aiperf.common.config.zmq_config.ZMQTCPTransportConfig.conversation_data_address" class="doc doc-heading">
            <code class=" language-python"><span class="n">conversation_data_address</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

<a href="#aiperf.common.config.zmq_config.ZMQTCPTransportConfig.conversation_data_address" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Get the conversation data address based on protocol configuration.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="aiperf.common.config.zmq_config.ZMQTCPTransportConfig.credit_drop_address" class="doc doc-heading">
            <code class=" language-python"><span class="n">credit_drop_address</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

<a href="#aiperf.common.config.zmq_config.ZMQTCPTransportConfig.credit_drop_address" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Get the credit drop address based on protocol configuration.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="aiperf.common.config.zmq_config.ZMQTCPTransportConfig.credit_return_address" class="doc doc-heading">
            <code class=" language-python"><span class="n">credit_return_address</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

<a href="#aiperf.common.config.zmq_config.ZMQTCPTransportConfig.credit_return_address" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Get the credit return address based on protocol configuration.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="aiperf.common.config.zmq_config.ZMQTCPTransportConfig.inference_push_pull_address" class="doc doc-heading">
            <code class=" language-python"><span class="n">inference_push_pull_address</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

<a href="#aiperf.common.config.zmq_config.ZMQTCPTransportConfig.inference_push_pull_address" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Get the inference push/pull address based on protocol configuration.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="aiperf.common.config.zmq_config.ZMQTCPTransportConfig.records_address" class="doc doc-heading">
            <code class=" language-python"><span class="n">records_address</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

<a href="#aiperf.common.config.zmq_config.ZMQTCPTransportConfig.records_address" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Get the records address based on protocol configuration.</p>

    </div>

</div>





  </div>

    </div>

</div>




  </div>

    </div>

</div><h2 id="aiperfcommonconstants">aiperf.common.constants<a class="headerlink" href="#aiperfcommonconstants" title="Permanent link">&para;</a></h2>


<div class="doc doc-object doc-module">



<a id="aiperf.common.constants"></a>
    <div class="doc doc-contents first">









  <div class="doc doc-children">











  </div>

    </div>

</div><h2 id="aiperfcommonenums">aiperf.common.enums<a class="headerlink" href="#aiperfcommonenums" title="Permanent link">&para;</a></h2>


<div class="doc doc-object doc-module">



<a id="aiperf.common.enums"></a>
    <div class="doc doc-contents first">









  <div class="doc doc-children">








<div class="doc doc-object doc-class">



<h2 id="aiperf.common.enums.CaseInsensitiveStrEnum" class="doc doc-heading">
            <code>CaseInsensitiveStrEnum</code>


<a href="#aiperf.common.enums.CaseInsensitiveStrEnum" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="str">str</span></code>, <code><span title="enum.Enum">Enum</span></code></p>


        <p>CaseInsensitiveStrEnum is a custom enumeration class that extends <code>str</code> and <code>Enum</code> to provide case-insensitive
lookup functionality for its members.</p>







              <details class="quote">
                <summary>Source code in <code>aiperf/common/enums.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">CaseInsensitiveStrEnum</span><span class="p">(</span><span class="nb">str</span><span class="p">,</span> <span class="n">Enum</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    CaseInsensitiveStrEnum is a custom enumeration class that extends `str` and `Enum` to provide case-insensitive</span>
<span class="sd">    lookup functionality for its members.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">value</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s2">.</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__eq__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">value</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>
        <span class="k">return</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__eq__</span><span class="p">(</span><span class="n">other</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__hash__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
        <span class="k">return</span> <span class="nb">hash</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">value</span><span class="o">.</span><span class="n">lower</span><span class="p">())</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">_missing_</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Handles cases where a value is not directly found in the enumeration.</span>

<span class="sd">        This method is called when an attempt is made to access an enumeration</span>
<span class="sd">        member using a value that does not directly match any of the defined</span>
<span class="sd">        members. It provides custom logic to handle such cases.</span>

<span class="sd">        Returns:</span>
<span class="sd">            The matching enumeration member if a case-insensitive match is found</span>
<span class="sd">            for string values; otherwise, returns None.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="k">for</span> <span class="n">member</span> <span class="ow">in</span> <span class="bp">cls</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">member</span><span class="o">.</span><span class="n">value</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="n">value</span><span class="o">.</span><span class="n">lower</span><span class="p">():</span>
                    <span class="k">return</span> <span class="n">member</span>
        <span class="k">return</span> <span class="kc">None</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">











  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="aiperf.common.enums.CommandType" class="doc doc-heading">
            <code>CommandType</code>


<a href="#aiperf.common.enums.CommandType" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="CaseInsensitiveStrEnum (aiperf.common.enums.CaseInsensitiveStrEnum)" href="#aiperf.common.enums.CaseInsensitiveStrEnum">CaseInsensitiveStrEnum</a></code></p>


        <p>List of commands that the SystemController can send to component services.</p>







              <details class="quote">
                <summary>Source code in <code>aiperf/common/enums.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">CommandType</span><span class="p">(</span><span class="n">CaseInsensitiveStrEnum</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;List of commands that the SystemController can send to component services.&quot;&quot;&quot;</span>

    <span class="n">PROFILE_CONFIGURE</span> <span class="o">=</span> <span class="s2">&quot;profile_configure&quot;</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;A command sent to configure a service in preparation for a profile run. This will</span>
<span class="sd">    override the current configuration.&quot;&quot;&quot;</span>

    <span class="n">PROFILE_START</span> <span class="o">=</span> <span class="s2">&quot;profile_start&quot;</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;A command sent to indicate that a service should begin profiling using the</span>
<span class="sd">    current configuration.&quot;&quot;&quot;</span>

    <span class="n">PROFILE_STOP</span> <span class="o">=</span> <span class="s2">&quot;profile_stop&quot;</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;A command sent to indicate that a service should stop doing profile related</span>
<span class="sd">    work, as the profile run is complete.&quot;&quot;&quot;</span>

    <span class="n">PROFILE_CANCEL</span> <span class="o">=</span> <span class="s2">&quot;profile_cancel&quot;</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;A command sent to cancel a profile run. This will stop the current profile run and</span>
<span class="sd">    process the partial results.&quot;&quot;&quot;</span>

    <span class="n">SHUTDOWN</span> <span class="o">=</span> <span class="s2">&quot;shutdown&quot;</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;A command sent to shutdown a service. This will stop the service gracefully</span>
<span class="sd">    no matter what state it is in.&quot;&quot;&quot;</span>

    <span class="n">PROCESS_RECORDS</span> <span class="o">=</span> <span class="s2">&quot;process_records&quot;</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;A command sent to process records. This will process the records and return</span>
<span class="sd">    the services to their pre-record processing state.&quot;&quot;&quot;</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">







<div class="doc doc-object doc-attribute">



<h3 id="aiperf.common.enums.CommandType.PROCESS_RECORDS" class="doc doc-heading">
            <code class=" language-python"><span class="n">PROCESS_RECORDS</span> <span class="o">=</span> <span class="s1">&#39;process_records&#39;</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#aiperf.common.enums.CommandType.PROCESS_RECORDS" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>A command sent to process records. This will process the records and return
the services to their pre-record processing state.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="aiperf.common.enums.CommandType.PROFILE_CANCEL" class="doc doc-heading">
            <code class=" language-python"><span class="n">PROFILE_CANCEL</span> <span class="o">=</span> <span class="s1">&#39;profile_cancel&#39;</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#aiperf.common.enums.CommandType.PROFILE_CANCEL" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>A command sent to cancel a profile run. This will stop the current profile run and
process the partial results.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="aiperf.common.enums.CommandType.PROFILE_CONFIGURE" class="doc doc-heading">
            <code class=" language-python"><span class="n">PROFILE_CONFIGURE</span> <span class="o">=</span> <span class="s1">&#39;profile_configure&#39;</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#aiperf.common.enums.CommandType.PROFILE_CONFIGURE" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>A command sent to configure a service in preparation for a profile run. This will
override the current configuration.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="aiperf.common.enums.CommandType.PROFILE_START" class="doc doc-heading">
            <code class=" language-python"><span class="n">PROFILE_START</span> <span class="o">=</span> <span class="s1">&#39;profile_start&#39;</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#aiperf.common.enums.CommandType.PROFILE_START" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>A command sent to indicate that a service should begin profiling using the
current configuration.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="aiperf.common.enums.CommandType.PROFILE_STOP" class="doc doc-heading">
            <code class=" language-python"><span class="n">PROFILE_STOP</span> <span class="o">=</span> <span class="s1">&#39;profile_stop&#39;</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#aiperf.common.enums.CommandType.PROFILE_STOP" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>A command sent to indicate that a service should stop doing profile related
work, as the profile run is complete.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="aiperf.common.enums.CommandType.SHUTDOWN" class="doc doc-heading">
            <code class=" language-python"><span class="n">SHUTDOWN</span> <span class="o">=</span> <span class="s1">&#39;shutdown&#39;</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#aiperf.common.enums.CommandType.SHUTDOWN" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>A command sent to shutdown a service. This will stop the service gracefully
no matter what state it is in.</p>

    </div>

</div>





  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="aiperf.common.enums.CommunicationBackend" class="doc doc-heading">
            <code>CommunicationBackend</code>


<a href="#aiperf.common.enums.CommunicationBackend" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="CaseInsensitiveStrEnum (aiperf.common.enums.CaseInsensitiveStrEnum)" href="#aiperf.common.enums.CaseInsensitiveStrEnum">CaseInsensitiveStrEnum</a></code></p>


        <p>Supported communication backends.</p>







              <details class="quote">
                <summary>Source code in <code>aiperf/common/enums.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">CommunicationBackend</span><span class="p">(</span><span class="n">CaseInsensitiveStrEnum</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Supported communication backends.&quot;&quot;&quot;</span>

    <span class="n">ZMQ_TCP</span> <span class="o">=</span> <span class="s2">&quot;zmq_tcp&quot;</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;ZeroMQ backend using TCP sockets.&quot;&quot;&quot;</span>

    <span class="n">ZMQ_IPC</span> <span class="o">=</span> <span class="s2">&quot;zmq_ipc&quot;</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;ZeroMQ backend using IPC sockets.&quot;&quot;&quot;</span>

    <span class="n">ZMQ_INPROC</span> <span class="o">=</span> <span class="s2">&quot;zmq_inproc&quot;</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;ZeroMQ backend using in-process communication.&quot;&quot;&quot;</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">







<div class="doc doc-object doc-attribute">



<h3 id="aiperf.common.enums.CommunicationBackend.ZMQ_INPROC" class="doc doc-heading">
            <code class=" language-python"><span class="n">ZMQ_INPROC</span> <span class="o">=</span> <span class="s1">&#39;zmq_inproc&#39;</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#aiperf.common.enums.CommunicationBackend.ZMQ_INPROC" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>ZeroMQ backend using in-process communication.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="aiperf.common.enums.CommunicationBackend.ZMQ_IPC" class="doc doc-heading">
            <code class=" language-python"><span class="n">ZMQ_IPC</span> <span class="o">=</span> <span class="s1">&#39;zmq_ipc&#39;</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#aiperf.common.enums.CommunicationBackend.ZMQ_IPC" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>ZeroMQ backend using IPC sockets.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="aiperf.common.enums.CommunicationBackend.ZMQ_TCP" class="doc doc-heading">
            <code class=" language-python"><span class="n">ZMQ_TCP</span> <span class="o">=</span> <span class="s1">&#39;zmq_tcp&#39;</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#aiperf.common.enums.CommunicationBackend.ZMQ_TCP" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>ZeroMQ backend using TCP sockets.</p>

    </div>

</div>





  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="aiperf.common.enums.InferenceClientType" class="doc doc-heading">
            <code>InferenceClientType</code>


<a href="#aiperf.common.enums.InferenceClientType" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="CaseInsensitiveStrEnum (aiperf.common.enums.CaseInsensitiveStrEnum)" href="#aiperf.common.enums.CaseInsensitiveStrEnum">CaseInsensitiveStrEnum</a></code></p>


        <p>Inference client types.</p>







              <details class="quote">
                <summary>Source code in <code>aiperf/common/enums.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">326</span>
<span class="normal">327</span>
<span class="normal">328</span>
<span class="normal">329</span>
<span class="normal">330</span>
<span class="normal">331</span>
<span class="normal">332</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">InferenceClientType</span><span class="p">(</span><span class="n">CaseInsensitiveStrEnum</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Inference client types.&quot;&quot;&quot;</span>

    <span class="n">GRPC</span> <span class="o">=</span> <span class="s2">&quot;grpc&quot;</span>
    <span class="n">HTTP</span> <span class="o">=</span> <span class="s2">&quot;http&quot;</span>
    <span class="n">OPENAI</span> <span class="o">=</span> <span class="s2">&quot;openai&quot;</span>
    <span class="n">DYNAMO</span> <span class="o">=</span> <span class="s2">&quot;dynamo&quot;</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">











  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="aiperf.common.enums.MessageType" class="doc doc-heading">
            <code>MessageType</code>


<a href="#aiperf.common.enums.MessageType" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="CaseInsensitiveStrEnum (aiperf.common.enums.CaseInsensitiveStrEnum)" href="#aiperf.common.enums.CaseInsensitiveStrEnum">CaseInsensitiveStrEnum</a></code></p>


        <p>The various types of messages that can be sent between services.</p>
<p>The message type is used to determine what Pydantic model the message maps to,
based on the message_type field in the message model.</p>







              <details class="quote">
                <summary>Source code in <code>aiperf/common/enums.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">MessageType</span><span class="p">(</span><span class="n">CaseInsensitiveStrEnum</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;The various types of messages that can be sent between services.</span>

<span class="sd">    The message type is used to determine what Pydantic model the message maps to,</span>
<span class="sd">    based on the message_type field in the message model.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">UNKNOWN</span> <span class="o">=</span> <span class="s2">&quot;unknown&quot;</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;A placeholder value for when the message type is not known.&quot;&quot;&quot;</span>

    <span class="n">REGISTRATION</span> <span class="o">=</span> <span class="s2">&quot;registration&quot;</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;A message sent by a component service to register itself with the</span>
<span class="sd">    system controller.&quot;&quot;&quot;</span>

    <span class="n">HEARTBEAT</span> <span class="o">=</span> <span class="s2">&quot;heartbeat&quot;</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;A message sent by a component service to the system controller to indicate it</span>
<span class="sd">    is still running.&quot;&quot;&quot;</span>

    <span class="n">COMMAND</span> <span class="o">=</span> <span class="s2">&quot;command&quot;</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;A message sent by the system controller to a component service to command it</span>
<span class="sd">    to do something.&quot;&quot;&quot;</span>

    <span class="n">RESPONSE</span> <span class="o">=</span> <span class="s2">&quot;response&quot;</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;A message sent by a component service to the system controller to respond</span>
<span class="sd">    to a command.&quot;&quot;&quot;</span>

    <span class="n">STATUS</span> <span class="o">=</span> <span class="s2">&quot;status&quot;</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;A notification sent by a component service to the system controller to</span>
<span class="sd">    report its status.&quot;&quot;&quot;</span>

    <span class="n">ERROR</span> <span class="o">=</span> <span class="s2">&quot;error&quot;</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;A generic error message.&quot;&quot;&quot;</span>

    <span class="n">SERVICE_ERROR</span> <span class="o">=</span> <span class="s2">&quot;service_error&quot;</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;A message sent by a component service to the system controller to</span>
<span class="sd">    report an error.&quot;&quot;&quot;</span>

    <span class="n">CREDIT_DROP</span> <span class="o">=</span> <span class="s2">&quot;credit_drop&quot;</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;A message sent by the Timing Manager service to allocate credits</span>
<span class="sd">    for a worker.&quot;&quot;&quot;</span>

    <span class="n">CREDIT_RETURN</span> <span class="o">=</span> <span class="s2">&quot;credit_return&quot;</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;A message sent by the Worker services to return credits to the credit pool.&quot;&quot;&quot;</span>

    <span class="n">CREDITS_COMPLETE</span> <span class="o">=</span> <span class="s2">&quot;credits_complete&quot;</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;A message sent by the Timing Manager services to signify all requests have completed.&quot;&quot;&quot;</span>

    <span class="n">CONVERSATION_REQUEST</span> <span class="o">=</span> <span class="s2">&quot;conversation_request&quot;</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;A message sent by one service to another to request a conversation.&quot;&quot;&quot;</span>

    <span class="n">CONVERSATION_RESPONSE</span> <span class="o">=</span> <span class="s2">&quot;conversation_response&quot;</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;A message sent by one service to another to respond to a conversation request.&quot;&quot;&quot;</span>

    <span class="n">INFERENCE_RESULTS</span> <span class="o">=</span> <span class="s2">&quot;inference_results&quot;</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;A message containing inference results from a worker.&quot;&quot;&quot;</span>

    <span class="c1"># Sweep run messages</span>

    <span class="n">SWEEP_CONFIGURE</span> <span class="o">=</span> <span class="s2">&quot;sweep_configure&quot;</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;A message sent to configure a sweep run.&quot;&quot;&quot;</span>

    <span class="n">SWEEP_BEGIN</span> <span class="o">=</span> <span class="s2">&quot;sweep_begin&quot;</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;A message sent to indicate that a sweep has begun.&quot;&quot;&quot;</span>

    <span class="n">SWEEP_PROGRESS</span> <span class="o">=</span> <span class="s2">&quot;sweep_progress&quot;</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;A message containing sweep run progress.&quot;&quot;&quot;</span>

    <span class="n">SWEEP_END</span> <span class="o">=</span> <span class="s2">&quot;sweep_end&quot;</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;A message sent to indicate that a sweep has ended.&quot;&quot;&quot;</span>

    <span class="n">SWEEP_RESULTS</span> <span class="o">=</span> <span class="s2">&quot;sweep_results&quot;</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;A message containing sweep run results.&quot;&quot;&quot;</span>

    <span class="n">SWEEP_ERROR</span> <span class="o">=</span> <span class="s2">&quot;sweep_error&quot;</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;A message containing an error from a sweep run.&quot;&quot;&quot;</span>

    <span class="c1"># Profile run messages</span>

    <span class="n">PROFILE_PROGRESS</span> <span class="o">=</span> <span class="s2">&quot;profile_progress&quot;</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;A message containing profile run progress.&quot;&quot;&quot;</span>

    <span class="n">PROFILE_STATS</span> <span class="o">=</span> <span class="s2">&quot;profile_stats&quot;</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;A message containing profile run stats such as error rates, etc.&quot;&quot;&quot;</span>

    <span class="n">PROFILE_RESULTS</span> <span class="o">=</span> <span class="s2">&quot;profile_results&quot;</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;A message containing profile run results.&quot;&quot;&quot;</span>

    <span class="n">PROFILE_ERROR</span> <span class="o">=</span> <span class="s2">&quot;profile_error&quot;</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;A message containing an error from a profile run.&quot;&quot;&quot;</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">







<div class="doc doc-object doc-attribute">



<h3 id="aiperf.common.enums.MessageType.COMMAND" class="doc doc-heading">
            <code class=" language-python"><span class="n">COMMAND</span> <span class="o">=</span> <span class="s1">&#39;command&#39;</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#aiperf.common.enums.MessageType.COMMAND" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>A message sent by the system controller to a component service to command it
to do something.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="aiperf.common.enums.MessageType.CONVERSATION_REQUEST" class="doc doc-heading">
            <code class=" language-python"><span class="n">CONVERSATION_REQUEST</span> <span class="o">=</span> <span class="s1">&#39;conversation_request&#39;</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#aiperf.common.enums.MessageType.CONVERSATION_REQUEST" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>A message sent by one service to another to request a conversation.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="aiperf.common.enums.MessageType.CONVERSATION_RESPONSE" class="doc doc-heading">
            <code class=" language-python"><span class="n">CONVERSATION_RESPONSE</span> <span class="o">=</span> <span class="s1">&#39;conversation_response&#39;</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#aiperf.common.enums.MessageType.CONVERSATION_RESPONSE" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>A message sent by one service to another to respond to a conversation request.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="aiperf.common.enums.MessageType.CREDITS_COMPLETE" class="doc doc-heading">
            <code class=" language-python"><span class="n">CREDITS_COMPLETE</span> <span class="o">=</span> <span class="s1">&#39;credits_complete&#39;</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#aiperf.common.enums.MessageType.CREDITS_COMPLETE" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>A message sent by the Timing Manager services to signify all requests have completed.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="aiperf.common.enums.MessageType.CREDIT_DROP" class="doc doc-heading">
            <code class=" language-python"><span class="n">CREDIT_DROP</span> <span class="o">=</span> <span class="s1">&#39;credit_drop&#39;</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#aiperf.common.enums.MessageType.CREDIT_DROP" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>A message sent by the Timing Manager service to allocate credits
for a worker.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="aiperf.common.enums.MessageType.CREDIT_RETURN" class="doc doc-heading">
            <code class=" language-python"><span class="n">CREDIT_RETURN</span> <span class="o">=</span> <span class="s1">&#39;credit_return&#39;</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#aiperf.common.enums.MessageType.CREDIT_RETURN" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>A message sent by the Worker services to return credits to the credit pool.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="aiperf.common.enums.MessageType.ERROR" class="doc doc-heading">
            <code class=" language-python"><span class="n">ERROR</span> <span class="o">=</span> <span class="s1">&#39;error&#39;</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#aiperf.common.enums.MessageType.ERROR" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>A generic error message.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="aiperf.common.enums.MessageType.HEARTBEAT" class="doc doc-heading">
            <code class=" language-python"><span class="n">HEARTBEAT</span> <span class="o">=</span> <span class="s1">&#39;heartbeat&#39;</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#aiperf.common.enums.MessageType.HEARTBEAT" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>A message sent by a component service to the system controller to indicate it
is still running.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="aiperf.common.enums.MessageType.INFERENCE_RESULTS" class="doc doc-heading">
            <code class=" language-python"><span class="n">INFERENCE_RESULTS</span> <span class="o">=</span> <span class="s1">&#39;inference_results&#39;</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#aiperf.common.enums.MessageType.INFERENCE_RESULTS" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>A message containing inference results from a worker.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="aiperf.common.enums.MessageType.PROFILE_ERROR" class="doc doc-heading">
            <code class=" language-python"><span class="n">PROFILE_ERROR</span> <span class="o">=</span> <span class="s1">&#39;profile_error&#39;</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#aiperf.common.enums.MessageType.PROFILE_ERROR" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>A message containing an error from a profile run.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="aiperf.common.enums.MessageType.PROFILE_PROGRESS" class="doc doc-heading">
            <code class=" language-python"><span class="n">PROFILE_PROGRESS</span> <span class="o">=</span> <span class="s1">&#39;profile_progress&#39;</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#aiperf.common.enums.MessageType.PROFILE_PROGRESS" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>A message containing profile run progress.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="aiperf.common.enums.MessageType.PROFILE_RESULTS" class="doc doc-heading">
            <code class=" language-python"><span class="n">PROFILE_RESULTS</span> <span class="o">=</span> <span class="s1">&#39;profile_results&#39;</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#aiperf.common.enums.MessageType.PROFILE_RESULTS" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>A message containing profile run results.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="aiperf.common.enums.MessageType.PROFILE_STATS" class="doc doc-heading">
            <code class=" language-python"><span class="n">PROFILE_STATS</span> <span class="o">=</span> <span class="s1">&#39;profile_stats&#39;</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#aiperf.common.enums.MessageType.PROFILE_STATS" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>A message containing profile run stats such as error rates, etc.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="aiperf.common.enums.MessageType.REGISTRATION" class="doc doc-heading">
            <code class=" language-python"><span class="n">REGISTRATION</span> <span class="o">=</span> <span class="s1">&#39;registration&#39;</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#aiperf.common.enums.MessageType.REGISTRATION" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>A message sent by a component service to register itself with the
system controller.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="aiperf.common.enums.MessageType.RESPONSE" class="doc doc-heading">
            <code class=" language-python"><span class="n">RESPONSE</span> <span class="o">=</span> <span class="s1">&#39;response&#39;</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#aiperf.common.enums.MessageType.RESPONSE" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>A message sent by a component service to the system controller to respond
to a command.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="aiperf.common.enums.MessageType.SERVICE_ERROR" class="doc doc-heading">
            <code class=" language-python"><span class="n">SERVICE_ERROR</span> <span class="o">=</span> <span class="s1">&#39;service_error&#39;</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#aiperf.common.enums.MessageType.SERVICE_ERROR" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>A message sent by a component service to the system controller to
report an error.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="aiperf.common.enums.MessageType.STATUS" class="doc doc-heading">
            <code class=" language-python"><span class="n">STATUS</span> <span class="o">=</span> <span class="s1">&#39;status&#39;</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#aiperf.common.enums.MessageType.STATUS" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>A notification sent by a component service to the system controller to
report its status.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="aiperf.common.enums.MessageType.SWEEP_BEGIN" class="doc doc-heading">
            <code class=" language-python"><span class="n">SWEEP_BEGIN</span> <span class="o">=</span> <span class="s1">&#39;sweep_begin&#39;</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#aiperf.common.enums.MessageType.SWEEP_BEGIN" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>A message sent to indicate that a sweep has begun.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="aiperf.common.enums.MessageType.SWEEP_CONFIGURE" class="doc doc-heading">
            <code class=" language-python"><span class="n">SWEEP_CONFIGURE</span> <span class="o">=</span> <span class="s1">&#39;sweep_configure&#39;</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#aiperf.common.enums.MessageType.SWEEP_CONFIGURE" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>A message sent to configure a sweep run.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="aiperf.common.enums.MessageType.SWEEP_END" class="doc doc-heading">
            <code class=" language-python"><span class="n">SWEEP_END</span> <span class="o">=</span> <span class="s1">&#39;sweep_end&#39;</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#aiperf.common.enums.MessageType.SWEEP_END" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>A message sent to indicate that a sweep has ended.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="aiperf.common.enums.MessageType.SWEEP_ERROR" class="doc doc-heading">
            <code class=" language-python"><span class="n">SWEEP_ERROR</span> <span class="o">=</span> <span class="s1">&#39;sweep_error&#39;</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#aiperf.common.enums.MessageType.SWEEP_ERROR" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>A message containing an error from a sweep run.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="aiperf.common.enums.MessageType.SWEEP_PROGRESS" class="doc doc-heading">
            <code class=" language-python"><span class="n">SWEEP_PROGRESS</span> <span class="o">=</span> <span class="s1">&#39;sweep_progress&#39;</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#aiperf.common.enums.MessageType.SWEEP_PROGRESS" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>A message containing sweep run progress.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="aiperf.common.enums.MessageType.SWEEP_RESULTS" class="doc doc-heading">
            <code class=" language-python"><span class="n">SWEEP_RESULTS</span> <span class="o">=</span> <span class="s1">&#39;sweep_results&#39;</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#aiperf.common.enums.MessageType.SWEEP_RESULTS" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>A message containing sweep run results.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="aiperf.common.enums.MessageType.UNKNOWN" class="doc doc-heading">
            <code class=" language-python"><span class="n">UNKNOWN</span> <span class="o">=</span> <span class="s1">&#39;unknown&#39;</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#aiperf.common.enums.MessageType.UNKNOWN" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>A placeholder value for when the message type is not known.</p>

    </div>

</div>





  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="aiperf.common.enums.MetricTimeType" class="doc doc-heading">
            <code>MetricTimeType</code>


<a href="#aiperf.common.enums.MetricTimeType" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="enum.Enum">Enum</span></code></p>


        <p>Defines the time types for metrics.</p>







              <details class="quote">
                <summary>Source code in <code>aiperf/common/enums.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">444</span>
<span class="normal">445</span>
<span class="normal">446</span>
<span class="normal">447</span>
<span class="normal">448</span>
<span class="normal">449</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">MetricTimeType</span><span class="p">(</span><span class="n">Enum</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Defines the time types for metrics.&quot;&quot;&quot;</span>

    <span class="n">NANOSECONDS</span> <span class="o">=</span> <span class="mi">9</span>
    <span class="n">MILLISECONDS</span> <span class="o">=</span> <span class="mi">3</span>
    <span class="n">SECONDS</span> <span class="o">=</span> <span class="mi">0</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">











  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="aiperf.common.enums.Modality" class="doc doc-heading">
            <code>Modality</code>


<a href="#aiperf.common.enums.Modality" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="CaseInsensitiveStrEnum (aiperf.common.enums.CaseInsensitiveStrEnum)" href="#aiperf.common.enums.CaseInsensitiveStrEnum">CaseInsensitiveStrEnum</a></code></p>


        <p>Modality of the model. Can be used to determine the type of data to send to the model in
conjunction with the ModelSelectionStrategy.MODALITY_AWARE.</p>







              <details class="quote">
                <summary>Source code in <code>aiperf/common/enums.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">348</span>
<span class="normal">349</span>
<span class="normal">350</span>
<span class="normal">351</span>
<span class="normal">352</span>
<span class="normal">353</span>
<span class="normal">354</span>
<span class="normal">355</span>
<span class="normal">356</span>
<span class="normal">357</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">Modality</span><span class="p">(</span><span class="n">CaseInsensitiveStrEnum</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Modality of the model. Can be used to determine the type of data to send to the model in</span>
<span class="sd">    conjunction with the ModelSelectionStrategy.MODALITY_AWARE.&quot;&quot;&quot;</span>

    <span class="n">TEXT</span> <span class="o">=</span> <span class="s2">&quot;text&quot;</span>
    <span class="n">IMAGE</span> <span class="o">=</span> <span class="s2">&quot;image&quot;</span>
    <span class="n">AUDIO</span> <span class="o">=</span> <span class="s2">&quot;audio&quot;</span>
    <span class="n">VIDEO</span> <span class="o">=</span> <span class="s2">&quot;video&quot;</span>
    <span class="n">MULTIMODAL</span> <span class="o">=</span> <span class="s2">&quot;multimodal&quot;</span>
    <span class="n">CUSTOM</span> <span class="o">=</span> <span class="s2">&quot;custom&quot;</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">











  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="aiperf.common.enums.ModelSelectionStrategy" class="doc doc-heading">
            <code>ModelSelectionStrategy</code>


<a href="#aiperf.common.enums.ModelSelectionStrategy" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="CaseInsensitiveStrEnum (aiperf.common.enums.CaseInsensitiveStrEnum)" href="#aiperf.common.enums.CaseInsensitiveStrEnum">CaseInsensitiveStrEnum</a></code></p>


        <p>Strategy for selecting the model to use for the request.</p>







              <details class="quote">
                <summary>Source code in <code>aiperf/common/enums.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">360</span>
<span class="normal">361</span>
<span class="normal">362</span>
<span class="normal">363</span>
<span class="normal">364</span>
<span class="normal">365</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">ModelSelectionStrategy</span><span class="p">(</span><span class="n">CaseInsensitiveStrEnum</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Strategy for selecting the model to use for the request.&quot;&quot;&quot;</span>

    <span class="n">ROUND_ROBIN</span> <span class="o">=</span> <span class="s2">&quot;round_robin&quot;</span>
    <span class="n">RANDOM</span> <span class="o">=</span> <span class="s2">&quot;random&quot;</span>
    <span class="n">MODALITY_AWARE</span> <span class="o">=</span> <span class="s2">&quot;modality_aware&quot;</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">











  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="aiperf.common.enums.PromptSource" class="doc doc-heading">
            <code>PromptSource</code>


<a href="#aiperf.common.enums.PromptSource" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="CaseInsensitiveStrEnum (aiperf.common.enums.CaseInsensitiveStrEnum)" href="#aiperf.common.enums.CaseInsensitiveStrEnum">CaseInsensitiveStrEnum</a></code></p>


        <p>Source of prompts for the model.</p>







              <details class="quote">
                <summary>Source code in <code>aiperf/common/enums.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">340</span>
<span class="normal">341</span>
<span class="normal">342</span>
<span class="normal">343</span>
<span class="normal">344</span>
<span class="normal">345</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">PromptSource</span><span class="p">(</span><span class="n">CaseInsensitiveStrEnum</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Source of prompts for the model.&quot;&quot;&quot;</span>

    <span class="n">SYNTHETIC</span> <span class="o">=</span> <span class="s2">&quot;synthetic&quot;</span>
    <span class="n">FILE</span> <span class="o">=</span> <span class="s2">&quot;file&quot;</span>
    <span class="n">PAYLOAD</span> <span class="o">=</span> <span class="s2">&quot;payload&quot;</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">











  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="aiperf.common.enums.RequestPayloadType" class="doc doc-heading">
            <code>RequestPayloadType</code>


<a href="#aiperf.common.enums.RequestPayloadType" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="CaseInsensitiveStrEnum (aiperf.common.enums.CaseInsensitiveStrEnum)" href="#aiperf.common.enums.CaseInsensitiveStrEnum">CaseInsensitiveStrEnum</a></code></p>


        <p>Request payload types.</p>
<p>These determine the format of the request payload to send to the model.</p>







              <details class="quote">
                <summary>Source code in <code>aiperf/common/enums.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">373</span>
<span class="normal">374</span>
<span class="normal">375</span>
<span class="normal">376</span>
<span class="normal">377</span>
<span class="normal">378</span>
<span class="normal">379</span>
<span class="normal">380</span>
<span class="normal">381</span>
<span class="normal">382</span>
<span class="normal">383</span>
<span class="normal">384</span>
<span class="normal">385</span>
<span class="normal">386</span>
<span class="normal">387</span>
<span class="normal">388</span>
<span class="normal">389</span>
<span class="normal">390</span>
<span class="normal">391</span>
<span class="normal">392</span>
<span class="normal">393</span>
<span class="normal">394</span>
<span class="normal">395</span>
<span class="normal">396</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">RequestPayloadType</span><span class="p">(</span><span class="n">CaseInsensitiveStrEnum</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Request payload types.</span>

<span class="sd">    These determine the format of the request payload to send to the model.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">OPENAI_CHAT_COMPLETIONS</span> <span class="o">=</span> <span class="s2">&quot;openai_chat_completions&quot;</span>
    <span class="n">OPENAI_COMPLETIONS</span> <span class="o">=</span> <span class="s2">&quot;openai_completions&quot;</span>
    <span class="n">OPENAI_EMBEDDINGS</span> <span class="o">=</span> <span class="s2">&quot;openai_embeddings&quot;</span>
    <span class="n">OPENAI_MULTIMODAL</span> <span class="o">=</span> <span class="s2">&quot;openai_multimodal&quot;</span>
    <span class="n">OPENAI_RESPONSES</span> <span class="o">=</span> <span class="s2">&quot;openai_responses&quot;</span>

    <span class="n">HUGGINGFACE_GENERATE</span> <span class="o">=</span> <span class="s2">&quot;huggingface_generate&quot;</span>
    <span class="n">HUGGINGFACE_RANKINGS</span> <span class="o">=</span> <span class="s2">&quot;huggingface_rankings&quot;</span>

    <span class="n">IMAGE_RETRIEVAL</span> <span class="o">=</span> <span class="s2">&quot;image_retrieval&quot;</span>
    <span class="n">DYNAMIC_GRPC</span> <span class="o">=</span> <span class="s2">&quot;dynamic_grpc&quot;</span>
    <span class="n">NVCLIP</span> <span class="o">=</span> <span class="s2">&quot;nvclip&quot;</span>

    <span class="n">RANKINGS</span> <span class="o">=</span> <span class="s2">&quot;rankings&quot;</span>
    <span class="n">TEMPLATE</span> <span class="o">=</span> <span class="s2">&quot;template&quot;</span>

    <span class="n">TENSORRTLLM</span> <span class="o">=</span> <span class="s2">&quot;tensorrtllm&quot;</span>
    <span class="n">VLLM</span> <span class="o">=</span> <span class="s2">&quot;vllm&quot;</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">











  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="aiperf.common.enums.ResponsePayloadType" class="doc doc-heading">
            <code>ResponsePayloadType</code>


<a href="#aiperf.common.enums.ResponsePayloadType" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="CaseInsensitiveStrEnum (aiperf.common.enums.CaseInsensitiveStrEnum)" href="#aiperf.common.enums.CaseInsensitiveStrEnum">CaseInsensitiveStrEnum</a></code></p>


        <p>Response payload types.</p>
<p>These determine the format of the response payload that the model will return.</p>







              <details class="quote">
                <summary>Source code in <code>aiperf/common/enums.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">398</span>
<span class="normal">399</span>
<span class="normal">400</span>
<span class="normal">401</span>
<span class="normal">402</span>
<span class="normal">403</span>
<span class="normal">404</span>
<span class="normal">405</span>
<span class="normal">406</span>
<span class="normal">407</span>
<span class="normal">408</span>
<span class="normal">409</span>
<span class="normal">410</span>
<span class="normal">411</span>
<span class="normal">412</span>
<span class="normal">413</span>
<span class="normal">414</span>
<span class="normal">415</span>
<span class="normal">416</span>
<span class="normal">417</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">ResponsePayloadType</span><span class="p">(</span><span class="n">CaseInsensitiveStrEnum</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Response payload types.</span>

<span class="sd">    These determine the format of the response payload that the model will return.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">HUGGINGFACE_GENERATE</span> <span class="o">=</span> <span class="s2">&quot;huggingface_generate&quot;</span>
    <span class="n">HUGGINGFACE_RANKINGS</span> <span class="o">=</span> <span class="s2">&quot;huggingface_rankings&quot;</span>

    <span class="n">OPENAI_CHAT_COMPLETIONS</span> <span class="o">=</span> <span class="s2">&quot;openai_chat_completions&quot;</span>
    <span class="n">OPENAI_COMPLETIONS</span> <span class="o">=</span> <span class="s2">&quot;openai_completions&quot;</span>
    <span class="n">OPENAI_EMBEDDINGS</span> <span class="o">=</span> <span class="s2">&quot;openai_embeddings&quot;</span>
    <span class="n">OPENAI_MULTIMODAL</span> <span class="o">=</span> <span class="s2">&quot;openai_multimodal&quot;</span>
    <span class="n">OPENAI_RESPONSES</span> <span class="o">=</span> <span class="s2">&quot;openai_responses&quot;</span>

    <span class="n">RANKINGS</span> <span class="o">=</span> <span class="s2">&quot;rankings&quot;</span>
    <span class="n">IMAGE_RETRIEVAL</span> <span class="o">=</span> <span class="s2">&quot;image_retrieval&quot;</span>

    <span class="n">TRITON</span> <span class="o">=</span> <span class="s2">&quot;triton&quot;</span>
    <span class="n">TRITON_GENERATE</span> <span class="o">=</span> <span class="s2">&quot;triton_generate&quot;</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">











  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="aiperf.common.enums.ServiceRegistrationStatus" class="doc doc-heading">
            <code>ServiceRegistrationStatus</code>


<a href="#aiperf.common.enums.ServiceRegistrationStatus" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="CaseInsensitiveStrEnum (aiperf.common.enums.CaseInsensitiveStrEnum)" href="#aiperf.common.enums.CaseInsensitiveStrEnum">CaseInsensitiveStrEnum</a></code></p>


        <p>Defines the various states a service can be in during registration with
the SystemController.</p>







              <details class="quote">
                <summary>Source code in <code>aiperf/common/enums.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">299</span>
<span class="normal">300</span>
<span class="normal">301</span>
<span class="normal">302</span>
<span class="normal">303</span>
<span class="normal">304</span>
<span class="normal">305</span>
<span class="normal">306</span>
<span class="normal">307</span>
<span class="normal">308</span>
<span class="normal">309</span>
<span class="normal">310</span>
<span class="normal">311</span>
<span class="normal">312</span>
<span class="normal">313</span>
<span class="normal">314</span>
<span class="normal">315</span>
<span class="normal">316</span>
<span class="normal">317</span>
<span class="normal">318</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">ServiceRegistrationStatus</span><span class="p">(</span><span class="n">CaseInsensitiveStrEnum</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Defines the various states a service can be in during registration with</span>
<span class="sd">    the SystemController.&quot;&quot;&quot;</span>

    <span class="n">UNREGISTERED</span> <span class="o">=</span> <span class="s2">&quot;unregistered&quot;</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;The service is not registered with the SystemController. This is the</span>
<span class="sd">    initial state.&quot;&quot;&quot;</span>

    <span class="n">WAITING</span> <span class="o">=</span> <span class="s2">&quot;waiting&quot;</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;The service is waiting for the SystemController to register it.</span>
<span class="sd">    This is a temporary state that should be followed by REGISTERED.&quot;&quot;&quot;</span>

    <span class="n">REGISTERED</span> <span class="o">=</span> <span class="s2">&quot;registered&quot;</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;The service is registered with the SystemController.&quot;&quot;&quot;</span>

    <span class="n">TIMEOUT</span> <span class="o">=</span> <span class="s2">&quot;timeout&quot;</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;The service registration timed out.&quot;&quot;&quot;</span>

    <span class="n">ERROR</span> <span class="o">=</span> <span class="s2">&quot;error&quot;</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;The service registration failed.&quot;&quot;&quot;</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">







<div class="doc doc-object doc-attribute">



<h3 id="aiperf.common.enums.ServiceRegistrationStatus.ERROR" class="doc doc-heading">
            <code class=" language-python"><span class="n">ERROR</span> <span class="o">=</span> <span class="s1">&#39;error&#39;</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#aiperf.common.enums.ServiceRegistrationStatus.ERROR" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>The service registration failed.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="aiperf.common.enums.ServiceRegistrationStatus.REGISTERED" class="doc doc-heading">
            <code class=" language-python"><span class="n">REGISTERED</span> <span class="o">=</span> <span class="s1">&#39;registered&#39;</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#aiperf.common.enums.ServiceRegistrationStatus.REGISTERED" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>The service is registered with the SystemController.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="aiperf.common.enums.ServiceRegistrationStatus.TIMEOUT" class="doc doc-heading">
            <code class=" language-python"><span class="n">TIMEOUT</span> <span class="o">=</span> <span class="s1">&#39;timeout&#39;</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#aiperf.common.enums.ServiceRegistrationStatus.TIMEOUT" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>The service registration timed out.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="aiperf.common.enums.ServiceRegistrationStatus.UNREGISTERED" class="doc doc-heading">
            <code class=" language-python"><span class="n">UNREGISTERED</span> <span class="o">=</span> <span class="s1">&#39;unregistered&#39;</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#aiperf.common.enums.ServiceRegistrationStatus.UNREGISTERED" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>The service is not registered with the SystemController. This is the
initial state.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="aiperf.common.enums.ServiceRegistrationStatus.WAITING" class="doc doc-heading">
            <code class=" language-python"><span class="n">WAITING</span> <span class="o">=</span> <span class="s1">&#39;waiting&#39;</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#aiperf.common.enums.ServiceRegistrationStatus.WAITING" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>The service is waiting for the SystemController to register it.
This is a temporary state that should be followed by REGISTERED.</p>

    </div>

</div>





  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="aiperf.common.enums.ServiceRunType" class="doc doc-heading">
            <code>ServiceRunType</code>


<a href="#aiperf.common.enums.ServiceRunType" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="CaseInsensitiveStrEnum (aiperf.common.enums.CaseInsensitiveStrEnum)" href="#aiperf.common.enums.CaseInsensitiveStrEnum">CaseInsensitiveStrEnum</a></code></p>


        <p>The different ways the SystemController should run the component services.</p>







              <details class="quote">
                <summary>Source code in <code>aiperf/common/enums.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">ServiceRunType</span><span class="p">(</span><span class="n">CaseInsensitiveStrEnum</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;The different ways the SystemController should run the component services.&quot;&quot;&quot;</span>

    <span class="n">MULTIPROCESSING</span> <span class="o">=</span> <span class="s2">&quot;process&quot;</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Run each service as a separate process.</span>
<span class="sd">    This is the default way for single-node deployments.&quot;&quot;&quot;</span>

    <span class="n">KUBERNETES</span> <span class="o">=</span> <span class="s2">&quot;k8s&quot;</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Run each service as a separate Kubernetes pod.</span>
<span class="sd">    This is the default way for multi-node deployments.&quot;&quot;&quot;</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">







<div class="doc doc-object doc-attribute">



<h3 id="aiperf.common.enums.ServiceRunType.KUBERNETES" class="doc doc-heading">
            <code class=" language-python"><span class="n">KUBERNETES</span> <span class="o">=</span> <span class="s1">&#39;k8s&#39;</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#aiperf.common.enums.ServiceRunType.KUBERNETES" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Run each service as a separate Kubernetes pod.
This is the default way for multi-node deployments.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="aiperf.common.enums.ServiceRunType.MULTIPROCESSING" class="doc doc-heading">
            <code class=" language-python"><span class="n">MULTIPROCESSING</span> <span class="o">=</span> <span class="s1">&#39;process&#39;</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#aiperf.common.enums.ServiceRunType.MULTIPROCESSING" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Run each service as a separate process.
This is the default way for single-node deployments.</p>

    </div>

</div>





  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="aiperf.common.enums.ServiceState" class="doc doc-heading">
            <code>ServiceState</code>


<a href="#aiperf.common.enums.ServiceState" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="CaseInsensitiveStrEnum (aiperf.common.enums.CaseInsensitiveStrEnum)" href="#aiperf.common.enums.CaseInsensitiveStrEnum">CaseInsensitiveStrEnum</a></code></p>


        <p>States a service can be in throughout its lifecycle.</p>







              <details class="quote">
                <summary>Source code in <code>aiperf/common/enums.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">ServiceState</span><span class="p">(</span><span class="n">CaseInsensitiveStrEnum</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;States a service can be in throughout its lifecycle.&quot;&quot;&quot;</span>

    <span class="n">UNKNOWN</span> <span class="o">=</span> <span class="s2">&quot;unknown&quot;</span>

    <span class="n">INITIALIZING</span> <span class="o">=</span> <span class="s2">&quot;initializing&quot;</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;The service is currently initializing. This is a temporary state that should be</span>
<span class="sd">    followed by READY.&quot;&quot;&quot;</span>

    <span class="n">READY</span> <span class="o">=</span> <span class="s2">&quot;ready&quot;</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;The service has initialized and is ready to be configured or started.&quot;&quot;&quot;</span>

    <span class="n">STARTING</span> <span class="o">=</span> <span class="s2">&quot;starting&quot;</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;The service is starting. This is a temporary state that should be followed</span>
<span class="sd">    by RUNNING.&quot;&quot;&quot;</span>

    <span class="n">RUNNING</span> <span class="o">=</span> <span class="s2">&quot;running&quot;</span>

    <span class="n">STOPPING</span> <span class="o">=</span> <span class="s2">&quot;stopping&quot;</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;The service is stopping. This is a temporary state that should be followed</span>
<span class="sd">    by STOPPED.&quot;&quot;&quot;</span>

    <span class="n">STOPPED</span> <span class="o">=</span> <span class="s2">&quot;stopped&quot;</span>

    <span class="n">ERROR</span> <span class="o">=</span> <span class="s2">&quot;error&quot;</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;The service is currently in an error state.&quot;&quot;&quot;</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">







<div class="doc doc-object doc-attribute">



<h3 id="aiperf.common.enums.ServiceState.ERROR" class="doc doc-heading">
            <code class=" language-python"><span class="n">ERROR</span> <span class="o">=</span> <span class="s1">&#39;error&#39;</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#aiperf.common.enums.ServiceState.ERROR" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>The service is currently in an error state.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="aiperf.common.enums.ServiceState.INITIALIZING" class="doc doc-heading">
            <code class=" language-python"><span class="n">INITIALIZING</span> <span class="o">=</span> <span class="s1">&#39;initializing&#39;</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#aiperf.common.enums.ServiceState.INITIALIZING" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>The service is currently initializing. This is a temporary state that should be
followed by READY.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="aiperf.common.enums.ServiceState.READY" class="doc doc-heading">
            <code class=" language-python"><span class="n">READY</span> <span class="o">=</span> <span class="s1">&#39;ready&#39;</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#aiperf.common.enums.ServiceState.READY" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>The service has initialized and is ready to be configured or started.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="aiperf.common.enums.ServiceState.STARTING" class="doc doc-heading">
            <code class=" language-python"><span class="n">STARTING</span> <span class="o">=</span> <span class="s1">&#39;starting&#39;</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#aiperf.common.enums.ServiceState.STARTING" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>The service is starting. This is a temporary state that should be followed
by RUNNING.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="aiperf.common.enums.ServiceState.STOPPING" class="doc doc-heading">
            <code class=" language-python"><span class="n">STOPPING</span> <span class="o">=</span> <span class="s1">&#39;stopping&#39;</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#aiperf.common.enums.ServiceState.STOPPING" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>The service is stopping. This is a temporary state that should be followed
by STOPPED.</p>

    </div>

</div>





  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="aiperf.common.enums.ServiceType" class="doc doc-heading">
            <code>ServiceType</code>


<a href="#aiperf.common.enums.ServiceType" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="CaseInsensitiveStrEnum (aiperf.common.enums.CaseInsensitiveStrEnum)" href="#aiperf.common.enums.CaseInsensitiveStrEnum">CaseInsensitiveStrEnum</a></code></p>


        <p>Types of services in the AIPerf system.</p>
<p>This is used to identify the service type when registering with the
SystemController. It can also be used for tracking purposes if multiple
instances of the same service type are running.</p>







              <details class="quote">
                <summary>Source code in <code>aiperf/common/enums.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">280</span>
<span class="normal">281</span>
<span class="normal">282</span>
<span class="normal">283</span>
<span class="normal">284</span>
<span class="normal">285</span>
<span class="normal">286</span>
<span class="normal">287</span>
<span class="normal">288</span>
<span class="normal">289</span>
<span class="normal">290</span>
<span class="normal">291</span>
<span class="normal">292</span>
<span class="normal">293</span>
<span class="normal">294</span>
<span class="normal">295</span>
<span class="normal">296</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">ServiceType</span><span class="p">(</span><span class="n">CaseInsensitiveStrEnum</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Types of services in the AIPerf system.</span>

<span class="sd">    This is used to identify the service type when registering with the</span>
<span class="sd">    SystemController. It can also be used for tracking purposes if multiple</span>
<span class="sd">    instances of the same service type are running.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">SYSTEM_CONTROLLER</span> <span class="o">=</span> <span class="s2">&quot;system_controller&quot;</span>
    <span class="n">DATASET_MANAGER</span> <span class="o">=</span> <span class="s2">&quot;dataset_manager&quot;</span>
    <span class="n">TIMING_MANAGER</span> <span class="o">=</span> <span class="s2">&quot;timing_manager&quot;</span>
    <span class="n">RECORDS_MANAGER</span> <span class="o">=</span> <span class="s2">&quot;records_manager&quot;</span>
    <span class="n">POST_PROCESSOR_MANAGER</span> <span class="o">=</span> <span class="s2">&quot;post_processor_manager&quot;</span>
    <span class="n">WORKER_MANAGER</span> <span class="o">=</span> <span class="s2">&quot;worker_manager&quot;</span>
    <span class="n">MULTI_WORKER_PROCESS</span> <span class="o">=</span> <span class="s2">&quot;multi_worker_process&quot;</span>
    <span class="n">WORKER</span> <span class="o">=</span> <span class="s2">&quot;worker&quot;</span>
    <span class="n">TEST</span> <span class="o">=</span> <span class="s2">&quot;test_service&quot;</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">











  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="aiperf.common.enums.Topic" class="doc doc-heading">
            <code>Topic</code>


<a href="#aiperf.common.enums.Topic" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="CaseInsensitiveStrEnum (aiperf.common.enums.CaseInsensitiveStrEnum)" href="#aiperf.common.enums.CaseInsensitiveStrEnum">CaseInsensitiveStrEnum</a></code></p>


        <p>Communication topics for the main messaging bus.
Right now, there is some overlap between Topic and MessageType.</p>
<p>NOTE: If you add a new topic, you must also add handlers for it in the
ClientType enums so the system knows what type of client to use for that topic.</p>







              <details class="quote">
                <summary>Source code in <code>aiperf/common/enums.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span>
<span class="normal">71</span>
<span class="normal">72</span>
<span class="normal">73</span>
<span class="normal">74</span>
<span class="normal">75</span>
<span class="normal">76</span>
<span class="normal">77</span>
<span class="normal">78</span>
<span class="normal">79</span>
<span class="normal">80</span>
<span class="normal">81</span>
<span class="normal">82</span>
<span class="normal">83</span>
<span class="normal">84</span>
<span class="normal">85</span>
<span class="normal">86</span>
<span class="normal">87</span>
<span class="normal">88</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">Topic</span><span class="p">(</span><span class="n">CaseInsensitiveStrEnum</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Communication topics for the main messaging bus.</span>
<span class="sd">    Right now, there is some overlap between Topic and MessageType.</span>

<span class="sd">    NOTE: If you add a new topic, you must also add handlers for it in the</span>
<span class="sd">    ClientType enums so the system knows what type of client to use for that topic.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">CREDIT_DROP</span> <span class="o">=</span> <span class="s2">&quot;credit_drop&quot;</span>
    <span class="n">CREDIT_RETURN</span> <span class="o">=</span> <span class="s2">&quot;credit_return&quot;</span>
    <span class="n">CREDITS_COMPLETE</span> <span class="o">=</span> <span class="s2">&quot;credits_complete&quot;</span>
    <span class="n">PROFILE_PROGRESS</span> <span class="o">=</span> <span class="s2">&quot;profile_progress&quot;</span>
    <span class="n">PROFILE_STATS</span> <span class="o">=</span> <span class="s2">&quot;profile_stats&quot;</span>
    <span class="n">PROFILE_RESULTS</span> <span class="o">=</span> <span class="s2">&quot;profile_results&quot;</span>
    <span class="n">REGISTRATION</span> <span class="o">=</span> <span class="s2">&quot;registration&quot;</span>
    <span class="n">COMMAND</span> <span class="o">=</span> <span class="s2">&quot;command&quot;</span>
    <span class="n">RESPONSE</span> <span class="o">=</span> <span class="s2">&quot;response&quot;</span>
    <span class="n">STATUS</span> <span class="o">=</span> <span class="s2">&quot;status&quot;</span>
    <span class="n">HEARTBEAT</span> <span class="o">=</span> <span class="s2">&quot;heartbeat&quot;</span>
    <span class="n">INFERENCE_RESULTS</span> <span class="o">=</span> <span class="s2">&quot;inference_results&quot;</span>
    <span class="n">CONVERSATION_DATA</span> <span class="o">=</span> <span class="s2">&quot;conversation_data&quot;</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">











  </div>

    </div>

</div>




  </div>

    </div>

</div><h2 id="aiperfcommonexceptions">aiperf.common.exceptions<a class="headerlink" href="#aiperfcommonexceptions" title="Permanent link">&para;</a></h2>


<div class="doc doc-object doc-module">



<a id="aiperf.common.exceptions"></a>
    <div class="doc doc-contents first">









  <div class="doc doc-children">








<div class="doc doc-object doc-class">



<h2 id="aiperf.common.exceptions.AIPerfError" class="doc doc-heading">
            <code>AIPerfError</code>


<a href="#aiperf.common.exceptions.AIPerfError" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="Exception">Exception</span></code></p>


        <p>Base class for all exceptions raised by AIPerf.</p>







              <details class="quote">
                <summary>Source code in <code>aiperf/common/exceptions.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">AIPerfError</span><span class="p">(</span><span class="ne">Exception</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Base class for all exceptions raised by AIPerf.&quot;&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__str__</span><span class="p">()</span><span class="si">}</span><span class="s2">&quot;</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">











  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="aiperf.common.exceptions.AIPerfMultiError" class="doc doc-heading">
            <code>AIPerfMultiError</code>


<a href="#aiperf.common.exceptions.AIPerfMultiError" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="AIPerfError (aiperf.common.exceptions.AIPerfError)" href="#aiperf.common.exceptions.AIPerfError">AIPerfError</a></code></p>


        <p>Exception raised when running multiple tasks and one or more fail.</p>







              <details class="quote">
                <summary>Source code in <code>aiperf/common/exceptions.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">AIPerfMultiError</span><span class="p">(</span><span class="n">AIPerfError</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Exception raised when running multiple tasks and one or more fail.&quot;&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">message</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">exceptions</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="ne">Exception</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">message</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="s1">&#39;,&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">e</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">exceptions</span><span class="p">])</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">exceptions</span> <span class="o">=</span> <span class="n">exceptions</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">











  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="aiperf.common.exceptions.CommunicationClientCreationError" class="doc doc-heading">
            <code>CommunicationClientCreationError</code>


<a href="#aiperf.common.exceptions.CommunicationClientCreationError" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="CommunicationError (aiperf.common.exceptions.CommunicationError)" href="#aiperf.common.exceptions.CommunicationError">CommunicationError</a></code></p>


        <p>Exception raised when communication channels fail to create a client.</p>







              <details class="quote">
                <summary>Source code in <code>aiperf/common/exceptions.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">71</span>
<span class="normal">72</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">CommunicationClientCreationError</span><span class="p">(</span><span class="n">CommunicationError</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Exception raised when communication channels fail to create a client.&quot;&quot;&quot;</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">











  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="aiperf.common.exceptions.CommunicationClientNotFoundError" class="doc doc-heading">
            <code>CommunicationClientNotFoundError</code>


<a href="#aiperf.common.exceptions.CommunicationClientNotFoundError" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="CommunicationError (aiperf.common.exceptions.CommunicationError)" href="#aiperf.common.exceptions.CommunicationError">CommunicationError</a></code></p>


        <p>Exception raised when a communication client is not found.</p>







              <details class="quote">
                <summary>Source code in <code>aiperf/common/exceptions.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">75</span>
<span class="normal">76</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">CommunicationClientNotFoundError</span><span class="p">(</span><span class="n">CommunicationError</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Exception raised when a communication client is not found.&quot;&quot;&quot;</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">











  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="aiperf.common.exceptions.CommunicationCreateError" class="doc doc-heading">
            <code>CommunicationCreateError</code>


<a href="#aiperf.common.exceptions.CommunicationCreateError" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="CommunicationError (aiperf.common.exceptions.CommunicationError)" href="#aiperf.common.exceptions.CommunicationError">CommunicationError</a></code></p>


        <p>Exception raised when communication channels fail to create a client.</p>







              <details class="quote">
                <summary>Source code in <code>aiperf/common/exceptions.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">79</span>
<span class="normal">80</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">CommunicationCreateError</span><span class="p">(</span><span class="n">CommunicationError</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Exception raised when communication channels fail to create a client.&quot;&quot;&quot;</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">











  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="aiperf.common.exceptions.CommunicationError" class="doc doc-heading">
            <code>CommunicationError</code>


<a href="#aiperf.common.exceptions.CommunicationError" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="AIPerfError (aiperf.common.exceptions.AIPerfError)" href="#aiperf.common.exceptions.AIPerfError">AIPerfError</a></code></p>


        <p>Base class for all communication exceptions.</p>







              <details class="quote">
                <summary>Source code in <code>aiperf/common/exceptions.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">29</span>
<span class="normal">30</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">CommunicationError</span><span class="p">(</span><span class="n">AIPerfError</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Base class for all communication exceptions.&quot;&quot;&quot;</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">











  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="aiperf.common.exceptions.CommunicationInitializationError" class="doc doc-heading">
            <code>CommunicationInitializationError</code>


<a href="#aiperf.common.exceptions.CommunicationInitializationError" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="CommunicationError (aiperf.common.exceptions.CommunicationError)" href="#aiperf.common.exceptions.CommunicationError">CommunicationError</a></code></p>


        <p>Exception raised when communication channels fail to initialize.</p>







              <details class="quote">
                <summary>Source code in <code>aiperf/common/exceptions.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">37</span>
<span class="normal">38</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">CommunicationInitializationError</span><span class="p">(</span><span class="n">CommunicationError</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Exception raised when communication channels fail to initialize.&quot;&quot;&quot;</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">











  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="aiperf.common.exceptions.CommunicationNotInitializedError" class="doc doc-heading">
            <code>CommunicationNotInitializedError</code>


<a href="#aiperf.common.exceptions.CommunicationNotInitializedError" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="CommunicationError (aiperf.common.exceptions.CommunicationError)" href="#aiperf.common.exceptions.CommunicationError">CommunicationError</a></code></p>


        <p>Exception raised when communication channels are not initialized.</p>







              <details class="quote">
                <summary>Source code in <code>aiperf/common/exceptions.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">33</span>
<span class="normal">34</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">CommunicationNotInitializedError</span><span class="p">(</span><span class="n">CommunicationError</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Exception raised when communication channels are not initialized.&quot;&quot;&quot;</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">











  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="aiperf.common.exceptions.CommunicationPublishError" class="doc doc-heading">
            <code>CommunicationPublishError</code>


<a href="#aiperf.common.exceptions.CommunicationPublishError" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="CommunicationError (aiperf.common.exceptions.CommunicationError)" href="#aiperf.common.exceptions.CommunicationError">CommunicationError</a></code></p>


        <p>Exception raised when communication channels fail to publish a message.</p>







              <details class="quote">
                <summary>Source code in <code>aiperf/common/exceptions.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">41</span>
<span class="normal">42</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">CommunicationPublishError</span><span class="p">(</span><span class="n">CommunicationError</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Exception raised when communication channels fail to publish a message.&quot;&quot;&quot;</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">











  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="aiperf.common.exceptions.CommunicationPullError" class="doc doc-heading">
            <code>CommunicationPullError</code>


<a href="#aiperf.common.exceptions.CommunicationPullError" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="CommunicationError (aiperf.common.exceptions.CommunicationError)" href="#aiperf.common.exceptions.CommunicationError">CommunicationError</a></code></p>


        <p>Exception raised when communication channels fail to pull a message from
a topic.</p>







              <details class="quote">
                <summary>Source code in <code>aiperf/common/exceptions.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">CommunicationPullError</span><span class="p">(</span><span class="n">CommunicationError</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Exception raised when communication channels fail to pull a message from</span>
<span class="sd">    a topic.&quot;&quot;&quot;</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">











  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="aiperf.common.exceptions.CommunicationPushError" class="doc doc-heading">
            <code>CommunicationPushError</code>


<a href="#aiperf.common.exceptions.CommunicationPushError" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="CommunicationError (aiperf.common.exceptions.CommunicationError)" href="#aiperf.common.exceptions.CommunicationError">CommunicationError</a></code></p>


        <p>Exception raised when communication channels fail to push a message to
a topic.</p>







              <details class="quote">
                <summary>Source code in <code>aiperf/common/exceptions.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">CommunicationPushError</span><span class="p">(</span><span class="n">CommunicationError</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Exception raised when communication channels fail to push a message to</span>
<span class="sd">    a topic.&quot;&quot;&quot;</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">











  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="aiperf.common.exceptions.CommunicationRequestError" class="doc doc-heading">
            <code>CommunicationRequestError</code>


<a href="#aiperf.common.exceptions.CommunicationRequestError" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="CommunicationError (aiperf.common.exceptions.CommunicationError)" href="#aiperf.common.exceptions.CommunicationError">CommunicationError</a></code></p>


        <p>Exception raised when communication channels fail to send a request.</p>







              <details class="quote">
                <summary>Source code in <code>aiperf/common/exceptions.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">63</span>
<span class="normal">64</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">CommunicationRequestError</span><span class="p">(</span><span class="n">CommunicationError</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Exception raised when communication channels fail to send a request.&quot;&quot;&quot;</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">











  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="aiperf.common.exceptions.CommunicationResponseError" class="doc doc-heading">
            <code>CommunicationResponseError</code>


<a href="#aiperf.common.exceptions.CommunicationResponseError" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="CommunicationError (aiperf.common.exceptions.CommunicationError)" href="#aiperf.common.exceptions.CommunicationError">CommunicationError</a></code></p>


        <p>Exception raised when communication channels fail to receive a response.</p>







              <details class="quote">
                <summary>Source code in <code>aiperf/common/exceptions.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">67</span>
<span class="normal">68</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">CommunicationResponseError</span><span class="p">(</span><span class="n">CommunicationError</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Exception raised when communication channels fail to receive a response.&quot;&quot;&quot;</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">











  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="aiperf.common.exceptions.CommunicationShutdownError" class="doc doc-heading">
            <code>CommunicationShutdownError</code>


<a href="#aiperf.common.exceptions.CommunicationShutdownError" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="CommunicationError (aiperf.common.exceptions.CommunicationError)" href="#aiperf.common.exceptions.CommunicationError">CommunicationError</a></code></p>


        <p>Exception raised when communication channels fail to shutdown.</p>







              <details class="quote">
                <summary>Source code in <code>aiperf/common/exceptions.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">45</span>
<span class="normal">46</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">CommunicationShutdownError</span><span class="p">(</span><span class="n">CommunicationError</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Exception raised when communication channels fail to shutdown.&quot;&quot;&quot;</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">











  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="aiperf.common.exceptions.CommunicationSubscribeError" class="doc doc-heading">
            <code>CommunicationSubscribeError</code>


<a href="#aiperf.common.exceptions.CommunicationSubscribeError" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="CommunicationError (aiperf.common.exceptions.CommunicationError)" href="#aiperf.common.exceptions.CommunicationError">CommunicationError</a></code></p>


        <p>Exception raised when communication channels fail to subscribe to a topic.</p>







              <details class="quote">
                <summary>Source code in <code>aiperf/common/exceptions.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">49</span>
<span class="normal">50</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">CommunicationSubscribeError</span><span class="p">(</span><span class="n">CommunicationError</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Exception raised when communication channels fail to subscribe to a topic.&quot;&quot;&quot;</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">











  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="aiperf.common.exceptions.ConfigError" class="doc doc-heading">
            <code>ConfigError</code>


<a href="#aiperf.common.exceptions.ConfigError" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="AIPerfError (aiperf.common.exceptions.AIPerfError)" href="#aiperf.common.exceptions.AIPerfError">AIPerfError</a></code></p>


        <p>Base class for all exceptions raised by configuration errors.</p>







              <details class="quote">
                <summary>Source code in <code>aiperf/common/exceptions.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">88</span>
<span class="normal">89</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">ConfigError</span><span class="p">(</span><span class="n">AIPerfError</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Base class for all exceptions raised by configuration errors.&quot;&quot;&quot;</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">











  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="aiperf.common.exceptions.ConfigLoadError" class="doc doc-heading">
            <code>ConfigLoadError</code>


<a href="#aiperf.common.exceptions.ConfigLoadError" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="ConfigError (aiperf.common.exceptions.ConfigError)" href="#aiperf.common.exceptions.ConfigError">ConfigError</a></code></p>


        <p>Exception raised for configuration load errors.</p>







              <details class="quote">
                <summary>Source code in <code>aiperf/common/exceptions.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">92</span>
<span class="normal">93</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">ConfigLoadError</span><span class="p">(</span><span class="n">ConfigError</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Exception raised for configuration load errors.&quot;&quot;&quot;</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">











  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="aiperf.common.exceptions.ConfigParseError" class="doc doc-heading">
            <code>ConfigParseError</code>


<a href="#aiperf.common.exceptions.ConfigParseError" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="ConfigError (aiperf.common.exceptions.ConfigError)" href="#aiperf.common.exceptions.ConfigError">ConfigError</a></code></p>


        <p>Exception raised for configuration parse errors.</p>







              <details class="quote">
                <summary>Source code in <code>aiperf/common/exceptions.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">96</span>
<span class="normal">97</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">ConfigParseError</span><span class="p">(</span><span class="n">ConfigError</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Exception raised for configuration parse errors.&quot;&quot;&quot;</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">











  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="aiperf.common.exceptions.ConfigValidationError" class="doc doc-heading">
            <code>ConfigValidationError</code>


<a href="#aiperf.common.exceptions.ConfigValidationError" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="ConfigError (aiperf.common.exceptions.ConfigError)" href="#aiperf.common.exceptions.ConfigError">ConfigError</a></code></p>


        <p>Exception raised for configuration validation errors.</p>







              <details class="quote">
                <summary>Source code in <code>aiperf/common/exceptions.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">100</span>
<span class="normal">101</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">ConfigValidationError</span><span class="p">(</span><span class="n">ConfigError</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Exception raised for configuration validation errors.&quot;&quot;&quot;</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">











  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="aiperf.common.exceptions.FactoryCreationError" class="doc doc-heading">
            <code>FactoryCreationError</code>


<a href="#aiperf.common.exceptions.FactoryCreationError" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="AIPerfError (aiperf.common.exceptions.AIPerfError)" href="#aiperf.common.exceptions.AIPerfError">AIPerfError</a></code></p>


        <p>Exception raised when a factory encounters an error while creating a class.</p>







              <details class="quote">
                <summary>Source code in <code>aiperf/common/exceptions.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">200</span>
<span class="normal">201</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">FactoryCreationError</span><span class="p">(</span><span class="n">AIPerfError</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Exception raised when a factory encounters an error while creating a class.&quot;&quot;&quot;</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">











  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="aiperf.common.exceptions.GeneratorConfigurationError" class="doc doc-heading">
            <code>GeneratorConfigurationError</code>


<a href="#aiperf.common.exceptions.GeneratorConfigurationError" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="GeneratorError (aiperf.common.exceptions.GeneratorError)" href="#aiperf.common.exceptions.GeneratorError">GeneratorError</a></code></p>


        <p>Exception raised for data generator configuration errors.</p>







              <details class="quote">
                <summary>Source code in <code>aiperf/common/exceptions.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">117</span>
<span class="normal">118</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">GeneratorConfigurationError</span><span class="p">(</span><span class="n">GeneratorError</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Exception raised for data generator configuration errors.&quot;&quot;&quot;</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">











  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="aiperf.common.exceptions.GeneratorError" class="doc doc-heading">
            <code>GeneratorError</code>


<a href="#aiperf.common.exceptions.GeneratorError" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="AIPerfError (aiperf.common.exceptions.AIPerfError)" href="#aiperf.common.exceptions.AIPerfError">AIPerfError</a></code></p>


        <p>Base class for all exceptions raised by data generator modules.</p>







              <details class="quote">
                <summary>Source code in <code>aiperf/common/exceptions.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">109</span>
<span class="normal">110</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">GeneratorError</span><span class="p">(</span><span class="n">AIPerfError</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Base class for all exceptions raised by data generator modules.&quot;&quot;&quot;</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">











  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="aiperf.common.exceptions.GeneratorInitializationError" class="doc doc-heading">
            <code>GeneratorInitializationError</code>


<a href="#aiperf.common.exceptions.GeneratorInitializationError" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="GeneratorError (aiperf.common.exceptions.GeneratorError)" href="#aiperf.common.exceptions.GeneratorError">GeneratorError</a></code></p>


        <p>Exception raised for data generator initialization errors.</p>







              <details class="quote">
                <summary>Source code in <code>aiperf/common/exceptions.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">113</span>
<span class="normal">114</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">GeneratorInitializationError</span><span class="p">(</span><span class="n">GeneratorError</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Exception raised for data generator initialization errors.&quot;&quot;&quot;</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">











  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="aiperf.common.exceptions.MetricTypeError" class="doc doc-heading">
            <code>MetricTypeError</code>


<a href="#aiperf.common.exceptions.MetricTypeError" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="AIPerfError (aiperf.common.exceptions.AIPerfError)" href="#aiperf.common.exceptions.AIPerfError">AIPerfError</a></code></p>


        <p>Exception raised when a metric type encounters an error while creating a class.</p>







              <details class="quote">
                <summary>Source code in <code>aiperf/common/exceptions.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">209</span>
<span class="normal">210</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">MetricTypeError</span><span class="p">(</span><span class="n">AIPerfError</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Exception raised when a metric type encounters an error while creating a class.&quot;&quot;&quot;</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">











  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="aiperf.common.exceptions.ServiceCleanupError" class="doc doc-heading">
            <code>ServiceCleanupError</code>


<a href="#aiperf.common.exceptions.ServiceCleanupError" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="ServiceError (aiperf.common.exceptions.ServiceError)" href="#aiperf.common.exceptions.ServiceError">ServiceError</a></code></p>


        <p>Exception raised for service cleanup errors.</p>







              <details class="quote">
                <summary>Source code in <code>aiperf/common/exceptions.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">145</span>
<span class="normal">146</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">ServiceCleanupError</span><span class="p">(</span><span class="n">ServiceError</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Exception raised for service cleanup errors.&quot;&quot;&quot;</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">











  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="aiperf.common.exceptions.ServiceConfigureError" class="doc doc-heading">
            <code>ServiceConfigureError</code>


<a href="#aiperf.common.exceptions.ServiceConfigureError" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="ServiceError (aiperf.common.exceptions.ServiceError)" href="#aiperf.common.exceptions.ServiceError">ServiceError</a></code></p>


        <p>Exception raised for service configure errors.</p>







              <details class="quote">
                <summary>Source code in <code>aiperf/common/exceptions.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">165</span>
<span class="normal">166</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">ServiceConfigureError</span><span class="p">(</span><span class="n">ServiceError</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Exception raised for service configure errors.&quot;&quot;&quot;</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">











  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="aiperf.common.exceptions.ServiceError" class="doc doc-heading">
            <code>ServiceError</code>


<a href="#aiperf.common.exceptions.ServiceError" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="AIPerfError (aiperf.common.exceptions.AIPerfError)" href="#aiperf.common.exceptions.AIPerfError">AIPerfError</a></code></p>


        <p>Base class for all exceptions raised by services.</p>







              <details class="quote">
                <summary>Source code in <code>aiperf/common/exceptions.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">126</span>
<span class="normal">127</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">ServiceError</span><span class="p">(</span><span class="n">AIPerfError</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Base class for all exceptions raised by services.&quot;&quot;&quot;</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">











  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="aiperf.common.exceptions.ServiceHeartbeatError" class="doc doc-heading">
            <code>ServiceHeartbeatError</code>


<a href="#aiperf.common.exceptions.ServiceHeartbeatError" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="ServiceError (aiperf.common.exceptions.ServiceError)" href="#aiperf.common.exceptions.ServiceError">ServiceError</a></code></p>


        <p>Exception raised for service heartbeat errors.</p>







              <details class="quote">
                <summary>Source code in <code>aiperf/common/exceptions.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">169</span>
<span class="normal">170</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">ServiceHeartbeatError</span><span class="p">(</span><span class="n">ServiceError</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Exception raised for service heartbeat errors.&quot;&quot;&quot;</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">











  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="aiperf.common.exceptions.ServiceInitializationError" class="doc doc-heading">
            <code>ServiceInitializationError</code>


<a href="#aiperf.common.exceptions.ServiceInitializationError" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="ServiceError (aiperf.common.exceptions.ServiceError)" href="#aiperf.common.exceptions.ServiceError">ServiceError</a></code></p>


        <p>Exception raised for service initialization errors.</p>







              <details class="quote">
                <summary>Source code in <code>aiperf/common/exceptions.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">133</span>
<span class="normal">134</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">ServiceInitializationError</span><span class="p">(</span><span class="n">ServiceError</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Exception raised for service initialization errors.&quot;&quot;&quot;</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">











  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="aiperf.common.exceptions.ServiceMessageProcessingError" class="doc doc-heading">
            <code>ServiceMessageProcessingError</code>


<a href="#aiperf.common.exceptions.ServiceMessageProcessingError" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="ServiceError (aiperf.common.exceptions.ServiceError)" href="#aiperf.common.exceptions.ServiceError">ServiceError</a></code></p>


        <p>Exception raised for service message processing errors.</p>







              <details class="quote">
                <summary>Source code in <code>aiperf/common/exceptions.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">149</span>
<span class="normal">150</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">ServiceMessageProcessingError</span><span class="p">(</span><span class="n">ServiceError</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Exception raised for service message processing errors.&quot;&quot;&quot;</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">











  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="aiperf.common.exceptions.ServiceRegistrationError" class="doc doc-heading">
            <code>ServiceRegistrationError</code>


<a href="#aiperf.common.exceptions.ServiceRegistrationError" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="ServiceError (aiperf.common.exceptions.ServiceError)" href="#aiperf.common.exceptions.ServiceError">ServiceError</a></code></p>


        <p>Exception raised for service registration errors.</p>







              <details class="quote">
                <summary>Source code in <code>aiperf/common/exceptions.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">153</span>
<span class="normal">154</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">ServiceRegistrationError</span><span class="p">(</span><span class="n">ServiceError</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Exception raised for service registration errors.&quot;&quot;&quot;</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">











  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="aiperf.common.exceptions.ServiceRunError" class="doc doc-heading">
            <code>ServiceRunError</code>


<a href="#aiperf.common.exceptions.ServiceRunError" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="ServiceError (aiperf.common.exceptions.ServiceError)" href="#aiperf.common.exceptions.ServiceError">ServiceError</a></code></p>


        <p>Exception raised for service run errors.</p>







              <details class="quote">
                <summary>Source code in <code>aiperf/common/exceptions.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">161</span>
<span class="normal">162</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">ServiceRunError</span><span class="p">(</span><span class="n">ServiceError</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Exception raised for service run errors.&quot;&quot;&quot;</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">











  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="aiperf.common.exceptions.ServiceStartError" class="doc doc-heading">
            <code>ServiceStartError</code>


<a href="#aiperf.common.exceptions.ServiceStartError" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="ServiceError (aiperf.common.exceptions.ServiceError)" href="#aiperf.common.exceptions.ServiceError">ServiceError</a></code></p>


        <p>Exception raised for service start errors.</p>







              <details class="quote">
                <summary>Source code in <code>aiperf/common/exceptions.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">137</span>
<span class="normal">138</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">ServiceStartError</span><span class="p">(</span><span class="n">ServiceError</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Exception raised for service start errors.&quot;&quot;&quot;</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">











  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="aiperf.common.exceptions.ServiceStatusError" class="doc doc-heading">
            <code>ServiceStatusError</code>


<a href="#aiperf.common.exceptions.ServiceStatusError" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="ServiceError (aiperf.common.exceptions.ServiceError)" href="#aiperf.common.exceptions.ServiceError">ServiceError</a></code></p>


        <p>Exception raised for service status errors.</p>







              <details class="quote">
                <summary>Source code in <code>aiperf/common/exceptions.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">157</span>
<span class="normal">158</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">ServiceStatusError</span><span class="p">(</span><span class="n">ServiceError</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Exception raised for service status errors.&quot;&quot;&quot;</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">











  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="aiperf.common.exceptions.ServiceStopError" class="doc doc-heading">
            <code>ServiceStopError</code>


<a href="#aiperf.common.exceptions.ServiceStopError" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="ServiceError (aiperf.common.exceptions.ServiceError)" href="#aiperf.common.exceptions.ServiceError">ServiceError</a></code></p>


        <p>Exception raised for service stop errors.</p>







              <details class="quote">
                <summary>Source code in <code>aiperf/common/exceptions.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">141</span>
<span class="normal">142</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">ServiceStopError</span><span class="p">(</span><span class="n">ServiceError</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Exception raised for service stop errors.&quot;&quot;&quot;</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">











  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="aiperf.common.exceptions.TokenizerError" class="doc doc-heading">
            <code>TokenizerError</code>


<a href="#aiperf.common.exceptions.TokenizerError" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="AIPerfError (aiperf.common.exceptions.AIPerfError)" href="#aiperf.common.exceptions.AIPerfError">AIPerfError</a></code></p>


        <p>Base class for tokenizer exceptions.</p>







              <details class="quote">
                <summary>Source code in <code>aiperf/common/exceptions.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">178</span>
<span class="normal">179</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">TokenizerError</span><span class="p">(</span><span class="n">AIPerfError</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Base class for tokenizer exceptions.&quot;&quot;&quot;</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">











  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="aiperf.common.exceptions.TokenizerInitializationError" class="doc doc-heading">
            <code>TokenizerInitializationError</code>


<a href="#aiperf.common.exceptions.TokenizerInitializationError" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="TokenizerError (aiperf.common.exceptions.TokenizerError)" href="#aiperf.common.exceptions.TokenizerError">TokenizerError</a></code></p>


        <p>Exception raised for errors during tokenizer initialization.</p>







              <details class="quote">
                <summary>Source code in <code>aiperf/common/exceptions.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">182</span>
<span class="normal">183</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">TokenizerInitializationError</span><span class="p">(</span><span class="n">TokenizerError</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Exception raised for errors during tokenizer initialization.&quot;&quot;&quot;</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">











  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="aiperf.common.exceptions.UnsupportedHookError" class="doc doc-heading">
            <code>UnsupportedHookError</code>


<a href="#aiperf.common.exceptions.UnsupportedHookError" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="AIPerfError (aiperf.common.exceptions.AIPerfError)" href="#aiperf.common.exceptions.AIPerfError">AIPerfError</a></code></p>


        <p>Exception raised when a hook is defined on a class that does not support it.</p>







              <details class="quote">
                <summary>Source code in <code>aiperf/common/exceptions.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">191</span>
<span class="normal">192</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">UnsupportedHookError</span><span class="p">(</span><span class="n">AIPerfError</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Exception raised when a hook is defined on a class that does not support it.&quot;&quot;&quot;</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">











  </div>

    </div>

</div>




  </div>

    </div>

</div><h2 id="aiperfcommonfactories">aiperf.common.factories<a class="headerlink" href="#aiperfcommonfactories" title="Permanent link">&para;</a></h2>


<div class="doc doc-object doc-module">



<a id="aiperf.common.factories"></a>
    <div class="doc doc-contents first">









  <div class="doc doc-children">








<div class="doc doc-object doc-class">



<h2 id="aiperf.common.factories.CommunicationFactory" class="doc doc-heading">
            <code>CommunicationFactory</code>


<a href="#aiperf.common.factories.CommunicationFactory" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="FactoryMixin (aiperf.common.factories.FactoryMixin)" href="#aiperf.common.factories.FactoryMixin">FactoryMixin</a>[&#39;CommunicationBackend&#39;, &#39;BaseCommunication&#39;]</code></p>


        <p>Factory for registering and creating BaseCommunication instances based on the specified communication backend.</p>
<p>Example:
```python
    # Register a new communication backend
    @CommunicationFactory.register(CommunicationBackend.ZMQ_TCP)
    class ZMQCommunication(BaseCommunication):
        pass</p>
<div class="codehilite"><pre><span></span><code><span class="gh">#</span> Create a new communication instance
communication = CommunicationFactory.create_instance(
    CommunicationBackend.ZMQ_TCP,
    config=ZMQTCPCommunicationConfig(
        host=&quot;localhost&quot;, port=5555, timeout=10.0),
)
</code></pre></div>







              <details class="quote">
                <summary>Source code in <code>aiperf/common/factories.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">CommunicationFactory</span><span class="p">(</span><span class="n">FactoryMixin</span><span class="p">[</span><span class="s2">&quot;CommunicationBackend&quot;</span><span class="p">,</span> <span class="s2">&quot;BaseCommunication&quot;</span><span class="p">]):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Factory for registering and creating BaseCommunication instances based on the specified communication backend.</span>

<span class="sd">    Example:</span>
<span class="sd">    ```python</span>
<span class="sd">        # Register a new communication backend</span>
<span class="sd">        @CommunicationFactory.register(CommunicationBackend.ZMQ_TCP)</span>
<span class="sd">        class ZMQCommunication(BaseCommunication):</span>
<span class="sd">            pass</span>

<span class="sd">        # Create a new communication instance</span>
<span class="sd">        communication = CommunicationFactory.create_instance(</span>
<span class="sd">            CommunicationBackend.ZMQ_TCP,</span>
<span class="sd">            config=ZMQTCPCommunicationConfig(</span>
<span class="sd">                host=&quot;localhost&quot;, port=5555, timeout=10.0),</span>
<span class="sd">        )</span>
<span class="sd">    &quot;&quot;&quot;</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">











  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="aiperf.common.factories.DataExporterFactory" class="doc doc-heading">
            <code>DataExporterFactory</code>


<a href="#aiperf.common.factories.DataExporterFactory" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="FactoryMixin (aiperf.common.factories.FactoryMixin)" href="#aiperf.common.factories.FactoryMixin">FactoryMixin</a>[&#39;DataExporterType&#39;, &#39;DataExporterProtocol&#39;]</code></p>


        <p>Factory for registering and creating DataExporterInterface instances.</p>
<p>Example:</p>
<div class="codehilite"><pre><span></span><code>    <span class="c1"># Iterate over all registered data exporter types</span>
    <span class="k">for</span> <span class="n">exporter_class</span> <span class="ow">in</span> <span class="n">DataExporterFactory</span><span class="o">.</span><span class="n">get_all_classes</span><span class="p">():</span>
        <span class="n">exporter</span> <span class="o">=</span> <span class="n">exporter_class</span><span class="p">(</span><span class="n">endpoint_config</span><span class="p">)</span>

        <span class="n">exporter</span><span class="o">.</span><span class="n">export</span><span class="p">(</span><span class="n">records</span><span class="p">)</span>
</code></pre></div>







              <details class="quote">
                <summary>Source code in <code>aiperf/common/factories.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">DataExporterFactory</span><span class="p">(</span><span class="n">FactoryMixin</span><span class="p">[</span><span class="s2">&quot;DataExporterType&quot;</span><span class="p">,</span> <span class="s2">&quot;DataExporterProtocol&quot;</span><span class="p">]):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Factory for registering and creating DataExporterInterface instances.</span>

<span class="sd">    Example:</span>
<span class="sd">    ```python</span>
<span class="sd">        # Iterate over all registered data exporter types</span>
<span class="sd">        for exporter_class in DataExporterFactory.get_all_classes():</span>
<span class="sd">            exporter = exporter_class(endpoint_config)</span>

<span class="sd">            exporter.export(records)</span>
<span class="sd">    ```</span>
<span class="sd">    &quot;&quot;&quot;</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">











  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="aiperf.common.factories.FactoryMixin" class="doc doc-heading">
            <code>FactoryMixin</code>


<a href="#aiperf.common.factories.FactoryMixin" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="typing.Generic">Generic</span>[<span title="aiperf.common.factories.ClassEnumT">ClassEnumT</span>, <span title="aiperf.common.factories.ClassProtocolT">ClassProtocolT</span>]</code></p>


        <p>Defines a mixin for all factories, which supports registering and creating instances of classes.</p>
<p>This mixin is used to create a factory for a given class type and protocol.</p>
<p>Example:</p>
<div class="codehilite"><pre><span></span><code>    <span class="c1"># Define a new enum for the expected implementation types</span>
    <span class="c1"># This is optional, but recommended for type safety.</span>
    <span class="k">class</span><span class="w"> </span><span class="nc">DatasetLoaderType</span><span class="p">(</span><span class="n">CaseInsensitiveStrEnum</span><span class="p">):</span>
        <span class="n">FILE</span> <span class="o">=</span> <span class="s2">&quot;file&quot;</span>
        <span class="n">S3</span> <span class="o">=</span> <span class="s2">&quot;s3&quot;</span>

    <span class="c1"># Define a new class protocol.</span>
    <span class="k">class</span><span class="w"> </span><span class="nc">DatasetLoaderProtocol</span><span class="p">(</span><span class="n">Protocol</span><span class="p">):</span>
        <span class="k">def</span><span class="w"> </span><span class="nf">load</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dataset</span><span class="p">:</span>
            <span class="k">pass</span>

    <span class="c1"># Create a new factory for a given class type and protocol.</span>
    <span class="k">class</span><span class="w"> </span><span class="nc">DatasetFactory</span><span class="p">(</span><span class="n">FactoryMixin</span><span class="p">[</span><span class="n">DatasetLoaderType</span><span class="p">,</span> <span class="n">DatasetLoaderProtocol</span><span class="p">]):</span>
        <span class="k">pass</span>

    <span class="c1"># Register a new class type mapping to its corresponding class. It should implement the class protocol.</span>
    <span class="nd">@DatasetFactory</span><span class="o">.</span><span class="n">register</span><span class="p">(</span><span class="n">DatasetLoaderType</span><span class="o">.</span><span class="n">FILE</span><span class="p">)</span>
    <span class="k">class</span><span class="w"> </span><span class="nc">FileDatasetLoader</span><span class="p">:</span>
        <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">filename</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">filename</span> <span class="o">=</span> <span class="n">filename</span>

        <span class="k">def</span><span class="w"> </span><span class="nf">load</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dataset</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Dataset</span><span class="o">.</span><span class="n">from_file</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">filename</span><span class="p">)</span>

    <span class="n">DatasetConfig</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="n">DatasetLoaderType</span><span class="o">.</span><span class="n">FILE</span><span class="p">,</span>
        <span class="s2">&quot;filename&quot;</span><span class="p">:</span> <span class="s2">&quot;data.csv&quot;</span>
    <span class="p">}</span>

    <span class="c1"># Create a new instance of the class.</span>
    <span class="k">if</span> <span class="n">DatasetConfig</span><span class="p">[</span><span class="s2">&quot;type&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="n">DatasetLoaderType</span><span class="o">.</span><span class="n">FILE</span><span class="p">:</span>
        <span class="n">dataset_instance</span> <span class="o">=</span> <span class="n">DatasetFactory</span><span class="o">.</span><span class="n">create_instance</span><span class="p">(</span><span class="n">DatasetLoaderType</span><span class="o">.</span><span class="n">FILE</span><span class="p">,</span> <span class="n">filename</span><span class="o">=</span><span class="n">DatasetConfig</span><span class="p">[</span><span class="s2">&quot;filename&quot;</span><span class="p">])</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Unsupported dataset loader type: </span><span class="si">{</span><span class="n">DatasetConfig</span><span class="p">[</span><span class="s1">&#39;type&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="n">dataset_instance</span><span class="o">.</span><span class="n">load</span><span class="p">()</span>
</code></pre></div>







              <details class="quote">
                <summary>Source code in <code>aiperf/common/factories.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 37</span>
<span class="normal"> 38</span>
<span class="normal"> 39</span>
<span class="normal"> 40</span>
<span class="normal"> 41</span>
<span class="normal"> 42</span>
<span class="normal"> 43</span>
<span class="normal"> 44</span>
<span class="normal"> 45</span>
<span class="normal"> 46</span>
<span class="normal"> 47</span>
<span class="normal"> 48</span>
<span class="normal"> 49</span>
<span class="normal"> 50</span>
<span class="normal"> 51</span>
<span class="normal"> 52</span>
<span class="normal"> 53</span>
<span class="normal"> 54</span>
<span class="normal"> 55</span>
<span class="normal"> 56</span>
<span class="normal"> 57</span>
<span class="normal"> 58</span>
<span class="normal"> 59</span>
<span class="normal"> 60</span>
<span class="normal"> 61</span>
<span class="normal"> 62</span>
<span class="normal"> 63</span>
<span class="normal"> 64</span>
<span class="normal"> 65</span>
<span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">FactoryMixin</span><span class="p">(</span><span class="n">Generic</span><span class="p">[</span><span class="n">ClassEnumT</span><span class="p">,</span> <span class="n">ClassProtocolT</span><span class="p">]):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Defines a mixin for all factories, which supports registering and creating instances of classes.</span>

<span class="sd">    This mixin is used to create a factory for a given class type and protocol.</span>

<span class="sd">    Example:</span>
<span class="sd">    ```python</span>
<span class="sd">        # Define a new enum for the expected implementation types</span>
<span class="sd">        # This is optional, but recommended for type safety.</span>
<span class="sd">        class DatasetLoaderType(CaseInsensitiveStrEnum):</span>
<span class="sd">            FILE = &quot;file&quot;</span>
<span class="sd">            S3 = &quot;s3&quot;</span>

<span class="sd">        # Define a new class protocol.</span>
<span class="sd">        class DatasetLoaderProtocol(Protocol):</span>
<span class="sd">            def load(self) -&gt; Dataset:</span>
<span class="sd">                pass</span>

<span class="sd">        # Create a new factory for a given class type and protocol.</span>
<span class="sd">        class DatasetFactory(FactoryMixin[DatasetLoaderType, DatasetLoaderProtocol]):</span>
<span class="sd">            pass</span>

<span class="sd">        # Register a new class type mapping to its corresponding class. It should implement the class protocol.</span>
<span class="sd">        @DatasetFactory.register(DatasetLoaderType.FILE)</span>
<span class="sd">        class FileDatasetLoader:</span>
<span class="sd">            def __init__(self, filename: str):</span>
<span class="sd">                self.filename = filename</span>

<span class="sd">            def load(self) -&gt; Dataset:</span>
<span class="sd">                return Dataset.from_file(self.filename)</span>

<span class="sd">        DatasetConfig = {</span>
<span class="sd">            &quot;type&quot;: DatasetLoaderType.FILE,</span>
<span class="sd">            &quot;filename&quot;: &quot;data.csv&quot;</span>
<span class="sd">        }</span>

<span class="sd">        # Create a new instance of the class.</span>
<span class="sd">        if DatasetConfig[&quot;type&quot;] == DatasetLoaderType.FILE:</span>
<span class="sd">            dataset_instance = DatasetFactory.create_instance(DatasetLoaderType.FILE, filename=DatasetConfig[&quot;filename&quot;])</span>
<span class="sd">        else:</span>
<span class="sd">            raise ValueError(f&quot;Unsupported dataset loader type: {DatasetConfig[&#39;type&#39;]}&quot;)</span>

<span class="sd">        dataset_instance.load()</span>
<span class="sd">    ```</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">logger</span> <span class="o">=</span> <span class="n">logging</span><span class="o">.</span><span class="n">getLogger</span><span class="p">(</span><span class="vm">__name__</span><span class="p">)</span>

    <span class="n">_registry</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="n">ClassEnumT</span> <span class="o">|</span> <span class="nb">str</span><span class="p">,</span> <span class="nb">type</span><span class="p">[</span><span class="n">ClassProtocolT</span><span class="p">]]</span>
    <span class="n">_override_priorities</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="n">ClassEnumT</span> <span class="o">|</span> <span class="nb">str</span><span class="p">,</span> <span class="nb">int</span><span class="p">]</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">__init_subclass__</span><span class="p">(</span><span class="bp">cls</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="bp">cls</span><span class="o">.</span><span class="n">_registry</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="bp">cls</span><span class="o">.</span><span class="n">_override_priorities</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">__init_subclass__</span><span class="p">()</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">register</span><span class="p">(</span>
        <span class="bp">cls</span><span class="p">,</span> <span class="n">class_type</span><span class="p">:</span> <span class="n">ClassEnumT</span> <span class="o">|</span> <span class="nb">str</span><span class="p">,</span> <span class="n">override_priority</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Callable</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Register a new class type mapping to its corresponding class.</span>

<span class="sd">        Args:</span>
<span class="sd">            class_type: The type of class to register</span>
<span class="sd">            override_priority: The priority of the override. The higher the priority,</span>
<span class="sd">                the more precedence the override has when multiple classes are registered</span>
<span class="sd">                for the same class type. Built-in classes have a priority of 0.</span>

<span class="sd">        Returns:</span>
<span class="sd">            Decorator for the class that implements the class protocol</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">def</span><span class="w"> </span><span class="nf">decorator</span><span class="p">(</span><span class="n">class_cls</span><span class="p">:</span> <span class="nb">type</span><span class="p">[</span><span class="n">ClassProtocolT</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="nb">type</span><span class="p">[</span><span class="n">ClassProtocolT</span><span class="p">]:</span>
            <span class="n">existing_priority</span> <span class="o">=</span> <span class="bp">cls</span><span class="o">.</span><span class="n">_override_priorities</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">class_type</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">class_type</span> <span class="ow">in</span> <span class="bp">cls</span><span class="o">.</span><span class="n">_registry</span> <span class="ow">and</span> <span class="n">existing_priority</span> <span class="o">&gt;=</span> <span class="n">override_priority</span><span class="p">:</span>
                <span class="c1"># TODO: Will logging be initialized before this method is called?</span>
                <span class="bp">cls</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span>
                    <span class="s2">&quot;</span><span class="si">%r</span><span class="s2"> class </span><span class="si">%s</span><span class="s2"> already registered with same or higher priority &quot;</span>
                    <span class="s2">&quot;(</span><span class="si">%s</span><span class="s2">). The new registration of class </span><span class="si">%s</span><span class="s2"> with priority &quot;</span>
                    <span class="s2">&quot;</span><span class="si">%s</span><span class="s2"> will be ignored.&quot;</span><span class="p">,</span>
                    <span class="n">class_type</span><span class="p">,</span>
                    <span class="bp">cls</span><span class="o">.</span><span class="n">_registry</span><span class="p">[</span><span class="n">class_type</span><span class="p">]</span><span class="o">.</span><span class="vm">__name__</span><span class="p">,</span>
                    <span class="n">existing_priority</span><span class="p">,</span>
                    <span class="n">class_cls</span><span class="o">.</span><span class="vm">__name__</span><span class="p">,</span>
                    <span class="n">override_priority</span><span class="p">,</span>
                <span class="p">)</span>
                <span class="k">return</span> <span class="n">class_cls</span>

            <span class="k">if</span> <span class="n">class_type</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">cls</span><span class="o">.</span><span class="n">_registry</span><span class="p">:</span>
                <span class="bp">cls</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span>
                    <span class="s2">&quot;</span><span class="si">%r</span><span class="s2"> class </span><span class="si">%s</span><span class="s2"> registered with priority </span><span class="si">%s</span><span class="s2">.&quot;</span><span class="p">,</span>
                    <span class="n">class_type</span><span class="p">,</span>
                    <span class="n">class_cls</span><span class="o">.</span><span class="vm">__name__</span><span class="p">,</span>
                    <span class="n">override_priority</span><span class="p">,</span>
                <span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">cls</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span>
                    <span class="s2">&quot;</span><span class="si">%r</span><span class="s2"> class </span><span class="si">%s</span><span class="s2"> with priority </span><span class="si">%s</span><span class="s2"> overrides &quot;</span>
                    <span class="s2">&quot;already registered class </span><span class="si">%s</span><span class="s2"> with lower priority (</span><span class="si">%s</span><span class="s2">).&quot;</span><span class="p">,</span>
                    <span class="n">class_type</span><span class="p">,</span>
                    <span class="n">class_cls</span><span class="o">.</span><span class="vm">__name__</span><span class="p">,</span>
                    <span class="n">override_priority</span><span class="p">,</span>
                    <span class="bp">cls</span><span class="o">.</span><span class="n">_registry</span><span class="p">[</span><span class="n">class_type</span><span class="p">]</span><span class="o">.</span><span class="vm">__name__</span><span class="p">,</span>
                    <span class="n">existing_priority</span><span class="p">,</span>
                <span class="p">)</span>
            <span class="bp">cls</span><span class="o">.</span><span class="n">_registry</span><span class="p">[</span><span class="n">class_type</span><span class="p">]</span> <span class="o">=</span> <span class="n">class_cls</span>
            <span class="bp">cls</span><span class="o">.</span><span class="n">_override_priorities</span><span class="p">[</span><span class="n">class_type</span><span class="p">]</span> <span class="o">=</span> <span class="n">override_priority</span>
            <span class="k">return</span> <span class="n">class_cls</span>

        <span class="k">return</span> <span class="n">decorator</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">create_instance</span><span class="p">(</span>
        <span class="bp">cls</span><span class="p">,</span>
        <span class="n">class_type</span><span class="p">:</span> <span class="n">ClassEnumT</span> <span class="o">|</span> <span class="nb">str</span><span class="p">,</span>
        <span class="o">*</span><span class="n">args</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span>
        <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ClassProtocolT</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Create a new class instance.</span>

<span class="sd">        Args:</span>
<span class="sd">            class_type: The type of class to create</span>
<span class="sd">            *args: Positional arguments for the class</span>
<span class="sd">            **kwargs: Keyword arguments for the class</span>

<span class="sd">        Returns:</span>
<span class="sd">            The created class instance</span>

<span class="sd">        Raises:</span>
<span class="sd">            FactoryCreationError: If the class type is not registered or there is an error creating the instance</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">class_type</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">cls</span><span class="o">.</span><span class="n">_registry</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">FactoryCreationError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;No implementation found for </span><span class="si">{</span><span class="n">class_type</span><span class="si">!r}</span><span class="s2">.&quot;</span><span class="p">)</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">cls</span><span class="o">.</span><span class="n">_registry</span><span class="p">[</span><span class="n">class_type</span><span class="p">](</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">FactoryCreationError</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Error creating </span><span class="si">{</span><span class="n">class_type</span><span class="si">!r}</span><span class="s2"> instance: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="p">)</span> <span class="kn">from</span><span class="w"> </span><span class="nn">e</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">get_class_from_type</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">class_type</span><span class="p">:</span> <span class="n">ClassEnumT</span> <span class="o">|</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">type</span><span class="p">[</span><span class="n">ClassProtocolT</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get the class from a class type.</span>

<span class="sd">        Args:</span>
<span class="sd">            class_type: The class type to get the class from</span>

<span class="sd">        Returns:</span>
<span class="sd">            The class for the given class type</span>

<span class="sd">        Raises:</span>
<span class="sd">            TypeError: If the class type is not registered</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">class_type</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">cls</span><span class="o">.</span><span class="n">_registry</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;No class found for </span><span class="si">{</span><span class="n">class_type</span><span class="si">!r}</span><span class="s2">. Please register the class first.&quot;</span>
            <span class="p">)</span>
        <span class="k">return</span> <span class="bp">cls</span><span class="o">.</span><span class="n">_registry</span><span class="p">[</span><span class="n">class_type</span><span class="p">]</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">get_all_classes</span><span class="p">(</span><span class="bp">cls</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="nb">type</span><span class="p">[</span><span class="n">ClassProtocolT</span><span class="p">]]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get all registered classes.</span>

<span class="sd">        Returns:</span>
<span class="sd">            A list of all registered class types implementing the expected protocol</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="nb">list</span><span class="p">(</span><span class="bp">cls</span><span class="o">.</span><span class="n">_registry</span><span class="o">.</span><span class="n">values</span><span class="p">())</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h3 id="aiperf.common.factories.FactoryMixin.create_instance" class="doc doc-heading">
            <code class=" language-python"><span class="n">create_instance</span><span class="p">(</span><span class="n">class_type</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-classmethod"><code>classmethod</code></small>
  </span>

<a href="#aiperf.common.factories.FactoryMixin.create_instance" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Create a new class instance.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>class_type</code>
            </td>
            <td>
                  <code><span title="aiperf.common.factories.ClassEnumT">ClassEnumT</span> | <span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The type of class to create</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>*args</code>
            </td>
            <td>
                  <code><span title="typing.Any">Any</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Positional arguments for the class</p>
              </div>
            </td>
            <td>
                  <code>()</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>**kwargs</code>
            </td>
            <td>
                  <code><span title="typing.Any">Any</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Keyword arguments for the class</p>
              </div>
            </td>
            <td>
                  <code>{}</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="aiperf.common.factories.ClassProtocolT">ClassProtocolT</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The created class instance</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="FactoryCreationError (aiperf.common.exceptions.FactoryCreationError)" href="#aiperf.common.exceptions.FactoryCreationError">FactoryCreationError</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If the class type is not registered or there is an error creating the instance</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>aiperf/common/factories.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@classmethod</span>
<span class="k">def</span><span class="w"> </span><span class="nf">create_instance</span><span class="p">(</span>
    <span class="bp">cls</span><span class="p">,</span>
    <span class="n">class_type</span><span class="p">:</span> <span class="n">ClassEnumT</span> <span class="o">|</span> <span class="nb">str</span><span class="p">,</span>
    <span class="o">*</span><span class="n">args</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span>
    <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ClassProtocolT</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Create a new class instance.</span>

<span class="sd">    Args:</span>
<span class="sd">        class_type: The type of class to create</span>
<span class="sd">        *args: Positional arguments for the class</span>
<span class="sd">        **kwargs: Keyword arguments for the class</span>

<span class="sd">    Returns:</span>
<span class="sd">        The created class instance</span>

<span class="sd">    Raises:</span>
<span class="sd">        FactoryCreationError: If the class type is not registered or there is an error creating the instance</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">class_type</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">cls</span><span class="o">.</span><span class="n">_registry</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">FactoryCreationError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;No implementation found for </span><span class="si">{</span><span class="n">class_type</span><span class="si">!r}</span><span class="s2">.&quot;</span><span class="p">)</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">cls</span><span class="o">.</span><span class="n">_registry</span><span class="p">[</span><span class="n">class_type</span><span class="p">](</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">FactoryCreationError</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;Error creating </span><span class="si">{</span><span class="n">class_type</span><span class="si">!r}</span><span class="s2"> instance: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="p">)</span> <span class="kn">from</span><span class="w"> </span><span class="nn">e</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="aiperf.common.factories.FactoryMixin.get_all_classes" class="doc doc-heading">
            <code class=" language-python"><span class="n">get_all_classes</span><span class="p">()</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-classmethod"><code>classmethod</code></small>
  </span>

<a href="#aiperf.common.factories.FactoryMixin.get_all_classes" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Get all registered classes.</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="list">list</span>[<span title="type">type</span>[<span title="aiperf.common.factories.ClassProtocolT">ClassProtocolT</span>]]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A list of all registered class types implementing the expected protocol</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>aiperf/common/factories.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@classmethod</span>
<span class="k">def</span><span class="w"> </span><span class="nf">get_all_classes</span><span class="p">(</span><span class="bp">cls</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="nb">type</span><span class="p">[</span><span class="n">ClassProtocolT</span><span class="p">]]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Get all registered classes.</span>

<span class="sd">    Returns:</span>
<span class="sd">        A list of all registered class types implementing the expected protocol</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="nb">list</span><span class="p">(</span><span class="bp">cls</span><span class="o">.</span><span class="n">_registry</span><span class="o">.</span><span class="n">values</span><span class="p">())</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="aiperf.common.factories.FactoryMixin.get_class_from_type" class="doc doc-heading">
            <code class=" language-python"><span class="n">get_class_from_type</span><span class="p">(</span><span class="n">class_type</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-classmethod"><code>classmethod</code></small>
  </span>

<a href="#aiperf.common.factories.FactoryMixin.get_class_from_type" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Get the class from a class type.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>class_type</code>
            </td>
            <td>
                  <code><span title="aiperf.common.factories.ClassEnumT">ClassEnumT</span> | <span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The class type to get the class from</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="type">type</span>[<span title="aiperf.common.factories.ClassProtocolT">ClassProtocolT</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The class for the given class type</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="TypeError">TypeError</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If the class type is not registered</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>aiperf/common/factories.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@classmethod</span>
<span class="k">def</span><span class="w"> </span><span class="nf">get_class_from_type</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">class_type</span><span class="p">:</span> <span class="n">ClassEnumT</span> <span class="o">|</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">type</span><span class="p">[</span><span class="n">ClassProtocolT</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Get the class from a class type.</span>

<span class="sd">    Args:</span>
<span class="sd">        class_type: The class type to get the class from</span>

<span class="sd">    Returns:</span>
<span class="sd">        The class for the given class type</span>

<span class="sd">    Raises:</span>
<span class="sd">        TypeError: If the class type is not registered</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">class_type</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">cls</span><span class="o">.</span><span class="n">_registry</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;No class found for </span><span class="si">{</span><span class="n">class_type</span><span class="si">!r}</span><span class="s2">. Please register the class first.&quot;</span>
        <span class="p">)</span>
    <span class="k">return</span> <span class="bp">cls</span><span class="o">.</span><span class="n">_registry</span><span class="p">[</span><span class="n">class_type</span><span class="p">]</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="aiperf.common.factories.FactoryMixin.register" class="doc doc-heading">
            <code class=" language-python"><span class="n">register</span><span class="p">(</span><span class="n">class_type</span><span class="p">,</span> <span class="n">override_priority</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-classmethod"><code>classmethod</code></small>
  </span>

<a href="#aiperf.common.factories.FactoryMixin.register" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Register a new class type mapping to its corresponding class.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>class_type</code>
            </td>
            <td>
                  <code><span title="aiperf.common.factories.ClassEnumT">ClassEnumT</span> | <span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The type of class to register</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>override_priority</code>
            </td>
            <td>
                  <code><span title="int">int</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The priority of the override. The higher the priority,
the more precedence the override has when multiple classes are registered
for the same class type. Built-in classes have a priority of 0.</p>
              </div>
            </td>
            <td>
                  <code>0</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="collections.abc.Callable">Callable</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Decorator for the class that implements the class protocol</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>aiperf/common/factories.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@classmethod</span>
<span class="k">def</span><span class="w"> </span><span class="nf">register</span><span class="p">(</span>
    <span class="bp">cls</span><span class="p">,</span> <span class="n">class_type</span><span class="p">:</span> <span class="n">ClassEnumT</span> <span class="o">|</span> <span class="nb">str</span><span class="p">,</span> <span class="n">override_priority</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Callable</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Register a new class type mapping to its corresponding class.</span>

<span class="sd">    Args:</span>
<span class="sd">        class_type: The type of class to register</span>
<span class="sd">        override_priority: The priority of the override. The higher the priority,</span>
<span class="sd">            the more precedence the override has when multiple classes are registered</span>
<span class="sd">            for the same class type. Built-in classes have a priority of 0.</span>

<span class="sd">    Returns:</span>
<span class="sd">        Decorator for the class that implements the class protocol</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">decorator</span><span class="p">(</span><span class="n">class_cls</span><span class="p">:</span> <span class="nb">type</span><span class="p">[</span><span class="n">ClassProtocolT</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="nb">type</span><span class="p">[</span><span class="n">ClassProtocolT</span><span class="p">]:</span>
        <span class="n">existing_priority</span> <span class="o">=</span> <span class="bp">cls</span><span class="o">.</span><span class="n">_override_priorities</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">class_type</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">class_type</span> <span class="ow">in</span> <span class="bp">cls</span><span class="o">.</span><span class="n">_registry</span> <span class="ow">and</span> <span class="n">existing_priority</span> <span class="o">&gt;=</span> <span class="n">override_priority</span><span class="p">:</span>
            <span class="c1"># TODO: Will logging be initialized before this method is called?</span>
            <span class="bp">cls</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span>
                <span class="s2">&quot;</span><span class="si">%r</span><span class="s2"> class </span><span class="si">%s</span><span class="s2"> already registered with same or higher priority &quot;</span>
                <span class="s2">&quot;(</span><span class="si">%s</span><span class="s2">). The new registration of class </span><span class="si">%s</span><span class="s2"> with priority &quot;</span>
                <span class="s2">&quot;</span><span class="si">%s</span><span class="s2"> will be ignored.&quot;</span><span class="p">,</span>
                <span class="n">class_type</span><span class="p">,</span>
                <span class="bp">cls</span><span class="o">.</span><span class="n">_registry</span><span class="p">[</span><span class="n">class_type</span><span class="p">]</span><span class="o">.</span><span class="vm">__name__</span><span class="p">,</span>
                <span class="n">existing_priority</span><span class="p">,</span>
                <span class="n">class_cls</span><span class="o">.</span><span class="vm">__name__</span><span class="p">,</span>
                <span class="n">override_priority</span><span class="p">,</span>
            <span class="p">)</span>
            <span class="k">return</span> <span class="n">class_cls</span>

        <span class="k">if</span> <span class="n">class_type</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">cls</span><span class="o">.</span><span class="n">_registry</span><span class="p">:</span>
            <span class="bp">cls</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span>
                <span class="s2">&quot;</span><span class="si">%r</span><span class="s2"> class </span><span class="si">%s</span><span class="s2"> registered with priority </span><span class="si">%s</span><span class="s2">.&quot;</span><span class="p">,</span>
                <span class="n">class_type</span><span class="p">,</span>
                <span class="n">class_cls</span><span class="o">.</span><span class="vm">__name__</span><span class="p">,</span>
                <span class="n">override_priority</span><span class="p">,</span>
            <span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">cls</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span>
                <span class="s2">&quot;</span><span class="si">%r</span><span class="s2"> class </span><span class="si">%s</span><span class="s2"> with priority </span><span class="si">%s</span><span class="s2"> overrides &quot;</span>
                <span class="s2">&quot;already registered class </span><span class="si">%s</span><span class="s2"> with lower priority (</span><span class="si">%s</span><span class="s2">).&quot;</span><span class="p">,</span>
                <span class="n">class_type</span><span class="p">,</span>
                <span class="n">class_cls</span><span class="o">.</span><span class="vm">__name__</span><span class="p">,</span>
                <span class="n">override_priority</span><span class="p">,</span>
                <span class="bp">cls</span><span class="o">.</span><span class="n">_registry</span><span class="p">[</span><span class="n">class_type</span><span class="p">]</span><span class="o">.</span><span class="vm">__name__</span><span class="p">,</span>
                <span class="n">existing_priority</span><span class="p">,</span>
            <span class="p">)</span>
        <span class="bp">cls</span><span class="o">.</span><span class="n">_registry</span><span class="p">[</span><span class="n">class_type</span><span class="p">]</span> <span class="o">=</span> <span class="n">class_cls</span>
        <span class="bp">cls</span><span class="o">.</span><span class="n">_override_priorities</span><span class="p">[</span><span class="n">class_type</span><span class="p">]</span> <span class="o">=</span> <span class="n">override_priority</span>
        <span class="k">return</span> <span class="n">class_cls</span>

    <span class="k">return</span> <span class="n">decorator</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="aiperf.common.factories.PostProcessorFactory" class="doc doc-heading">
            <code>PostProcessorFactory</code>


<a href="#aiperf.common.factories.PostProcessorFactory" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="FactoryMixin (aiperf.common.factories.FactoryMixin)" href="#aiperf.common.factories.FactoryMixin">FactoryMixin</a>[&#39;PostProcessorType&#39;, &#39;PostProcessorProtocol&#39;]</code></p>


        <p>Factory for registering and creating PostProcessor instances based on the specified post-processor type.</p>
<p>Example:
```python
    # Register a new post-processor type
    @PostProcessorFactory.register(PostProcessorType.METRIC_SUMMARY)
    class MetricSummary:
        pass</p>
<div class="codehilite"><pre><span></span><code><span class="gh">#</span> Create a new post-processor instance
post_processor = PostProcessorFactory.create_instance(
    PostProcessorType.METRIC_SUMMARY,
)
</code></pre></div>







              <details class="quote">
                <summary>Source code in <code>aiperf/common/factories.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span>
<span class="normal">278</span>
<span class="normal">279</span>
<span class="normal">280</span>
<span class="normal">281</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">PostProcessorFactory</span><span class="p">(</span><span class="n">FactoryMixin</span><span class="p">[</span><span class="s2">&quot;PostProcessorType&quot;</span><span class="p">,</span> <span class="s2">&quot;PostProcessorProtocol&quot;</span><span class="p">]):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Factory for registering and creating PostProcessor instances based on the specified post-processor type.</span>

<span class="sd">    Example:</span>
<span class="sd">    ```python</span>
<span class="sd">        # Register a new post-processor type</span>
<span class="sd">        @PostProcessorFactory.register(PostProcessorType.METRIC_SUMMARY)</span>
<span class="sd">        class MetricSummary:</span>
<span class="sd">            pass</span>

<span class="sd">        # Create a new post-processor instance</span>
<span class="sd">        post_processor = PostProcessorFactory.create_instance(</span>
<span class="sd">            PostProcessorType.METRIC_SUMMARY,</span>
<span class="sd">        )</span>
<span class="sd">    &quot;&quot;&quot;</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">











  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="aiperf.common.factories.ServiceFactory" class="doc doc-heading">
            <code>ServiceFactory</code>


<a href="#aiperf.common.factories.ServiceFactory" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="FactoryMixin (aiperf.common.factories.FactoryMixin)" href="#aiperf.common.factories.FactoryMixin">FactoryMixin</a>[&#39;ServiceType&#39;, &#39;BaseService&#39;]</code></p>


        <p>Factory for registering and creating BaseService instances based on the specified service type.</p>
<p>Example:</p>
<div class="codehilite"><pre><span></span><code>    <span class="c1"># Register a new service type</span>
    <span class="nd">@ServiceFactory</span><span class="o">.</span><span class="n">register</span><span class="p">(</span><span class="n">ServiceType</span><span class="o">.</span><span class="n">DATASET_MANAGER</span><span class="p">)</span>
    <span class="k">class</span><span class="w"> </span><span class="nc">DatasetManager</span><span class="p">(</span><span class="n">BaseService</span><span class="p">):</span>
        <span class="k">pass</span>

    <span class="c1"># Create a new service instance in a separate process</span>
    <span class="n">service_class</span> <span class="o">=</span> <span class="n">ServiceFactory</span><span class="o">.</span><span class="n">get_class_from_type</span><span class="p">(</span><span class="n">service_type</span><span class="p">)</span>

    <span class="n">process</span> <span class="o">=</span> <span class="n">Process</span><span class="p">(</span>
        <span class="n">target</span><span class="o">=</span><span class="n">bootstrap_and_run_service</span><span class="p">,</span>
        <span class="n">name</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">service_type</span><span class="si">}</span><span class="s2">_process&quot;</span><span class="p">,</span>
        <span class="n">args</span><span class="o">=</span><span class="p">(</span><span class="n">service_class</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="p">),</span>
        <span class="n">daemon</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div>







              <details class="quote">
                <summary>Source code in <code>aiperf/common/factories.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">ServiceFactory</span><span class="p">(</span><span class="n">FactoryMixin</span><span class="p">[</span><span class="s2">&quot;ServiceType&quot;</span><span class="p">,</span> <span class="s2">&quot;BaseService&quot;</span><span class="p">]):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Factory for registering and creating BaseService instances based on the specified service type.</span>

<span class="sd">    Example:</span>
<span class="sd">    ```python</span>
<span class="sd">        # Register a new service type</span>
<span class="sd">        @ServiceFactory.register(ServiceType.DATASET_MANAGER)</span>
<span class="sd">        class DatasetManager(BaseService):</span>
<span class="sd">            pass</span>

<span class="sd">        # Create a new service instance in a separate process</span>
<span class="sd">        service_class = ServiceFactory.get_class_from_type(service_type)</span>

<span class="sd">        process = Process(</span>
<span class="sd">            target=bootstrap_and_run_service,</span>
<span class="sd">            name=f&quot;{service_type}_process&quot;,</span>
<span class="sd">            args=(service_class, self.config),</span>
<span class="sd">            daemon=False,</span>
<span class="sd">        )</span>
<span class="sd">    ```</span>
<span class="sd">    &quot;&quot;&quot;</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">











  </div>

    </div>

</div>




  </div>

    </div>

</div><h2 id="aiperfcommonhooks">aiperf.common.hooks<a class="headerlink" href="#aiperfcommonhooks" title="Permanent link">&para;</a></h2>


<div class="doc doc-object doc-module">



<a id="aiperf.common.hooks"></a>
    <div class="doc doc-contents first">

        <p>This module provides an extensive hook system for AIPerf. It is designed to be
used as a mixin for classes that support hooks. It provides a simple interface
for registering and running hooks.</p>
<p>Classes should inherit from the :class:<code>HooksMixin</code>, and specify the supported
hook types by decorating the class with the :func:<code>supports_hooks</code> decorator.</p>
<p>The hook functions are registered by decorating functions with the various hook
decorators such as :func:<code>on_init</code>, :func:<code>on_start</code>, :func:<code>on_stop</code>, etc.</p>
<p>The hooks are run by calling the :meth:<code>HooksMixin.run_hooks</code> or
:meth:<code>HooksMixin.run_hooks_async</code> methods on the class.</p>
<p>More than one hook can be registered for a given hook type, and classes that inherit from
classes with existing hooks will inherit the hooks from the base classes as well.</p>









  <div class="doc doc-children">







<div class="doc doc-object doc-attribute">



<h2 id="aiperf.common.hooks.AIPERF_HOOK_TYPE" class="doc doc-heading">
            <code class=" language-python"><span class="n">AIPERF_HOOK_TYPE</span> <span class="o">=</span> <span class="s1">&#39;__aiperf_hook_type__&#39;</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-module-attribute"><code>module-attribute</code></small>
  </span>

<a href="#aiperf.common.hooks.AIPERF_HOOK_TYPE" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">

        <p>Constant attribute name that marks a function's hook type.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h2 id="aiperf.common.hooks.HookType" class="doc doc-heading">
            <code class=" language-python"><span class="n">HookType</span> <span class="o">=</span> <span class="n">AIPerfHook</span> <span class="o">|</span> <span class="nb">str</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-module-attribute"><code>module-attribute</code></small>
  </span>

<a href="#aiperf.common.hooks.HookType" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">

        <p>Type alias for valid hook types. This is a union of the AIPerfHook enum and any user-defined custom strings.</p>

    </div>

</div>


<div class="doc doc-object doc-class">



<h2 id="aiperf.common.hooks.AIPerfHook" class="doc doc-heading">
            <code>AIPerfHook</code>


<a href="#aiperf.common.hooks.AIPerfHook" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="enum.Enum">Enum</span></code></p>


        <p>Enum for the various AIPerf hooks.</p>
<p>Note: If you add a new hook, you must also add it to the @supports_hooks
decorator of the class you wish to use the hook in.</p>







              <details class="quote">
                <summary>Source code in <code>aiperf/common/hooks.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">AIPerfHook</span><span class="p">(</span><span class="n">Enum</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Enum for the various AIPerf hooks.</span>

<span class="sd">    Note: If you add a new hook, you must also add it to the @supports_hooks</span>
<span class="sd">    decorator of the class you wish to use the hook in.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">ON_INIT</span> <span class="o">=</span> <span class="s2">&quot;__aiperf_on_init__&quot;</span>
    <span class="n">ON_RUN</span> <span class="o">=</span> <span class="s2">&quot;__aiperf_on_run__&quot;</span>
    <span class="n">ON_CONFIGURE</span> <span class="o">=</span> <span class="s2">&quot;__aiperf_on_configure__&quot;</span>
    <span class="n">ON_START</span> <span class="o">=</span> <span class="s2">&quot;__aiperf_on_start__&quot;</span>
    <span class="n">ON_STOP</span> <span class="o">=</span> <span class="s2">&quot;__aiperf_on_stop__&quot;</span>
    <span class="n">ON_CLEANUP</span> <span class="o">=</span> <span class="s2">&quot;__aiperf_on_cleanup__&quot;</span>

    <span class="n">ON_SET_STATE</span> <span class="o">=</span> <span class="s2">&quot;__aiperf_on_set_state__&quot;</span>

    <span class="n">AIPERF_TASK</span> <span class="o">=</span> <span class="s2">&quot;__aiperf_task__&quot;</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">











  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="aiperf.common.hooks.AIPerfTaskMixin" class="doc doc-heading">
            <code>AIPerfTaskMixin</code>


<a href="#aiperf.common.hooks.AIPerfTaskMixin" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="HooksMixin (aiperf.common.hooks.HooksMixin)" href="#aiperf.common.hooks.HooksMixin">HooksMixin</a></code></p>


        <p>Mixin to add task support to a class. It abstracts away the details of the
:class:<code>AIPerfTask</code> and provides a simple interface for registering and running tasks.
It hooks into the :meth:<code>HooksMixin.on_init</code> and :meth:<code>HooksMixin.on_stop</code> hooks to
start and stop the tasks.</p>







              <details class="quote">
                <summary>Source code in <code>aiperf/common/hooks.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">336</span>
<span class="normal">337</span>
<span class="normal">338</span>
<span class="normal">339</span>
<span class="normal">340</span>
<span class="normal">341</span>
<span class="normal">342</span>
<span class="normal">343</span>
<span class="normal">344</span>
<span class="normal">345</span>
<span class="normal">346</span>
<span class="normal">347</span>
<span class="normal">348</span>
<span class="normal">349</span>
<span class="normal">350</span>
<span class="normal">351</span>
<span class="normal">352</span>
<span class="normal">353</span>
<span class="normal">354</span>
<span class="normal">355</span>
<span class="normal">356</span>
<span class="normal">357</span>
<span class="normal">358</span>
<span class="normal">359</span>
<span class="normal">360</span>
<span class="normal">361</span>
<span class="normal">362</span>
<span class="normal">363</span>
<span class="normal">364</span>
<span class="normal">365</span>
<span class="normal">366</span>
<span class="normal">367</span>
<span class="normal">368</span>
<span class="normal">369</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@supports_hooks</span><span class="p">(</span><span class="n">AIPerfHook</span><span class="o">.</span><span class="n">AIPERF_TASK</span><span class="p">,</span> <span class="n">AIPerfHook</span><span class="o">.</span><span class="n">ON_INIT</span><span class="p">,</span> <span class="n">AIPerfHook</span><span class="o">.</span><span class="n">ON_STOP</span><span class="p">)</span>
<span class="k">class</span><span class="w"> </span><span class="nc">AIPerfTaskMixin</span><span class="p">(</span><span class="n">HooksMixin</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Mixin to add task support to a class. It abstracts away the details of the</span>
<span class="sd">    :class:`AIPerfTask` and provides a simple interface for registering and running tasks.</span>
<span class="sd">    It hooks into the :meth:`HooksMixin.on_init` and :meth:`HooksMixin.on_stop` hooks to</span>
<span class="sd">    start and stop the tasks.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="c1"># TODO: Once we create a Mixin for `self.stop_event`, we can avoid</span>
    <span class="c1"># having the user to call `while not self.stop_event.is_set()`</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">registered_tasks</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">Task</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>

    <span class="nd">@on_init</span>
    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">_start_tasks</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Start all the registered tasks in the background.&quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">hook</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_hooks</span><span class="p">(</span><span class="n">AIPerfHook</span><span class="o">.</span><span class="n">AIPERF_TASK</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">inspect</span><span class="o">.</span><span class="n">iscoroutinefunction</span><span class="p">(</span><span class="n">hook</span><span class="p">):</span>
                <span class="n">task</span> <span class="o">=</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">create_task</span><span class="p">(</span><span class="n">hook</span><span class="p">())</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">task</span> <span class="o">=</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">create_task</span><span class="p">(</span><span class="n">asyncio</span><span class="o">.</span><span class="n">to_thread</span><span class="p">(</span><span class="n">hook</span><span class="p">))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">registered_tasks</span><span class="p">[</span><span class="n">hook</span><span class="o">.</span><span class="vm">__name__</span><span class="p">]</span> <span class="o">=</span> <span class="n">task</span>

    <span class="nd">@on_stop</span>
    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">_stop_tasks</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Stop all the background tasks. This will wait for all the tasks to complete.&quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">task</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">registered_tasks</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
            <span class="n">task</span><span class="o">.</span><span class="n">cancel</span><span class="p">()</span>

        <span class="c1"># Wait for all tasks to complete</span>
        <span class="k">with</span> <span class="n">contextlib</span><span class="o">.</span><span class="n">suppress</span><span class="p">(</span><span class="n">asyncio</span><span class="o">.</span><span class="n">CancelledError</span><span class="p">):</span>
            <span class="k">await</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">gather</span><span class="p">(</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">registered_tasks</span><span class="o">.</span><span class="n">values</span><span class="p">())</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">











  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="aiperf.common.hooks.HookSystem" class="doc doc-heading">
            <code>HookSystem</code>


<a href="#aiperf.common.hooks.HookSystem" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">


        <p>System for managing hooks.</p>
<p>This class is responsible for managing the hooks for a class. It will
store the hooks in a dictionary, and provide methods to register and run
the hooks.</p>







              <details class="quote">
                <summary>Source code in <code>aiperf/common/hooks.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">HookSystem</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    System for managing hooks.</span>

<span class="sd">    This class is responsible for managing the hooks for a class. It will</span>
<span class="sd">    store the hooks in a dictionary, and provide methods to register and run</span>
<span class="sd">    the hooks.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">supported_hooks</span><span class="p">:</span> <span class="nb">set</span><span class="p">[</span><span class="n">HookType</span><span class="p">]):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Initialize the hook system.</span>

<span class="sd">        Args:</span>
<span class="sd">            supported_hooks: The hook types that the class supports.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">supported_hooks</span><span class="p">:</span> <span class="nb">set</span><span class="p">[</span><span class="n">HookType</span><span class="p">]</span> <span class="o">=</span> <span class="n">supported_hooks</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_hooks</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="n">HookType</span><span class="p">,</span> <span class="nb">list</span><span class="p">[</span><span class="n">Callable</span><span class="p">]]</span> <span class="o">=</span> <span class="p">{}</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">register_hook</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">hook_type</span><span class="p">:</span> <span class="n">HookType</span><span class="p">,</span> <span class="n">func</span><span class="p">:</span> <span class="n">Callable</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Register a hook function for a given hook type.</span>

<span class="sd">        Args:</span>
<span class="sd">            hook_type: The hook type to register the function for.</span>
<span class="sd">            func: The function to register.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">hook_type</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">supported_hooks</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">UnsupportedHookError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Hook </span><span class="si">{</span><span class="n">hook_type</span><span class="si">}</span><span class="s2"> is not supported by class.&quot;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_hooks</span><span class="o">.</span><span class="n">setdefault</span><span class="p">(</span><span class="n">hook_type</span><span class="p">,</span> <span class="p">[])</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">func</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">get_hooks</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">hook_type</span><span class="p">:</span> <span class="n">HookType</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="n">Callable</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get all the registered hooks for the given hook type.</span>

<span class="sd">        Args:</span>
<span class="sd">            hook_type: The hook type to get the hooks for.</span>

<span class="sd">        Returns:</span>
<span class="sd">            A list of the hooks for the given hook type.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_hooks</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">hook_type</span><span class="p">,</span> <span class="p">[])</span>

    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">run_hooks</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">hook_type</span><span class="p">:</span> <span class="n">HookType</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Run all the hooks for a given hook type serially. This will wait for each</span>
<span class="sd">        hook to complete before running the next one.</span>

<span class="sd">        Args:</span>
<span class="sd">            hook_type: The hook type to run.</span>
<span class="sd">            *args: The arguments to pass to the hooks.</span>
<span class="sd">            **kwargs: The keyword arguments to pass to the hooks.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">hook_type</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">supported_hooks</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">UnsupportedHookError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Hook </span><span class="si">{</span><span class="n">hook_type</span><span class="si">}</span><span class="s2"> is not supported by class.&quot;</span><span class="p">)</span>

        <span class="n">exceptions</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="ne">Exception</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">func</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_hooks</span><span class="p">(</span><span class="n">hook_type</span><span class="p">):</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">inspect</span><span class="o">.</span><span class="n">iscoroutinefunction</span><span class="p">(</span><span class="n">func</span><span class="p">):</span>
                    <span class="k">await</span> <span class="n">func</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">await</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">to_thread</span><span class="p">(</span><span class="n">func</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Error running hook </span><span class="si">{</span><span class="n">func</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
                <span class="n">exceptions</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">exceptions</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">AIPerfMultiError</span><span class="p">(</span><span class="s2">&quot;Errors running hooks&quot;</span><span class="p">,</span> <span class="n">exceptions</span><span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">run_hooks_async</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">hook_type</span><span class="p">:</span> <span class="n">HookType</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Run all the hooks for a given hook type concurrently. This will run all</span>
<span class="sd">        the hooks at the same time and return when all the hooks have completed.</span>

<span class="sd">        Args:</span>
<span class="sd">            hook_type: The hook type to run.</span>
<span class="sd">            *args: The arguments to pass to the hooks.</span>
<span class="sd">            **kwargs: The keyword arguments to pass to the hooks.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">hook_type</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">supported_hooks</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">UnsupportedHookError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Hook </span><span class="si">{</span><span class="n">hook_type</span><span class="si">}</span><span class="s2"> is not supported by class.&quot;</span><span class="p">)</span>

        <span class="n">coroutines</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">Awaitable</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">func</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_hooks</span><span class="p">(</span><span class="n">hook_type</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">inspect</span><span class="o">.</span><span class="n">iscoroutinefunction</span><span class="p">(</span><span class="n">func</span><span class="p">):</span>
                <span class="n">coroutines</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">func</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">))</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">coroutines</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">asyncio</span><span class="o">.</span><span class="n">to_thread</span><span class="p">(</span><span class="n">func</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">))</span>

        <span class="k">if</span> <span class="n">coroutines</span><span class="p">:</span>
            <span class="n">results</span> <span class="o">=</span> <span class="k">await</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">gather</span><span class="p">(</span><span class="o">*</span><span class="n">coroutines</span><span class="p">,</span> <span class="n">return_exceptions</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

            <span class="n">exceptions</span> <span class="o">=</span> <span class="p">[</span><span class="n">result</span> <span class="k">for</span> <span class="n">result</span> <span class="ow">in</span> <span class="n">results</span> <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="ne">Exception</span><span class="p">)]</span>
            <span class="k">if</span> <span class="n">exceptions</span><span class="p">:</span>
                <span class="k">raise</span> <span class="n">AIPerfMultiError</span><span class="p">(</span><span class="s2">&quot;Errors running hooks&quot;</span><span class="p">,</span> <span class="n">exceptions</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h3 id="aiperf.common.hooks.HookSystem.__init__" class="doc doc-heading">
            <code class=" language-python"><span class="fm">__init__</span><span class="p">(</span><span class="n">supported_hooks</span><span class="p">)</span></code>

<a href="#aiperf.common.hooks.HookSystem.__init__" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Initialize the hook system.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>supported_hooks</code>
            </td>
            <td>
                  <code><span title="set">set</span>[<a class="autorefs autorefs-internal" title="HookType = AIPerfHook | str

  
      module-attribute
   (aiperf.common.hooks.HookType)" href="#aiperf.common.hooks.HookType">HookType</a>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The hook types that the class supports.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>aiperf/common/hooks.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">78</span>
<span class="normal">79</span>
<span class="normal">80</span>
<span class="normal">81</span>
<span class="normal">82</span>
<span class="normal">83</span>
<span class="normal">84</span>
<span class="normal">85</span>
<span class="normal">86</span>
<span class="normal">87</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">supported_hooks</span><span class="p">:</span> <span class="nb">set</span><span class="p">[</span><span class="n">HookType</span><span class="p">]):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Initialize the hook system.</span>

<span class="sd">    Args:</span>
<span class="sd">        supported_hooks: The hook types that the class supports.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">supported_hooks</span><span class="p">:</span> <span class="nb">set</span><span class="p">[</span><span class="n">HookType</span><span class="p">]</span> <span class="o">=</span> <span class="n">supported_hooks</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_hooks</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="n">HookType</span><span class="p">,</span> <span class="nb">list</span><span class="p">[</span><span class="n">Callable</span><span class="p">]]</span> <span class="o">=</span> <span class="p">{}</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="aiperf.common.hooks.HookSystem.get_hooks" class="doc doc-heading">
            <code class=" language-python"><span class="n">get_hooks</span><span class="p">(</span><span class="n">hook_type</span><span class="p">)</span></code>

<a href="#aiperf.common.hooks.HookSystem.get_hooks" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Get all the registered hooks for the given hook type.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>hook_type</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="HookType = AIPerfHook | str

  
      module-attribute
   (aiperf.common.hooks.HookType)" href="#aiperf.common.hooks.HookType">HookType</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The hook type to get the hooks for.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="list">list</span>[<span title="collections.abc.Callable">Callable</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A list of the hooks for the given hook type.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>aiperf/common/hooks.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">get_hooks</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">hook_type</span><span class="p">:</span> <span class="n">HookType</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="n">Callable</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Get all the registered hooks for the given hook type.</span>

<span class="sd">    Args:</span>
<span class="sd">        hook_type: The hook type to get the hooks for.</span>

<span class="sd">    Returns:</span>
<span class="sd">        A list of the hooks for the given hook type.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_hooks</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">hook_type</span><span class="p">,</span> <span class="p">[])</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="aiperf.common.hooks.HookSystem.register_hook" class="doc doc-heading">
            <code class=" language-python"><span class="n">register_hook</span><span class="p">(</span><span class="n">hook_type</span><span class="p">,</span> <span class="n">func</span><span class="p">)</span></code>

<a href="#aiperf.common.hooks.HookSystem.register_hook" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Register a hook function for a given hook type.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>hook_type</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="HookType = AIPerfHook | str

  
      module-attribute
   (aiperf.common.hooks.HookType)" href="#aiperf.common.hooks.HookType">HookType</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The hook type to register the function for.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>func</code>
            </td>
            <td>
                  <code><span title="collections.abc.Callable">Callable</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The function to register.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>aiperf/common/hooks.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">89</span>
<span class="normal">90</span>
<span class="normal">91</span>
<span class="normal">92</span>
<span class="normal">93</span>
<span class="normal">94</span>
<span class="normal">95</span>
<span class="normal">96</span>
<span class="normal">97</span>
<span class="normal">98</span>
<span class="normal">99</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">register_hook</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">hook_type</span><span class="p">:</span> <span class="n">HookType</span><span class="p">,</span> <span class="n">func</span><span class="p">:</span> <span class="n">Callable</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Register a hook function for a given hook type.</span>

<span class="sd">    Args:</span>
<span class="sd">        hook_type: The hook type to register the function for.</span>
<span class="sd">        func: The function to register.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">hook_type</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">supported_hooks</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">UnsupportedHookError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Hook </span><span class="si">{</span><span class="n">hook_type</span><span class="si">}</span><span class="s2"> is not supported by class.&quot;</span><span class="p">)</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">_hooks</span><span class="o">.</span><span class="n">setdefault</span><span class="p">(</span><span class="n">hook_type</span><span class="p">,</span> <span class="p">[])</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">func</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="aiperf.common.hooks.HookSystem.run_hooks" class="doc doc-heading">
            <code class=" language-python"><span class="n">run_hooks</span><span class="p">(</span><span class="n">hook_type</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#aiperf.common.hooks.HookSystem.run_hooks" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Run all the hooks for a given hook type serially. This will wait for each
hook to complete before running the next one.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>hook_type</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="HookType = AIPerfHook | str

  
      module-attribute
   (aiperf.common.hooks.HookType)" href="#aiperf.common.hooks.HookType">HookType</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The hook type to run.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>*args</code>
            </td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The arguments to pass to the hooks.</p>
              </div>
            </td>
            <td>
                  <code>()</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>**kwargs</code>
            </td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The keyword arguments to pass to the hooks.</p>
              </div>
            </td>
            <td>
                  <code>{}</code>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>aiperf/common/hooks.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">run_hooks</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">hook_type</span><span class="p">:</span> <span class="n">HookType</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Run all the hooks for a given hook type serially. This will wait for each</span>
<span class="sd">    hook to complete before running the next one.</span>

<span class="sd">    Args:</span>
<span class="sd">        hook_type: The hook type to run.</span>
<span class="sd">        *args: The arguments to pass to the hooks.</span>
<span class="sd">        **kwargs: The keyword arguments to pass to the hooks.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">hook_type</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">supported_hooks</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">UnsupportedHookError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Hook </span><span class="si">{</span><span class="n">hook_type</span><span class="si">}</span><span class="s2"> is not supported by class.&quot;</span><span class="p">)</span>

    <span class="n">exceptions</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="ne">Exception</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">func</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_hooks</span><span class="p">(</span><span class="n">hook_type</span><span class="p">):</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">inspect</span><span class="o">.</span><span class="n">iscoroutinefunction</span><span class="p">(</span><span class="n">func</span><span class="p">):</span>
                <span class="k">await</span> <span class="n">func</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">await</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">to_thread</span><span class="p">(</span><span class="n">func</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Error running hook </span><span class="si">{</span><span class="n">func</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="n">exceptions</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">exceptions</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">AIPerfMultiError</span><span class="p">(</span><span class="s2">&quot;Errors running hooks&quot;</span><span class="p">,</span> <span class="n">exceptions</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="aiperf.common.hooks.HookSystem.run_hooks_async" class="doc doc-heading">
            <code class=" language-python"><span class="n">run_hooks_async</span><span class="p">(</span><span class="n">hook_type</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#aiperf.common.hooks.HookSystem.run_hooks_async" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Run all the hooks for a given hook type concurrently. This will run all
the hooks at the same time and return when all the hooks have completed.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>hook_type</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="HookType = AIPerfHook | str

  
      module-attribute
   (aiperf.common.hooks.HookType)" href="#aiperf.common.hooks.HookType">HookType</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The hook type to run.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>*args</code>
            </td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The arguments to pass to the hooks.</p>
              </div>
            </td>
            <td>
                  <code>()</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>**kwargs</code>
            </td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The keyword arguments to pass to the hooks.</p>
              </div>
            </td>
            <td>
                  <code>{}</code>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>aiperf/common/hooks.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">run_hooks_async</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">hook_type</span><span class="p">:</span> <span class="n">HookType</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Run all the hooks for a given hook type concurrently. This will run all</span>
<span class="sd">    the hooks at the same time and return when all the hooks have completed.</span>

<span class="sd">    Args:</span>
<span class="sd">        hook_type: The hook type to run.</span>
<span class="sd">        *args: The arguments to pass to the hooks.</span>
<span class="sd">        **kwargs: The keyword arguments to pass to the hooks.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">hook_type</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">supported_hooks</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">UnsupportedHookError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Hook </span><span class="si">{</span><span class="n">hook_type</span><span class="si">}</span><span class="s2"> is not supported by class.&quot;</span><span class="p">)</span>

    <span class="n">coroutines</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">Awaitable</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">func</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_hooks</span><span class="p">(</span><span class="n">hook_type</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">inspect</span><span class="o">.</span><span class="n">iscoroutinefunction</span><span class="p">(</span><span class="n">func</span><span class="p">):</span>
            <span class="n">coroutines</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">func</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">coroutines</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">asyncio</span><span class="o">.</span><span class="n">to_thread</span><span class="p">(</span><span class="n">func</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">))</span>

    <span class="k">if</span> <span class="n">coroutines</span><span class="p">:</span>
        <span class="n">results</span> <span class="o">=</span> <span class="k">await</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">gather</span><span class="p">(</span><span class="o">*</span><span class="n">coroutines</span><span class="p">,</span> <span class="n">return_exceptions</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

        <span class="n">exceptions</span> <span class="o">=</span> <span class="p">[</span><span class="n">result</span> <span class="k">for</span> <span class="n">result</span> <span class="ow">in</span> <span class="n">results</span> <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="ne">Exception</span><span class="p">)]</span>
        <span class="k">if</span> <span class="n">exceptions</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">AIPerfMultiError</span><span class="p">(</span><span class="s2">&quot;Errors running hooks&quot;</span><span class="p">,</span> <span class="n">exceptions</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="aiperf.common.hooks.HooksMixin" class="doc doc-heading">
            <code>HooksMixin</code>


<a href="#aiperf.common.hooks.HooksMixin" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">


        <p>Mixin to add hook support to a class. It abstracts away the details of the
:class:<code>HookSystem</code> and provides a simple interface for registering and running hooks.</p>







              <details class="quote">
                <summary>Source code in <code>aiperf/common/hooks.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">281</span>
<span class="normal">282</span>
<span class="normal">283</span>
<span class="normal">284</span>
<span class="normal">285</span>
<span class="normal">286</span>
<span class="normal">287</span>
<span class="normal">288</span>
<span class="normal">289</span>
<span class="normal">290</span>
<span class="normal">291</span>
<span class="normal">292</span>
<span class="normal">293</span>
<span class="normal">294</span>
<span class="normal">295</span>
<span class="normal">296</span>
<span class="normal">297</span>
<span class="normal">298</span>
<span class="normal">299</span>
<span class="normal">300</span>
<span class="normal">301</span>
<span class="normal">302</span>
<span class="normal">303</span>
<span class="normal">304</span>
<span class="normal">305</span>
<span class="normal">306</span>
<span class="normal">307</span>
<span class="normal">308</span>
<span class="normal">309</span>
<span class="normal">310</span>
<span class="normal">311</span>
<span class="normal">312</span>
<span class="normal">313</span>
<span class="normal">314</span>
<span class="normal">315</span>
<span class="normal">316</span>
<span class="normal">317</span>
<span class="normal">318</span>
<span class="normal">319</span>
<span class="normal">320</span>
<span class="normal">321</span>
<span class="normal">322</span>
<span class="normal">323</span>
<span class="normal">324</span>
<span class="normal">325</span>
<span class="normal">326</span>
<span class="normal">327</span>
<span class="normal">328</span>
<span class="normal">329</span>
<span class="normal">330</span>
<span class="normal">331</span>
<span class="normal">332</span>
<span class="normal">333</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">HooksMixin</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Mixin to add hook support to a class. It abstracts away the details of the</span>
<span class="sd">    :class:`HookSystem` and provides a simple interface for registering and running hooks.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="c1"># Class attributes that are set by the :func:`supports_hooks` decorator</span>
    <span class="n">supported_hooks</span><span class="p">:</span> <span class="nb">set</span><span class="p">[</span><span class="n">HookType</span><span class="p">]</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Initialize the hook system and register all functions that are decorated with a hook decorator.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Initialize the hook system</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_hook_system</span> <span class="o">=</span> <span class="n">HookSystem</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">supported_hooks</span><span class="p">)</span>

        <span class="c1"># Register all functions that are decorated with a hook decorator</span>
        <span class="c1"># Iterate through MRO in reverse order to ensure base class hooks are registered first</span>
        <span class="k">for</span> <span class="bp">cls</span> <span class="ow">in</span> <span class="nb">reversed</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__mro__</span><span class="p">):</span>
            <span class="c1"># Skip object and other non-hook classes</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="nb">issubclass</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">HooksMixin</span><span class="p">):</span>
                <span class="k">continue</span>

            <span class="c1"># Get methods defined directly in this class (not inherited)</span>
            <span class="k">for</span> <span class="n">_</span><span class="p">,</span> <span class="n">attr</span> <span class="ow">in</span> <span class="bp">cls</span><span class="o">.</span><span class="vm">__dict__</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                <span class="k">if</span> <span class="nb">callable</span><span class="p">(</span><span class="n">attr</span><span class="p">)</span> <span class="ow">and</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">attr</span><span class="p">,</span> <span class="n">AIPERF_HOOK_TYPE</span><span class="p">):</span>
                    <span class="c1"># Get the hook type from the function</span>
                    <span class="n">hook_type</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">attr</span><span class="p">,</span> <span class="n">AIPERF_HOOK_TYPE</span><span class="p">)</span>
                    <span class="c1"># Bind the method to the instance</span>
                    <span class="n">bound_method</span> <span class="o">=</span> <span class="n">attr</span><span class="o">.</span><span class="fm">__get__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="bp">cls</span><span class="p">)</span>
                    <span class="c1"># Register the function with the hook type</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">register_hook</span><span class="p">(</span><span class="n">hook_type</span><span class="p">,</span> <span class="n">bound_method</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">register_hook</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">hook_type</span><span class="p">:</span> <span class="n">HookType</span><span class="p">,</span> <span class="n">func</span><span class="p">:</span> <span class="n">Callable</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Register a hook function for a given hook type.</span>

<span class="sd">        Args:</span>
<span class="sd">            hook_type: The hook type to register the function for.</span>
<span class="sd">            func: The function to register.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_hook_system</span><span class="o">.</span><span class="n">register_hook</span><span class="p">(</span><span class="n">hook_type</span><span class="p">,</span> <span class="n">func</span><span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">run_hooks</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">hook_type</span><span class="p">:</span> <span class="n">HookType</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Run all the hooks serially. See :meth:`HookSystem.run_hooks`.&quot;&quot;&quot;</span>
        <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_hook_system</span><span class="o">.</span><span class="n">run_hooks</span><span class="p">(</span><span class="n">hook_type</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">run_hooks_async</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">hook_type</span><span class="p">:</span> <span class="n">HookType</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Run all the hooks concurrently. See :meth:`HookSystem.run_hooks_async`.&quot;&quot;&quot;</span>
        <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_hook_system</span><span class="o">.</span><span class="n">run_hooks_async</span><span class="p">(</span><span class="n">hook_type</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">get_hooks</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">hook_type</span><span class="p">:</span> <span class="n">HookType</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="n">Callable</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get all the registered hooks for the given hook type. See :meth:`HookSystem.get_hooks`.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_hook_system</span><span class="o">.</span><span class="n">get_hooks</span><span class="p">(</span><span class="n">hook_type</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h3 id="aiperf.common.hooks.HooksMixin.__init__" class="doc doc-heading">
            <code class=" language-python"><span class="fm">__init__</span><span class="p">()</span></code>

<a href="#aiperf.common.hooks.HooksMixin.__init__" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Initialize the hook system and register all functions that are decorated with a hook decorator.</p>


            <details class="quote">
              <summary>Source code in <code>aiperf/common/hooks.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">290</span>
<span class="normal">291</span>
<span class="normal">292</span>
<span class="normal">293</span>
<span class="normal">294</span>
<span class="normal">295</span>
<span class="normal">296</span>
<span class="normal">297</span>
<span class="normal">298</span>
<span class="normal">299</span>
<span class="normal">300</span>
<span class="normal">301</span>
<span class="normal">302</span>
<span class="normal">303</span>
<span class="normal">304</span>
<span class="normal">305</span>
<span class="normal">306</span>
<span class="normal">307</span>
<span class="normal">308</span>
<span class="normal">309</span>
<span class="normal">310</span>
<span class="normal">311</span>
<span class="normal">312</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Initialize the hook system and register all functions that are decorated with a hook decorator.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Initialize the hook system</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_hook_system</span> <span class="o">=</span> <span class="n">HookSystem</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">supported_hooks</span><span class="p">)</span>

    <span class="c1"># Register all functions that are decorated with a hook decorator</span>
    <span class="c1"># Iterate through MRO in reverse order to ensure base class hooks are registered first</span>
    <span class="k">for</span> <span class="bp">cls</span> <span class="ow">in</span> <span class="nb">reversed</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__mro__</span><span class="p">):</span>
        <span class="c1"># Skip object and other non-hook classes</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">issubclass</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">HooksMixin</span><span class="p">):</span>
            <span class="k">continue</span>

        <span class="c1"># Get methods defined directly in this class (not inherited)</span>
        <span class="k">for</span> <span class="n">_</span><span class="p">,</span> <span class="n">attr</span> <span class="ow">in</span> <span class="bp">cls</span><span class="o">.</span><span class="vm">__dict__</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="k">if</span> <span class="nb">callable</span><span class="p">(</span><span class="n">attr</span><span class="p">)</span> <span class="ow">and</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">attr</span><span class="p">,</span> <span class="n">AIPERF_HOOK_TYPE</span><span class="p">):</span>
                <span class="c1"># Get the hook type from the function</span>
                <span class="n">hook_type</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">attr</span><span class="p">,</span> <span class="n">AIPERF_HOOK_TYPE</span><span class="p">)</span>
                <span class="c1"># Bind the method to the instance</span>
                <span class="n">bound_method</span> <span class="o">=</span> <span class="n">attr</span><span class="o">.</span><span class="fm">__get__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="bp">cls</span><span class="p">)</span>
                <span class="c1"># Register the function with the hook type</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">register_hook</span><span class="p">(</span><span class="n">hook_type</span><span class="p">,</span> <span class="n">bound_method</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="aiperf.common.hooks.HooksMixin.get_hooks" class="doc doc-heading">
            <code class=" language-python"><span class="n">get_hooks</span><span class="p">(</span><span class="n">hook_type</span><span class="p">)</span></code>

<a href="#aiperf.common.hooks.HooksMixin.get_hooks" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Get all the registered hooks for the given hook type. See :meth:<code>HookSystem.get_hooks</code>.</p>


            <details class="quote">
              <summary>Source code in <code>aiperf/common/hooks.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">331</span>
<span class="normal">332</span>
<span class="normal">333</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">get_hooks</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">hook_type</span><span class="p">:</span> <span class="n">HookType</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="n">Callable</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Get all the registered hooks for the given hook type. See :meth:`HookSystem.get_hooks`.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_hook_system</span><span class="o">.</span><span class="n">get_hooks</span><span class="p">(</span><span class="n">hook_type</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="aiperf.common.hooks.HooksMixin.register_hook" class="doc doc-heading">
            <code class=" language-python"><span class="n">register_hook</span><span class="p">(</span><span class="n">hook_type</span><span class="p">,</span> <span class="n">func</span><span class="p">)</span></code>

<a href="#aiperf.common.hooks.HooksMixin.register_hook" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Register a hook function for a given hook type.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>hook_type</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="HookType = AIPerfHook | str

  
      module-attribute
   (aiperf.common.hooks.HookType)" href="#aiperf.common.hooks.HookType">HookType</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The hook type to register the function for.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>func</code>
            </td>
            <td>
                  <code><span title="collections.abc.Callable">Callable</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The function to register.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>aiperf/common/hooks.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">314</span>
<span class="normal">315</span>
<span class="normal">316</span>
<span class="normal">317</span>
<span class="normal">318</span>
<span class="normal">319</span>
<span class="normal">320</span>
<span class="normal">321</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">register_hook</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">hook_type</span><span class="p">:</span> <span class="n">HookType</span><span class="p">,</span> <span class="n">func</span><span class="p">:</span> <span class="n">Callable</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Register a hook function for a given hook type.</span>

<span class="sd">    Args:</span>
<span class="sd">        hook_type: The hook type to register the function for.</span>
<span class="sd">        func: The function to register.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_hook_system</span><span class="o">.</span><span class="n">register_hook</span><span class="p">(</span><span class="n">hook_type</span><span class="p">,</span> <span class="n">func</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="aiperf.common.hooks.HooksMixin.run_hooks" class="doc doc-heading">
            <code class=" language-python"><span class="n">run_hooks</span><span class="p">(</span><span class="n">hook_type</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#aiperf.common.hooks.HooksMixin.run_hooks" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Run all the hooks serially. See :meth:<code>HookSystem.run_hooks</code>.</p>


            <details class="quote">
              <summary>Source code in <code>aiperf/common/hooks.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">323</span>
<span class="normal">324</span>
<span class="normal">325</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">run_hooks</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">hook_type</span><span class="p">:</span> <span class="n">HookType</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Run all the hooks serially. See :meth:`HookSystem.run_hooks`.&quot;&quot;&quot;</span>
    <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_hook_system</span><span class="o">.</span><span class="n">run_hooks</span><span class="p">(</span><span class="n">hook_type</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="aiperf.common.hooks.HooksMixin.run_hooks_async" class="doc doc-heading">
            <code class=" language-python"><span class="n">run_hooks_async</span><span class="p">(</span><span class="n">hook_type</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#aiperf.common.hooks.HooksMixin.run_hooks_async" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Run all the hooks concurrently. See :meth:<code>HookSystem.run_hooks_async</code>.</p>


            <details class="quote">
              <summary>Source code in <code>aiperf/common/hooks.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">327</span>
<span class="normal">328</span>
<span class="normal">329</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">run_hooks_async</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">hook_type</span><span class="p">:</span> <span class="n">HookType</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Run all the hooks concurrently. See :meth:`HookSystem.run_hooks_async`.&quot;&quot;&quot;</span>
    <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_hook_system</span><span class="o">.</span><span class="n">run_hooks_async</span><span class="p">(</span><span class="n">hook_type</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>


<div class="doc doc-object doc-function">


<h2 id="aiperf.common.hooks.aiperf_task" class="doc doc-heading">
            <code class=" language-python"><span class="n">aiperf_task</span><span class="p">(</span><span class="n">func</span><span class="p">)</span></code>

<a href="#aiperf.common.hooks.aiperf_task" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">

        <p>Decorator to indicate that the function is a task function. It will be started
and stopped automatically by the base class lifecycle.
See :func:<code>aiperf.common.hooks.hook_decorator</code>.</p>


            <details class="quote">
              <summary>Source code in <code>aiperf/common/hooks.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">aiperf_task</span><span class="p">(</span><span class="n">func</span><span class="p">:</span> <span class="n">Callable</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Callable</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Decorator to indicate that the function is a task function. It will be started</span>
<span class="sd">    and stopped automatically by the base class lifecycle.</span>
<span class="sd">    See :func:`aiperf.common.hooks.hook_decorator`.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">hook_decorator</span><span class="p">(</span><span class="n">AIPerfHook</span><span class="o">.</span><span class="n">AIPERF_TASK</span><span class="p">,</span> <span class="n">func</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="aiperf.common.hooks.hook_decorator" class="doc doc-heading">
            <code class=" language-python"><span class="n">hook_decorator</span><span class="p">(</span><span class="n">hook_type</span><span class="p">,</span> <span class="n">func</span><span class="p">)</span></code>

<a href="#aiperf.common.hooks.hook_decorator" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">

        <p>Generic decorator to specify that the function should be called during
a specific hook.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>hook_type</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="HookType = AIPerfHook | str

  
      module-attribute
   (aiperf.common.hooks.HookType)" href="#aiperf.common.hooks.HookType">HookType</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The hook type to decorate the function with.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>func</code>
            </td>
            <td>
                  <code><span title="collections.abc.Callable">Callable</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The function to decorate.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>
        <p>Returns:
    The decorated function.</p>


            <details class="quote">
              <summary>Source code in <code>aiperf/common/hooks.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">hook_decorator</span><span class="p">(</span><span class="n">hook_type</span><span class="p">:</span> <span class="n">HookType</span><span class="p">,</span> <span class="n">func</span><span class="p">:</span> <span class="n">Callable</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Callable</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Generic decorator to specify that the function should be called during</span>
<span class="sd">    a specific hook.</span>

<span class="sd">    Args:</span>
<span class="sd">        hook_type: The hook type to decorate the function with.</span>
<span class="sd">        func: The function to decorate.</span>
<span class="sd">    Returns:</span>
<span class="sd">        The decorated function.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="nb">setattr</span><span class="p">(</span><span class="n">func</span><span class="p">,</span> <span class="n">AIPERF_HOOK_TYPE</span><span class="p">,</span> <span class="n">hook_type</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">func</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="aiperf.common.hooks.on_cleanup" class="doc doc-heading">
            <code class=" language-python"><span class="n">on_cleanup</span><span class="p">(</span><span class="n">func</span><span class="p">)</span></code>

<a href="#aiperf.common.hooks.on_cleanup" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">

        <p>Decorator to specify that the function should be called during cleanup.
See :func:<code>aiperf.common.hooks.hook_decorator</code>.</p>


            <details class="quote">
              <summary>Source code in <code>aiperf/common/hooks.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">on_cleanup</span><span class="p">(</span><span class="n">func</span><span class="p">:</span> <span class="n">Callable</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Callable</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Decorator to specify that the function should be called during cleanup.</span>
<span class="sd">    See :func:`aiperf.common.hooks.hook_decorator`.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">hook_decorator</span><span class="p">(</span><span class="n">AIPerfHook</span><span class="o">.</span><span class="n">ON_CLEANUP</span><span class="p">,</span> <span class="n">func</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="aiperf.common.hooks.on_configure" class="doc doc-heading">
            <code class=" language-python"><span class="n">on_configure</span><span class="p">(</span><span class="n">func</span><span class="p">)</span></code>

<a href="#aiperf.common.hooks.on_configure" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">

        <p>Decorator to specify that the function should be called during the service configuration.
See :func:<code>aiperf.common.hooks.hook_decorator</code>.</p>


            <details class="quote">
              <summary>Source code in <code>aiperf/common/hooks.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">on_configure</span><span class="p">(</span><span class="n">func</span><span class="p">:</span> <span class="n">Callable</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Callable</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Decorator to specify that the function should be called during the service configuration.</span>
<span class="sd">    See :func:`aiperf.common.hooks.hook_decorator`.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">hook_decorator</span><span class="p">(</span><span class="n">AIPerfHook</span><span class="o">.</span><span class="n">ON_CONFIGURE</span><span class="p">,</span> <span class="n">func</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="aiperf.common.hooks.on_init" class="doc doc-heading">
            <code class=" language-python"><span class="n">on_init</span><span class="p">(</span><span class="n">func</span><span class="p">)</span></code>

<a href="#aiperf.common.hooks.on_init" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">

        <p>Decorator to specify that the function should be called during initialization.
See :func:<code>aiperf.common.hooks.hook_decorator</code>.</p>


            <details class="quote">
              <summary>Source code in <code>aiperf/common/hooks.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">on_init</span><span class="p">(</span><span class="n">func</span><span class="p">:</span> <span class="n">Callable</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Callable</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Decorator to specify that the function should be called during initialization.</span>
<span class="sd">    See :func:`aiperf.common.hooks.hook_decorator`.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">hook_decorator</span><span class="p">(</span><span class="n">AIPerfHook</span><span class="o">.</span><span class="n">ON_INIT</span><span class="p">,</span> <span class="n">func</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="aiperf.common.hooks.on_run" class="doc doc-heading">
            <code class=" language-python"><span class="n">on_run</span><span class="p">(</span><span class="n">func</span><span class="p">)</span></code>

<a href="#aiperf.common.hooks.on_run" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">

        <p>Decorator to specify that the function should be called during run.
See :func:<code>aiperf.common.hooks.hook_decorator</code>.</p>


            <details class="quote">
              <summary>Source code in <code>aiperf/common/hooks.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">on_run</span><span class="p">(</span><span class="n">func</span><span class="p">:</span> <span class="n">Callable</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Callable</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Decorator to specify that the function should be called during run.</span>
<span class="sd">    See :func:`aiperf.common.hooks.hook_decorator`.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">hook_decorator</span><span class="p">(</span><span class="n">AIPerfHook</span><span class="o">.</span><span class="n">ON_RUN</span><span class="p">,</span> <span class="n">func</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="aiperf.common.hooks.on_set_state" class="doc doc-heading">
            <code class=" language-python"><span class="n">on_set_state</span><span class="p">(</span><span class="n">func</span><span class="p">)</span></code>

<a href="#aiperf.common.hooks.on_set_state" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">

        <p>Decorator to specify that the function should be called when the service state is set.
See :func:<code>aiperf.common.hooks.hook_decorator</code>.</p>


            <details class="quote">
              <summary>Source code in <code>aiperf/common/hooks.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">on_set_state</span><span class="p">(</span>
    <span class="n">func</span><span class="p">:</span> <span class="n">Callable</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Callable</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Decorator to specify that the function should be called when the service state is set.</span>
<span class="sd">    See :func:`aiperf.common.hooks.hook_decorator`.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">hook_decorator</span><span class="p">(</span><span class="n">AIPerfHook</span><span class="o">.</span><span class="n">ON_SET_STATE</span><span class="p">,</span> <span class="n">func</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="aiperf.common.hooks.on_start" class="doc doc-heading">
            <code class=" language-python"><span class="n">on_start</span><span class="p">(</span><span class="n">func</span><span class="p">)</span></code>

<a href="#aiperf.common.hooks.on_start" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">

        <p>Decorator to specify that the function should be called during start.
See :func:<code>aiperf.common.hooks.hook_decorator</code>.</p>


            <details class="quote">
              <summary>Source code in <code>aiperf/common/hooks.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">on_start</span><span class="p">(</span><span class="n">func</span><span class="p">:</span> <span class="n">Callable</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Callable</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Decorator to specify that the function should be called during start.</span>
<span class="sd">    See :func:`aiperf.common.hooks.hook_decorator`.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">hook_decorator</span><span class="p">(</span><span class="n">AIPerfHook</span><span class="o">.</span><span class="n">ON_START</span><span class="p">,</span> <span class="n">func</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="aiperf.common.hooks.on_stop" class="doc doc-heading">
            <code class=" language-python"><span class="n">on_stop</span><span class="p">(</span><span class="n">func</span><span class="p">)</span></code>

<a href="#aiperf.common.hooks.on_stop" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">

        <p>Decorator to specify that the function should be called during stop.
See :func:<code>aiperf.common.hooks.hook_decorator</code>.</p>


            <details class="quote">
              <summary>Source code in <code>aiperf/common/hooks.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">on_stop</span><span class="p">(</span><span class="n">func</span><span class="p">:</span> <span class="n">Callable</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Callable</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Decorator to specify that the function should be called during stop.</span>
<span class="sd">    See :func:`aiperf.common.hooks.hook_decorator`.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">hook_decorator</span><span class="p">(</span><span class="n">AIPerfHook</span><span class="o">.</span><span class="n">ON_STOP</span><span class="p">,</span> <span class="n">func</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="aiperf.common.hooks.supports_hooks" class="doc doc-heading">
            <code class=" language-python"><span class="n">supports_hooks</span><span class="p">(</span><span class="o">*</span><span class="n">supported_hook_types</span><span class="p">)</span></code>

<a href="#aiperf.common.hooks.supports_hooks" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">

        <p>Decorator to indicate that a class supports hooks and sets the
supported hook types.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>supported_hook_types</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="HookType = AIPerfHook | str

  
      module-attribute
   (aiperf.common.hooks.HookType)" href="#aiperf.common.hooks.HookType">HookType</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The hook types that the class supports.</p>
              </div>
            </td>
            <td>
                  <code>()</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="collections.abc.Callable">Callable</span>[[<span title="type">type</span>], <span title="type">type</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The decorated class</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>aiperf/common/hooks.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">supports_hooks</span><span class="p">(</span>
    <span class="o">*</span><span class="n">supported_hook_types</span><span class="p">:</span> <span class="n">HookType</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Callable</span><span class="p">[[</span><span class="nb">type</span><span class="p">],</span> <span class="nb">type</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Decorator to indicate that a class supports hooks and sets the</span>
<span class="sd">    supported hook types.</span>

<span class="sd">    Args:</span>
<span class="sd">        supported_hook_types: The hook types that the class supports.</span>

<span class="sd">    Returns:</span>
<span class="sd">        The decorated class</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">decorator</span><span class="p">(</span><span class="bp">cls</span><span class="p">:</span> <span class="nb">type</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">type</span><span class="p">:</span>
        <span class="c1"># Ensure the class inherits from HooksMixin</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">issubclass</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">HooksMixin</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Class </span><span class="si">{</span><span class="bp">cls</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s2"> does not inherit from HooksMixin.&quot;</span><span class="p">)</span>

        <span class="c1"># Inherit any hooks defined by base classes in the MRO (Method Resolution Order).</span>
        <span class="n">base_hooks</span> <span class="o">=</span> <span class="p">[</span>
            <span class="n">base</span><span class="o">.</span><span class="n">supported_hooks</span>
            <span class="k">for</span> <span class="n">base</span> <span class="ow">in</span> <span class="bp">cls</span><span class="o">.</span><span class="vm">__mro__</span><span class="p">[</span><span class="mi">1</span><span class="p">:]</span>  <span class="c1"># Skip this class itself (cls)</span>
            <span class="k">if</span> <span class="nb">issubclass</span><span class="p">(</span>
                <span class="n">base</span><span class="p">,</span> <span class="n">HooksMixin</span>
            <span class="p">)</span>  <span class="c1"># Only include classes that inherit from HooksMixin</span>
        <span class="p">]</span>

        <span class="c1"># Set the supported hooks to be the union of the existing base hooks and the new supported hook types.</span>
        <span class="bp">cls</span><span class="o">.</span><span class="n">supported_hooks</span> <span class="o">=</span> <span class="nb">set</span><span class="o">.</span><span class="n">union</span><span class="p">(</span><span class="o">*</span><span class="n">base_hooks</span><span class="p">,</span> <span class="nb">set</span><span class="p">(</span><span class="n">supported_hook_types</span><span class="p">))</span>
        <span class="k">return</span> <span class="bp">cls</span>

    <span class="k">return</span> <span class="n">decorator</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div><h2 id="aiperfcommoninterfaces">aiperf.common.interfaces<a class="headerlink" href="#aiperfcommoninterfaces" title="Permanent link">&para;</a></h2>


<div class="doc doc-object doc-module">



<a id="aiperf.common.interfaces"></a>
    <div class="doc doc-contents first">









  <div class="doc doc-children">








<div class="doc doc-object doc-class">



<h2 id="aiperf.common.interfaces.DataExporterProtocol" class="doc doc-heading">
            <code>DataExporterProtocol</code>


<a href="#aiperf.common.interfaces.DataExporterProtocol" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="typing.Protocol">Protocol</span></code></p>


        <p>Protocol for data exporters.
Any class implementing this protocol must provide an <code>export</code> method
that takes a list of Record objects and handles exporting them appropriately.</p>







              <details class="quote">
                <summary>Source code in <code>aiperf/common/interfaces.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">DataExporterProtocol</span><span class="p">(</span><span class="n">Protocol</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Protocol for data exporters.</span>
<span class="sd">    Any class implementing this protocol must provide an `export` method</span>
<span class="sd">    that takes a list of Record objects and handles exporting them appropriately.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">export</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">records</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">Record</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span> <span class="o">...</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">











  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="aiperf.common.interfaces.PostProcessorProtocol" class="doc doc-heading">
            <code>PostProcessorProtocol</code>


<a href="#aiperf.common.interfaces.PostProcessorProtocol" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="typing.Protocol">Protocol</span></code></p>


        <p>PostProcessorProtocol is a protocol that defines the API for post-processors.
It requires an <code>process</code> method that takes a list of records and returns a result.</p>







              <details class="quote">
                <summary>Source code in <code>aiperf/common/interfaces.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">PostProcessorProtocol</span><span class="p">(</span><span class="n">Protocol</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    PostProcessorProtocol is a protocol that defines the API for post-processors.</span>
<span class="sd">    It requires an `process` method that takes a list of records and returns a result.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">process</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">records</span><span class="p">:</span> <span class="nb">dict</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Execute the post-processing logic on the given payload.</span>

<span class="sd">        :param payload: The input data to be processed.</span>
<span class="sd">        :return: The processed data as a dictionary.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">pass</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h3 id="aiperf.common.interfaces.PostProcessorProtocol.process" class="doc doc-heading">
            <code class=" language-python"><span class="n">process</span><span class="p">(</span><span class="n">records</span><span class="p">)</span></code>

<a href="#aiperf.common.interfaces.PostProcessorProtocol.process" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Execute the post-processing logic on the given payload.</p>
<p>:param payload: The input data to be processed.
:return: The processed data as a dictionary.</p>


            <details class="quote">
              <summary>Source code in <code>aiperf/common/interfaces.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">process</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">records</span><span class="p">:</span> <span class="nb">dict</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Execute the post-processing logic on the given payload.</span>

<span class="sd">    :param payload: The input data to be processed.</span>
<span class="sd">    :return: The processed data as a dictionary.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">pass</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>




  </div>

    </div>

</div><h2 id="aiperfcommonmessages">aiperf.common.messages<a class="headerlink" href="#aiperfcommonmessages" title="Permanent link">&para;</a></h2>


<div class="doc doc-object doc-module">



<a id="aiperf.common.messages"></a>
    <div class="doc doc-contents first">









  <div class="doc doc-children">








<div class="doc doc-object doc-class">



<h2 id="aiperf.common.messages.BaseMessage" class="doc doc-heading">
            <code>BaseMessage</code>


<a href="#aiperf.common.messages.BaseMessage" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="Message (aiperf.common.messages.Message)" href="#aiperf.common.messages.Message">Message</a></code></p>


        <p>Base message model with common fields for all messages.</p>
<p>Each message model should inherit from this class, set the message_type field,
and define its own additional fields.</p>
<p>Optionally, the @exclude_if_none decorator can be used to specify which fields
should be excluded from the serialized message if they are None.</p>
<p>Example:</p>
<div class="codehilite"><pre><span></span><code><span class="nd">@exclude_if_none</span><span class="p">([</span><span class="s2">&quot;some_field&quot;</span><span class="p">])</span>
<span class="k">class</span><span class="w"> </span><span class="nc">ExampleMessage</span><span class="p">(</span><span class="n">BaseMessage</span><span class="p">):</span>
    <span class="n">some_field</span><span class="p">:</span> <span class="nb">int</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
    <span class="n">other_field</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</code></pre></div>







              <details class="quote">
                <summary>Source code in <code>aiperf/common/messages.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@exclude_if_none</span><span class="p">([</span><span class="s2">&quot;request_ns&quot;</span><span class="p">,</span> <span class="s2">&quot;request_id&quot;</span><span class="p">])</span>
<span class="k">class</span><span class="w"> </span><span class="nc">BaseMessage</span><span class="p">(</span><span class="n">Message</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Base message model with common fields for all messages.</span>

<span class="sd">    Each message model should inherit from this class, set the message_type field,</span>
<span class="sd">    and define its own additional fields.</span>

<span class="sd">    Optionally, the @exclude_if_none decorator can be used to specify which fields</span>
<span class="sd">    should be excluded from the serialized message if they are None.</span>

<span class="sd">    Example:</span>
<span class="sd">    ```python</span>
<span class="sd">    @exclude_if_none([&quot;some_field&quot;])</span>
<span class="sd">    class ExampleMessage(BaseMessage):</span>
<span class="sd">        some_field: int | None = Field(default=None)</span>
<span class="sd">        other_field: int = Field(default=1)</span>
<span class="sd">    ```</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">_exclude_if_none_fields</span><span class="p">:</span> <span class="n">ClassVar</span><span class="p">[</span><span class="nb">set</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Set of field names that should be excluded from the serialized message if they</span>
<span class="sd">    are None. This is set by the @exclude_if_none decorator.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">request_ns</span><span class="p">:</span> <span class="nb">int</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">default</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Timestamp of the request&quot;</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="n">request_id</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">default</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;ID of the request&quot;</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="nd">@model_serializer</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">_serialize_message</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Serialize the message to a dictionary.</span>

<span class="sd">        This method overrides the default serializer to exclude fields that have a</span>
<span class="sd">        value of None and have the EXCLUDE_IF_NONE json_schema_extra key set to True.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="p">{</span>
            <span class="n">k</span><span class="p">:</span> <span class="n">v</span>
            <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="bp">self</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="n">k</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_exclude_if_none_fields</span> <span class="ow">and</span> <span class="n">v</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">)</span>
        <span class="p">}</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">











  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="aiperf.common.messages.BaseServiceErrorMessage" class="doc doc-heading">
            <code>BaseServiceErrorMessage</code>


<a href="#aiperf.common.messages.BaseServiceErrorMessage" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="BaseServiceMessage (aiperf.common.messages.BaseServiceMessage)" href="#aiperf.common.messages.BaseServiceMessage">BaseServiceMessage</a></code></p>


        <p>Base message containing error data.</p>







              <details class="quote">
                <summary>Source code in <code>aiperf/common/messages.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">278</span>
<span class="normal">279</span>
<span class="normal">280</span>
<span class="normal">281</span>
<span class="normal">282</span>
<span class="normal">283</span>
<span class="normal">284</span>
<span class="normal">285</span>
<span class="normal">286</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">BaseServiceErrorMessage</span><span class="p">(</span><span class="n">BaseServiceMessage</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Base message containing error data.&quot;&quot;&quot;</span>

    <span class="n">message_type</span><span class="p">:</span> <span class="n">Literal</span><span class="p">[</span><span class="n">MessageType</span><span class="o">.</span><span class="n">SERVICE_ERROR</span><span class="p">]</span> <span class="o">=</span> <span class="n">MessageType</span><span class="o">.</span><span class="n">SERVICE_ERROR</span>

    <span class="n">error</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">default</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Error information&quot;</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">











  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="aiperf.common.messages.BaseServiceMessage" class="doc doc-heading">
            <code>BaseServiceMessage</code>


<a href="#aiperf.common.messages.BaseServiceMessage" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="BaseMessage (aiperf.common.messages.BaseMessage)" href="#aiperf.common.messages.BaseMessage">BaseMessage</a></code></p>


        <p>Base message that is sent from a service. Requires a service_id field to specify
the service that sent the message.</p>







              <details class="quote">
                <summary>Source code in <code>aiperf/common/messages.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">BaseServiceMessage</span><span class="p">(</span><span class="n">BaseMessage</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Base message that is sent from a service. Requires a service_id field to specify</span>
<span class="sd">    the service that sent the message.&quot;&quot;&quot;</span>

    <span class="n">service_id</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="o">...</span><span class="p">,</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;ID of the service sending the message&quot;</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">











  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="aiperf.common.messages.BaseStatusMessage" class="doc doc-heading">
            <code>BaseStatusMessage</code>


<a href="#aiperf.common.messages.BaseStatusMessage" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="BaseServiceMessage (aiperf.common.messages.BaseServiceMessage)" href="#aiperf.common.messages.BaseServiceMessage">BaseServiceMessage</a></code></p>


        <p>Base message containing status data.
This message is sent by a service to the system controller to report its status.</p>







              <details class="quote">
                <summary>Source code in <code>aiperf/common/messages.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">BaseStatusMessage</span><span class="p">(</span><span class="n">BaseServiceMessage</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Base message containing status data.</span>
<span class="sd">    This message is sent by a service to the system controller to report its status.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="c1"># override request_ns to be auto-filled if not provided</span>
    <span class="n">request_ns</span><span class="p">:</span> <span class="nb">int</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">default</span><span class="o">=</span><span class="n">time</span><span class="o">.</span><span class="n">time_ns</span><span class="p">(),</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Timestamp of the request&quot;</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">state</span><span class="p">:</span> <span class="n">ServiceState</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="o">...</span><span class="p">,</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Current state of the service&quot;</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">service_type</span><span class="p">:</span> <span class="n">ServiceType</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="o">...</span><span class="p">,</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Type of service&quot;</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">











  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="aiperf.common.messages.CommandMessage" class="doc doc-heading">
            <code>CommandMessage</code>


<a href="#aiperf.common.messages.CommandMessage" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="BaseServiceMessage (aiperf.common.messages.BaseServiceMessage)" href="#aiperf.common.messages.BaseServiceMessage">BaseServiceMessage</a></code></p>


        <p>Message containing command data.
This message is sent by the system controller to a service to command it to do something.</p>







              <details class="quote">
                <summary>Source code in <code>aiperf/common/messages.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">CommandMessage</span><span class="p">(</span><span class="n">BaseServiceMessage</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Message containing command data.</span>
<span class="sd">    This message is sent by the system controller to a service to command it to do something.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">message_type</span><span class="p">:</span> <span class="n">Literal</span><span class="p">[</span><span class="n">MessageType</span><span class="o">.</span><span class="n">COMMAND</span><span class="p">]</span> <span class="o">=</span> <span class="n">MessageType</span><span class="o">.</span><span class="n">COMMAND</span>

    <span class="n">command</span><span class="p">:</span> <span class="n">CommandType</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="o">...</span><span class="p">,</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Command to execute&quot;</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">command_id</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">default_factory</span><span class="o">=</span><span class="k">lambda</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">uuid</span><span class="o">.</span><span class="n">uuid4</span><span class="p">()),</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Unique identifier for this command. If not provided, a random UUID will be generated.&quot;</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">require_response</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">default</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Whether a response is required for this command&quot;</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="c1"># TODO: should we allow a service_type as well to send to all services of a given type?</span>
    <span class="n">target_service_type</span><span class="p">:</span> <span class="n">ServiceType</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">default</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Type of the service to send the command to. &quot;</span>
        <span class="s2">&quot;If both `target_service_type` and `target_service_id` are None, the command is &quot;</span>
        <span class="s2">&quot;sent to all services.&quot;</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">target_service_id</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">default</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;ID of the target service to send the command to. &quot;</span>
        <span class="s2">&quot;If both `target_service_type` and `target_service_id` are None, the command is &quot;</span>
        <span class="s2">&quot;sent to all services.&quot;</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">data</span><span class="p">:</span> <span class="n">SerializeAsAny</span><span class="p">[</span><span class="n">ProcessRecordsCommandData</span> <span class="o">|</span> <span class="n">BaseModel</span> <span class="o">|</span> <span class="kc">None</span><span class="p">]</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">default</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Data to send with the command&quot;</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">











  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="aiperf.common.messages.ConversationRequestMessage" class="doc doc-heading">
            <code>ConversationRequestMessage</code>


<a href="#aiperf.common.messages.ConversationRequestMessage" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="BaseServiceMessage (aiperf.common.messages.BaseServiceMessage)" href="#aiperf.common.messages.BaseServiceMessage">BaseServiceMessage</a></code></p>


        <p>Message for a conversation request.</p>







              <details class="quote">
                <summary>Source code in <code>aiperf/common/messages.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">299</span>
<span class="normal">300</span>
<span class="normal">301</span>
<span class="normal">302</span>
<span class="normal">303</span>
<span class="normal">304</span>
<span class="normal">305</span>
<span class="normal">306</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">ConversationRequestMessage</span><span class="p">(</span><span class="n">BaseServiceMessage</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Message for a conversation request.&quot;&quot;&quot;</span>

    <span class="n">message_type</span><span class="p">:</span> <span class="n">Literal</span><span class="p">[</span><span class="n">MessageType</span><span class="o">.</span><span class="n">CONVERSATION_REQUEST</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span>
        <span class="n">MessageType</span><span class="o">.</span><span class="n">CONVERSATION_REQUEST</span>
    <span class="p">)</span>

    <span class="n">conversation_id</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="o">...</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="s2">&quot;The ID of the conversation&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">











  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="aiperf.common.messages.ConversationResponseMessage" class="doc doc-heading">
            <code>ConversationResponseMessage</code>


<a href="#aiperf.common.messages.ConversationResponseMessage" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="BaseServiceMessage (aiperf.common.messages.BaseServiceMessage)" href="#aiperf.common.messages.BaseServiceMessage">BaseServiceMessage</a></code></p>


        <p>Message for a conversation response.</p>







              <details class="quote">
                <summary>Source code in <code>aiperf/common/messages.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">309</span>
<span class="normal">310</span>
<span class="normal">311</span>
<span class="normal">312</span>
<span class="normal">313</span>
<span class="normal">314</span>
<span class="normal">315</span>
<span class="normal">316</span>
<span class="normal">317</span>
<span class="normal">318</span>
<span class="normal">319</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">ConversationResponseMessage</span><span class="p">(</span><span class="n">BaseServiceMessage</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Message for a conversation response.&quot;&quot;&quot;</span>

    <span class="n">message_type</span><span class="p">:</span> <span class="n">Literal</span><span class="p">[</span><span class="n">MessageType</span><span class="o">.</span><span class="n">CONVERSATION_RESPONSE</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span>
        <span class="n">MessageType</span><span class="o">.</span><span class="n">CONVERSATION_RESPONSE</span>
    <span class="p">)</span>

    <span class="n">conversation_id</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="o">...</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="s2">&quot;The ID of the conversation&quot;</span><span class="p">)</span>
    <span class="n">conversation_data</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="o">...</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="s2">&quot;The data of the conversation&quot;</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">











  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="aiperf.common.messages.CreditDropMessage" class="doc doc-heading">
            <code>CreditDropMessage</code>


<a href="#aiperf.common.messages.CreditDropMessage" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="BaseServiceMessage (aiperf.common.messages.BaseServiceMessage)" href="#aiperf.common.messages.BaseServiceMessage">BaseServiceMessage</a></code></p>


        <p>Message indicating that a credit has been dropped.
This message is sent by the timing manager to a workers to indicate that credit(s)
have been dropped.</p>







              <details class="quote">
                <summary>Source code in <code>aiperf/common/messages.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">CreditDropMessage</span><span class="p">(</span><span class="n">BaseServiceMessage</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Message indicating that a credit has been dropped.</span>
<span class="sd">    This message is sent by the timing manager to a workers to indicate that credit(s)</span>
<span class="sd">    have been dropped.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">message_type</span><span class="p">:</span> <span class="n">Literal</span><span class="p">[</span><span class="n">MessageType</span><span class="o">.</span><span class="n">CREDIT_DROP</span><span class="p">]</span> <span class="o">=</span> <span class="n">MessageType</span><span class="o">.</span><span class="n">CREDIT_DROP</span>

    <span class="n">amount</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="o">...</span><span class="p">,</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Amount of credits that have been dropped&quot;</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">credit_drop_ns</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">default_factory</span><span class="o">=</span><span class="n">time</span><span class="o">.</span><span class="n">time_ns</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Timestamp of the credit drop&quot;</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">











  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="aiperf.common.messages.CreditReturnMessage" class="doc doc-heading">
            <code>CreditReturnMessage</code>


<a href="#aiperf.common.messages.CreditReturnMessage" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="BaseServiceMessage (aiperf.common.messages.BaseServiceMessage)" href="#aiperf.common.messages.BaseServiceMessage">BaseServiceMessage</a></code></p>


        <p>Message indicating that a credit has been returned.
This message is sent by a worker to the timing manager to indicate that work has
been completed.</p>







              <details class="quote">
                <summary>Source code in <code>aiperf/common/messages.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">CreditReturnMessage</span><span class="p">(</span><span class="n">BaseServiceMessage</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Message indicating that a credit has been returned.</span>
<span class="sd">    This message is sent by a worker to the timing manager to indicate that work has</span>
<span class="sd">    been completed.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">message_type</span><span class="p">:</span> <span class="n">Literal</span><span class="p">[</span><span class="n">MessageType</span><span class="o">.</span><span class="n">CREDIT_RETURN</span><span class="p">]</span> <span class="o">=</span> <span class="n">MessageType</span><span class="o">.</span><span class="n">CREDIT_RETURN</span>

    <span class="n">amount</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="o">...</span><span class="p">,</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Amount of credits being returned&quot;</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">











  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="aiperf.common.messages.CreditsCompleteMessage" class="doc doc-heading">
            <code>CreditsCompleteMessage</code>


<a href="#aiperf.common.messages.CreditsCompleteMessage" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="BaseServiceMessage (aiperf.common.messages.BaseServiceMessage)" href="#aiperf.common.messages.BaseServiceMessage">BaseServiceMessage</a></code></p>


        <p>Credits complete message sent to System controller to signify all requests have completed.</p>







              <details class="quote">
                <summary>Source code in <code>aiperf/common/messages.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">289</span>
<span class="normal">290</span>
<span class="normal">291</span>
<span class="normal">292</span>
<span class="normal">293</span>
<span class="normal">294</span>
<span class="normal">295</span>
<span class="normal">296</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">CreditsCompleteMessage</span><span class="p">(</span><span class="n">BaseServiceMessage</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Credits complete message sent to System controller to signify all requests have completed.&quot;&quot;&quot;</span>

    <span class="n">message_type</span><span class="p">:</span> <span class="n">Literal</span><span class="p">[</span><span class="n">MessageType</span><span class="o">.</span><span class="n">CREDITS_COMPLETE</span><span class="p">]</span> <span class="o">=</span> <span class="n">MessageType</span><span class="o">.</span><span class="n">CREDITS_COMPLETE</span>
    <span class="n">cancelled</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">default</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Whether the profile run was cancelled&quot;</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">











  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="aiperf.common.messages.ErrorMessage" class="doc doc-heading">
            <code>ErrorMessage</code>


<a href="#aiperf.common.messages.ErrorMessage" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="BaseMessage (aiperf.common.messages.BaseMessage)" href="#aiperf.common.messages.BaseMessage">BaseMessage</a></code></p>


        <p>Message containing error data.</p>







              <details class="quote">
                <summary>Source code in <code>aiperf/common/messages.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">ErrorMessage</span><span class="p">(</span><span class="n">BaseMessage</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Message containing error data.&quot;&quot;&quot;</span>

    <span class="n">message_type</span><span class="p">:</span> <span class="n">Literal</span><span class="p">[</span><span class="n">MessageType</span><span class="o">.</span><span class="n">ERROR</span><span class="p">]</span> <span class="o">=</span> <span class="n">MessageType</span><span class="o">.</span><span class="n">ERROR</span>

    <span class="n">error</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">default</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Error information&quot;</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">











  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="aiperf.common.messages.HeartbeatMessage" class="doc doc-heading">
            <code>HeartbeatMessage</code>


<a href="#aiperf.common.messages.HeartbeatMessage" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="BaseStatusMessage (aiperf.common.messages.BaseStatusMessage)" href="#aiperf.common.messages.BaseStatusMessage">BaseStatusMessage</a></code></p>


        <p>Message containing heartbeat data.
This message is sent by a service to the system controller to indicate that it is
still running.</p>







              <details class="quote">
                <summary>Source code in <code>aiperf/common/messages.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">HeartbeatMessage</span><span class="p">(</span><span class="n">BaseStatusMessage</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Message containing heartbeat data.</span>
<span class="sd">    This message is sent by a service to the system controller to indicate that it is</span>
<span class="sd">    still running.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">message_type</span><span class="p">:</span> <span class="n">Literal</span><span class="p">[</span><span class="n">MessageType</span><span class="o">.</span><span class="n">HEARTBEAT</span><span class="p">]</span> <span class="o">=</span> <span class="n">MessageType</span><span class="o">.</span><span class="n">HEARTBEAT</span>

    <span class="n">state</span><span class="p">:</span> <span class="n">ServiceState</span> <span class="o">=</span> <span class="n">ServiceState</span><span class="o">.</span><span class="n">RUNNING</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">











  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="aiperf.common.messages.InferenceResultsMessage" class="doc doc-heading">
            <code>InferenceResultsMessage</code>


<a href="#aiperf.common.messages.InferenceResultsMessage" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="BaseServiceMessage (aiperf.common.messages.BaseServiceMessage)" href="#aiperf.common.messages.BaseServiceMessage">BaseServiceMessage</a></code></p>


        <p>Message for a inference results.</p>







              <details class="quote">
                <summary>Source code in <code>aiperf/common/messages.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">322</span>
<span class="normal">323</span>
<span class="normal">324</span>
<span class="normal">325</span>
<span class="normal">326</span>
<span class="normal">327</span>
<span class="normal">328</span>
<span class="normal">329</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">InferenceResultsMessage</span><span class="p">(</span><span class="n">BaseServiceMessage</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Message for a inference results.&quot;&quot;&quot;</span>

    <span class="n">message_type</span><span class="p">:</span> <span class="n">Literal</span><span class="p">[</span><span class="n">MessageType</span><span class="o">.</span><span class="n">INFERENCE_RESULTS</span><span class="p">]</span> <span class="o">=</span> <span class="n">MessageType</span><span class="o">.</span><span class="n">INFERENCE_RESULTS</span>

    <span class="n">record</span><span class="p">:</span> <span class="n">SerializeAsAny</span><span class="p">[</span><span class="n">RequestRecord</span><span class="p">]</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="o">...</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="s2">&quot;The inference results record&quot;</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">











  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="aiperf.common.messages.Message" class="doc doc-heading">
            <code>Message</code>


<a href="#aiperf.common.messages.Message" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="pydantic.BaseModel">BaseModel</span></code></p>


        <p>Base class for optimized message handling</p>







              <details class="quote">
                <summary>Source code in <code>aiperf/common/messages.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span>
<span class="normal">71</span>
<span class="normal">72</span>
<span class="normal">73</span>
<span class="normal">74</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">Message</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Base class for optimized message handling&quot;&quot;&quot;</span>

    <span class="n">_message_type_lookup</span><span class="p">:</span> <span class="n">ClassVar</span><span class="p">[</span><span class="nb">dict</span><span class="p">[</span><span class="n">MessageType</span><span class="p">,</span> <span class="nb">type</span><span class="p">[</span><span class="s2">&quot;Message&quot;</span><span class="p">]]]</span> <span class="o">=</span> <span class="p">{}</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">__init_subclass__</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">__init_subclass__</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="s2">&quot;message_type&quot;</span><span class="p">):</span>
            <span class="bp">cls</span><span class="o">.</span><span class="n">_message_type_lookup</span><span class="p">[</span><span class="bp">cls</span><span class="o">.</span><span class="n">message_type</span><span class="p">]</span> <span class="o">=</span> <span class="bp">cls</span>

    <span class="n">message_type</span><span class="p">:</span> <span class="n">MessageType</span> <span class="o">|</span> <span class="n">Any</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="o">...</span><span class="p">,</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Type of the message&quot;</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">__get_validators__</span><span class="p">(</span><span class="bp">cls</span><span class="p">):</span>
        <span class="k">yield</span> <span class="bp">cls</span><span class="o">.</span><span class="n">from_json</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">from_json</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">json_str</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;Message&quot;</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Fast deserialization without full validation&quot;&quot;&quot;</span>
        <span class="n">data</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">json_str</span><span class="p">)</span>
        <span class="n">message_type</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;message_type&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">message_type</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Missing message_type&quot;</span><span class="p">)</span>

        <span class="c1"># Use cached message type lookup</span>
        <span class="n">message_class</span> <span class="o">=</span> <span class="bp">cls</span><span class="o">.</span><span class="n">_message_type_lookup</span><span class="p">[</span><span class="n">message_type</span><span class="p">]</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">message_class</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Unknown message type: </span><span class="si">{</span><span class="n">message_type</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">message_class</span><span class="p">(</span><span class="o">**</span><span class="n">data</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">to_json</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Fast serialization without full validation&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="vm">__dict__</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h3 id="aiperf.common.messages.Message.from_json" class="doc doc-heading">
            <code class=" language-python"><span class="n">from_json</span><span class="p">(</span><span class="n">json_str</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-classmethod"><code>classmethod</code></small>
  </span>

<a href="#aiperf.common.messages.Message.from_json" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Fast deserialization without full validation</p>


            <details class="quote">
              <summary>Source code in <code>aiperf/common/messages.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@classmethod</span>
<span class="k">def</span><span class="w"> </span><span class="nf">from_json</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">json_str</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;Message&quot;</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Fast deserialization without full validation&quot;&quot;&quot;</span>
    <span class="n">data</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">json_str</span><span class="p">)</span>
    <span class="n">message_type</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;message_type&quot;</span><span class="p">)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">message_type</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Missing message_type&quot;</span><span class="p">)</span>

    <span class="c1"># Use cached message type lookup</span>
    <span class="n">message_class</span> <span class="o">=</span> <span class="bp">cls</span><span class="o">.</span><span class="n">_message_type_lookup</span><span class="p">[</span><span class="n">message_type</span><span class="p">]</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">message_class</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Unknown message type: </span><span class="si">{</span><span class="n">message_type</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">message_class</span><span class="p">(</span><span class="o">**</span><span class="n">data</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="aiperf.common.messages.Message.to_json" class="doc doc-heading">
            <code class=" language-python"><span class="n">to_json</span><span class="p">()</span></code>

<a href="#aiperf.common.messages.Message.to_json" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Fast serialization without full validation</p>


            <details class="quote">
              <summary>Source code in <code>aiperf/common/messages.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">72</span>
<span class="normal">73</span>
<span class="normal">74</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">to_json</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Fast serialization without full validation&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="vm">__dict__</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="aiperf.common.messages.ProcessRecordsCommandData" class="doc doc-heading">
            <code>ProcessRecordsCommandData</code>


<a href="#aiperf.common.messages.ProcessRecordsCommandData" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="pydantic.BaseModel">BaseModel</span></code></p>


        <p>Data to send with the process records command.</p>







              <details class="quote">
                <summary>Source code in <code>aiperf/common/messages.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">ProcessRecordsCommandData</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Data to send with the process records command.&quot;&quot;&quot;</span>

    <span class="n">cancelled</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">default</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Whether the profile run was cancelled&quot;</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">











  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="aiperf.common.messages.ProfileProgressMessage" class="doc doc-heading">
            <code>ProfileProgressMessage</code>


<a href="#aiperf.common.messages.ProfileProgressMessage" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="BaseServiceMessage (aiperf.common.messages.BaseServiceMessage)" href="#aiperf.common.messages.BaseServiceMessage">BaseServiceMessage</a></code></p>


        <p>Message for profile progress.</p>







              <details class="quote">
                <summary>Source code in <code>aiperf/common/messages.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">364</span>
<span class="normal">365</span>
<span class="normal">366</span>
<span class="normal">367</span>
<span class="normal">368</span>
<span class="normal">369</span>
<span class="normal">370</span>
<span class="normal">371</span>
<span class="normal">372</span>
<span class="normal">373</span>
<span class="normal">374</span>
<span class="normal">375</span>
<span class="normal">376</span>
<span class="normal">377</span>
<span class="normal">378</span>
<span class="normal">379</span>
<span class="normal">380</span>
<span class="normal">381</span>
<span class="normal">382</span>
<span class="normal">383</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">ProfileProgressMessage</span><span class="p">(</span><span class="n">BaseServiceMessage</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Message for profile progress.&quot;&quot;&quot;</span>

    <span class="n">message_type</span><span class="p">:</span> <span class="n">Literal</span><span class="p">[</span><span class="n">MessageType</span><span class="o">.</span><span class="n">PROFILE_PROGRESS</span><span class="p">]</span> <span class="o">=</span> <span class="n">MessageType</span><span class="o">.</span><span class="n">PROFILE_PROGRESS</span>

    <span class="n">sweep_id</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">default</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="s2">&quot;The ID of the current sweep&quot;</span>
    <span class="p">)</span>
    <span class="n">sweep_start_ns</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="o">...</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="s2">&quot;The start time of the sweep in nanoseconds&quot;</span>
    <span class="p">)</span>
    <span class="n">sweep_end_ns</span><span class="p">:</span> <span class="nb">int</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">default</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="s2">&quot;The end time of the sweep in nanoseconds&quot;</span>
    <span class="p">)</span>
    <span class="n">total</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="o">...</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="s2">&quot;The total number of inference requests to be made&quot;</span>
    <span class="p">)</span>
    <span class="n">completed</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="o">...</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="s2">&quot;The number of inference requests completed&quot;</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">











  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="aiperf.common.messages.ProfileResultsMessage" class="doc doc-heading">
            <code>ProfileResultsMessage</code>


<a href="#aiperf.common.messages.ProfileResultsMessage" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="BaseServiceMessage (aiperf.common.messages.BaseServiceMessage)" href="#aiperf.common.messages.BaseServiceMessage">BaseServiceMessage</a></code></p>


        <p>Message for profile results.</p>







              <details class="quote">
                <summary>Source code in <code>aiperf/common/messages.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">332</span>
<span class="normal">333</span>
<span class="normal">334</span>
<span class="normal">335</span>
<span class="normal">336</span>
<span class="normal">337</span>
<span class="normal">338</span>
<span class="normal">339</span>
<span class="normal">340</span>
<span class="normal">341</span>
<span class="normal">342</span>
<span class="normal">343</span>
<span class="normal">344</span>
<span class="normal">345</span>
<span class="normal">346</span>
<span class="normal">347</span>
<span class="normal">348</span>
<span class="normal">349</span>
<span class="normal">350</span>
<span class="normal">351</span>
<span class="normal">352</span>
<span class="normal">353</span>
<span class="normal">354</span>
<span class="normal">355</span>
<span class="normal">356</span>
<span class="normal">357</span>
<span class="normal">358</span>
<span class="normal">359</span>
<span class="normal">360</span>
<span class="normal">361</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">ProfileResultsMessage</span><span class="p">(</span><span class="n">BaseServiceMessage</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Message for profile results.&quot;&quot;&quot;</span>

    <span class="n">message_type</span><span class="p">:</span> <span class="n">Literal</span><span class="p">[</span><span class="n">MessageType</span><span class="o">.</span><span class="n">PROFILE_RESULTS</span><span class="p">]</span> <span class="o">=</span> <span class="n">MessageType</span><span class="o">.</span><span class="n">PROFILE_RESULTS</span>

    <span class="n">records</span><span class="p">:</span> <span class="n">SerializeAsAny</span><span class="p">[</span><span class="nb">list</span><span class="p">[</span><span class="n">Record</span><span class="p">]]</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="o">...</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="s2">&quot;The records of the profile results&quot;</span>
    <span class="p">)</span>
    <span class="n">total</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="o">...</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="s2">&quot;The total number of inference requests to be made&quot;</span>
    <span class="p">)</span>
    <span class="n">completed</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="o">...</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="s2">&quot;The number of inference requests completed&quot;</span>
    <span class="p">)</span>
    <span class="c1"># TODO: Are these needed?</span>
    <span class="c1"># begin_ns: int = Field(</span>
    <span class="c1">#     ..., description=&quot;The start time of the profile run in nanoseconds&quot;</span>
    <span class="c1"># )</span>
    <span class="c1"># end_ns: int = Field(</span>
    <span class="c1">#     ...,</span>
    <span class="c1">#     description=&quot;The end time of the profile run in nanoseconds&quot;</span>
    <span class="c1"># )</span>
    <span class="n">was_cancelled</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">default</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Whether the profile run was cancelled early&quot;</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">errors_by_type</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">ErrorDetailsCount</span><span class="p">]</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">default_factory</span><span class="o">=</span><span class="nb">list</span><span class="p">,</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;A list of the unique error details and their counts&quot;</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">











  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="aiperf.common.messages.ProfileStatsMessage" class="doc doc-heading">
            <code>ProfileStatsMessage</code>


<a href="#aiperf.common.messages.ProfileStatsMessage" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="BaseServiceMessage (aiperf.common.messages.BaseServiceMessage)" href="#aiperf.common.messages.BaseServiceMessage">BaseServiceMessage</a></code></p>


        <p>Message for profile stats.</p>







              <details class="quote">
                <summary>Source code in <code>aiperf/common/messages.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">386</span>
<span class="normal">387</span>
<span class="normal">388</span>
<span class="normal">389</span>
<span class="normal">390</span>
<span class="normal">391</span>
<span class="normal">392</span>
<span class="normal">393</span>
<span class="normal">394</span>
<span class="normal">395</span>
<span class="normal">396</span>
<span class="normal">397</span>
<span class="normal">398</span>
<span class="normal">399</span>
<span class="normal">400</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">ProfileStatsMessage</span><span class="p">(</span><span class="n">BaseServiceMessage</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Message for profile stats.&quot;&quot;&quot;</span>

    <span class="n">message_type</span><span class="p">:</span> <span class="n">Literal</span><span class="p">[</span><span class="n">MessageType</span><span class="o">.</span><span class="n">PROFILE_STATS</span><span class="p">]</span> <span class="o">=</span> <span class="n">MessageType</span><span class="o">.</span><span class="n">PROFILE_STATS</span>

    <span class="n">error_count</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="s2">&quot;The number of errors encountered&quot;</span><span class="p">)</span>
    <span class="n">completed</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="s2">&quot;The number of requests completed&quot;</span><span class="p">)</span>
    <span class="n">worker_completed</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">default_factory</span><span class="o">=</span><span class="nb">dict</span><span class="p">,</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Per-worker request completion counts, keyed by worker service_id&quot;</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">worker_errors</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">default_factory</span><span class="o">=</span><span class="nb">dict</span><span class="p">,</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Per-worker error counts, keyed by worker service_id&quot;</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">











  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="aiperf.common.messages.RegistrationMessage" class="doc doc-heading">
            <code>RegistrationMessage</code>


<a href="#aiperf.common.messages.RegistrationMessage" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="BaseStatusMessage (aiperf.common.messages.BaseStatusMessage)" href="#aiperf.common.messages.BaseStatusMessage">BaseStatusMessage</a></code></p>


        <p>Message containing registration data.
This message is sent by a service to the system controller to register itself.</p>







              <details class="quote">
                <summary>Source code in <code>aiperf/common/messages.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">RegistrationMessage</span><span class="p">(</span><span class="n">BaseStatusMessage</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Message containing registration data.</span>
<span class="sd">    This message is sent by a service to the system controller to register itself.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">message_type</span><span class="p">:</span> <span class="n">Literal</span><span class="p">[</span><span class="n">MessageType</span><span class="o">.</span><span class="n">REGISTRATION</span><span class="p">]</span> <span class="o">=</span> <span class="n">MessageType</span><span class="o">.</span><span class="n">REGISTRATION</span>

    <span class="n">state</span><span class="p">:</span> <span class="n">ServiceState</span> <span class="o">=</span> <span class="n">ServiceState</span><span class="o">.</span><span class="n">READY</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">











  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="aiperf.common.messages.StatusMessage" class="doc doc-heading">
            <code>StatusMessage</code>


<a href="#aiperf.common.messages.StatusMessage" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="BaseStatusMessage (aiperf.common.messages.BaseStatusMessage)" href="#aiperf.common.messages.BaseStatusMessage">BaseStatusMessage</a></code></p>


        <p>Message containing status data.
This message is sent by a service to the system controller to report its status.</p>







              <details class="quote">
                <summary>Source code in <code>aiperf/common/messages.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">StatusMessage</span><span class="p">(</span><span class="n">BaseStatusMessage</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Message containing status data.</span>
<span class="sd">    This message is sent by a service to the system controller to report its status.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">message_type</span><span class="p">:</span> <span class="n">Literal</span><span class="p">[</span><span class="n">MessageType</span><span class="o">.</span><span class="n">STATUS</span><span class="p">]</span> <span class="o">=</span> <span class="n">MessageType</span><span class="o">.</span><span class="n">STATUS</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">











  </div>

    </div>

</div>


<div class="doc doc-object doc-function">


<h2 id="aiperf.common.messages.exclude_if_none" class="doc doc-heading">
            <code class=" language-python"><span class="n">exclude_if_none</span><span class="p">(</span><span class="n">field_names</span><span class="p">)</span></code>

<a href="#aiperf.common.messages.exclude_if_none" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">

        <p>Decorator to set the _exclude_if_none_fields class attribute to the set of
field names that should be excluded if they are None.</p>


            <details class="quote">
              <summary>Source code in <code>aiperf/common/messages.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">exclude_if_none</span><span class="p">(</span><span class="n">field_names</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Decorator to set the _exclude_if_none_fields class attribute to the set of</span>
<span class="sd">    field names that should be excluded if they are None.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">decorator</span><span class="p">(</span><span class="n">model</span><span class="p">:</span> <span class="nb">type</span><span class="p">[</span><span class="s2">&quot;BaseMessage&quot;</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="nb">type</span><span class="p">[</span><span class="s2">&quot;BaseMessage&quot;</span><span class="p">]:</span>
        <span class="n">model</span><span class="o">.</span><span class="n">_exclude_if_none_fields</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">field_names</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">model</span>

    <span class="k">return</span> <span class="n">decorator</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div><h2 id="aiperfcommonmodels">aiperf.common.models<a class="headerlink" href="#aiperfcommonmodels" title="Permanent link">&para;</a></h2>


<div class="doc doc-object doc-module">



<a id="aiperf.common.models"></a>
    <div class="doc doc-contents first">









  <div class="doc doc-children">








<div class="doc doc-object doc-class">



<h2 id="aiperf.common.models.ServiceRunInfo" class="doc doc-heading">
            <code>ServiceRunInfo</code>


<a href="#aiperf.common.models.ServiceRunInfo" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="pydantic.BaseModel">BaseModel</span></code></p>


        <p>Base model for tracking service run information.</p>







              <details class="quote">
                <summary>Source code in <code>aiperf/common/models.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">ServiceRunInfo</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Base model for tracking service run information.&quot;&quot;&quot;</span>

    <span class="n">service_type</span><span class="p">:</span> <span class="n">ServiceType</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="o">...</span><span class="p">,</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;The type of service&quot;</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">registration_status</span><span class="p">:</span> <span class="n">ServiceRegistrationStatus</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="o">...</span><span class="p">,</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;The registration status of the service&quot;</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">service_id</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="o">...</span><span class="p">,</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;The ID of the service&quot;</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">first_seen</span><span class="p">:</span> <span class="nb">int</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">default_factory</span><span class="o">=</span><span class="n">time</span><span class="o">.</span><span class="n">time_ns</span><span class="p">,</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;The first time the service was seen&quot;</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">last_seen</span><span class="p">:</span> <span class="nb">int</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">default_factory</span><span class="o">=</span><span class="n">time</span><span class="o">.</span><span class="n">time_ns</span><span class="p">,</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;The last time the service was seen&quot;</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">state</span><span class="p">:</span> <span class="n">ServiceState</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">default</span><span class="o">=</span><span class="n">ServiceState</span><span class="o">.</span><span class="n">UNKNOWN</span><span class="p">,</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;The current state of the service&quot;</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">











  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="aiperf.common.models.ZMQCommunicationConfig" class="doc doc-heading">
            <code>ZMQCommunicationConfig</code>


<a href="#aiperf.common.models.ZMQCommunicationConfig" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="pydantic.BaseModel">BaseModel</span></code></p>


        <p>Configuration for ZMQ communication.</p>







              <details class="quote">
                <summary>Source code in <code>aiperf/common/models.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span>
<span class="normal">71</span>
<span class="normal">72</span>
<span class="normal">73</span>
<span class="normal">74</span>
<span class="normal">75</span>
<span class="normal">76</span>
<span class="normal">77</span>
<span class="normal">78</span>
<span class="normal">79</span>
<span class="normal">80</span>
<span class="normal">81</span>
<span class="normal">82</span>
<span class="normal">83</span>
<span class="normal">84</span>
<span class="normal">85</span>
<span class="normal">86</span>
<span class="normal">87</span>
<span class="normal">88</span>
<span class="normal">89</span>
<span class="normal">90</span>
<span class="normal">91</span>
<span class="normal">92</span>
<span class="normal">93</span>
<span class="normal">94</span>
<span class="normal">95</span>
<span class="normal">96</span>
<span class="normal">97</span>
<span class="normal">98</span>
<span class="normal">99</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">ZMQCommunicationConfig</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Configuration for ZMQ communication.&quot;&quot;&quot;</span>

    <span class="n">protocol_config</span><span class="p">:</span> <span class="n">ZMQTCPTransportConfig</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">default_factory</span><span class="o">=</span><span class="n">ZMQTCPTransportConfig</span><span class="p">,</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Configuration for the selected transport protocol&quot;</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">client_id</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">default</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Client ID, will be generated if not provided&quot;</span>
    <span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">controller_pub_sub_address</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get the controller pub/sub address based on protocol configuration.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;tcp://</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">protocol_config</span><span class="o">.</span><span class="n">host</span><span class="si">}</span><span class="s2">:</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">protocol_config</span><span class="o">.</span><span class="n">controller_pub_sub_port</span><span class="si">}</span><span class="s2">&quot;</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">component_pub_sub_address</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get the component pub/sub address based on protocol configuration.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;tcp://</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">protocol_config</span><span class="o">.</span><span class="n">host</span><span class="si">}</span><span class="s2">:</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">protocol_config</span><span class="o">.</span><span class="n">component_pub_sub_port</span><span class="si">}</span><span class="s2">&quot;</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">inference_push_pull_address</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get the inference push/pull address based on protocol configuration.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;tcp://</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">protocol_config</span><span class="o">.</span><span class="n">host</span><span class="si">}</span><span class="s2">:</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">protocol_config</span><span class="o">.</span><span class="n">inference_push_pull_port</span><span class="si">}</span><span class="s2">&quot;</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">records_address</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get the records address based on protocol configuration.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;tcp://</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">protocol_config</span><span class="o">.</span><span class="n">host</span><span class="si">}</span><span class="s2">:</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">protocol_config</span><span class="o">.</span><span class="n">records_port</span><span class="si">}</span><span class="s2">&quot;</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">conversation_data_address</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get the conversation data address based on protocol configuration.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;tcp://</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">protocol_config</span><span class="o">.</span><span class="n">host</span><span class="si">}</span><span class="s2">:</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">protocol_config</span><span class="o">.</span><span class="n">conversation_data_port</span><span class="si">}</span><span class="s2">&quot;</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">credit_drop_address</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get the credit drop address based on protocol configuration.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;tcp://</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">protocol_config</span><span class="o">.</span><span class="n">host</span><span class="si">}</span><span class="s2">:</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">protocol_config</span><span class="o">.</span><span class="n">credit_drop_port</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">credit_return_address</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get the credit return address based on protocol configuration.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;tcp://</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">protocol_config</span><span class="o">.</span><span class="n">host</span><span class="si">}</span><span class="s2">:</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">protocol_config</span><span class="o">.</span><span class="n">credit_return_port</span><span class="si">}</span><span class="s2">&quot;</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">







<div class="doc doc-object doc-attribute">



<h3 id="aiperf.common.models.ZMQCommunicationConfig.component_pub_sub_address" class="doc doc-heading">
            <code class=" language-python"><span class="n">component_pub_sub_address</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

<a href="#aiperf.common.models.ZMQCommunicationConfig.component_pub_sub_address" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Get the component pub/sub address based on protocol configuration.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="aiperf.common.models.ZMQCommunicationConfig.controller_pub_sub_address" class="doc doc-heading">
            <code class=" language-python"><span class="n">controller_pub_sub_address</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

<a href="#aiperf.common.models.ZMQCommunicationConfig.controller_pub_sub_address" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Get the controller pub/sub address based on protocol configuration.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="aiperf.common.models.ZMQCommunicationConfig.conversation_data_address" class="doc doc-heading">
            <code class=" language-python"><span class="n">conversation_data_address</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

<a href="#aiperf.common.models.ZMQCommunicationConfig.conversation_data_address" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Get the conversation data address based on protocol configuration.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="aiperf.common.models.ZMQCommunicationConfig.credit_drop_address" class="doc doc-heading">
            <code class=" language-python"><span class="n">credit_drop_address</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

<a href="#aiperf.common.models.ZMQCommunicationConfig.credit_drop_address" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Get the credit drop address based on protocol configuration.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="aiperf.common.models.ZMQCommunicationConfig.credit_return_address" class="doc doc-heading">
            <code class=" language-python"><span class="n">credit_return_address</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

<a href="#aiperf.common.models.ZMQCommunicationConfig.credit_return_address" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Get the credit return address based on protocol configuration.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="aiperf.common.models.ZMQCommunicationConfig.inference_push_pull_address" class="doc doc-heading">
            <code class=" language-python"><span class="n">inference_push_pull_address</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

<a href="#aiperf.common.models.ZMQCommunicationConfig.inference_push_pull_address" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Get the inference push/pull address based on protocol configuration.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="aiperf.common.models.ZMQCommunicationConfig.records_address" class="doc doc-heading">
            <code class=" language-python"><span class="n">records_address</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

<a href="#aiperf.common.models.ZMQCommunicationConfig.records_address" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Get the records address based on protocol configuration.</p>

    </div>

</div>





  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="aiperf.common.models.ZMQTCPTransportConfig" class="doc doc-heading">
            <code>ZMQTCPTransportConfig</code>


<a href="#aiperf.common.models.ZMQTCPTransportConfig" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="pydantic.BaseModel">BaseModel</span></code></p>


        <p>Configuration for TCP transport.</p>







              <details class="quote">
                <summary>Source code in <code>aiperf/common/models.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">ZMQTCPTransportConfig</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Configuration for TCP transport.&quot;&quot;&quot;</span>

    <span class="n">host</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">default</span><span class="o">=</span><span class="s2">&quot;0.0.0.0&quot;</span><span class="p">,</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Host address for TCP connections&quot;</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">controller_pub_sub_port</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">default</span><span class="o">=</span><span class="mi">5555</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Port for controller pub/sub messages&quot;</span>
    <span class="p">)</span>
    <span class="n">component_pub_sub_port</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">default</span><span class="o">=</span><span class="mi">5556</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Port for component pub/sub messages&quot;</span>
    <span class="p">)</span>
    <span class="n">inference_push_pull_port</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">default</span><span class="o">=</span><span class="mi">5557</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Port for inference push/pull messages&quot;</span>
    <span class="p">)</span>
    <span class="n">req_rep_port</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">default</span><span class="o">=</span><span class="mi">5558</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Port for sending and receiving requests&quot;</span>
    <span class="p">)</span>
    <span class="n">push_pull_port</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">default</span><span class="o">=</span><span class="mi">5559</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Port for pushing and pulling data&quot;</span>
    <span class="p">)</span>
    <span class="n">records_port</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="mi">5560</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Port for record data&quot;</span><span class="p">)</span>
    <span class="n">conversation_data_port</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">default</span><span class="o">=</span><span class="mi">5561</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Port for conversation data&quot;</span>
    <span class="p">)</span>
    <span class="n">credit_drop_port</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">default</span><span class="o">=</span><span class="mi">5562</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Port for credit drop operations&quot;</span>
    <span class="p">)</span>
    <span class="n">credit_return_port</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">default</span><span class="o">=</span><span class="mi">5563</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Port for credit return operations&quot;</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">











  </div>

    </div>

</div>




  </div>

    </div>

</div><h2 id="aiperfcommonrecord_models">aiperf.common.record_models<a class="headerlink" href="#aiperfcommonrecord_models" title="Permanent link">&para;</a></h2>


<div class="doc doc-object doc-module">



<a id="aiperf.common.record_models"></a>
    <div class="doc doc-contents first">









  <div class="doc doc-children">








<div class="doc doc-object doc-class">



<h2 id="aiperf.common.record_models.BaseClientConfig" class="doc doc-heading">
            <code>BaseClientConfig</code>


<a href="#aiperf.common.record_models.BaseClientConfig" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="pydantic.BaseModel">BaseModel</span></code></p>


        <p>Base configuration options for all clients.</p>







              <details class="quote">
                <summary>Source code in <code>aiperf/common/record_models.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">19</span>
<span class="normal">20</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">BaseClientConfig</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Base configuration options for all clients.&quot;&quot;&quot;</span>
</code></pre></div></td></tr></table></div>
              </details>

    </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="aiperf.common.record_models.ErrorDetails" class="doc doc-heading">
            <code>ErrorDetails</code>


<a href="#aiperf.common.record_models.ErrorDetails" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="pydantic.BaseModel">BaseModel</span></code></p>


        <p>Encapsulates details about an error.</p>







              <details class="quote">
                <summary>Source code in <code>aiperf/common/record_models.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">ErrorDetails</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Encapsulates details about an error.&quot;&quot;&quot;</span>

    <span class="n">code</span><span class="p">:</span> <span class="nb">int</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">default</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;The error code.&quot;</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="nb">type</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">default</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;The error type.&quot;</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">message</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="o">...</span><span class="p">,</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;The error message.&quot;</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__eq__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Check if the error details are equal by comparing the code, type, and message.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">ErrorDetails</span><span class="p">):</span>
            <span class="k">return</span> <span class="kc">False</span>
        <span class="k">return</span> <span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">code</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="n">code</span>
            <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="n">type</span>
            <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">message</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="n">message</span>
        <span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__hash__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Hash the error details by hashing the code, type, and message.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="nb">hash</span><span class="p">((</span><span class="bp">self</span><span class="o">.</span><span class="n">code</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">message</span><span class="p">))</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h3 id="aiperf.common.record_models.ErrorDetails.__eq__" class="doc doc-heading">
            <code class=" language-python"><span class="fm">__eq__</span><span class="p">(</span><span class="n">other</span><span class="p">)</span></code>

<a href="#aiperf.common.record_models.ErrorDetails.__eq__" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Check if the error details are equal by comparing the code, type, and message.</p>


            <details class="quote">
              <summary>Source code in <code>aiperf/common/record_models.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="fm">__eq__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Check if the error details are equal by comparing the code, type, and message.&quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">ErrorDetails</span><span class="p">):</span>
        <span class="k">return</span> <span class="kc">False</span>
    <span class="k">return</span> <span class="p">(</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">code</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="n">code</span>
        <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="n">type</span>
        <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">message</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="n">message</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="aiperf.common.record_models.ErrorDetails.__hash__" class="doc doc-heading">
            <code class=" language-python"><span class="fm">__hash__</span><span class="p">()</span></code>

<a href="#aiperf.common.record_models.ErrorDetails.__hash__" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Hash the error details by hashing the code, type, and message.</p>


            <details class="quote">
              <summary>Source code in <code>aiperf/common/record_models.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="fm">__hash__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Hash the error details by hashing the code, type, and message.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="nb">hash</span><span class="p">((</span><span class="bp">self</span><span class="o">.</span><span class="n">code</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">message</span><span class="p">))</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="aiperf.common.record_models.ErrorDetailsCount" class="doc doc-heading">
            <code>ErrorDetailsCount</code>


<a href="#aiperf.common.record_models.ErrorDetailsCount" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="pydantic.BaseModel">BaseModel</span></code></p>


        <p>Count of error details.</p>







              <details class="quote">
                <summary>Source code in <code>aiperf/common/record_models.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">ErrorDetailsCount</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Count of error details.&quot;&quot;&quot;</span>

    <span class="n">error_details</span><span class="p">:</span> <span class="n">ErrorDetails</span>
    <span class="n">count</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="o">...</span><span class="p">,</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;The count of the error details.&quot;</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">











  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="aiperf.common.record_models.GenericHTTPClientConfig" class="doc doc-heading">
            <code>GenericHTTPClientConfig</code>


<a href="#aiperf.common.record_models.GenericHTTPClientConfig" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="BaseClientConfig (aiperf.common.record_models.BaseClientConfig)" href="#aiperf.common.record_models.BaseClientConfig">BaseClientConfig</a></code></p>


        <p>Configuration options for a generic HTTP inference client.</p>







              <details class="quote">
                <summary>Source code in <code>aiperf/common/record_models.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">GenericHTTPClientConfig</span><span class="p">(</span><span class="n">BaseClientConfig</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Configuration options for a generic HTTP inference client.&quot;&quot;&quot;</span>

    <span class="n">url</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">default</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;http://localhost:</span><span class="si">{</span><span class="n">os</span><span class="o">.</span><span class="n">getenv</span><span class="p">(</span><span class="s1">&#39;AIPERF_PORT&#39;</span><span class="p">,</span><span class="w"> </span><span class="mi">8080</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;The URL of the inference client.&quot;</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">protocol</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">default</span><span class="o">=</span><span class="s2">&quot;http&quot;</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="s2">&quot;The protocol to use for the inference client.&quot;</span>
    <span class="p">)</span>
    <span class="n">ssl_options</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">default</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;The SSL options to use for the inference client.&quot;</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">timeout_ms</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">default</span><span class="o">=</span><span class="mi">300000</span><span class="p">,</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;The timeout in milliseconds for the inference client.&quot;</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">headers</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">default_factory</span><span class="o">=</span><span class="nb">dict</span><span class="p">,</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;The headers to use for the inference client.&quot;</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">api_key</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">default</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;The API key to use for the inference client.&quot;</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">











  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="aiperf.common.record_models.InferenceServerResponse" class="doc doc-heading">
            <code>InferenceServerResponse</code>


<a href="#aiperf.common.record_models.InferenceServerResponse" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="pydantic.BaseModel">BaseModel</span></code></p>


        <p>Response from a inference client.</p>







              <details class="quote">
                <summary>Source code in <code>aiperf/common/record_models.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">InferenceServerResponse</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Response from a inference client.&quot;&quot;&quot;</span>

    <span class="n">perf_ns</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="o">...</span><span class="p">,</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;The timestamp of the response in nanoseconds (perf_counter_ns).&quot;</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">











  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="aiperf.common.record_models.Record" class="doc doc-heading">
            <code>Record</code>


<a href="#aiperf.common.record_models.Record" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="pydantic.BaseModel">BaseModel</span></code></p>


        <p>Represents a record containing a request transaction and its associated response transactions.
Attributes:
    request: The input transaction for the record.
    responses A list of response transactions corresponding to the request.</p>







              <details class="quote">
                <summary>Source code in <code>aiperf/common/record_models.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">308</span>
<span class="normal">309</span>
<span class="normal">310</span>
<span class="normal">311</span>
<span class="normal">312</span>
<span class="normal">313</span>
<span class="normal">314</span>
<span class="normal">315</span>
<span class="normal">316</span>
<span class="normal">317</span>
<span class="normal">318</span>
<span class="normal">319</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">Record</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Represents a record containing a request transaction and its associated response transactions.</span>
<span class="sd">    Attributes:</span>
<span class="sd">        request: The input transaction for the record.</span>
<span class="sd">        responses A list of response transactions corresponding to the request.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">request</span><span class="p">:</span> <span class="n">Transaction</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">description</span><span class="o">=</span><span class="s2">&quot;The request transaction for the record&quot;</span><span class="p">)</span>
    <span class="n">responses</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">Transaction</span><span class="p">]</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;A list of response transactions for the record&quot;</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">











  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="aiperf.common.record_models.RequestRecord" class="doc doc-heading">
            <code>RequestRecord</code>


<a href="#aiperf.common.record_models.RequestRecord" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="pydantic.BaseModel">BaseModel</span></code></p>


        <p>Record of a request.</p>







              <details class="quote">
                <summary>Source code in <code>aiperf/common/record_models.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span>
<span class="normal">278</span>
<span class="normal">279</span>
<span class="normal">280</span>
<span class="normal">281</span>
<span class="normal">282</span>
<span class="normal">283</span>
<span class="normal">284</span>
<span class="normal">285</span>
<span class="normal">286</span>
<span class="normal">287</span>
<span class="normal">288</span>
<span class="normal">289</span>
<span class="normal">290</span>
<span class="normal">291</span>
<span class="normal">292</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">RequestRecord</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Record of a request.&quot;&quot;&quot;</span>

    <span class="n">start_perf_ns</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">default_factory</span><span class="o">=</span><span class="n">time</span><span class="o">.</span><span class="n">perf_counter_ns</span><span class="p">,</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;The start time of the request in perf_counter_ns.&quot;</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">end_perf_ns</span><span class="p">:</span> <span class="nb">int</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">default</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;The end time of the request in perf_counter_ns.&quot;</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">recv_start_perf_ns</span><span class="p">:</span> <span class="nb">int</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">default</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;The start time of the response in perf_counter_ns.&quot;</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">status</span><span class="p">:</span> <span class="nb">int</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">default</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;The HTTPstatus code of the request.&quot;</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="c1"># Note: we need to use SerializeAsAny to allow for generic subclass support</span>
    <span class="n">responses</span><span class="p">:</span> <span class="n">SerializeAsAny</span><span class="p">[</span>
        <span class="nb">list</span><span class="p">[</span><span class="n">InferenceServerResponse</span> <span class="o">|</span> <span class="n">SSEMessage</span> <span class="o">|</span> <span class="n">TextResponse</span><span class="p">]</span>
    <span class="p">]</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">default_factory</span><span class="o">=</span><span class="nb">list</span><span class="p">,</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;The raw responses received from the request.&quot;</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">error</span><span class="p">:</span> <span class="n">ErrorDetails</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">default</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;The error details if the request failed.&quot;</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">sequence_end</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">default</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Whether the sequence has ended.&quot;</span>
    <span class="p">)</span>
    <span class="n">delayed</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Whether the request was delayed.&quot;</span><span class="p">)</span>

    <span class="c1"># TODO: Most of these properties will be removed once we have proper record handling.</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">has_null_last_response</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Whether the last response received was null.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">responses</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">responses</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="ow">is</span> <span class="kc">None</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">has_error</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Check if the request record has an error.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">error</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">valid</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Check if the request record is valid by ensuring that the start time</span>
<span class="sd">        and response timestamps are within valid ranges.</span>

<span class="sd">        Returns:</span>
<span class="sd">            bool: True if the record is valid, False otherwise.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">has_error</span> <span class="ow">and</span> <span class="p">(</span>
            <span class="mi">0</span> <span class="o">&lt;=</span> <span class="bp">self</span><span class="o">.</span><span class="n">start_perf_ns</span> <span class="o">&lt;</span> <span class="n">sys</span><span class="o">.</span><span class="n">maxsize</span>
            <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">responses</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span>
            <span class="ow">and</span> <span class="nb">all</span><span class="p">(</span><span class="mi">0</span> <span class="o">&lt;</span> <span class="n">response</span><span class="o">.</span><span class="n">perf_ns</span> <span class="o">&lt;</span> <span class="n">sys</span><span class="o">.</span><span class="n">maxsize</span> <span class="k">for</span> <span class="n">response</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">responses</span><span class="p">)</span>
        <span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">time_to_first_response_ns</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span> <span class="o">|</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get the time to the first response in nanoseconds.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">valid</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">None</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">responses</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">perf_ns</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">recv_start_perf_ns</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">time_to_second_response_ns</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span> <span class="o">|</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get the time to the second response in nanoseconds.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">valid</span> <span class="ow">or</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">responses</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">2</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">None</span>
        <span class="c1"># first_data = 0</span>
        <span class="c1"># while first_data &lt; len(self.responses) - 1:</span>
        <span class="c1">#     if self.responses[first_data].packets[-1].value == &quot;[DONE]&quot;:</span>
        <span class="c1">#         break</span>
        <span class="c1">#     first_data += 1</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">responses</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">perf_ns</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">responses</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">perf_ns</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">time_to_last_response_ns</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span> <span class="o">|</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get the time to the last response in nanoseconds.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">valid</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">None</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">end_perf_ns</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">start_perf_ns</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">None</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">end_perf_ns</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">recv_start_perf_ns</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">inter_token_latency_ns</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span> <span class="o">|</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get the interval between responses in nanoseconds.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">valid</span> <span class="ow">or</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">responses</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">2</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">None</span>

        <span class="k">if</span> <span class="p">(</span>
            <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">responses</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">],</span> <span class="s2">&quot;packets&quot;</span><span class="p">)</span>
            <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">responses</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">packets</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">value</span> <span class="o">==</span> <span class="s2">&quot;[DONE]&quot;</span>
        <span class="p">):</span>
            <span class="k">return</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">responses</span><span class="p">[</span><span class="o">-</span><span class="mi">2</span><span class="p">]</span><span class="o">.</span><span class="n">perf_ns</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">responses</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">perf_ns</span><span class="p">)</span> <span class="o">/</span> <span class="p">(</span>
                <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">responses</span><span class="p">)</span> <span class="o">-</span> <span class="mi">2</span>
            <span class="p">)</span>

        <span class="k">return</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">responses</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">perf_ns</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">responses</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">perf_ns</span><span class="p">)</span> <span class="o">/</span> <span class="p">(</span>
            <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">responses</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span>
        <span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">token_latency_ns</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">index</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span> <span class="o">|</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get the latency of a token in nanoseconds.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">valid</span> <span class="ow">or</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">responses</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">1</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">None</span>
        <span class="k">if</span> <span class="n">index</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">responses</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">perf_ns</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">recv_start_perf_ns</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">responses</span><span class="p">[</span><span class="n">index</span><span class="p">]</span><span class="o">.</span><span class="n">perf_ns</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">responses</span><span class="p">[</span><span class="n">index</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">perf_ns</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">time_string</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Return a string representation of the request record.&quot;&quot;&quot;</span>
        <span class="n">lt</span> <span class="o">=</span> <span class="p">[</span>
            <span class="c1"># f&quot;start_perf_ns={self.start_perf_ns / 1000000:.3f}ms&quot;,</span>
            <span class="sa">f</span><span class="s2">&quot;recv_start_perf_ns=</span><span class="si">{</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">recv_start_perf_ns</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="bp">self</span><span class="o">.</span><span class="n">start_perf_ns</span><span class="p">)</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="mi">1000000</span><span class="si">:</span><span class="s2">.3f</span><span class="si">}</span><span class="s2">ms&quot;</span><span class="p">,</span>
            <span class="sa">f</span><span class="s2">&quot;end_perf_ns=</span><span class="si">{</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">end_perf_ns</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="bp">self</span><span class="o">.</span><span class="n">start_perf_ns</span><span class="p">)</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="mi">1000000</span><span class="si">:</span><span class="s2">.3f</span><span class="si">}</span><span class="s2">ms&quot;</span><span class="p">,</span>
            <span class="sa">f</span><span class="s2">&quot;recv_duration=</span><span class="si">{</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">end_perf_ns</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="bp">self</span><span class="o">.</span><span class="n">recv_start_perf_ns</span><span class="p">)</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="mi">1000000</span><span class="si">:</span><span class="s2">.3f</span><span class="si">}</span><span class="s2">ms&quot;</span><span class="p">,</span>
            <span class="sa">f</span><span class="s2">&quot;duration=</span><span class="si">{</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">end_perf_ns</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="bp">self</span><span class="o">.</span><span class="n">start_perf_ns</span><span class="p">)</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="mi">1000000</span><span class="si">:</span><span class="s2">.3f</span><span class="si">}</span><span class="s2">ms&quot;</span><span class="p">,</span>
        <span class="p">]</span>
        <span class="n">tt</span> <span class="o">=</span> <span class="p">[</span>
            <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">token_latency_ns</span><span class="p">(</span><span class="n">i</span><span class="p">)</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="mi">1000000</span><span class="si">:</span><span class="s2">.3f</span><span class="si">}</span><span class="s2">ms&quot;</span>
            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">responses</span><span class="p">))</span>
        <span class="p">]</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;RequestRecord(</span><span class="si">{</span><span class="s1">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">lt</span><span class="p">)</span><span class="si">}</span><span class="s2">, [</span><span class="si">{</span><span class="s1">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">tt</span><span class="p">)</span><span class="si">}</span><span class="s2">])&quot;</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">







<div class="doc doc-object doc-attribute">



<h3 id="aiperf.common.record_models.RequestRecord.has_error" class="doc doc-heading">
            <code class=" language-python"><span class="n">has_error</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

<a href="#aiperf.common.record_models.RequestRecord.has_error" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Check if the request record has an error.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="aiperf.common.record_models.RequestRecord.has_null_last_response" class="doc doc-heading">
            <code class=" language-python"><span class="n">has_null_last_response</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

<a href="#aiperf.common.record_models.RequestRecord.has_null_last_response" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Whether the last response received was null.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="aiperf.common.record_models.RequestRecord.inter_token_latency_ns" class="doc doc-heading">
            <code class=" language-python"><span class="n">inter_token_latency_ns</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

<a href="#aiperf.common.record_models.RequestRecord.inter_token_latency_ns" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Get the interval between responses in nanoseconds.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="aiperf.common.record_models.RequestRecord.time_to_first_response_ns" class="doc doc-heading">
            <code class=" language-python"><span class="n">time_to_first_response_ns</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

<a href="#aiperf.common.record_models.RequestRecord.time_to_first_response_ns" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Get the time to the first response in nanoseconds.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="aiperf.common.record_models.RequestRecord.time_to_last_response_ns" class="doc doc-heading">
            <code class=" language-python"><span class="n">time_to_last_response_ns</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

<a href="#aiperf.common.record_models.RequestRecord.time_to_last_response_ns" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Get the time to the last response in nanoseconds.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="aiperf.common.record_models.RequestRecord.time_to_second_response_ns" class="doc doc-heading">
            <code class=" language-python"><span class="n">time_to_second_response_ns</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

<a href="#aiperf.common.record_models.RequestRecord.time_to_second_response_ns" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Get the time to the second response in nanoseconds.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="aiperf.common.record_models.RequestRecord.valid" class="doc doc-heading">
            <code class=" language-python"><span class="n">valid</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

<a href="#aiperf.common.record_models.RequestRecord.valid" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Check if the request record is valid by ensuring that the start time
and response timestamps are within valid ranges.</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>bool</code></td>            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>True if the record is valid, False otherwise.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

    </div>

</div>



<div class="doc doc-object doc-function">


<h3 id="aiperf.common.record_models.RequestRecord.time_string" class="doc doc-heading">
            <code class=" language-python"><span class="n">time_string</span><span class="p">()</span></code>

<a href="#aiperf.common.record_models.RequestRecord.time_string" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Return a string representation of the request record.</p>


            <details class="quote">
              <summary>Source code in <code>aiperf/common/record_models.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">279</span>
<span class="normal">280</span>
<span class="normal">281</span>
<span class="normal">282</span>
<span class="normal">283</span>
<span class="normal">284</span>
<span class="normal">285</span>
<span class="normal">286</span>
<span class="normal">287</span>
<span class="normal">288</span>
<span class="normal">289</span>
<span class="normal">290</span>
<span class="normal">291</span>
<span class="normal">292</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">time_string</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Return a string representation of the request record.&quot;&quot;&quot;</span>
    <span class="n">lt</span> <span class="o">=</span> <span class="p">[</span>
        <span class="c1"># f&quot;start_perf_ns={self.start_perf_ns / 1000000:.3f}ms&quot;,</span>
        <span class="sa">f</span><span class="s2">&quot;recv_start_perf_ns=</span><span class="si">{</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">recv_start_perf_ns</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="bp">self</span><span class="o">.</span><span class="n">start_perf_ns</span><span class="p">)</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="mi">1000000</span><span class="si">:</span><span class="s2">.3f</span><span class="si">}</span><span class="s2">ms&quot;</span><span class="p">,</span>
        <span class="sa">f</span><span class="s2">&quot;end_perf_ns=</span><span class="si">{</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">end_perf_ns</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="bp">self</span><span class="o">.</span><span class="n">start_perf_ns</span><span class="p">)</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="mi">1000000</span><span class="si">:</span><span class="s2">.3f</span><span class="si">}</span><span class="s2">ms&quot;</span><span class="p">,</span>
        <span class="sa">f</span><span class="s2">&quot;recv_duration=</span><span class="si">{</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">end_perf_ns</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="bp">self</span><span class="o">.</span><span class="n">recv_start_perf_ns</span><span class="p">)</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="mi">1000000</span><span class="si">:</span><span class="s2">.3f</span><span class="si">}</span><span class="s2">ms&quot;</span><span class="p">,</span>
        <span class="sa">f</span><span class="s2">&quot;duration=</span><span class="si">{</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">end_perf_ns</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="bp">self</span><span class="o">.</span><span class="n">start_perf_ns</span><span class="p">)</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="mi">1000000</span><span class="si">:</span><span class="s2">.3f</span><span class="si">}</span><span class="s2">ms&quot;</span><span class="p">,</span>
    <span class="p">]</span>
    <span class="n">tt</span> <span class="o">=</span> <span class="p">[</span>
        <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">token_latency_ns</span><span class="p">(</span><span class="n">i</span><span class="p">)</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="mi">1000000</span><span class="si">:</span><span class="s2">.3f</span><span class="si">}</span><span class="s2">ms&quot;</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">responses</span><span class="p">))</span>
    <span class="p">]</span>
    <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;RequestRecord(</span><span class="si">{</span><span class="s1">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">lt</span><span class="p">)</span><span class="si">}</span><span class="s2">, [</span><span class="si">{</span><span class="s1">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">tt</span><span class="p">)</span><span class="si">}</span><span class="s2">])&quot;</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="aiperf.common.record_models.RequestRecord.token_latency_ns" class="doc doc-heading">
            <code class=" language-python"><span class="n">token_latency_ns</span><span class="p">(</span><span class="n">index</span><span class="p">)</span></code>

<a href="#aiperf.common.record_models.RequestRecord.token_latency_ns" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Get the latency of a token in nanoseconds.</p>


            <details class="quote">
              <summary>Source code in <code>aiperf/common/record_models.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">token_latency_ns</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">index</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span> <span class="o">|</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Get the latency of a token in nanoseconds.&quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">valid</span> <span class="ow">or</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">responses</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">1</span><span class="p">:</span>
        <span class="k">return</span> <span class="kc">None</span>
    <span class="k">if</span> <span class="n">index</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">responses</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">perf_ns</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">recv_start_perf_ns</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">responses</span><span class="p">[</span><span class="n">index</span><span class="p">]</span><span class="o">.</span><span class="n">perf_ns</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">responses</span><span class="p">[</span><span class="n">index</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">perf_ns</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="aiperf.common.record_models.SSEEventType" class="doc doc-heading">
            <code>SSEEventType</code>


<a href="#aiperf.common.record_models.SSEEventType" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="CaseInsensitiveStrEnum (aiperf.common.enums.CaseInsensitiveStrEnum)" href="#aiperf.common.enums.CaseInsensitiveStrEnum">CaseInsensitiveStrEnum</a></code></p>


        <p>Event types in an SSE message. Many of these are custom and not defined by the SSE spec.</p>







              <details class="quote">
                <summary>Source code in <code>aiperf/common/record_models.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">SSEEventType</span><span class="p">(</span><span class="n">CaseInsensitiveStrEnum</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Event types in an SSE message. Many of these are custom and not defined by the SSE spec.&quot;&quot;&quot;</span>

    <span class="n">ERROR</span> <span class="o">=</span> <span class="s2">&quot;error&quot;</span>
    <span class="n">LLM_METRICS</span> <span class="o">=</span> <span class="s2">&quot;llm_metrics&quot;</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">











  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="aiperf.common.record_models.SSEField" class="doc doc-heading">
            <code>SSEField</code>


<a href="#aiperf.common.record_models.SSEField" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="pydantic.BaseModel">BaseModel</span></code></p>


        <p>Base model for a single field in an SSE message.</p>







              <details class="quote">
                <summary>Source code in <code>aiperf/common/record_models.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">SSEField</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Base model for a single field in an SSE message.&quot;&quot;&quot;</span>

    <span class="n">name</span><span class="p">:</span> <span class="n">SSEFieldType</span> <span class="o">|</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="o">...</span><span class="p">,</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;The name of the field. e.g. &#39;data&#39;, &#39;event&#39;, &#39;id&#39;, &#39;retry&#39;, &#39;comment&#39;.&quot;</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">value</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">default</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;The value of the field.&quot;</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">











  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="aiperf.common.record_models.SSEFieldType" class="doc doc-heading">
            <code>SSEFieldType</code>


<a href="#aiperf.common.record_models.SSEFieldType" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="CaseInsensitiveStrEnum (aiperf.common.enums.CaseInsensitiveStrEnum)" href="#aiperf.common.enums.CaseInsensitiveStrEnum">CaseInsensitiveStrEnum</a></code></p>


        <p>Field types in an SSE message.</p>







              <details class="quote">
                <summary>Source code in <code>aiperf/common/record_models.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">SSEFieldType</span><span class="p">(</span><span class="n">CaseInsensitiveStrEnum</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Field types in an SSE message.&quot;&quot;&quot;</span>

    <span class="n">DATA</span> <span class="o">=</span> <span class="s2">&quot;data&quot;</span>
    <span class="n">EVENT</span> <span class="o">=</span> <span class="s2">&quot;event&quot;</span>
    <span class="n">ID</span> <span class="o">=</span> <span class="s2">&quot;id&quot;</span>
    <span class="n">RETRY</span> <span class="o">=</span> <span class="s2">&quot;retry&quot;</span>
    <span class="n">COMMENT</span> <span class="o">=</span> <span class="s2">&quot;comment&quot;</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">











  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="aiperf.common.record_models.SSEMessage" class="doc doc-heading">
            <code>SSEMessage</code>


<a href="#aiperf.common.record_models.SSEMessage" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="InferenceServerResponse (aiperf.common.record_models.InferenceServerResponse)" href="#aiperf.common.record_models.InferenceServerResponse">InferenceServerResponse</a></code></p>


        <p>Individual SSE message from an SSE stream. Delimited by </p>
<p>.</p>







              <details class="quote">
                <summary>Source code in <code>aiperf/common/record_models.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">SSEMessage</span><span class="p">(</span><span class="n">InferenceServerResponse</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Individual SSE message from an SSE stream. Delimited by \n\n.&quot;&quot;&quot;</span>

    <span class="c1"># Note: &quot;fields&quot; is a restricted keyword in pydantic</span>
    <span class="n">packets</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">SSEField</span><span class="p">]</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">default_factory</span><span class="o">=</span><span class="nb">list</span><span class="p">,</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;The fields contained in the message.&quot;</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">











  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="aiperf.common.record_models.TextResponse" class="doc doc-heading">
            <code>TextResponse</code>


<a href="#aiperf.common.record_models.TextResponse" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="InferenceServerResponse (aiperf.common.record_models.InferenceServerResponse)" href="#aiperf.common.record_models.InferenceServerResponse">InferenceServerResponse</a></code></p>


        <p>Raw text response from a inference client including an optional content type.</p>







              <details class="quote">
                <summary>Source code in <code>aiperf/common/record_models.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span>
<span class="normal">71</span>
<span class="normal">72</span>
<span class="normal">73</span>
<span class="normal">74</span>
<span class="normal">75</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">TextResponse</span><span class="p">(</span><span class="n">InferenceServerResponse</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Raw text response from a inference client including an optional content type.&quot;&quot;&quot;</span>

    <span class="n">content_type</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">default</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;The content type of the response. e.g. &#39;text/plain&#39;, &#39;application/json&#39;.&quot;</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">text</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="o">...</span><span class="p">,</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;The text of the response.&quot;</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">











  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="aiperf.common.record_models.Transaction" class="doc doc-heading">
            <code>Transaction</code>


<a href="#aiperf.common.record_models.Transaction" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="pydantic.BaseModel">BaseModel</span></code></p>


        <p>Represents a request/response with a timestamp and associated payload.</p>


<p><span class="doc-section-title">Attributes:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code><span title="aiperf.common.record_models.Transaction.timestamp">timestamp</span></code></td>
            <td>
                  <code><span title="int">int</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The time at which the transaction was recorded.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="aiperf.common.record_models.Transaction.payload">payload</span></code></td>
            <td>
                  <code><span title="typing.Any">Any</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The data or content of the transaction.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>







              <details class="quote">
                <summary>Source code in <code>aiperf/common/record_models.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">295</span>
<span class="normal">296</span>
<span class="normal">297</span>
<span class="normal">298</span>
<span class="normal">299</span>
<span class="normal">300</span>
<span class="normal">301</span>
<span class="normal">302</span>
<span class="normal">303</span>
<span class="normal">304</span>
<span class="normal">305</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">Transaction</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Represents a request/response with a timestamp and associated payload.</span>

<span class="sd">    Attributes:</span>
<span class="sd">        timestamp: The time at which the transaction was recorded.</span>
<span class="sd">        payload: The data or content of the transaction.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">timestamp</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">description</span><span class="o">=</span><span class="s2">&quot;The timestamp of the transaction&quot;</span><span class="p">)</span>
    <span class="n">payload</span><span class="p">:</span> <span class="n">Any</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">description</span><span class="o">=</span><span class="s2">&quot;The payload of the transaction&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">











  </div>

    </div>

</div>




  </div>

    </div>

</div><h2 id="aiperfcommonservicebase_component_service">aiperf.common.service.base_component_service<a class="headerlink" href="#aiperfcommonservicebase_component_service" title="Permanent link">&para;</a></h2>


<div class="doc doc-object doc-module">



<a id="aiperf.common.service.base_component_service"></a>
    <div class="doc doc-contents first">









  <div class="doc doc-children">








<div class="doc doc-object doc-class">



<h2 id="aiperf.common.service.base_component_service.BaseComponentService" class="doc doc-heading">
            <code>BaseComponentService</code>


<a href="#aiperf.common.service.base_component_service.BaseComponentService" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="BaseService (aiperf.common.service.base_service.BaseService)" href="#aiperf.common.service.base_service.BaseService">BaseService</a></code></p>


        <p>Base class for all Component services.</p>
<p>This class provides a common interface for all Component services in the AIPerf
framework such as the Timing Manager, Dataset Manager, etc.</p>
<p>It extends the BaseService by:
- Subscribing to the command topic
- Processing command messages
- Sending registration requests to the system controller
- Sending heartbeat notifications to the system controller
- Sending status notifications to the system controller
- Helpers to create heartbeat, registration, and status messages
- Request the appropriate communication clients for a component service</p>







              <details class="quote">
                <summary>Source code in <code>aiperf/common/service/base_component_service.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 23</span>
<span class="normal"> 24</span>
<span class="normal"> 25</span>
<span class="normal"> 26</span>
<span class="normal"> 27</span>
<span class="normal"> 28</span>
<span class="normal"> 29</span>
<span class="normal"> 30</span>
<span class="normal"> 31</span>
<span class="normal"> 32</span>
<span class="normal"> 33</span>
<span class="normal"> 34</span>
<span class="normal"> 35</span>
<span class="normal"> 36</span>
<span class="normal"> 37</span>
<span class="normal"> 38</span>
<span class="normal"> 39</span>
<span class="normal"> 40</span>
<span class="normal"> 41</span>
<span class="normal"> 42</span>
<span class="normal"> 43</span>
<span class="normal"> 44</span>
<span class="normal"> 45</span>
<span class="normal"> 46</span>
<span class="normal"> 47</span>
<span class="normal"> 48</span>
<span class="normal"> 49</span>
<span class="normal"> 50</span>
<span class="normal"> 51</span>
<span class="normal"> 52</span>
<span class="normal"> 53</span>
<span class="normal"> 54</span>
<span class="normal"> 55</span>
<span class="normal"> 56</span>
<span class="normal"> 57</span>
<span class="normal"> 58</span>
<span class="normal"> 59</span>
<span class="normal"> 60</span>
<span class="normal"> 61</span>
<span class="normal"> 62</span>
<span class="normal"> 63</span>
<span class="normal"> 64</span>
<span class="normal"> 65</span>
<span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">BaseComponentService</span><span class="p">(</span><span class="n">BaseService</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Base class for all Component services.</span>

<span class="sd">    This class provides a common interface for all Component services in the AIPerf</span>
<span class="sd">    framework such as the Timing Manager, Dataset Manager, etc.</span>

<span class="sd">    It extends the BaseService by:</span>
<span class="sd">    - Subscribing to the command topic</span>
<span class="sd">    - Processing command messages</span>
<span class="sd">    - Sending registration requests to the system controller</span>
<span class="sd">    - Sending heartbeat notifications to the system controller</span>
<span class="sd">    - Sending status notifications to the system controller</span>
<span class="sd">    - Helpers to create heartbeat, registration, and status messages</span>
<span class="sd">    - Request the appropriate communication clients for a component service</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">service_config</span><span class="p">:</span> <span class="n">ServiceConfig</span><span class="p">,</span> <span class="n">service_id</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">service_config</span><span class="o">=</span><span class="n">service_config</span><span class="p">,</span> <span class="n">service_id</span><span class="o">=</span><span class="n">service_id</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">required_clients</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="n">ClientType</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;The communication clients required by the service.</span>

<span class="sd">        The component services subscribe to controller messages and publish</span>
<span class="sd">        component messages.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="p">[</span>
            <span class="o">*</span><span class="p">(</span><span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">required_clients</span> <span class="ow">or</span> <span class="p">[]),</span>
            <span class="n">PubClientType</span><span class="o">.</span><span class="n">COMPONENT</span><span class="p">,</span>
            <span class="n">SubClientType</span><span class="o">.</span><span class="n">CONTROLLER</span><span class="p">,</span>
        <span class="p">]</span>

    <span class="nd">@on_run</span>
    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">_on_run</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Automatically subscribe to the command topic and register the service</span>
<span class="sd">        with the system controller when the run hook is called.</span>

<span class="sd">        This method will:</span>
<span class="sd">        - Subscribe to the command topic</span>
<span class="sd">        - Wait for the communication to be fully initialized</span>
<span class="sd">        - Register the service with the system controller</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Subscribe to the command topic</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">comms</span><span class="o">.</span><span class="n">subscribe</span><span class="p">(</span>
                <span class="n">Topic</span><span class="o">.</span><span class="n">COMMAND</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">process_command_message</span><span class="p">,</span>
            <span class="p">)</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">&quot;Exception subscribing to command topic: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">e</span><span class="p">)</span>
            <span class="k">raise</span> <span class="n">CommunicationSubscribeError</span><span class="p">(</span>
                <span class="s2">&quot;Failed to subscribe to command topic&quot;</span>
            <span class="p">)</span> <span class="kn">from</span><span class="w"> </span><span class="nn">e</span>

        <span class="c1"># TODO: Find a way to wait for the communication to be fully initialized</span>
        <span class="c1"># FIXME: This is a hack to ensure the communication is fully initialized</span>
        <span class="k">await</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>

        <span class="c1"># Register the service</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">register</span><span class="p">()</span>
            <span class="k">await</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mf">0.5</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">ServiceRegistrationError</span><span class="p">()</span> <span class="kn">from</span><span class="w"> </span><span class="nn">e</span>

    <span class="nd">@aiperf_task</span>
    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">_heartbeat_task</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Starts a background task to send heartbeats at regular intervals. It</span>
<span class="sd">        will continue to send heartbeats even if an error occurs until the stop</span>
<span class="sd">        event is set.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">while</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">stop_event</span><span class="o">.</span><span class="n">is_set</span><span class="p">():</span>
            <span class="c1"># Sleep first to avoid sending a heartbeat before the registration</span>
            <span class="c1"># message has been published</span>
            <span class="k">await</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_heartbeat_interval</span><span class="p">)</span>

            <span class="k">try</span><span class="p">:</span>
                <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">send_heartbeat</span><span class="p">()</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;Exception sending heartbeat: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">e</span><span class="p">)</span>
                <span class="c1"># continue to keep sending heartbeats regardless of the error</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Heartbeat task stopped&quot;</span><span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">send_heartbeat</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Send a heartbeat notification to the system controller.&quot;&quot;&quot;</span>
        <span class="n">heartbeat_message</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">create_heartbeat_message</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Sending heartbeat: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">heartbeat_message</span><span class="p">)</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">comms</span><span class="o">.</span><span class="n">publish</span><span class="p">(</span>
                <span class="n">topic</span><span class="o">=</span><span class="n">Topic</span><span class="o">.</span><span class="n">HEARTBEAT</span><span class="p">,</span>
                <span class="n">message</span><span class="o">=</span><span class="n">heartbeat_message</span><span class="p">,</span>
            <span class="p">)</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">ServiceHeartbeatError</span> <span class="kn">from</span><span class="w"> </span><span class="nn">e</span>

    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">register</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Publish a registration request to the system controller.</span>

<span class="sd">        This method should be called after the service has been initialized and is</span>
<span class="sd">        ready to start processing messages.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span>
            <span class="s2">&quot;Attempting to register service </span><span class="si">%s</span><span class="s2"> (</span><span class="si">%s</span><span class="s2">) with system controller&quot;</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">service_type</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">service_id</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">comms</span><span class="o">.</span><span class="n">publish</span><span class="p">(</span>
                <span class="n">topic</span><span class="o">=</span><span class="n">Topic</span><span class="o">.</span><span class="n">REGISTRATION</span><span class="p">,</span>
                <span class="n">message</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">create_registration_message</span><span class="p">(),</span>
            <span class="p">)</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">ServiceRegistrationError</span><span class="p">()</span> <span class="kn">from</span><span class="w"> </span><span class="nn">e</span>

    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">process_command_message</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">message</span><span class="p">:</span> <span class="n">CommandMessage</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Process a command message received from the controller.</span>

<span class="sd">        This method will process the command message and execute the appropriate action.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">message</span><span class="o">.</span><span class="n">target_service_id</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">[</span><span class="kc">None</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">service_id</span><span class="p">]:</span>
            <span class="k">return</span>  <span class="c1"># Ignore commands meant for other services</span>

        <span class="n">cmd</span> <span class="o">=</span> <span class="n">message</span><span class="o">.</span><span class="n">command</span>
        <span class="k">if</span> <span class="n">cmd</span> <span class="o">==</span> <span class="n">CommandType</span><span class="o">.</span><span class="n">PROFILE_START</span><span class="p">:</span>
            <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>

        <span class="k">elif</span> <span class="n">cmd</span> <span class="o">==</span> <span class="n">CommandType</span><span class="o">.</span><span class="n">PROFILE_STOP</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">stop_event</span><span class="o">.</span><span class="n">set</span><span class="p">()</span>

        <span class="k">elif</span> <span class="n">cmd</span> <span class="o">==</span> <span class="n">CommandType</span><span class="o">.</span><span class="n">PROFILE_CONFIGURE</span><span class="p">:</span>
            <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">run_hooks</span><span class="p">(</span><span class="n">AIPerfHook</span><span class="o">.</span><span class="n">ON_CONFIGURE</span><span class="p">,</span> <span class="n">message</span><span class="p">)</span>

        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">service_type</span><span class="si">}</span><span class="s2"> received unknown command: </span><span class="si">{</span><span class="n">cmd</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="nd">@on_set_state</span>
    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">_on_set_state</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">state</span><span class="p">:</span> <span class="n">ServiceState</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Action to take when the service state is set.</span>

<span class="sd">        This method will also publish the status message to the status topic if the</span>
<span class="sd">        communications are initialized.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_comms</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">_comms</span><span class="o">.</span><span class="n">is_initialized</span><span class="p">:</span>
            <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">comms</span><span class="o">.</span><span class="n">publish</span><span class="p">(</span>
                <span class="n">topic</span><span class="o">=</span><span class="n">Topic</span><span class="o">.</span><span class="n">STATUS</span><span class="p">,</span>
                <span class="n">message</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">create_status_message</span><span class="p">(</span><span class="n">state</span><span class="p">),</span>
            <span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">create_heartbeat_message</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">HeartbeatMessage</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Create a heartbeat notification message.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">HeartbeatMessage</span><span class="p">(</span>
            <span class="n">service_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">service_id</span><span class="p">,</span>
            <span class="n">service_type</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">service_type</span><span class="p">,</span>
        <span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">create_registration_message</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">RegistrationMessage</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Create a registration request message.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">RegistrationMessage</span><span class="p">(</span>
            <span class="n">service_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">service_id</span><span class="p">,</span>
            <span class="n">service_type</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">service_type</span><span class="p">,</span>
        <span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">create_status_message</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">state</span><span class="p">:</span> <span class="n">ServiceState</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">StatusMessage</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Create a status notification message.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">StatusMessage</span><span class="p">(</span>
            <span class="n">service_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">service_id</span><span class="p">,</span>
            <span class="n">state</span><span class="o">=</span><span class="n">state</span><span class="p">,</span>
            <span class="n">service_type</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">service_type</span><span class="p">,</span>
        <span class="p">)</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">







<div class="doc doc-object doc-attribute">



<h3 id="aiperf.common.service.base_component_service.BaseComponentService.required_clients" class="doc doc-heading">
            <code class=" language-python"><span class="n">required_clients</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

<a href="#aiperf.common.service.base_component_service.BaseComponentService.required_clients" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>The communication clients required by the service.</p>
<p>The component services subscribe to controller messages and publish
component messages.</p>

    </div>

</div>



<div class="doc doc-object doc-function">


<h3 id="aiperf.common.service.base_component_service.BaseComponentService.create_heartbeat_message" class="doc doc-heading">
            <code class=" language-python"><span class="n">create_heartbeat_message</span><span class="p">()</span></code>

<a href="#aiperf.common.service.base_component_service.BaseComponentService.create_heartbeat_message" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Create a heartbeat notification message.</p>


            <details class="quote">
              <summary>Source code in <code>aiperf/common/service/base_component_service.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">create_heartbeat_message</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">HeartbeatMessage</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Create a heartbeat notification message.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">HeartbeatMessage</span><span class="p">(</span>
        <span class="n">service_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">service_id</span><span class="p">,</span>
        <span class="n">service_type</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">service_type</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="aiperf.common.service.base_component_service.BaseComponentService.create_registration_message" class="doc doc-heading">
            <code class=" language-python"><span class="n">create_registration_message</span><span class="p">()</span></code>

<a href="#aiperf.common.service.base_component_service.BaseComponentService.create_registration_message" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Create a registration request message.</p>


            <details class="quote">
              <summary>Source code in <code>aiperf/common/service/base_component_service.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">create_registration_message</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">RegistrationMessage</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Create a registration request message.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">RegistrationMessage</span><span class="p">(</span>
        <span class="n">service_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">service_id</span><span class="p">,</span>
        <span class="n">service_type</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">service_type</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="aiperf.common.service.base_component_service.BaseComponentService.create_status_message" class="doc doc-heading">
            <code class=" language-python"><span class="n">create_status_message</span><span class="p">(</span><span class="n">state</span><span class="p">)</span></code>

<a href="#aiperf.common.service.base_component_service.BaseComponentService.create_status_message" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Create a status notification message.</p>


            <details class="quote">
              <summary>Source code in <code>aiperf/common/service/base_component_service.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">create_status_message</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">state</span><span class="p">:</span> <span class="n">ServiceState</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">StatusMessage</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Create a status notification message.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">StatusMessage</span><span class="p">(</span>
        <span class="n">service_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">service_id</span><span class="p">,</span>
        <span class="n">state</span><span class="o">=</span><span class="n">state</span><span class="p">,</span>
        <span class="n">service_type</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">service_type</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="aiperf.common.service.base_component_service.BaseComponentService.process_command_message" class="doc doc-heading">
            <code class=" language-python"><span class="n">process_command_message</span><span class="p">(</span><span class="n">message</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#aiperf.common.service.base_component_service.BaseComponentService.process_command_message" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Process a command message received from the controller.</p>
<p>This method will process the command message and execute the appropriate action.</p>


            <details class="quote">
              <summary>Source code in <code>aiperf/common/service/base_component_service.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">process_command_message</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">message</span><span class="p">:</span> <span class="n">CommandMessage</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Process a command message received from the controller.</span>

<span class="sd">    This method will process the command message and execute the appropriate action.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">message</span><span class="o">.</span><span class="n">target_service_id</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">[</span><span class="kc">None</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">service_id</span><span class="p">]:</span>
        <span class="k">return</span>  <span class="c1"># Ignore commands meant for other services</span>

    <span class="n">cmd</span> <span class="o">=</span> <span class="n">message</span><span class="o">.</span><span class="n">command</span>
    <span class="k">if</span> <span class="n">cmd</span> <span class="o">==</span> <span class="n">CommandType</span><span class="o">.</span><span class="n">PROFILE_START</span><span class="p">:</span>
        <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>

    <span class="k">elif</span> <span class="n">cmd</span> <span class="o">==</span> <span class="n">CommandType</span><span class="o">.</span><span class="n">PROFILE_STOP</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">stop_event</span><span class="o">.</span><span class="n">set</span><span class="p">()</span>

    <span class="k">elif</span> <span class="n">cmd</span> <span class="o">==</span> <span class="n">CommandType</span><span class="o">.</span><span class="n">PROFILE_CONFIGURE</span><span class="p">:</span>
        <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">run_hooks</span><span class="p">(</span><span class="n">AIPerfHook</span><span class="o">.</span><span class="n">ON_CONFIGURE</span><span class="p">,</span> <span class="n">message</span><span class="p">)</span>

    <span class="k">else</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">service_type</span><span class="si">}</span><span class="s2"> received unknown command: </span><span class="si">{</span><span class="n">cmd</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="aiperf.common.service.base_component_service.BaseComponentService.register" class="doc doc-heading">
            <code class=" language-python"><span class="n">register</span><span class="p">()</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#aiperf.common.service.base_component_service.BaseComponentService.register" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Publish a registration request to the system controller.</p>
<p>This method should be called after the service has been initialized and is
ready to start processing messages.</p>


            <details class="quote">
              <summary>Source code in <code>aiperf/common/service/base_component_service.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">register</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Publish a registration request to the system controller.</span>

<span class="sd">    This method should be called after the service has been initialized and is</span>
<span class="sd">    ready to start processing messages.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span>
        <span class="s2">&quot;Attempting to register service </span><span class="si">%s</span><span class="s2"> (</span><span class="si">%s</span><span class="s2">) with system controller&quot;</span><span class="p">,</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">service_type</span><span class="p">,</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">service_id</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">comms</span><span class="o">.</span><span class="n">publish</span><span class="p">(</span>
            <span class="n">topic</span><span class="o">=</span><span class="n">Topic</span><span class="o">.</span><span class="n">REGISTRATION</span><span class="p">,</span>
            <span class="n">message</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">create_registration_message</span><span class="p">(),</span>
        <span class="p">)</span>
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">ServiceRegistrationError</span><span class="p">()</span> <span class="kn">from</span><span class="w"> </span><span class="nn">e</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="aiperf.common.service.base_component_service.BaseComponentService.send_heartbeat" class="doc doc-heading">
            <code class=" language-python"><span class="n">send_heartbeat</span><span class="p">()</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#aiperf.common.service.base_component_service.BaseComponentService.send_heartbeat" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Send a heartbeat notification to the system controller.</p>


            <details class="quote">
              <summary>Source code in <code>aiperf/common/service/base_component_service.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">send_heartbeat</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Send a heartbeat notification to the system controller.&quot;&quot;&quot;</span>
    <span class="n">heartbeat_message</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">create_heartbeat_message</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Sending heartbeat: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">heartbeat_message</span><span class="p">)</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">comms</span><span class="o">.</span><span class="n">publish</span><span class="p">(</span>
            <span class="n">topic</span><span class="o">=</span><span class="n">Topic</span><span class="o">.</span><span class="n">HEARTBEAT</span><span class="p">,</span>
            <span class="n">message</span><span class="o">=</span><span class="n">heartbeat_message</span><span class="p">,</span>
        <span class="p">)</span>
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">ServiceHeartbeatError</span> <span class="kn">from</span><span class="w"> </span><span class="nn">e</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>




  </div>

    </div>

</div><h2 id="aiperfcommonservicebase_controller_service">aiperf.common.service.base_controller_service<a class="headerlink" href="#aiperfcommonservicebase_controller_service" title="Permanent link">&para;</a></h2>


<div class="doc doc-object doc-module">



<a id="aiperf.common.service.base_controller_service"></a>
    <div class="doc doc-contents first">









  <div class="doc doc-children">








<div class="doc doc-object doc-class">



<h2 id="aiperf.common.service.base_controller_service.BaseControllerService" class="doc doc-heading">
            <code>BaseControllerService</code>


<a href="#aiperf.common.service.base_controller_service.BaseControllerService" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="BaseService (aiperf.common.service.base_service.BaseService)" href="#aiperf.common.service.base_service.BaseService">BaseService</a></code></p>


        <p>Base class for all controller services, such as the System Controller.</p>
<p>This class provides a common interface for all controller services in the AIPerf
framework. It inherits from the BaseService class and implements the required
methods for controller services.</p>
<p>It extends the BaseService by:
- Starting the service automatically when the run hook is called
- Helpers to create command messages to be sent to a specific service
- Request the appropriate communication clients for a controller service</p>







              <details class="quote">
                <summary>Source code in <code>aiperf/common/service/base_controller_service.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span>
<span class="normal">71</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">BaseControllerService</span><span class="p">(</span><span class="n">BaseService</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Base class for all controller services, such as the System Controller.</span>

<span class="sd">    This class provides a common interface for all controller services in the AIPerf</span>
<span class="sd">    framework. It inherits from the BaseService class and implements the required</span>
<span class="sd">    methods for controller services.</span>

<span class="sd">    It extends the BaseService by:</span>
<span class="sd">    - Starting the service automatically when the run hook is called</span>
<span class="sd">    - Helpers to create command messages to be sent to a specific service</span>
<span class="sd">    - Request the appropriate communication clients for a controller service</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">service_config</span><span class="p">:</span> <span class="n">ServiceConfig</span><span class="p">,</span> <span class="n">service_id</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">service_config</span><span class="o">=</span><span class="n">service_config</span><span class="p">,</span> <span class="n">service_id</span><span class="o">=</span><span class="n">service_id</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">required_clients</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="n">ClientType</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;The communication clients required by the service.</span>

<span class="sd">        The controller service subscribes to controller messages and publishes</span>
<span class="sd">        to components.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="p">[</span>
            <span class="o">*</span><span class="p">(</span><span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">required_clients</span> <span class="ow">or</span> <span class="p">[]),</span>
            <span class="n">PubClientType</span><span class="o">.</span><span class="n">CONTROLLER</span><span class="p">,</span>
            <span class="n">SubClientType</span><span class="o">.</span><span class="n">COMPONENT</span><span class="p">,</span>
        <span class="p">]</span>

    <span class="nd">@on_run</span>
    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">_on_run</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Automatically start the service when the run hook is called.&quot;&quot;&quot;</span>
        <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">create_command_message</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">command</span><span class="p">:</span> <span class="n">CommandType</span><span class="p">,</span>
        <span class="n">target_service_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">data</span><span class="p">:</span> <span class="n">BaseModel</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">CommandMessage</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Create a command message to be sent to a specific service.</span>

<span class="sd">        Args:</span>
<span class="sd">            command: The command to send</span>
<span class="sd">            target_service_id: The ID of the service to send the command to</span>
<span class="sd">            data: Optional data to send with the command.</span>

<span class="sd">        Returns:</span>
<span class="sd">            A command message</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">CommandMessage</span><span class="p">(</span>
            <span class="n">service_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">service_id</span><span class="p">,</span>
            <span class="n">command</span><span class="o">=</span><span class="n">command</span><span class="p">,</span>
            <span class="n">target_service_id</span><span class="o">=</span><span class="n">target_service_id</span><span class="p">,</span>
            <span class="n">data</span><span class="o">=</span><span class="n">data</span><span class="p">,</span>
        <span class="p">)</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">







<div class="doc doc-object doc-attribute">



<h3 id="aiperf.common.service.base_controller_service.BaseControllerService.required_clients" class="doc doc-heading">
            <code class=" language-python"><span class="n">required_clients</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

<a href="#aiperf.common.service.base_controller_service.BaseControllerService.required_clients" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>The communication clients required by the service.</p>
<p>The controller service subscribes to controller messages and publishes
to components.</p>

    </div>

</div>



<div class="doc doc-object doc-function">


<h3 id="aiperf.common.service.base_controller_service.BaseControllerService.create_command_message" class="doc doc-heading">
            <code class=" language-python"><span class="n">create_command_message</span><span class="p">(</span><span class="n">command</span><span class="p">,</span> <span class="n">target_service_id</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

<a href="#aiperf.common.service.base_controller_service.BaseControllerService.create_command_message" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Create a command message to be sent to a specific service.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>command</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="CommandType (aiperf.common.enums.CommandType)" href="#aiperf.common.enums.CommandType">CommandType</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The command to send</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>target_service_id</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The ID of the service to send the command to</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>data</code>
            </td>
            <td>
                  <code><span title="pydantic.BaseModel">BaseModel</span> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Optional data to send with the command.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="CommandMessage (aiperf.common.messages.CommandMessage)" href="#aiperf.common.messages.CommandMessage">CommandMessage</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A command message</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>aiperf/common/service/base_controller_service.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span>
<span class="normal">71</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">create_command_message</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">command</span><span class="p">:</span> <span class="n">CommandType</span><span class="p">,</span>
    <span class="n">target_service_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">data</span><span class="p">:</span> <span class="n">BaseModel</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">CommandMessage</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Create a command message to be sent to a specific service.</span>

<span class="sd">    Args:</span>
<span class="sd">        command: The command to send</span>
<span class="sd">        target_service_id: The ID of the service to send the command to</span>
<span class="sd">        data: Optional data to send with the command.</span>

<span class="sd">    Returns:</span>
<span class="sd">        A command message</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">CommandMessage</span><span class="p">(</span>
        <span class="n">service_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">service_id</span><span class="p">,</span>
        <span class="n">command</span><span class="o">=</span><span class="n">command</span><span class="p">,</span>
        <span class="n">target_service_id</span><span class="o">=</span><span class="n">target_service_id</span><span class="p">,</span>
        <span class="n">data</span><span class="o">=</span><span class="n">data</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>




  </div>

    </div>

</div><h2 id="aiperfcommonservicebase_service">aiperf.common.service.base_service<a class="headerlink" href="#aiperfcommonservicebase_service" title="Permanent link">&para;</a></h2>


<div class="doc doc-object doc-module">



<a id="aiperf.common.service.base_service"></a>
    <div class="doc doc-contents first">









  <div class="doc doc-children">








<div class="doc doc-object doc-class">



<h2 id="aiperf.common.service.base_service.BaseService" class="doc doc-heading">
            <code>BaseService</code>


<a href="#aiperf.common.service.base_service.BaseService" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="BaseServiceInterface (aiperf.common.service.base_service_interface.BaseServiceInterface)" href="#aiperf.common.service.base_service_interface.BaseServiceInterface">BaseServiceInterface</a></code>, <code><span title="abc.ABC">ABC</span></code>, <code><a class="autorefs autorefs-internal" title="AIPerfTaskMixin (aiperf.common.hooks.AIPerfTaskMixin)" href="#aiperf.common.hooks.AIPerfTaskMixin">AIPerfTaskMixin</a></code></p>


        <p>Base class for all AIPerf services, providing common functionality for
communication, state management, and lifecycle operations.</p>
<p>This class provides the foundation for implementing the various services of the
AIPerf system. Some of the abstract methods are implemented here, while others
are still required to be implemented by derived classes.</p>







              <details class="quote">
                <summary>Source code in <code>aiperf/common/service/base_service.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 29</span>
<span class="normal"> 30</span>
<span class="normal"> 31</span>
<span class="normal"> 32</span>
<span class="normal"> 33</span>
<span class="normal"> 34</span>
<span class="normal"> 35</span>
<span class="normal"> 36</span>
<span class="normal"> 37</span>
<span class="normal"> 38</span>
<span class="normal"> 39</span>
<span class="normal"> 40</span>
<span class="normal"> 41</span>
<span class="normal"> 42</span>
<span class="normal"> 43</span>
<span class="normal"> 44</span>
<span class="normal"> 45</span>
<span class="normal"> 46</span>
<span class="normal"> 47</span>
<span class="normal"> 48</span>
<span class="normal"> 49</span>
<span class="normal"> 50</span>
<span class="normal"> 51</span>
<span class="normal"> 52</span>
<span class="normal"> 53</span>
<span class="normal"> 54</span>
<span class="normal"> 55</span>
<span class="normal"> 56</span>
<span class="normal"> 57</span>
<span class="normal"> 58</span>
<span class="normal"> 59</span>
<span class="normal"> 60</span>
<span class="normal"> 61</span>
<span class="normal"> 62</span>
<span class="normal"> 63</span>
<span class="normal"> 64</span>
<span class="normal"> 65</span>
<span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span>
<span class="normal">278</span>
<span class="normal">279</span>
<span class="normal">280</span>
<span class="normal">281</span>
<span class="normal">282</span>
<span class="normal">283</span>
<span class="normal">284</span>
<span class="normal">285</span>
<span class="normal">286</span>
<span class="normal">287</span>
<span class="normal">288</span>
<span class="normal">289</span>
<span class="normal">290</span>
<span class="normal">291</span>
<span class="normal">292</span>
<span class="normal">293</span>
<span class="normal">294</span>
<span class="normal">295</span>
<span class="normal">296</span>
<span class="normal">297</span>
<span class="normal">298</span>
<span class="normal">299</span>
<span class="normal">300</span>
<span class="normal">301</span>
<span class="normal">302</span>
<span class="normal">303</span>
<span class="normal">304</span>
<span class="normal">305</span>
<span class="normal">306</span>
<span class="normal">307</span>
<span class="normal">308</span>
<span class="normal">309</span>
<span class="normal">310</span>
<span class="normal">311</span>
<span class="normal">312</span>
<span class="normal">313</span>
<span class="normal">314</span>
<span class="normal">315</span>
<span class="normal">316</span>
<span class="normal">317</span>
<span class="normal">318</span>
<span class="normal">319</span>
<span class="normal">320</span>
<span class="normal">321</span>
<span class="normal">322</span>
<span class="normal">323</span>
<span class="normal">324</span>
<span class="normal">325</span>
<span class="normal">326</span>
<span class="normal">327</span>
<span class="normal">328</span>
<span class="normal">329</span>
<span class="normal">330</span>
<span class="normal">331</span>
<span class="normal">332</span>
<span class="normal">333</span>
<span class="normal">334</span>
<span class="normal">335</span>
<span class="normal">336</span>
<span class="normal">337</span>
<span class="normal">338</span>
<span class="normal">339</span>
<span class="normal">340</span>
<span class="normal">341</span>
<span class="normal">342</span>
<span class="normal">343</span>
<span class="normal">344</span>
<span class="normal">345</span>
<span class="normal">346</span>
<span class="normal">347</span>
<span class="normal">348</span>
<span class="normal">349</span>
<span class="normal">350</span>
<span class="normal">351</span>
<span class="normal">352</span>
<span class="normal">353</span>
<span class="normal">354</span>
<span class="normal">355</span>
<span class="normal">356</span>
<span class="normal">357</span>
<span class="normal">358</span>
<span class="normal">359</span>
<span class="normal">360</span>
<span class="normal">361</span>
<span class="normal">362</span>
<span class="normal">363</span>
<span class="normal">364</span>
<span class="normal">365</span>
<span class="normal">366</span>
<span class="normal">367</span>
<span class="normal">368</span>
<span class="normal">369</span>
<span class="normal">370</span>
<span class="normal">371</span>
<span class="normal">372</span>
<span class="normal">373</span>
<span class="normal">374</span>
<span class="normal">375</span>
<span class="normal">376</span>
<span class="normal">377</span>
<span class="normal">378</span>
<span class="normal">379</span>
<span class="normal">380</span>
<span class="normal">381</span>
<span class="normal">382</span>
<span class="normal">383</span>
<span class="normal">384</span>
<span class="normal">385</span>
<span class="normal">386</span>
<span class="normal">387</span>
<span class="normal">388</span>
<span class="normal">389</span>
<span class="normal">390</span>
<span class="normal">391</span>
<span class="normal">392</span>
<span class="normal">393</span>
<span class="normal">394</span>
<span class="normal">395</span>
<span class="normal">396</span>
<span class="normal">397</span>
<span class="normal">398</span>
<span class="normal">399</span>
<span class="normal">400</span>
<span class="normal">401</span>
<span class="normal">402</span>
<span class="normal">403</span>
<span class="normal">404</span>
<span class="normal">405</span>
<span class="normal">406</span>
<span class="normal">407</span>
<span class="normal">408</span>
<span class="normal">409</span>
<span class="normal">410</span>
<span class="normal">411</span>
<span class="normal">412</span>
<span class="normal">413</span>
<span class="normal">414</span>
<span class="normal">415</span>
<span class="normal">416</span>
<span class="normal">417</span>
<span class="normal">418</span>
<span class="normal">419</span>
<span class="normal">420</span>
<span class="normal">421</span>
<span class="normal">422</span>
<span class="normal">423</span>
<span class="normal">424</span>
<span class="normal">425</span>
<span class="normal">426</span>
<span class="normal">427</span>
<span class="normal">428</span>
<span class="normal">429</span>
<span class="normal">430</span>
<span class="normal">431</span>
<span class="normal">432</span>
<span class="normal">433</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@supports_hooks</span><span class="p">(</span>
    <span class="n">AIPerfHook</span><span class="o">.</span><span class="n">ON_INIT</span><span class="p">,</span>
    <span class="n">AIPerfHook</span><span class="o">.</span><span class="n">ON_RUN</span><span class="p">,</span>
    <span class="n">AIPerfHook</span><span class="o">.</span><span class="n">ON_CONFIGURE</span><span class="p">,</span>
    <span class="n">AIPerfHook</span><span class="o">.</span><span class="n">ON_START</span><span class="p">,</span>
    <span class="n">AIPerfHook</span><span class="o">.</span><span class="n">ON_STOP</span><span class="p">,</span>
    <span class="n">AIPerfHook</span><span class="o">.</span><span class="n">ON_CLEANUP</span><span class="p">,</span>
    <span class="n">AIPerfHook</span><span class="o">.</span><span class="n">ON_SET_STATE</span><span class="p">,</span>
    <span class="n">AIPerfHook</span><span class="o">.</span><span class="n">AIPERF_TASK</span><span class="p">,</span>
<span class="p">)</span>
<span class="k">class</span><span class="w"> </span><span class="nc">BaseService</span><span class="p">(</span><span class="n">BaseServiceInterface</span><span class="p">,</span> <span class="n">ABC</span><span class="p">,</span> <span class="n">AIPerfTaskMixin</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Base class for all AIPerf services, providing common functionality for</span>
<span class="sd">    communication, state management, and lifecycle operations.</span>

<span class="sd">    This class provides the foundation for implementing the various services of the</span>
<span class="sd">    AIPerf system. Some of the abstract methods are implemented here, while others</span>
<span class="sd">    are still required to be implemented by derived classes.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">service_config</span><span class="p">:</span> <span class="n">ServiceConfig</span><span class="p">,</span> <span class="n">service_id</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">service_id</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="p">(</span>
            <span class="n">service_id</span> <span class="ow">or</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">service_type</span><span class="si">}</span><span class="s2">_</span><span class="si">{</span><span class="n">uuid</span><span class="o">.</span><span class="n">uuid4</span><span class="p">()</span><span class="o">.</span><span class="n">hex</span><span class="p">[:</span><span class="mi">8</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">service_config</span> <span class="o">=</span> <span class="n">service_config</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span> <span class="o">=</span> <span class="n">logging</span><span class="o">.</span><span class="n">getLogger</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">service_type</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;Initializing </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">service_type</span><span class="si">}</span><span class="s2"> service (id: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">service_id</span><span class="si">}</span><span class="s2">)&quot;</span>
        <span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_state</span><span class="p">:</span> <span class="n">ServiceState</span> <span class="o">=</span> <span class="n">ServiceState</span><span class="o">.</span><span class="n">UNKNOWN</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_heartbeat_interval</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">service_config</span><span class="o">.</span><span class="n">heartbeat_interval</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">stop_event</span> <span class="o">=</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">Event</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">initialized_event</span> <span class="o">=</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">Event</span><span class="p">()</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_comms</span><span class="p">:</span> <span class="n">BaseCommunication</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>

        <span class="c1"># Set to store signal handler tasks</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_signal_tasks</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="kn">import</span><span class="w"> </span><span class="nn">setproctitle</span>

            <span class="n">setproctitle</span><span class="o">.</span><span class="n">setproctitle</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;aiperf </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">service_id</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
            <span class="c1"># setproctitle is not available on all platforms, so we ignore the error</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Failed to set process title, ignoring&quot;</span><span class="p">)</span>

        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;__init__ finished for </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">comms</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">BaseCommunication</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get the communication object for the service.</span>
<span class="sd">        Raises:</span>
<span class="sd">            CommunicationNotInitializedError: If the communication is not initialized</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_comms</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">CommunicationNotInitializedError</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_comms</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">state</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ServiceState</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;The current state of the service.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_state</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">is_initialized</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Check if service is initialized.</span>

<span class="sd">        Returns:</span>
<span class="sd">            True if service is initialized, False otherwise</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">initialized_event</span><span class="o">.</span><span class="n">is_set</span><span class="p">()</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">is_shutdown</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Check if service is shutdown.</span>

<span class="sd">        Returns:</span>
<span class="sd">            True if service is shutdown, False otherwise</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">stop_event</span><span class="o">.</span><span class="n">is_set</span><span class="p">()</span>

    <span class="c1"># Note: Not using as a setter so it can be overridden by derived classes and still</span>
    <span class="c1"># be async</span>
    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">set_state</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">state</span><span class="p">:</span> <span class="n">ServiceState</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Set the state of the service. This method implements</span>
<span class="sd">        the `BaseServiceInterface.set_state` method.</span>

<span class="sd">        This method will:</span>
<span class="sd">        - Set the service state to the given state</span>
<span class="sd">        - Call all registered `AIPerfHook.ON_SET_STATE` hooks</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_state</span> <span class="o">=</span> <span class="n">state</span>
        <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">run_hooks</span><span class="p">(</span><span class="n">AIPerfHook</span><span class="o">.</span><span class="n">ON_SET_STATE</span><span class="p">,</span> <span class="n">state</span><span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">initialize</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Initialize the service communication and signal handlers. This method implements</span>
<span class="sd">        the `BaseServiceInterface.initialize` method.</span>

<span class="sd">        This method will:</span>
<span class="sd">        - Set the service to `ServiceState.INITIALIZING` state</span>
<span class="sd">        - Set up signal handlers for graceful shutdown</span>
<span class="sd">        - Allow time for the event loop to start</span>
<span class="sd">        - Initialize communication</span>
<span class="sd">        - Call all registered `AIPerfHook.ON_INIT` hooks</span>
<span class="sd">        - Set the service to `ServiceState.READY` state</span>
<span class="sd">        - Set the initialized asyncio event</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_state</span> <span class="o">=</span> <span class="n">ServiceState</span><span class="o">.</span><span class="n">INITIALIZING</span>
        <span class="c1"># Set up signal handlers for graceful shutdown</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_setup_signal_handlers</span><span class="p">()</span>
        <span class="c1"># Allow time for the event loop to start</span>
        <span class="k">await</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mf">0.1</span><span class="p">)</span>

        <span class="c1"># Initialize communication</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_comms</span> <span class="o">=</span> <span class="n">CommunicationFactory</span><span class="o">.</span><span class="n">create_instance</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">service_config</span><span class="o">.</span><span class="n">comm_backend</span><span class="p">,</span>
                <span class="n">config</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">service_config</span><span class="o">.</span><span class="n">comm_config</span><span class="p">,</span>
            <span class="p">)</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">exception</span><span class="p">(</span>
                <span class="s2">&quot;Failed to create communication for service </span><span class="si">%s</span><span class="s2"> (id: </span><span class="si">%s</span><span class="s2">)&quot;</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">service_type</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">service_id</span><span class="p">,</span>
            <span class="p">)</span>
            <span class="k">raise</span> <span class="n">CommunicationCreateError</span> <span class="kn">from</span><span class="w"> </span><span class="nn">e</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_comms</span><span class="o">.</span><span class="n">initialize</span><span class="p">()</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">exception</span><span class="p">(</span>
                <span class="s2">&quot;Failed to initialize communication for service </span><span class="si">%s</span><span class="s2"> (id: </span><span class="si">%s</span><span class="s2">)&quot;</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">service_type</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">service_id</span><span class="p">,</span>
            <span class="p">)</span>
            <span class="k">raise</span> <span class="n">ServiceInitializationError</span> <span class="kn">from</span><span class="w"> </span><span class="nn">e</span>

        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">required_clients</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="c1"># Create the communication clients ahead of time</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span>
                <span class="s2">&quot;</span><span class="si">%s</span><span class="s2">: Creating communication clients (</span><span class="si">%s</span><span class="s2">)&quot;</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">service_type</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">required_clients</span><span class="p">,</span>
            <span class="p">)</span>

            <span class="k">try</span><span class="p">:</span>
                <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_comms</span><span class="o">.</span><span class="n">create_clients</span><span class="p">(</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">required_clients</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">exception</span><span class="p">(</span>
                    <span class="s2">&quot;Failed to create communication clients for service </span><span class="si">%s</span><span class="s2"> (id: </span><span class="si">%s</span><span class="s2">)&quot;</span><span class="p">,</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">service_type</span><span class="p">,</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">service_id</span><span class="p">,</span>
                <span class="p">)</span>
                <span class="k">raise</span> <span class="n">CommunicationClientCreationError</span> <span class="kn">from</span><span class="w"> </span><span class="nn">e</span>

        <span class="c1"># Initialize any derived service components</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">run_hooks</span><span class="p">(</span><span class="n">AIPerfHook</span><span class="o">.</span><span class="n">ON_INIT</span><span class="p">)</span>
        <span class="k">except</span> <span class="n">AIPerfMultiError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">exception</span><span class="p">(</span>
                <span class="s2">&quot;Failed to initialize service </span><span class="si">%s</span><span class="s2"> (id: </span><span class="si">%s</span><span class="s2">)&quot;</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">service_type</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">service_id</span><span class="p">,</span>
            <span class="p">)</span>
            <span class="k">raise</span> <span class="n">ServiceInitializationError</span> <span class="kn">from</span><span class="w"> </span><span class="nn">e</span>

        <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">set_state</span><span class="p">(</span><span class="n">ServiceState</span><span class="o">.</span><span class="n">READY</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">initialized_event</span><span class="o">.</span><span class="n">set</span><span class="p">()</span>

    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">run_forever</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Run the service in a loop until the stop event is set. This method implements</span>
<span class="sd">        the `BaseServiceInterface.run_forever` method.</span>

<span class="sd">        This method will:</span>
<span class="sd">        - Call the initialize method to initialize the service</span>
<span class="sd">        - Call all registered `AIPerfHook.RUN` hooks</span>
<span class="sd">        - Wait for the stop event to be set</span>
<span class="sd">        - Shuts down the service when the stop event is set</span>

<span class="sd">        This method will be called as the main entry point for the service.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span>
                <span class="s2">&quot;Running </span><span class="si">%s</span><span class="s2"> service (id: </span><span class="si">%s</span><span class="s2">)&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">service_type</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">service_id</span>
            <span class="p">)</span>

            <span class="k">try</span><span class="p">:</span>
                <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">initialize</span><span class="p">()</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">exception</span><span class="p">(</span>
                    <span class="s2">&quot;Failed to initialize service </span><span class="si">%s</span><span class="s2"> (id: </span><span class="si">%s</span><span class="s2">)&quot;</span><span class="p">,</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">service_type</span><span class="p">,</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">service_id</span><span class="p">,</span>
                <span class="p">)</span>
                <span class="k">raise</span> <span class="n">ServiceRunError</span> <span class="kn">from</span><span class="w"> </span><span class="nn">e</span>

            <span class="k">try</span><span class="p">:</span>
                <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">run_hooks</span><span class="p">(</span><span class="n">AIPerfHook</span><span class="o">.</span><span class="n">ON_RUN</span><span class="p">)</span>
            <span class="k">except</span> <span class="n">AIPerfMultiError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">exception</span><span class="p">(</span>
                    <span class="s2">&quot;Failed to run service </span><span class="si">%s</span><span class="s2"> (id: </span><span class="si">%s</span><span class="s2">)&quot;</span><span class="p">,</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">service_type</span><span class="p">,</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">service_id</span><span class="p">,</span>
                <span class="p">)</span>
                <span class="k">raise</span> <span class="n">ServiceRunError</span> <span class="kn">from</span><span class="w"> </span><span class="nn">e</span>

        <span class="k">except</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">CancelledError</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Service </span><span class="si">%s</span><span class="s2"> execution cancelled&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">service_type</span><span class="p">)</span>
            <span class="k">return</span>

        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">exception</span><span class="p">(</span><span class="s2">&quot;Service </span><span class="si">%s</span><span class="s2"> execution failed:&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">service_type</span><span class="p">)</span>
            <span class="n">_</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">set_state</span><span class="p">(</span><span class="n">ServiceState</span><span class="o">.</span><span class="n">ERROR</span><span class="p">)</span>
            <span class="k">raise</span> <span class="n">ServiceRunError</span><span class="p">(</span>
                <span class="s2">&quot;Service </span><span class="si">%s</span><span class="s2"> execution failed&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">service_type</span>
            <span class="p">)</span> <span class="kn">from</span><span class="w"> </span><span class="nn">e</span>

        <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_forever_loop</span><span class="p">()</span>

    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">_forever_loop</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        This method will be called by the `run_forever` method to allow the service to run</span>
<span class="sd">        indefinitely. This method is not expected to be overridden by derived classes.</span>

<span class="sd">        This method will:</span>
<span class="sd">        - Wait for the stop event to be set</span>
<span class="sd">        - Shuts down the service when the stop event is set</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">while</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">stop_event</span><span class="o">.</span><span class="n">is_set</span><span class="p">():</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span>
                    <span class="s2">&quot;Service </span><span class="si">%s</span><span class="s2"> waiting for stop event&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">service_type</span>
                <span class="p">)</span>
                <span class="c1"># Wait forever for the stop event to be set</span>
                <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">stop_event</span><span class="o">.</span><span class="n">wait</span><span class="p">()</span>

            <span class="k">except</span> <span class="p">(</span><span class="ne">KeyboardInterrupt</span><span class="p">,</span> <span class="ne">SystemExit</span><span class="p">,</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">CancelledError</span><span class="p">):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Service </span><span class="si">%s</span><span class="s2"> execution cancelled&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">service_type</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">stop_event</span><span class="o">.</span><span class="n">set</span><span class="p">()</span>

            <span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">exception</span><span class="p">(</span>
                    <span class="s2">&quot;Caught unexpected exception in service </span><span class="si">%s</span><span class="s2"> execution&quot;</span><span class="p">,</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">service_type</span><span class="p">,</span>
                <span class="p">)</span>
            <span class="k">finally</span><span class="p">:</span>
                <span class="c1"># Shutdown the service</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">stop</span><span class="p">()</span>
                <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">exception</span><span class="p">(</span>
                        <span class="s2">&quot;Exception stopping service </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">service_type</span>
                    <span class="p">)</span>
                    <span class="k">raise</span> <span class="n">ServiceStopError</span><span class="p">(</span>
                        <span class="s2">&quot;Exception stopping service </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">service_type</span>
                    <span class="p">)</span> <span class="kn">from</span><span class="w"> </span><span class="nn">e</span>

    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">start</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Start the service and its components. This method implements</span>
<span class="sd">        the `BaseServiceInterface.start` method.</span>

<span class="sd">        This method should be called to start the service after it has been initialized</span>
<span class="sd">        and configured.</span>

<span class="sd">        This method will:</span>
<span class="sd">        - Set the service to `ServiceState.STARTING` state</span>
<span class="sd">        - Call all registered `AIPerfHook.ON_START` hooks</span>
<span class="sd">        - Set the service to `ServiceState.RUNNING` state</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span>
                <span class="s2">&quot;Starting </span><span class="si">%s</span><span class="s2"> service (id: </span><span class="si">%s</span><span class="s2">)&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">service_type</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">service_id</span>
            <span class="p">)</span>
            <span class="n">_</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">set_state</span><span class="p">(</span><span class="n">ServiceState</span><span class="o">.</span><span class="n">STARTING</span><span class="p">)</span>

            <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">run_hooks</span><span class="p">(</span><span class="n">AIPerfHook</span><span class="o">.</span><span class="n">ON_START</span><span class="p">)</span>

            <span class="n">_</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">set_state</span><span class="p">(</span><span class="n">ServiceState</span><span class="o">.</span><span class="n">RUNNING</span><span class="p">)</span>

        <span class="k">except</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">CancelledError</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Service </span><span class="si">%s</span><span class="s2"> execution cancelled&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">service_type</span><span class="p">)</span>

        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">exception</span><span class="p">(</span>
                <span class="s2">&quot;Failed to start service </span><span class="si">%s</span><span class="s2"> (id: </span><span class="si">%s</span><span class="s2">)&quot;</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">service_type</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">service_id</span><span class="p">,</span>
            <span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_state</span> <span class="o">=</span> <span class="n">ServiceState</span><span class="o">.</span><span class="n">ERROR</span>

            <span class="k">raise</span> <span class="n">ServiceStartError</span><span class="p">(</span>
                <span class="s2">&quot;Failed to start service </span><span class="si">%s</span><span class="s2"> (id: </span><span class="si">%s</span><span class="s2">)&quot;</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">service_type</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">service_id</span><span class="p">,</span>
            <span class="p">)</span> <span class="kn">from</span><span class="w"> </span><span class="nn">e</span>

    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">stop</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Stop the service and clean up its components. This method implements</span>
<span class="sd">        the `BaseServiceInterface.stop` method.</span>

<span class="sd">        This method will:</span>
<span class="sd">        - Set the service to `ServiceState.STOPPING` state</span>
<span class="sd">        - Call all registered `AIPerfHook.ON_STOP` hooks</span>
<span class="sd">        - Shutdown the service communication component</span>
<span class="sd">        - Call all registered `AIPerfHook.ON_CLEANUP` hooks</span>
<span class="sd">        - Set the service to `ServiceState.STOPPED` state</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">state</span> <span class="o">==</span> <span class="n">ServiceState</span><span class="o">.</span><span class="n">STOPPED</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span>
                    <span class="s2">&quot;Service </span><span class="si">%s</span><span class="s2"> state </span><span class="si">%s</span><span class="s2"> is already STOPPED, ignoring stop request&quot;</span><span class="p">,</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">service_type</span><span class="p">,</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="p">,</span>
                <span class="p">)</span>
                <span class="k">return</span>

            <span class="c1"># ignore if we were unable to send the STOPPING state message</span>
            <span class="n">_</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">set_state</span><span class="p">(</span><span class="n">ServiceState</span><span class="o">.</span><span class="n">STOPPING</span><span class="p">)</span>

            <span class="c1"># Signal the run method to exit if it hasn&#39;t already</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">stop_event</span><span class="o">.</span><span class="n">is_set</span><span class="p">():</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">stop_event</span><span class="o">.</span><span class="n">set</span><span class="p">()</span>

            <span class="c1"># Custom stop logic implemented by derived classes</span>
            <span class="k">with</span> <span class="n">contextlib</span><span class="o">.</span><span class="n">suppress</span><span class="p">(</span><span class="n">asyncio</span><span class="o">.</span><span class="n">CancelledError</span><span class="p">):</span>
                <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">run_hooks</span><span class="p">(</span><span class="n">AIPerfHook</span><span class="o">.</span><span class="n">ON_STOP</span><span class="p">)</span>

            <span class="c1"># Shutdown communication component</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_comms</span> <span class="ow">and</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_comms</span><span class="o">.</span><span class="n">is_shutdown</span><span class="p">:</span>
                <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_comms</span><span class="o">.</span><span class="n">shutdown</span><span class="p">()</span>

            <span class="c1"># Custom cleanup logic implemented by derived classes</span>
            <span class="k">with</span> <span class="n">contextlib</span><span class="o">.</span><span class="n">suppress</span><span class="p">(</span><span class="n">asyncio</span><span class="o">.</span><span class="n">CancelledError</span><span class="p">):</span>
                <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">run_hooks</span><span class="p">(</span><span class="n">AIPerfHook</span><span class="o">.</span><span class="n">ON_CLEANUP</span><span class="p">)</span>

            <span class="c1"># Set the state to STOPPED. Communications are shutdown, so we don&#39;t need to</span>
            <span class="c1"># publish a status message</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_state</span> <span class="o">=</span> <span class="n">ServiceState</span><span class="o">.</span><span class="n">STOPPED</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span>
                <span class="s2">&quot;Service </span><span class="si">%s</span><span class="s2"> (id: </span><span class="si">%s</span><span class="s2">) stopped&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">service_type</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">service_id</span>
            <span class="p">)</span>

        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">exception</span><span class="p">(</span>
                <span class="s2">&quot;Failed to stop service </span><span class="si">%s</span><span class="s2"> (id: </span><span class="si">%s</span><span class="s2">)&quot;</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">service_type</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">service_id</span><span class="p">,</span>
            <span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_state</span> <span class="o">=</span> <span class="n">ServiceState</span><span class="o">.</span><span class="n">ERROR</span>
            <span class="k">raise</span> <span class="n">ServiceStopError</span><span class="p">(</span>
                <span class="s2">&quot;Failed to stop service </span><span class="si">%s</span><span class="s2"> (id: </span><span class="si">%s</span><span class="s2">)&quot;</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">service_type</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">service_id</span><span class="p">,</span>
            <span class="p">)</span> <span class="kn">from</span><span class="w"> </span><span class="nn">e</span>

    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">configure</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">message</span><span class="p">:</span> <span class="n">Message</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Configure the service with the given configuration. This method implements</span>
<span class="sd">        the `BaseServiceInterface.configure` method.</span>

<span class="sd">        This method will:</span>
<span class="sd">        - Call all registered AIPerfHook.ON_CONFIGURE hooks</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">run_hooks</span><span class="p">(</span><span class="n">AIPerfHook</span><span class="o">.</span><span class="n">ON_CONFIGURE</span><span class="p">,</span> <span class="n">message</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_setup_signal_handlers</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;This method will set up signal handlers for the SIGTERM and SIGINT signals</span>
<span class="sd">        in order to trigger a graceful shutdown of the service.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">loop</span> <span class="o">=</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">get_running_loop</span><span class="p">()</span>

        <span class="k">def</span><span class="w"> </span><span class="nf">signal_handler</span><span class="p">(</span><span class="n">sig</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
            <span class="c1"># Create a task and store it so it doesn&#39;t get garbage collected</span>
            <span class="n">task</span> <span class="o">=</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">create_task</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_handle_signal</span><span class="p">(</span><span class="n">sig</span><span class="p">))</span>

            <span class="c1"># Store the task somewhere to prevent it from being garbage collected</span>
            <span class="c1"># before it completes</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_signal_tasks</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">task</span><span class="p">)</span>
            <span class="n">task</span><span class="o">.</span><span class="n">add_done_callback</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_signal_tasks</span><span class="o">.</span><span class="n">discard</span><span class="p">)</span>

        <span class="k">for</span> <span class="n">sig</span> <span class="ow">in</span> <span class="p">(</span><span class="n">signal</span><span class="o">.</span><span class="n">SIGTERM</span><span class="p">,</span> <span class="n">signal</span><span class="o">.</span><span class="n">SIGINT</span><span class="p">):</span>
            <span class="n">loop</span><span class="o">.</span><span class="n">add_signal_handler</span><span class="p">(</span><span class="n">sig</span><span class="p">,</span> <span class="k">lambda</span> <span class="n">s</span><span class="o">=</span><span class="n">sig</span><span class="p">:</span> <span class="n">signal_handler</span><span class="p">(</span><span class="n">s</span><span class="p">))</span>

    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">_handle_signal</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">sig</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Handle received signals by triggering graceful shutdown.</span>

<span class="sd">        Args:</span>
<span class="sd">            sig: The signal number received</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">signal_name</span> <span class="o">=</span> <span class="n">signal</span><span class="o">.</span><span class="n">Signals</span><span class="p">(</span><span class="n">sig</span><span class="p">)</span><span class="o">.</span><span class="n">name</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span>
            <span class="s2">&quot;</span><span class="si">%s</span><span class="s2">: Received signal </span><span class="si">%s</span><span class="s2">, initiating graceful shutdown&quot;</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">service_type</span><span class="p">,</span>
            <span class="n">signal_name</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">stop_event</span><span class="o">.</span><span class="n">set</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">







<div class="doc doc-object doc-attribute">



<h3 id="aiperf.common.service.base_service.BaseService.comms" class="doc doc-heading">
            <code class=" language-python"><span class="n">comms</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

<a href="#aiperf.common.service.base_service.BaseService.comms" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Get the communication object for the service.
Raises:
    CommunicationNotInitializedError: If the communication is not initialized</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="aiperf.common.service.base_service.BaseService.is_initialized" class="doc doc-heading">
            <code class=" language-python"><span class="n">is_initialized</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

<a href="#aiperf.common.service.base_service.BaseService.is_initialized" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Check if service is initialized.</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>True if service is initialized, False otherwise</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="aiperf.common.service.base_service.BaseService.is_shutdown" class="doc doc-heading">
            <code class=" language-python"><span class="n">is_shutdown</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

<a href="#aiperf.common.service.base_service.BaseService.is_shutdown" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Check if service is shutdown.</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>True if service is shutdown, False otherwise</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="aiperf.common.service.base_service.BaseService.state" class="doc doc-heading">
            <code class=" language-python"><span class="n">state</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

<a href="#aiperf.common.service.base_service.BaseService.state" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>The current state of the service.</p>

    </div>

</div>



<div class="doc doc-object doc-function">


<h3 id="aiperf.common.service.base_service.BaseService.configure" class="doc doc-heading">
            <code class=" language-python"><span class="n">configure</span><span class="p">(</span><span class="n">message</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#aiperf.common.service.base_service.BaseService.configure" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Configure the service with the given configuration. This method implements
the <code>BaseServiceInterface.configure</code> method.</p>
<p>This method will:
- Call all registered AIPerfHook.ON_CONFIGURE hooks</p>


            <details class="quote">
              <summary>Source code in <code>aiperf/common/service/base_service.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">393</span>
<span class="normal">394</span>
<span class="normal">395</span>
<span class="normal">396</span>
<span class="normal">397</span>
<span class="normal">398</span>
<span class="normal">399</span>
<span class="normal">400</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">configure</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">message</span><span class="p">:</span> <span class="n">Message</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Configure the service with the given configuration. This method implements</span>
<span class="sd">    the `BaseServiceInterface.configure` method.</span>

<span class="sd">    This method will:</span>
<span class="sd">    - Call all registered AIPerfHook.ON_CONFIGURE hooks</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">run_hooks</span><span class="p">(</span><span class="n">AIPerfHook</span><span class="o">.</span><span class="n">ON_CONFIGURE</span><span class="p">,</span> <span class="n">message</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="aiperf.common.service.base_service.BaseService.initialize" class="doc doc-heading">
            <code class=" language-python"><span class="n">initialize</span><span class="p">()</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#aiperf.common.service.base_service.BaseService.initialize" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Initialize the service communication and signal handlers. This method implements
the <code>BaseServiceInterface.initialize</code> method.</p>
<p>This method will:
- Set the service to <code>ServiceState.INITIALIZING</code> state
- Set up signal handlers for graceful shutdown
- Allow time for the event loop to start
- Initialize communication
- Call all registered <code>AIPerfHook.ON_INIT</code> hooks
- Set the service to <code>ServiceState.READY</code> state
- Set the initialized asyncio event</p>


            <details class="quote">
              <summary>Source code in <code>aiperf/common/service/base_service.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">initialize</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Initialize the service communication and signal handlers. This method implements</span>
<span class="sd">    the `BaseServiceInterface.initialize` method.</span>

<span class="sd">    This method will:</span>
<span class="sd">    - Set the service to `ServiceState.INITIALIZING` state</span>
<span class="sd">    - Set up signal handlers for graceful shutdown</span>
<span class="sd">    - Allow time for the event loop to start</span>
<span class="sd">    - Initialize communication</span>
<span class="sd">    - Call all registered `AIPerfHook.ON_INIT` hooks</span>
<span class="sd">    - Set the service to `ServiceState.READY` state</span>
<span class="sd">    - Set the initialized asyncio event</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_state</span> <span class="o">=</span> <span class="n">ServiceState</span><span class="o">.</span><span class="n">INITIALIZING</span>
    <span class="c1"># Set up signal handlers for graceful shutdown</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_setup_signal_handlers</span><span class="p">()</span>
    <span class="c1"># Allow time for the event loop to start</span>
    <span class="k">await</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mf">0.1</span><span class="p">)</span>

    <span class="c1"># Initialize communication</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_comms</span> <span class="o">=</span> <span class="n">CommunicationFactory</span><span class="o">.</span><span class="n">create_instance</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">service_config</span><span class="o">.</span><span class="n">comm_backend</span><span class="p">,</span>
            <span class="n">config</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">service_config</span><span class="o">.</span><span class="n">comm_config</span><span class="p">,</span>
        <span class="p">)</span>
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">exception</span><span class="p">(</span>
            <span class="s2">&quot;Failed to create communication for service </span><span class="si">%s</span><span class="s2"> (id: </span><span class="si">%s</span><span class="s2">)&quot;</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">service_type</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">service_id</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="k">raise</span> <span class="n">CommunicationCreateError</span> <span class="kn">from</span><span class="w"> </span><span class="nn">e</span>

    <span class="k">try</span><span class="p">:</span>
        <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_comms</span><span class="o">.</span><span class="n">initialize</span><span class="p">()</span>
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">exception</span><span class="p">(</span>
            <span class="s2">&quot;Failed to initialize communication for service </span><span class="si">%s</span><span class="s2"> (id: </span><span class="si">%s</span><span class="s2">)&quot;</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">service_type</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">service_id</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="k">raise</span> <span class="n">ServiceInitializationError</span> <span class="kn">from</span><span class="w"> </span><span class="nn">e</span>

    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">required_clients</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
        <span class="c1"># Create the communication clients ahead of time</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span>
            <span class="s2">&quot;</span><span class="si">%s</span><span class="s2">: Creating communication clients (</span><span class="si">%s</span><span class="s2">)&quot;</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">service_type</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">required_clients</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_comms</span><span class="o">.</span><span class="n">create_clients</span><span class="p">(</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">required_clients</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">exception</span><span class="p">(</span>
                <span class="s2">&quot;Failed to create communication clients for service </span><span class="si">%s</span><span class="s2"> (id: </span><span class="si">%s</span><span class="s2">)&quot;</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">service_type</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">service_id</span><span class="p">,</span>
            <span class="p">)</span>
            <span class="k">raise</span> <span class="n">CommunicationClientCreationError</span> <span class="kn">from</span><span class="w"> </span><span class="nn">e</span>

    <span class="c1"># Initialize any derived service components</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">run_hooks</span><span class="p">(</span><span class="n">AIPerfHook</span><span class="o">.</span><span class="n">ON_INIT</span><span class="p">)</span>
    <span class="k">except</span> <span class="n">AIPerfMultiError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">exception</span><span class="p">(</span>
            <span class="s2">&quot;Failed to initialize service </span><span class="si">%s</span><span class="s2"> (id: </span><span class="si">%s</span><span class="s2">)&quot;</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">service_type</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">service_id</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="k">raise</span> <span class="n">ServiceInitializationError</span> <span class="kn">from</span><span class="w"> </span><span class="nn">e</span>

    <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">set_state</span><span class="p">(</span><span class="n">ServiceState</span><span class="o">.</span><span class="n">READY</span><span class="p">)</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">initialized_event</span><span class="o">.</span><span class="n">set</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="aiperf.common.service.base_service.BaseService.run_forever" class="doc doc-heading">
            <code class=" language-python"><span class="n">run_forever</span><span class="p">()</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#aiperf.common.service.base_service.BaseService.run_forever" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Run the service in a loop until the stop event is set. This method implements
the <code>BaseServiceInterface.run_forever</code> method.</p>
<p>This method will:
- Call the initialize method to initialize the service
- Call all registered <code>AIPerfHook.RUN</code> hooks
- Wait for the stop event to be set
- Shuts down the service when the stop event is set</p>
<p>This method will be called as the main entry point for the service.</p>


            <details class="quote">
              <summary>Source code in <code>aiperf/common/service/base_service.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">run_forever</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Run the service in a loop until the stop event is set. This method implements</span>
<span class="sd">    the `BaseServiceInterface.run_forever` method.</span>

<span class="sd">    This method will:</span>
<span class="sd">    - Call the initialize method to initialize the service</span>
<span class="sd">    - Call all registered `AIPerfHook.RUN` hooks</span>
<span class="sd">    - Wait for the stop event to be set</span>
<span class="sd">    - Shuts down the service when the stop event is set</span>

<span class="sd">    This method will be called as the main entry point for the service.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span>
            <span class="s2">&quot;Running </span><span class="si">%s</span><span class="s2"> service (id: </span><span class="si">%s</span><span class="s2">)&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">service_type</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">service_id</span>
        <span class="p">)</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">initialize</span><span class="p">()</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">exception</span><span class="p">(</span>
                <span class="s2">&quot;Failed to initialize service </span><span class="si">%s</span><span class="s2"> (id: </span><span class="si">%s</span><span class="s2">)&quot;</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">service_type</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">service_id</span><span class="p">,</span>
            <span class="p">)</span>
            <span class="k">raise</span> <span class="n">ServiceRunError</span> <span class="kn">from</span><span class="w"> </span><span class="nn">e</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">run_hooks</span><span class="p">(</span><span class="n">AIPerfHook</span><span class="o">.</span><span class="n">ON_RUN</span><span class="p">)</span>
        <span class="k">except</span> <span class="n">AIPerfMultiError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">exception</span><span class="p">(</span>
                <span class="s2">&quot;Failed to run service </span><span class="si">%s</span><span class="s2"> (id: </span><span class="si">%s</span><span class="s2">)&quot;</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">service_type</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">service_id</span><span class="p">,</span>
            <span class="p">)</span>
            <span class="k">raise</span> <span class="n">ServiceRunError</span> <span class="kn">from</span><span class="w"> </span><span class="nn">e</span>

    <span class="k">except</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">CancelledError</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Service </span><span class="si">%s</span><span class="s2"> execution cancelled&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">service_type</span><span class="p">)</span>
        <span class="k">return</span>

    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">exception</span><span class="p">(</span><span class="s2">&quot;Service </span><span class="si">%s</span><span class="s2"> execution failed:&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">service_type</span><span class="p">)</span>
        <span class="n">_</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">set_state</span><span class="p">(</span><span class="n">ServiceState</span><span class="o">.</span><span class="n">ERROR</span><span class="p">)</span>
        <span class="k">raise</span> <span class="n">ServiceRunError</span><span class="p">(</span>
            <span class="s2">&quot;Service </span><span class="si">%s</span><span class="s2"> execution failed&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">service_type</span>
        <span class="p">)</span> <span class="kn">from</span><span class="w"> </span><span class="nn">e</span>

    <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_forever_loop</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="aiperf.common.service.base_service.BaseService.set_state" class="doc doc-heading">
            <code class=" language-python"><span class="n">set_state</span><span class="p">(</span><span class="n">state</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#aiperf.common.service.base_service.BaseService.set_state" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Set the state of the service. This method implements
the <code>BaseServiceInterface.set_state</code> method.</p>
<p>This method will:
- Set the service state to the given state
- Call all registered <code>AIPerfHook.ON_SET_STATE</code> hooks</p>


            <details class="quote">
              <summary>Source code in <code>aiperf/common/service/base_service.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">set_state</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">state</span><span class="p">:</span> <span class="n">ServiceState</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Set the state of the service. This method implements</span>
<span class="sd">    the `BaseServiceInterface.set_state` method.</span>

<span class="sd">    This method will:</span>
<span class="sd">    - Set the service state to the given state</span>
<span class="sd">    - Call all registered `AIPerfHook.ON_SET_STATE` hooks</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_state</span> <span class="o">=</span> <span class="n">state</span>
    <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">run_hooks</span><span class="p">(</span><span class="n">AIPerfHook</span><span class="o">.</span><span class="n">ON_SET_STATE</span><span class="p">,</span> <span class="n">state</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="aiperf.common.service.base_service.BaseService.start" class="doc doc-heading">
            <code class=" language-python"><span class="n">start</span><span class="p">()</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#aiperf.common.service.base_service.BaseService.start" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Start the service and its components. This method implements
the <code>BaseServiceInterface.start</code> method.</p>
<p>This method should be called to start the service after it has been initialized
and configured.</p>
<p>This method will:
- Set the service to <code>ServiceState.STARTING</code> state
- Call all registered <code>AIPerfHook.ON_START</code> hooks
- Set the service to <code>ServiceState.RUNNING</code> state</p>


            <details class="quote">
              <summary>Source code in <code>aiperf/common/service/base_service.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">294</span>
<span class="normal">295</span>
<span class="normal">296</span>
<span class="normal">297</span>
<span class="normal">298</span>
<span class="normal">299</span>
<span class="normal">300</span>
<span class="normal">301</span>
<span class="normal">302</span>
<span class="normal">303</span>
<span class="normal">304</span>
<span class="normal">305</span>
<span class="normal">306</span>
<span class="normal">307</span>
<span class="normal">308</span>
<span class="normal">309</span>
<span class="normal">310</span>
<span class="normal">311</span>
<span class="normal">312</span>
<span class="normal">313</span>
<span class="normal">314</span>
<span class="normal">315</span>
<span class="normal">316</span>
<span class="normal">317</span>
<span class="normal">318</span>
<span class="normal">319</span>
<span class="normal">320</span>
<span class="normal">321</span>
<span class="normal">322</span>
<span class="normal">323</span>
<span class="normal">324</span>
<span class="normal">325</span>
<span class="normal">326</span>
<span class="normal">327</span>
<span class="normal">328</span>
<span class="normal">329</span>
<span class="normal">330</span>
<span class="normal">331</span>
<span class="normal">332</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">start</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Start the service and its components. This method implements</span>
<span class="sd">    the `BaseServiceInterface.start` method.</span>

<span class="sd">    This method should be called to start the service after it has been initialized</span>
<span class="sd">    and configured.</span>

<span class="sd">    This method will:</span>
<span class="sd">    - Set the service to `ServiceState.STARTING` state</span>
<span class="sd">    - Call all registered `AIPerfHook.ON_START` hooks</span>
<span class="sd">    - Set the service to `ServiceState.RUNNING` state</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">try</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span>
            <span class="s2">&quot;Starting </span><span class="si">%s</span><span class="s2"> service (id: </span><span class="si">%s</span><span class="s2">)&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">service_type</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">service_id</span>
        <span class="p">)</span>
        <span class="n">_</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">set_state</span><span class="p">(</span><span class="n">ServiceState</span><span class="o">.</span><span class="n">STARTING</span><span class="p">)</span>

        <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">run_hooks</span><span class="p">(</span><span class="n">AIPerfHook</span><span class="o">.</span><span class="n">ON_START</span><span class="p">)</span>

        <span class="n">_</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">set_state</span><span class="p">(</span><span class="n">ServiceState</span><span class="o">.</span><span class="n">RUNNING</span><span class="p">)</span>

    <span class="k">except</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">CancelledError</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Service </span><span class="si">%s</span><span class="s2"> execution cancelled&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">service_type</span><span class="p">)</span>

    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">exception</span><span class="p">(</span>
            <span class="s2">&quot;Failed to start service </span><span class="si">%s</span><span class="s2"> (id: </span><span class="si">%s</span><span class="s2">)&quot;</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">service_type</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">service_id</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_state</span> <span class="o">=</span> <span class="n">ServiceState</span><span class="o">.</span><span class="n">ERROR</span>

        <span class="k">raise</span> <span class="n">ServiceStartError</span><span class="p">(</span>
            <span class="s2">&quot;Failed to start service </span><span class="si">%s</span><span class="s2"> (id: </span><span class="si">%s</span><span class="s2">)&quot;</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">service_type</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">service_id</span><span class="p">,</span>
        <span class="p">)</span> <span class="kn">from</span><span class="w"> </span><span class="nn">e</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="aiperf.common.service.base_service.BaseService.stop" class="doc doc-heading">
            <code class=" language-python"><span class="n">stop</span><span class="p">()</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#aiperf.common.service.base_service.BaseService.stop" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Stop the service and clean up its components. This method implements
the <code>BaseServiceInterface.stop</code> method.</p>
<p>This method will:
- Set the service to <code>ServiceState.STOPPING</code> state
- Call all registered <code>AIPerfHook.ON_STOP</code> hooks
- Shutdown the service communication component
- Call all registered <code>AIPerfHook.ON_CLEANUP</code> hooks
- Set the service to <code>ServiceState.STOPPED</code> state</p>


            <details class="quote">
              <summary>Source code in <code>aiperf/common/service/base_service.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">334</span>
<span class="normal">335</span>
<span class="normal">336</span>
<span class="normal">337</span>
<span class="normal">338</span>
<span class="normal">339</span>
<span class="normal">340</span>
<span class="normal">341</span>
<span class="normal">342</span>
<span class="normal">343</span>
<span class="normal">344</span>
<span class="normal">345</span>
<span class="normal">346</span>
<span class="normal">347</span>
<span class="normal">348</span>
<span class="normal">349</span>
<span class="normal">350</span>
<span class="normal">351</span>
<span class="normal">352</span>
<span class="normal">353</span>
<span class="normal">354</span>
<span class="normal">355</span>
<span class="normal">356</span>
<span class="normal">357</span>
<span class="normal">358</span>
<span class="normal">359</span>
<span class="normal">360</span>
<span class="normal">361</span>
<span class="normal">362</span>
<span class="normal">363</span>
<span class="normal">364</span>
<span class="normal">365</span>
<span class="normal">366</span>
<span class="normal">367</span>
<span class="normal">368</span>
<span class="normal">369</span>
<span class="normal">370</span>
<span class="normal">371</span>
<span class="normal">372</span>
<span class="normal">373</span>
<span class="normal">374</span>
<span class="normal">375</span>
<span class="normal">376</span>
<span class="normal">377</span>
<span class="normal">378</span>
<span class="normal">379</span>
<span class="normal">380</span>
<span class="normal">381</span>
<span class="normal">382</span>
<span class="normal">383</span>
<span class="normal">384</span>
<span class="normal">385</span>
<span class="normal">386</span>
<span class="normal">387</span>
<span class="normal">388</span>
<span class="normal">389</span>
<span class="normal">390</span>
<span class="normal">391</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">stop</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Stop the service and clean up its components. This method implements</span>
<span class="sd">    the `BaseServiceInterface.stop` method.</span>

<span class="sd">    This method will:</span>
<span class="sd">    - Set the service to `ServiceState.STOPPING` state</span>
<span class="sd">    - Call all registered `AIPerfHook.ON_STOP` hooks</span>
<span class="sd">    - Shutdown the service communication component</span>
<span class="sd">    - Call all registered `AIPerfHook.ON_CLEANUP` hooks</span>
<span class="sd">    - Set the service to `ServiceState.STOPPED` state</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">state</span> <span class="o">==</span> <span class="n">ServiceState</span><span class="o">.</span><span class="n">STOPPED</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span>
                <span class="s2">&quot;Service </span><span class="si">%s</span><span class="s2"> state </span><span class="si">%s</span><span class="s2"> is already STOPPED, ignoring stop request&quot;</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">service_type</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="p">,</span>
            <span class="p">)</span>
            <span class="k">return</span>

        <span class="c1"># ignore if we were unable to send the STOPPING state message</span>
        <span class="n">_</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">set_state</span><span class="p">(</span><span class="n">ServiceState</span><span class="o">.</span><span class="n">STOPPING</span><span class="p">)</span>

        <span class="c1"># Signal the run method to exit if it hasn&#39;t already</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">stop_event</span><span class="o">.</span><span class="n">is_set</span><span class="p">():</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">stop_event</span><span class="o">.</span><span class="n">set</span><span class="p">()</span>

        <span class="c1"># Custom stop logic implemented by derived classes</span>
        <span class="k">with</span> <span class="n">contextlib</span><span class="o">.</span><span class="n">suppress</span><span class="p">(</span><span class="n">asyncio</span><span class="o">.</span><span class="n">CancelledError</span><span class="p">):</span>
            <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">run_hooks</span><span class="p">(</span><span class="n">AIPerfHook</span><span class="o">.</span><span class="n">ON_STOP</span><span class="p">)</span>

        <span class="c1"># Shutdown communication component</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_comms</span> <span class="ow">and</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_comms</span><span class="o">.</span><span class="n">is_shutdown</span><span class="p">:</span>
            <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_comms</span><span class="o">.</span><span class="n">shutdown</span><span class="p">()</span>

        <span class="c1"># Custom cleanup logic implemented by derived classes</span>
        <span class="k">with</span> <span class="n">contextlib</span><span class="o">.</span><span class="n">suppress</span><span class="p">(</span><span class="n">asyncio</span><span class="o">.</span><span class="n">CancelledError</span><span class="p">):</span>
            <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">run_hooks</span><span class="p">(</span><span class="n">AIPerfHook</span><span class="o">.</span><span class="n">ON_CLEANUP</span><span class="p">)</span>

        <span class="c1"># Set the state to STOPPED. Communications are shutdown, so we don&#39;t need to</span>
        <span class="c1"># publish a status message</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_state</span> <span class="o">=</span> <span class="n">ServiceState</span><span class="o">.</span><span class="n">STOPPED</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span>
            <span class="s2">&quot;Service </span><span class="si">%s</span><span class="s2"> (id: </span><span class="si">%s</span><span class="s2">) stopped&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">service_type</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">service_id</span>
        <span class="p">)</span>

    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">exception</span><span class="p">(</span>
            <span class="s2">&quot;Failed to stop service </span><span class="si">%s</span><span class="s2"> (id: </span><span class="si">%s</span><span class="s2">)&quot;</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">service_type</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">service_id</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_state</span> <span class="o">=</span> <span class="n">ServiceState</span><span class="o">.</span><span class="n">ERROR</span>
        <span class="k">raise</span> <span class="n">ServiceStopError</span><span class="p">(</span>
            <span class="s2">&quot;Failed to stop service </span><span class="si">%s</span><span class="s2"> (id: </span><span class="si">%s</span><span class="s2">)&quot;</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">service_type</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">service_id</span><span class="p">,</span>
        <span class="p">)</span> <span class="kn">from</span><span class="w"> </span><span class="nn">e</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>




  </div>

    </div>

</div><h2 id="aiperfcommonservicebase_service_interface">aiperf.common.service.base_service_interface<a class="headerlink" href="#aiperfcommonservicebase_service_interface" title="Permanent link">&para;</a></h2>


<div class="doc doc-object doc-module">



<a id="aiperf.common.service.base_service_interface"></a>
    <div class="doc doc-contents first">









  <div class="doc doc-children">








<div class="doc doc-object doc-class">



<h2 id="aiperf.common.service.base_service_interface.BaseServiceInterface" class="doc doc-heading">
            <code>BaseServiceInterface</code>


<a href="#aiperf.common.service.base_service_interface.BaseServiceInterface" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="abc.ABC">ABC</span></code></p>


        <p>Base interface for all services.</p>
<p>This class provides the base foundation for which every service should provide. Some
methods are required to be implemented by derived classes, while others are
meant to be implemented by the base class.</p>







              <details class="quote">
                <summary>Source code in <code>aiperf/common/service/base_service_interface.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 10</span>
<span class="normal"> 11</span>
<span class="normal"> 12</span>
<span class="normal"> 13</span>
<span class="normal"> 14</span>
<span class="normal"> 15</span>
<span class="normal"> 16</span>
<span class="normal"> 17</span>
<span class="normal"> 18</span>
<span class="normal"> 19</span>
<span class="normal"> 20</span>
<span class="normal"> 21</span>
<span class="normal"> 22</span>
<span class="normal"> 23</span>
<span class="normal"> 24</span>
<span class="normal"> 25</span>
<span class="normal"> 26</span>
<span class="normal"> 27</span>
<span class="normal"> 28</span>
<span class="normal"> 29</span>
<span class="normal"> 30</span>
<span class="normal"> 31</span>
<span class="normal"> 32</span>
<span class="normal"> 33</span>
<span class="normal"> 34</span>
<span class="normal"> 35</span>
<span class="normal"> 36</span>
<span class="normal"> 37</span>
<span class="normal"> 38</span>
<span class="normal"> 39</span>
<span class="normal"> 40</span>
<span class="normal"> 41</span>
<span class="normal"> 42</span>
<span class="normal"> 43</span>
<span class="normal"> 44</span>
<span class="normal"> 45</span>
<span class="normal"> 46</span>
<span class="normal"> 47</span>
<span class="normal"> 48</span>
<span class="normal"> 49</span>
<span class="normal"> 50</span>
<span class="normal"> 51</span>
<span class="normal"> 52</span>
<span class="normal"> 53</span>
<span class="normal"> 54</span>
<span class="normal"> 55</span>
<span class="normal"> 56</span>
<span class="normal"> 57</span>
<span class="normal"> 58</span>
<span class="normal"> 59</span>
<span class="normal"> 60</span>
<span class="normal"> 61</span>
<span class="normal"> 62</span>
<span class="normal"> 63</span>
<span class="normal"> 64</span>
<span class="normal"> 65</span>
<span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">BaseServiceInterface</span><span class="p">(</span><span class="n">ABC</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Base interface for all services.</span>

<span class="sd">    This class provides the base foundation for which every service should provide. Some</span>
<span class="sd">    methods are required to be implemented by derived classes, while others are</span>
<span class="sd">    meant to be implemented by the base class.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="nd">@property</span>
    <span class="nd">@abstractmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">required_clients</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="n">ClientType</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;The communication clients required by the service. If nothing is returned,</span>
<span class="sd">        the service will be responsible for creating its own clients.</span>

<span class="sd">        This property should be implemented by derived classes to specify the</span>
<span class="sd">        communication clients that the service requires.&quot;&quot;&quot;</span>
        <span class="k">pass</span>

    <span class="nd">@property</span>
    <span class="nd">@abstractmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">service_type</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ServiceType</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;The type/name of the service.</span>

<span class="sd">        This property should be implemented by derived classes to specify the</span>
<span class="sd">        type/name of the service.&quot;&quot;&quot;</span>
        <span class="c1"># TODO: We can do this better by using a decorator to set the service type</span>
        <span class="k">pass</span>

    <span class="nd">@abstractmethod</span>
    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">set_state</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">state</span><span class="p">:</span> <span class="n">ServiceState</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Set the state of the service.</span>

<span class="sd">        This method will be implemented by the base class, and extra</span>
<span class="sd">        functionality can be added by derived classes via the `@on_set_state`</span>
<span class="sd">        decorator.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">pass</span>

    <span class="nd">@abstractmethod</span>
    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">initialize</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Initialize the service.</span>

<span class="sd">        This method will be implemented by the base class.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">pass</span>

    <span class="nd">@abstractmethod</span>
    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">start</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Start the service. It should be called after the service has been initialized</span>
<span class="sd">        and configured.</span>

<span class="sd">        This method will be implemented by the base class, and extra</span>
<span class="sd">        functionality can be added by derived classes via the `@on_start`</span>
<span class="sd">        decorator.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">pass</span>

    <span class="nd">@abstractmethod</span>
    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">stop</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Stop the service.</span>

<span class="sd">        This method will be implemented by the base class, and extra</span>
<span class="sd">        functionality can be added by derived classes via the `@on_stop`</span>
<span class="sd">        decorator.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">pass</span>

    <span class="nd">@abstractmethod</span>
    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">configure</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">message</span><span class="p">:</span> <span class="n">Message</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Configure the service with the given configuration.</span>

<span class="sd">        This method will be implemented by the base class, and extra</span>
<span class="sd">        functionality can be added by derived classes via the `@on_configure`</span>
<span class="sd">        decorator.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">pass</span>

    <span class="nd">@abstractmethod</span>
    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">run_forever</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Run the service. This method will be the primary entry point for the service</span>
<span class="sd">        and will be called by the bootstrap script. It should not return until the</span>
<span class="sd">        service is completely shutdown.</span>

<span class="sd">        This method will be implemented by the base class. Any additional</span>
<span class="sd">        functionality can be added by derived classes via the `@on_run`</span>
<span class="sd">        decorator.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">pass</span>

    <span class="nd">@abstractmethod</span>
    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">_forever_loop</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Run the service in a loop until the stop event is set. This method will be</span>
<span class="sd">        called by the `run` method to allow the service to run indefinitely.</span>

<span class="sd">        This method will be implemented by the base class, and is not expected to be</span>
<span class="sd">        overridden by derived classes.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">pass</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">







<div class="doc doc-object doc-attribute">



<h3 id="aiperf.common.service.base_service_interface.BaseServiceInterface.required_clients" class="doc doc-heading">
            <code class=" language-python"><span class="n">required_clients</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-abstractmethod"><code>abstractmethod</code></small>
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

<a href="#aiperf.common.service.base_service_interface.BaseServiceInterface.required_clients" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>The communication clients required by the service. If nothing is returned,
the service will be responsible for creating its own clients.</p>
<p>This property should be implemented by derived classes to specify the
communication clients that the service requires.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="aiperf.common.service.base_service_interface.BaseServiceInterface.service_type" class="doc doc-heading">
            <code class=" language-python"><span class="n">service_type</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-abstractmethod"><code>abstractmethod</code></small>
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

<a href="#aiperf.common.service.base_service_interface.BaseServiceInterface.service_type" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>The type/name of the service.</p>
<p>This property should be implemented by derived classes to specify the
type/name of the service.</p>

    </div>

</div>



<div class="doc doc-object doc-function">


<h3 id="aiperf.common.service.base_service_interface.BaseServiceInterface.configure" class="doc doc-heading">
            <code class=" language-python"><span class="n">configure</span><span class="p">(</span><span class="n">message</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-abstractmethod"><code>abstractmethod</code></small>
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#aiperf.common.service.base_service_interface.BaseServiceInterface.configure" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Configure the service with the given configuration.</p>
<p>This method will be implemented by the base class, and extra
functionality can be added by derived classes via the <code>@on_configure</code>
decorator.</p>


            <details class="quote">
              <summary>Source code in <code>aiperf/common/service/base_service_interface.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">77</span>
<span class="normal">78</span>
<span class="normal">79</span>
<span class="normal">80</span>
<span class="normal">81</span>
<span class="normal">82</span>
<span class="normal">83</span>
<span class="normal">84</span>
<span class="normal">85</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@abstractmethod</span>
<span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">configure</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">message</span><span class="p">:</span> <span class="n">Message</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Configure the service with the given configuration.</span>

<span class="sd">    This method will be implemented by the base class, and extra</span>
<span class="sd">    functionality can be added by derived classes via the `@on_configure`</span>
<span class="sd">    decorator.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">pass</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="aiperf.common.service.base_service_interface.BaseServiceInterface.initialize" class="doc doc-heading">
            <code class=" language-python"><span class="n">initialize</span><span class="p">()</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-abstractmethod"><code>abstractmethod</code></small>
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#aiperf.common.service.base_service_interface.BaseServiceInterface.initialize" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Initialize the service.</p>
<p>This method will be implemented by the base class.</p>


            <details class="quote">
              <summary>Source code in <code>aiperf/common/service/base_service_interface.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@abstractmethod</span>
<span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">initialize</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Initialize the service.</span>

<span class="sd">    This method will be implemented by the base class.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">pass</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="aiperf.common.service.base_service_interface.BaseServiceInterface.run_forever" class="doc doc-heading">
            <code class=" language-python"><span class="n">run_forever</span><span class="p">()</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-abstractmethod"><code>abstractmethod</code></small>
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#aiperf.common.service.base_service_interface.BaseServiceInterface.run_forever" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Run the service. This method will be the primary entry point for the service
and will be called by the bootstrap script. It should not return until the
service is completely shutdown.</p>
<p>This method will be implemented by the base class. Any additional
functionality can be added by derived classes via the <code>@on_run</code>
decorator.</p>


            <details class="quote">
              <summary>Source code in <code>aiperf/common/service/base_service_interface.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">87</span>
<span class="normal">88</span>
<span class="normal">89</span>
<span class="normal">90</span>
<span class="normal">91</span>
<span class="normal">92</span>
<span class="normal">93</span>
<span class="normal">94</span>
<span class="normal">95</span>
<span class="normal">96</span>
<span class="normal">97</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@abstractmethod</span>
<span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">run_forever</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Run the service. This method will be the primary entry point for the service</span>
<span class="sd">    and will be called by the bootstrap script. It should not return until the</span>
<span class="sd">    service is completely shutdown.</span>

<span class="sd">    This method will be implemented by the base class. Any additional</span>
<span class="sd">    functionality can be added by derived classes via the `@on_run`</span>
<span class="sd">    decorator.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">pass</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="aiperf.common.service.base_service_interface.BaseServiceInterface.set_state" class="doc doc-heading">
            <code class=" language-python"><span class="n">set_state</span><span class="p">(</span><span class="n">state</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-abstractmethod"><code>abstractmethod</code></small>
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#aiperf.common.service.base_service_interface.BaseServiceInterface.set_state" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Set the state of the service.</p>
<p>This method will be implemented by the base class, and extra
functionality can be added by derived classes via the <code>@on_set_state</code>
decorator.</p>


            <details class="quote">
              <summary>Source code in <code>aiperf/common/service/base_service_interface.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@abstractmethod</span>
<span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">set_state</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">state</span><span class="p">:</span> <span class="n">ServiceState</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Set the state of the service.</span>

<span class="sd">    This method will be implemented by the base class, and extra</span>
<span class="sd">    functionality can be added by derived classes via the `@on_set_state`</span>
<span class="sd">    decorator.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">pass</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="aiperf.common.service.base_service_interface.BaseServiceInterface.start" class="doc doc-heading">
            <code class=" language-python"><span class="n">start</span><span class="p">()</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-abstractmethod"><code>abstractmethod</code></small>
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#aiperf.common.service.base_service_interface.BaseServiceInterface.start" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Start the service. It should be called after the service has been initialized
and configured.</p>
<p>This method will be implemented by the base class, and extra
functionality can be added by derived classes via the <code>@on_start</code>
decorator.</p>


            <details class="quote">
              <summary>Source code in <code>aiperf/common/service/base_service_interface.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@abstractmethod</span>
<span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">start</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Start the service. It should be called after the service has been initialized</span>
<span class="sd">    and configured.</span>

<span class="sd">    This method will be implemented by the base class, and extra</span>
<span class="sd">    functionality can be added by derived classes via the `@on_start`</span>
<span class="sd">    decorator.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">pass</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="aiperf.common.service.base_service_interface.BaseServiceInterface.stop" class="doc doc-heading">
            <code class=" language-python"><span class="n">stop</span><span class="p">()</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-abstractmethod"><code>abstractmethod</code></small>
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#aiperf.common.service.base_service_interface.BaseServiceInterface.stop" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Stop the service.</p>
<p>This method will be implemented by the base class, and extra
functionality can be added by derived classes via the <code>@on_stop</code>
decorator.</p>


            <details class="quote">
              <summary>Source code in <code>aiperf/common/service/base_service_interface.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span>
<span class="normal">71</span>
<span class="normal">72</span>
<span class="normal">73</span>
<span class="normal">74</span>
<span class="normal">75</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@abstractmethod</span>
<span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">stop</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Stop the service.</span>

<span class="sd">    This method will be implemented by the base class, and extra</span>
<span class="sd">    functionality can be added by derived classes via the `@on_stop`</span>
<span class="sd">    decorator.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">pass</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>




  </div>

    </div>

</div><h2 id="aiperfcommontokenizer">aiperf.common.tokenizer<a class="headerlink" href="#aiperfcommontokenizer" title="Permanent link">&para;</a></h2>


<div class="doc doc-object doc-module">



<a id="aiperf.common.tokenizer"></a>
    <div class="doc doc-contents first">









  <div class="doc doc-children">








<div class="doc doc-object doc-class">



<h2 id="aiperf.common.tokenizer.Tokenizer" class="doc doc-heading">
            <code>Tokenizer</code>


<a href="#aiperf.common.tokenizer.Tokenizer" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">


        <p>This class provides a simplified interface for using Huggingface
tokenizers, with default arguments for common operations.</p>







              <details class="quote">
                <summary>Source code in <code>aiperf/common/tokenizer.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 22</span>
<span class="normal"> 23</span>
<span class="normal"> 24</span>
<span class="normal"> 25</span>
<span class="normal"> 26</span>
<span class="normal"> 27</span>
<span class="normal"> 28</span>
<span class="normal"> 29</span>
<span class="normal"> 30</span>
<span class="normal"> 31</span>
<span class="normal"> 32</span>
<span class="normal"> 33</span>
<span class="normal"> 34</span>
<span class="normal"> 35</span>
<span class="normal"> 36</span>
<span class="normal"> 37</span>
<span class="normal"> 38</span>
<span class="normal"> 39</span>
<span class="normal"> 40</span>
<span class="normal"> 41</span>
<span class="normal"> 42</span>
<span class="normal"> 43</span>
<span class="normal"> 44</span>
<span class="normal"> 45</span>
<span class="normal"> 46</span>
<span class="normal"> 47</span>
<span class="normal"> 48</span>
<span class="normal"> 49</span>
<span class="normal"> 50</span>
<span class="normal"> 51</span>
<span class="normal"> 52</span>
<span class="normal"> 53</span>
<span class="normal"> 54</span>
<span class="normal"> 55</span>
<span class="normal"> 56</span>
<span class="normal"> 57</span>
<span class="normal"> 58</span>
<span class="normal"> 59</span>
<span class="normal"> 60</span>
<span class="normal"> 61</span>
<span class="normal"> 62</span>
<span class="normal"> 63</span>
<span class="normal"> 64</span>
<span class="normal"> 65</span>
<span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">Tokenizer</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    This class provides a simplified interface for using Huggingface</span>
<span class="sd">    tokenizers, with default arguments for common operations.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Initialize the tokenizer with default values for call, encode, and decode.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_tokenizer</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_call_args</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;add_special_tokens&quot;</span><span class="p">:</span> <span class="kc">False</span><span class="p">}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_encode_args</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;add_special_tokens&quot;</span><span class="p">:</span> <span class="kc">False</span><span class="p">}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_decode_args</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;skip_special_tokens&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">}</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">from_pretrained</span><span class="p">(</span>
        <span class="bp">cls</span><span class="p">,</span>
        <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">trust_remote_code</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
        <span class="n">revision</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;main&quot;</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;Tokenizer&quot;</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Factory to load a tokenizer for the given pretrained model name.</span>

<span class="sd">        Args:</span>
<span class="sd">            name: The name or path of the pretrained tokenizer model.</span>
<span class="sd">            trust_remote_code: Whether to trust remote code when loading the tokenizer.</span>
<span class="sd">            revision: The specific model version to use.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">tokenizer_cls</span> <span class="o">=</span> <span class="bp">cls</span><span class="p">()</span>
            <span class="n">tokenizer_cls</span><span class="o">.</span><span class="n">_tokenizer</span> <span class="o">=</span> <span class="n">AutoTokenizer</span><span class="o">.</span><span class="n">from_pretrained</span><span class="p">(</span>
                <span class="n">name</span><span class="p">,</span> <span class="n">trust_remote_code</span><span class="o">=</span><span class="n">trust_remote_code</span><span class="p">,</span> <span class="n">revision</span><span class="o">=</span><span class="n">revision</span>
            <span class="p">)</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">TokenizerInitializationError</span><span class="p">(</span><span class="n">e</span><span class="p">)</span> <span class="kn">from</span><span class="w"> </span><span class="nn">e</span>
        <span class="k">return</span> <span class="n">tokenizer_cls</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__call__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">text</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;BatchEncoding&quot;</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Call the underlying Huggingface tokenizer with default arguments,</span>
<span class="sd">        which can be overridden by kwargs.</span>

<span class="sd">        Args:</span>
<span class="sd">            text: The input text to tokenize.</span>

<span class="sd">        Returns:</span>
<span class="sd">            A BatchEncoding object containing the tokenized output.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_tokenizer</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">TokenizerInitializationError</span><span class="p">(</span><span class="s2">&quot;Tokenizer is not initialized.&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_tokenizer</span><span class="p">(</span><span class="n">text</span><span class="p">,</span> <span class="o">**</span><span class="p">{</span><span class="o">**</span><span class="bp">self</span><span class="o">.</span><span class="n">_call_args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">})</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">encode</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">text</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="nb">int</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Encode the input text into a list of token IDs.</span>

<span class="sd">        This method calls the underlying Huggingface tokenizer&#39;s encode</span>
<span class="sd">        method with default arguments, which can be overridden by kwargs.</span>

<span class="sd">        Args:</span>
<span class="sd">            text: The input text to encode.</span>

<span class="sd">        Returns:</span>
<span class="sd">            A list of token IDs.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_tokenizer</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">TokenizerInitializationError</span><span class="p">(</span><span class="s2">&quot;Tokenizer is not initialized.&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_tokenizer</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="n">text</span><span class="p">,</span> <span class="o">**</span><span class="p">{</span><span class="o">**</span><span class="bp">self</span><span class="o">.</span><span class="n">_encode_args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">})</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">decode</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">token_ids</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Decode a list of token IDs back into a string.</span>

<span class="sd">        This method calls the underlying Huggingface tokenizer&#39;s decode</span>
<span class="sd">        method with default arguments, which can be overridden by kwargs.</span>

<span class="sd">        Args:</span>
<span class="sd">            token_ids: A list of token IDs to decode.</span>

<span class="sd">        Returns:</span>
<span class="sd">            The decoded string.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_tokenizer</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">TokenizerInitializationError</span><span class="p">(</span><span class="s2">&quot;Tokenizer is not initialized.&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_tokenizer</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="n">token_ids</span><span class="p">,</span> <span class="o">**</span><span class="p">{</span><span class="o">**</span><span class="bp">self</span><span class="o">.</span><span class="n">_decode_args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">})</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">bos_token_id</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Return the beginning-of-sequence (BOS) token ID.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_tokenizer</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">TokenizerInitializationError</span><span class="p">(</span><span class="s2">&quot;Tokenizer is not initialized.&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_tokenizer</span><span class="o">.</span><span class="n">bos_token_id</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Return a string representation of the underlying tokenizer.</span>

<span class="sd">        Returns:</span>
<span class="sd">            The string representation of the tokenizer.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_tokenizer</span><span class="o">.</span><span class="fm">__repr__</span><span class="p">()</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Return a user-friendly string representation of the underlying tokenizer.</span>

<span class="sd">        Returns:</span>
<span class="sd">            The string representation of the tokenizer.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_tokenizer</span><span class="o">.</span><span class="fm">__str__</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h3 id="aiperf.common.tokenizer.Tokenizer.__call__" class="doc doc-heading">
            <code class=" language-python"><span class="fm">__call__</span><span class="p">(</span><span class="n">text</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>

<a href="#aiperf.common.tokenizer.Tokenizer.__call__" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Call the underlying Huggingface tokenizer with default arguments,
which can be overridden by kwargs.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>text</code>
            </td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The input text to tokenize.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="transformers.BatchEncoding">BatchEncoding</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A BatchEncoding object containing the tokenized output.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>aiperf/common/tokenizer.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span>
<span class="normal">71</span>
<span class="normal">72</span>
<span class="normal">73</span>
<span class="normal">74</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="fm">__call__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">text</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;BatchEncoding&quot;</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Call the underlying Huggingface tokenizer with default arguments,</span>
<span class="sd">    which can be overridden by kwargs.</span>

<span class="sd">    Args:</span>
<span class="sd">        text: The input text to tokenize.</span>

<span class="sd">    Returns:</span>
<span class="sd">        A BatchEncoding object containing the tokenized output.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_tokenizer</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">TokenizerInitializationError</span><span class="p">(</span><span class="s2">&quot;Tokenizer is not initialized.&quot;</span><span class="p">)</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_tokenizer</span><span class="p">(</span><span class="n">text</span><span class="p">,</span> <span class="o">**</span><span class="p">{</span><span class="o">**</span><span class="bp">self</span><span class="o">.</span><span class="n">_call_args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">})</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="aiperf.common.tokenizer.Tokenizer.__init__" class="doc doc-heading">
            <code class=" language-python"><span class="fm">__init__</span><span class="p">()</span></code>

<a href="#aiperf.common.tokenizer.Tokenizer.__init__" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Initialize the tokenizer with default values for call, encode, and decode.</p>


            <details class="quote">
              <summary>Source code in <code>aiperf/common/tokenizer.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Initialize the tokenizer with default values for call, encode, and decode.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_tokenizer</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_call_args</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;add_special_tokens&quot;</span><span class="p">:</span> <span class="kc">False</span><span class="p">}</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_encode_args</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;add_special_tokens&quot;</span><span class="p">:</span> <span class="kc">False</span><span class="p">}</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_decode_args</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;skip_special_tokens&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">}</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="aiperf.common.tokenizer.Tokenizer.__repr__" class="doc doc-heading">
            <code class=" language-python"><span class="fm">__repr__</span><span class="p">()</span></code>

<a href="#aiperf.common.tokenizer.Tokenizer.__repr__" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Return a string representation of the underlying tokenizer.</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The string representation of the tokenizer.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>aiperf/common/tokenizer.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Return a string representation of the underlying tokenizer.</span>

<span class="sd">    Returns:</span>
<span class="sd">        The string representation of the tokenizer.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_tokenizer</span><span class="o">.</span><span class="fm">__repr__</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="aiperf.common.tokenizer.Tokenizer.__str__" class="doc doc-heading">
            <code class=" language-python"><span class="fm">__str__</span><span class="p">()</span></code>

<a href="#aiperf.common.tokenizer.Tokenizer.__str__" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Return a user-friendly string representation of the underlying tokenizer.</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The string representation of the tokenizer.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>aiperf/common/tokenizer.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Return a user-friendly string representation of the underlying tokenizer.</span>

<span class="sd">    Returns:</span>
<span class="sd">        The string representation of the tokenizer.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_tokenizer</span><span class="o">.</span><span class="fm">__str__</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="aiperf.common.tokenizer.Tokenizer.bos_token_id" class="doc doc-heading">
            <code class=" language-python"><span class="n">bos_token_id</span><span class="p">()</span></code>

<a href="#aiperf.common.tokenizer.Tokenizer.bos_token_id" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Return the beginning-of-sequence (BOS) token ID.</p>


            <details class="quote">
              <summary>Source code in <code>aiperf/common/tokenizer.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">bos_token_id</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Return the beginning-of-sequence (BOS) token ID.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_tokenizer</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">TokenizerInitializationError</span><span class="p">(</span><span class="s2">&quot;Tokenizer is not initialized.&quot;</span><span class="p">)</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_tokenizer</span><span class="o">.</span><span class="n">bos_token_id</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="aiperf.common.tokenizer.Tokenizer.decode" class="doc doc-heading">
            <code class=" language-python"><span class="n">decode</span><span class="p">(</span><span class="n">token_ids</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>

<a href="#aiperf.common.tokenizer.Tokenizer.decode" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Decode a list of token IDs back into a string.</p>
<p>This method calls the underlying Huggingface tokenizer's decode
method with default arguments, which can be overridden by kwargs.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>token_ids</code>
            </td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A list of token IDs to decode.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The decoded string.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>aiperf/common/tokenizer.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">decode</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">token_ids</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Decode a list of token IDs back into a string.</span>

<span class="sd">    This method calls the underlying Huggingface tokenizer&#39;s decode</span>
<span class="sd">    method with default arguments, which can be overridden by kwargs.</span>

<span class="sd">    Args:</span>
<span class="sd">        token_ids: A list of token IDs to decode.</span>

<span class="sd">    Returns:</span>
<span class="sd">        The decoded string.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_tokenizer</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">TokenizerInitializationError</span><span class="p">(</span><span class="s2">&quot;Tokenizer is not initialized.&quot;</span><span class="p">)</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_tokenizer</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="n">token_ids</span><span class="p">,</span> <span class="o">**</span><span class="p">{</span><span class="o">**</span><span class="bp">self</span><span class="o">.</span><span class="n">_decode_args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">})</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="aiperf.common.tokenizer.Tokenizer.encode" class="doc doc-heading">
            <code class=" language-python"><span class="n">encode</span><span class="p">(</span><span class="n">text</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>

<a href="#aiperf.common.tokenizer.Tokenizer.encode" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Encode the input text into a list of token IDs.</p>
<p>This method calls the underlying Huggingface tokenizer's encode
method with default arguments, which can be overridden by kwargs.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>text</code>
            </td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The input text to encode.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="list">list</span>[<span title="int">int</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A list of token IDs.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>aiperf/common/tokenizer.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">76</span>
<span class="normal">77</span>
<span class="normal">78</span>
<span class="normal">79</span>
<span class="normal">80</span>
<span class="normal">81</span>
<span class="normal">82</span>
<span class="normal">83</span>
<span class="normal">84</span>
<span class="normal">85</span>
<span class="normal">86</span>
<span class="normal">87</span>
<span class="normal">88</span>
<span class="normal">89</span>
<span class="normal">90</span>
<span class="normal">91</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">encode</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">text</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="nb">int</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Encode the input text into a list of token IDs.</span>

<span class="sd">    This method calls the underlying Huggingface tokenizer&#39;s encode</span>
<span class="sd">    method with default arguments, which can be overridden by kwargs.</span>

<span class="sd">    Args:</span>
<span class="sd">        text: The input text to encode.</span>

<span class="sd">    Returns:</span>
<span class="sd">        A list of token IDs.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_tokenizer</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">TokenizerInitializationError</span><span class="p">(</span><span class="s2">&quot;Tokenizer is not initialized.&quot;</span><span class="p">)</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_tokenizer</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="n">text</span><span class="p">,</span> <span class="o">**</span><span class="p">{</span><span class="o">**</span><span class="bp">self</span><span class="o">.</span><span class="n">_encode_args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">})</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="aiperf.common.tokenizer.Tokenizer.from_pretrained" class="doc doc-heading">
            <code class=" language-python"><span class="n">from_pretrained</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">trust_remote_code</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">revision</span><span class="o">=</span><span class="s1">&#39;main&#39;</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-classmethod"><code>classmethod</code></small>
  </span>

<a href="#aiperf.common.tokenizer.Tokenizer.from_pretrained" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Factory to load a tokenizer for the given pretrained model name.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>name</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The name or path of the pretrained tokenizer model.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>trust_remote_code</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Whether to trust remote code when loading the tokenizer.</p>
              </div>
            </td>
            <td>
                  <code>False</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>revision</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The specific model version to use.</p>
              </div>
            </td>
            <td>
                  <code>&#39;main&#39;</code>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>aiperf/common/tokenizer.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@classmethod</span>
<span class="k">def</span><span class="w"> </span><span class="nf">from_pretrained</span><span class="p">(</span>
    <span class="bp">cls</span><span class="p">,</span>
    <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">trust_remote_code</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="n">revision</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;main&quot;</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;Tokenizer&quot;</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Factory to load a tokenizer for the given pretrained model name.</span>

<span class="sd">    Args:</span>
<span class="sd">        name: The name or path of the pretrained tokenizer model.</span>
<span class="sd">        trust_remote_code: Whether to trust remote code when loading the tokenizer.</span>
<span class="sd">        revision: The specific model version to use.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">tokenizer_cls</span> <span class="o">=</span> <span class="bp">cls</span><span class="p">()</span>
        <span class="n">tokenizer_cls</span><span class="o">.</span><span class="n">_tokenizer</span> <span class="o">=</span> <span class="n">AutoTokenizer</span><span class="o">.</span><span class="n">from_pretrained</span><span class="p">(</span>
            <span class="n">name</span><span class="p">,</span> <span class="n">trust_remote_code</span><span class="o">=</span><span class="n">trust_remote_code</span><span class="p">,</span> <span class="n">revision</span><span class="o">=</span><span class="n">revision</span>
        <span class="p">)</span>
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">TokenizerInitializationError</span><span class="p">(</span><span class="n">e</span><span class="p">)</span> <span class="kn">from</span><span class="w"> </span><span class="nn">e</span>
    <span class="k">return</span> <span class="n">tokenizer_cls</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>




  </div>

    </div>

</div><h2 id="aiperfcommonutils">aiperf.common.utils<a class="headerlink" href="#aiperfcommonutils" title="Permanent link">&para;</a></h2>


<div class="doc doc-object doc-module">



<a id="aiperf.common.utils"></a>
    <div class="doc doc-contents first">









  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h2 id="aiperf.common.utils.call_all_functions" class="doc doc-heading">
            <code class=" language-python"><span class="n">call_all_functions</span><span class="p">(</span><span class="n">funcs</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#aiperf.common.utils.call_all_functions" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">

        <p>Call all functions in the list with the given name.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>obj</code>
            </td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The object to call the functions on.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>func_names</code>
            </td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The names of the functions to call.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>*args</code>
            </td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The arguments to pass to the functions.</p>
              </div>
            </td>
            <td>
                  <code>()</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>**kwargs</code>
            </td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The keyword arguments to pass to the functions.</p>
              </div>
            </td>
            <td>
                  <code>{}</code>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="AIPerfMultiError (aiperf.common.exceptions.AIPerfMultiError)" href="#aiperf.common.exceptions.AIPerfMultiError">AIPerfMultiError</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If any of the functions raise an exception.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>aiperf/common/utils.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">call_all_functions</span><span class="p">(</span><span class="n">funcs</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">Callable</span><span class="p">],</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Call all functions in the list with the given name.</span>

<span class="sd">    Args:</span>
<span class="sd">        obj: The object to call the functions on.</span>
<span class="sd">        func_names: The names of the functions to call.</span>
<span class="sd">        *args: The arguments to pass to the functions.</span>
<span class="sd">        **kwargs: The keyword arguments to pass to the functions.</span>

<span class="sd">    Raises:</span>
<span class="sd">        AIPerfMultiError: If any of the functions raise an exception.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">exceptions</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">func</span> <span class="ow">in</span> <span class="n">funcs</span><span class="p">:</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">inspect</span><span class="o">.</span><span class="n">iscoroutinefunction</span><span class="p">(</span><span class="n">func</span><span class="p">):</span>
                <span class="k">await</span> <span class="n">func</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">func</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="c1"># TODO: error handling, logging</span>
            <span class="n">traceback</span><span class="o">.</span><span class="n">print_exc</span><span class="p">()</span>
            <span class="n">exceptions</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>

    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">exceptions</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">AIPerfMultiError</span><span class="p">(</span><span class="s2">&quot;Errors calling functions&quot;</span><span class="p">,</span> <span class="n">exceptions</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="aiperf.common.utils.call_all_functions_self" class="doc doc-heading">
            <code class=" language-python"><span class="n">call_all_functions_self</span><span class="p">(</span><span class="n">self_</span><span class="p">,</span> <span class="n">funcs</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#aiperf.common.utils.call_all_functions_self" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">

        <p>Call all functions in the list with the given name.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>obj</code>
            </td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The object to call the functions on.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>func_names</code>
            </td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The names of the functions to call.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>*args</code>
            </td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The arguments to pass to the functions.</p>
              </div>
            </td>
            <td>
                  <code>()</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>**kwargs</code>
            </td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The keyword arguments to pass to the functions.</p>
              </div>
            </td>
            <td>
                  <code>{}</code>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="AIPerfMultiError (aiperf.common.exceptions.AIPerfMultiError)" href="#aiperf.common.exceptions.AIPerfMultiError">AIPerfMultiError</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If any of the functions raise an exception.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>aiperf/common/utils.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">call_all_functions_self</span><span class="p">(</span>
    <span class="n">self_</span><span class="p">:</span> <span class="nb">object</span><span class="p">,</span> <span class="n">funcs</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">Callable</span><span class="p">],</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Call all functions in the list with the given name.</span>

<span class="sd">    Args:</span>
<span class="sd">        obj: The object to call the functions on.</span>
<span class="sd">        func_names: The names of the functions to call.</span>
<span class="sd">        *args: The arguments to pass to the functions.</span>
<span class="sd">        **kwargs: The keyword arguments to pass to the functions.</span>

<span class="sd">    Raises:</span>
<span class="sd">        AIPerfMultiError: If any of the functions raise an exception.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">exceptions</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">func</span> <span class="ow">in</span> <span class="n">funcs</span><span class="p">:</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">inspect</span><span class="o">.</span><span class="n">iscoroutinefunction</span><span class="p">(</span><span class="n">func</span><span class="p">):</span>
                <span class="k">await</span> <span class="n">func</span><span class="p">(</span><span class="n">self_</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">func</span><span class="p">(</span><span class="n">self_</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="c1"># TODO: error handling, logging</span>
            <span class="n">traceback</span><span class="o">.</span><span class="n">print_exc</span><span class="p">()</span>
            <span class="n">exceptions</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>

    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">exceptions</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">AIPerfMultiError</span><span class="p">(</span><span class="s2">&quot;Errors calling functions&quot;</span><span class="p">,</span> <span class="n">exceptions</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div><h2 id="aiperfdata_exporterconsole_exporter">aiperf.data_exporter.console_exporter<a class="headerlink" href="#aiperfdata_exporterconsole_exporter" title="Permanent link">&para;</a></h2>


<div class="doc doc-object doc-module">



<a id="aiperf.data_exporter.console_exporter"></a>
    <div class="doc doc-contents first">









  <div class="doc doc-children">








<div class="doc doc-object doc-class">



<h2 id="aiperf.data_exporter.console_exporter.ConsoleExporter" class="doc doc-heading">
            <code>ConsoleExporter</code>


<a href="#aiperf.data_exporter.console_exporter.ConsoleExporter" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">


        <p>A class that exports data to the console</p>







              <details class="quote">
                <summary>Source code in <code>aiperf/data_exporter/console_exporter.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@DataExporterFactory</span><span class="o">.</span><span class="n">register</span><span class="p">(</span><span class="n">DataExporterType</span><span class="o">.</span><span class="n">CONSOLE</span><span class="p">)</span>
<span class="k">class</span><span class="w"> </span><span class="nc">ConsoleExporter</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;A class that exports data to the console&quot;&quot;&quot;</span>

    <span class="n">STAT_COLUMN_KEYS</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;avg&quot;</span><span class="p">,</span> <span class="s2">&quot;min&quot;</span><span class="p">,</span> <span class="s2">&quot;max&quot;</span><span class="p">,</span> <span class="s2">&quot;p99&quot;</span><span class="p">,</span> <span class="s2">&quot;p90&quot;</span><span class="p">,</span> <span class="s2">&quot;p75&quot;</span><span class="p">]</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">endpoint_config</span><span class="p">:</span> <span class="n">EndPointConfig</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">endpoint_type</span> <span class="o">=</span> <span class="n">endpoint_config</span><span class="o">.</span><span class="n">type</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">streaming</span> <span class="o">=</span> <span class="n">endpoint_config</span><span class="o">.</span><span class="n">streaming</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">export</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">records</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">Record</span><span class="p">],</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">console</span> <span class="o">=</span> <span class="n">Console</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="n">table</span> <span class="o">=</span> <span class="n">Table</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_get_title</span><span class="p">())</span>
        <span class="n">table</span><span class="o">.</span><span class="n">add_column</span><span class="p">(</span><span class="s2">&quot;Metric&quot;</span><span class="p">,</span> <span class="n">justify</span><span class="o">=</span><span class="s2">&quot;right&quot;</span><span class="p">,</span> <span class="n">style</span><span class="o">=</span><span class="s2">&quot;cyan&quot;</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">STAT_COLUMN_KEYS</span><span class="p">:</span>
            <span class="n">table</span><span class="o">.</span><span class="n">add_column</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="n">justify</span><span class="o">=</span><span class="s2">&quot;right&quot;</span><span class="p">,</span> <span class="n">style</span><span class="o">=</span><span class="s2">&quot;green&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_construct_table</span><span class="p">(</span><span class="n">table</span><span class="p">,</span> <span class="n">records</span><span class="p">)</span>
        <span class="n">console</span><span class="o">.</span><span class="n">print</span><span class="p">(</span><span class="n">table</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_construct_table</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">table</span><span class="p">:</span> <span class="n">Table</span><span class="p">,</span> <span class="n">records</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">Record</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">record</span> <span class="ow">in</span> <span class="n">records</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_should_skip</span><span class="p">(</span><span class="n">record</span><span class="p">):</span>
                <span class="k">continue</span>
            <span class="n">table</span><span class="o">.</span><span class="n">add_row</span><span class="p">(</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">_format_row</span><span class="p">(</span><span class="n">record</span><span class="p">))</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_should_skip</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">record</span><span class="p">:</span> <span class="n">Record</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">endpoint_type</span> <span class="o">==</span> <span class="s2">&quot;embeddings&quot;</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">False</span>

        <span class="k">return</span> <span class="n">record</span><span class="o">.</span><span class="n">streaming_only</span> <span class="ow">and</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">streaming</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_format_row</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">record</span><span class="p">:</span> <span class="n">Record</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
        <span class="n">row</span> <span class="o">=</span> <span class="p">[</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">record</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2"> (</span><span class="si">{</span><span class="n">record</span><span class="o">.</span><span class="n">unit</span><span class="si">}</span><span class="s2">)&quot;</span><span class="p">]</span>
        <span class="k">for</span> <span class="n">stat</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">STAT_COLUMN_KEYS</span><span class="p">:</span>
            <span class="n">value</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">record</span><span class="p">,</span> <span class="n">stat</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
            <span class="n">row</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">value</span><span class="si">:</span><span class="s2">.2f</span><span class="si">}</span><span class="s2">&quot;</span> <span class="k">if</span> <span class="n">value</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="s2">&quot;N/A&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">row</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_get_title</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="n">type_titles</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;embeddings&quot;</span><span class="p">:</span> <span class="s2">&quot;Embeddings Metrics&quot;</span><span class="p">,</span>
            <span class="s2">&quot;rankings&quot;</span><span class="p">:</span> <span class="s2">&quot;Rankings Metrics&quot;</span><span class="p">,</span>
            <span class="s2">&quot;image_retrieval&quot;</span><span class="p">:</span> <span class="s2">&quot;Image Retrieval Metrics&quot;</span><span class="p">,</span>
            <span class="s2">&quot;multimodal&quot;</span><span class="p">:</span> <span class="s2">&quot;Multi-Modal Metrics&quot;</span><span class="p">,</span>
        <span class="p">}</span>
        <span class="n">metric_title</span> <span class="o">=</span> <span class="n">type_titles</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">endpoint_type</span><span class="p">,</span> <span class="s2">&quot;LLM Metrics&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;NVIDIA AIPerf | </span><span class="si">{</span><span class="n">metric_title</span><span class="si">}</span><span class="s2">&quot;</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">











  </div>

    </div>

</div>




  </div>

    </div>

</div><h2 id="aiperfdata_exporterexporter_manager">aiperf.data_exporter.exporter_manager<a class="headerlink" href="#aiperfdata_exporterexporter_manager" title="Permanent link">&para;</a></h2>


<div class="doc doc-object doc-module">



<a id="aiperf.data_exporter.exporter_manager"></a>
    <div class="doc doc-contents first">









  <div class="doc doc-children">








<div class="doc doc-object doc-class">



<h2 id="aiperf.data_exporter.exporter_manager.ExporterManager" class="doc doc-heading">
            <code>ExporterManager</code>


<a href="#aiperf.data_exporter.exporter_manager.ExporterManager" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">


        <p>ExporterManager is responsible for exporting records using all
registered data exporters.</p>







              <details class="quote">
                <summary>Source code in <code>aiperf/data_exporter/exporter_manager.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">ExporterManager</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    ExporterManager is responsible for exporting records using all</span>
<span class="sd">    registered data exporters.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">endpoint_config</span><span class="p">:</span> <span class="n">EndPointConfig</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">endpoint_config</span> <span class="o">=</span> <span class="n">endpoint_config</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">exporter_classes</span> <span class="o">=</span> <span class="n">DataExporterFactory</span><span class="o">.</span><span class="n">get_all_classes</span><span class="p">()</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">export</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">records</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">Record</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">exporter_class</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">exporter_classes</span><span class="p">:</span>
            <span class="n">exporter</span> <span class="o">=</span> <span class="n">exporter_class</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">endpoint_config</span><span class="p">)</span>
            <span class="n">exporter</span><span class="o">.</span><span class="n">export</span><span class="p">(</span><span class="n">records</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">











  </div>

    </div>

</div>




  </div>

    </div>

</div><h2 id="aiperfdata_exporterrecord">aiperf.data_exporter.record<a class="headerlink" href="#aiperfdata_exporterrecord" title="Permanent link">&para;</a></h2>


<div class="doc doc-object doc-module">



<a id="aiperf.data_exporter.record"></a>
    <div class="doc doc-contents first">









  <div class="doc doc-children">











  </div>

    </div>

</div><h2 id="aiperfservicesdatasetdataset_manager">aiperf.services.dataset.dataset_manager<a class="headerlink" href="#aiperfservicesdatasetdataset_manager" title="Permanent link">&para;</a></h2>


<div class="doc doc-object doc-module">



<a id="aiperf.services.dataset.dataset_manager"></a>
    <div class="doc doc-contents first">









  <div class="doc doc-children">








<div class="doc doc-object doc-class">



<h2 id="aiperf.services.dataset.dataset_manager.DatasetManager" class="doc doc-heading">
            <code>DatasetManager</code>


<a href="#aiperf.services.dataset.dataset_manager.DatasetManager" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="BaseComponentService (aiperf.common.service.base_component_service.BaseComponentService)" href="#aiperf.common.service.base_component_service.BaseComponentService">BaseComponentService</a></code></p>


        <p>The DatasetManager primary responsibility is to manage the data generation or acquisition.
For synthetic generation, it contains the code to generate the prompts or tokens.
It will have an API for dataset acquisition of a dataset if available in a remote repository or database.</p>







              <details class="quote">
                <summary>Source code in <code>aiperf/services/dataset/dataset_manager.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@ServiceFactory</span><span class="o">.</span><span class="n">register</span><span class="p">(</span><span class="n">ServiceType</span><span class="o">.</span><span class="n">DATASET_MANAGER</span><span class="p">)</span>
<span class="k">class</span><span class="w"> </span><span class="nc">DatasetManager</span><span class="p">(</span><span class="n">BaseComponentService</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    The DatasetManager primary responsibility is to manage the data generation or acquisition.</span>
<span class="sd">    For synthetic generation, it contains the code to generate the prompts or tokens.</span>
<span class="sd">    It will have an API for dataset acquisition of a dataset if available in a remote repository or database.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">service_config</span><span class="p">:</span> <span class="n">ServiceConfig</span><span class="p">,</span>
        <span class="n">service_id</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">service_config</span><span class="o">=</span><span class="n">service_config</span><span class="p">,</span> <span class="n">service_id</span><span class="o">=</span><span class="n">service_id</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Initializing dataset manager&quot;</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">service_type</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ServiceType</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;The type of service.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">ServiceType</span><span class="o">.</span><span class="n">DATASET_MANAGER</span>

    <span class="nd">@on_init</span>
    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">_initialize</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Initialize dataset manager-specific components.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Initializing dataset manager&quot;</span><span class="p">)</span>
        <span class="c1"># TODO: Implement dataset manager initialization</span>

    <span class="nd">@on_start</span>
    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">_start</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Start the dataset manager.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Starting dataset manager&quot;</span><span class="p">)</span>
        <span class="c1"># TODO: Implement dataset manager start</span>

    <span class="nd">@on_stop</span>
    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">_stop</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Stop the dataset manager.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Stopping dataset manager&quot;</span><span class="p">)</span>
        <span class="c1"># TODO: Implement dataset manager stop</span>

    <span class="nd">@on_cleanup</span>
    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">_cleanup</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Clean up dataset manager-specific components.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Cleaning up dataset manager&quot;</span><span class="p">)</span>
        <span class="c1"># TODO: Implement dataset manager cleanup</span>

    <span class="nd">@on_configure</span>
    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">_configure</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">message</span><span class="p">:</span> <span class="n">Message</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Configure the dataset manager.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Configuring dataset manager with message: </span><span class="si">{</span><span class="n">message</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">







<div class="doc doc-object doc-attribute">



<h3 id="aiperf.services.dataset.dataset_manager.DatasetManager.service_type" class="doc doc-heading">
            <code class=" language-python"><span class="n">service_type</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

<a href="#aiperf.services.dataset.dataset_manager.DatasetManager.service_type" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>The type of service.</p>

    </div>

</div>





  </div>

    </div>

</div>


<div class="doc doc-object doc-function">


<h2 id="aiperf.services.dataset.dataset_manager.main" class="doc doc-heading">
            <code class=" language-python"><span class="n">main</span><span class="p">()</span></code>

<a href="#aiperf.services.dataset.dataset_manager.main" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">

        <p>Main entry point for the dataset manager.</p>


            <details class="quote">
              <summary>Source code in <code>aiperf/services/dataset/dataset_manager.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">71</span>
<span class="normal">72</span>
<span class="normal">73</span>
<span class="normal">74</span>
<span class="normal">75</span>
<span class="normal">76</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">main</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Main entry point for the dataset manager.&quot;&quot;&quot;</span>

    <span class="kn">from</span><span class="w"> </span><span class="nn">aiperf.common.bootstrap</span><span class="w"> </span><span class="kn">import</span> <span class="n">bootstrap_and_run_service</span>

    <span class="n">bootstrap_and_run_service</span><span class="p">(</span><span class="n">DatasetManager</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div><h2 id="aiperfservicesdatasetgeneratoraudio">aiperf.services.dataset.generator.audio<a class="headerlink" href="#aiperfservicesdatasetgeneratoraudio" title="Permanent link">&para;</a></h2>


<div class="doc doc-object doc-module">



<a id="aiperf.services.dataset.generator.audio"></a>
    <div class="doc doc-contents first">









  <div class="doc doc-children">








<div class="doc doc-object doc-class">



<h2 id="aiperf.services.dataset.generator.audio.AudioGenerator" class="doc doc-heading">
            <code>AudioGenerator</code>


<a href="#aiperf.services.dataset.generator.audio.AudioGenerator" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">


        <p>A class for generating synthetic audio data.</p>
<p>This class provides methods to create audio samples with specified
characteristics such as format (WAV, MP3), length, sampling rate,
bit depth, and number of channels. It supports validation of audio
parameters to ensure compatibility with chosen formats.</p>







              <details class="quote">
                <summary>Source code in <code>aiperf/services/dataset/generator/audio.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 39</span>
<span class="normal"> 40</span>
<span class="normal"> 41</span>
<span class="normal"> 42</span>
<span class="normal"> 43</span>
<span class="normal"> 44</span>
<span class="normal"> 45</span>
<span class="normal"> 46</span>
<span class="normal"> 47</span>
<span class="normal"> 48</span>
<span class="normal"> 49</span>
<span class="normal"> 50</span>
<span class="normal"> 51</span>
<span class="normal"> 52</span>
<span class="normal"> 53</span>
<span class="normal"> 54</span>
<span class="normal"> 55</span>
<span class="normal"> 56</span>
<span class="normal"> 57</span>
<span class="normal"> 58</span>
<span class="normal"> 59</span>
<span class="normal"> 60</span>
<span class="normal"> 61</span>
<span class="normal"> 62</span>
<span class="normal"> 63</span>
<span class="normal"> 64</span>
<span class="normal"> 65</span>
<span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">AudioGenerator</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A class for generating synthetic audio data.</span>

<span class="sd">    This class provides methods to create audio samples with specified</span>
<span class="sd">    characteristics such as format (WAV, MP3), length, sampling rate,</span>
<span class="sd">    bit depth, and number of channels. It supports validation of audio</span>
<span class="sd">    parameters to ensure compatibility with chosen formats.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">_sample_positive_normal</span><span class="p">(</span>
        <span class="n">mean</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span> <span class="n">stddev</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span> <span class="n">min_value</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">0.1</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Sample from a normal distribution ensuring positive values without distorting the distribution.</span>
<span class="sd">        Uses rejection sampling to maintain the proper shape of the distribution.</span>

<span class="sd">        Args:</span>
<span class="sd">            mean: Mean value for the normal distribution</span>
<span class="sd">            stddev: Standard deviation for the normal distribution</span>
<span class="sd">            min_value: Minimum acceptable value</span>

<span class="sd">        Returns:</span>
<span class="sd">            A positive sample from the normal distribution</span>

<span class="sd">        Raises:</span>
<span class="sd">            GeneratorConfigurationError: If mean is less than min_value</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">mean</span> <span class="o">&lt;</span> <span class="n">min_value</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">GeneratorConfigurationError</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Mean value (</span><span class="si">{</span><span class="n">mean</span><span class="si">}</span><span class="s2">) must be greater than min_value (</span><span class="si">{</span><span class="n">min_value</span><span class="si">}</span><span class="s2">)&quot;</span>
            <span class="p">)</span>

        <span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
            <span class="n">sample</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">normal</span><span class="p">(</span><span class="n">mean</span><span class="p">,</span> <span class="n">stddev</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">sample</span> <span class="o">&gt;=</span> <span class="n">min_value</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">sample</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">_validate_sampling_rate</span><span class="p">(</span><span class="n">sampling_rate</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">audio_format</span><span class="p">:</span> <span class="n">AudioFormat</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Validate sampling rate for the given output format.</span>

<span class="sd">        Args:</span>
<span class="sd">            sampling_rate: Sampling rate in Hz</span>
<span class="sd">            audio_format: Audio format</span>

<span class="sd">        Raises:</span>
<span class="sd">            GeneratorConfigurationError: If sampling rate is not supported for the given format</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="p">(</span>
            <span class="n">audio_format</span> <span class="o">==</span> <span class="n">AudioFormat</span><span class="o">.</span><span class="n">MP3</span>
            <span class="ow">and</span> <span class="n">sampling_rate</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">MP3_SUPPORTED_SAMPLE_RATES</span>
        <span class="p">):</span>
            <span class="n">supported_rates</span> <span class="o">=</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">MP3_SUPPORTED_SAMPLE_RATES</span><span class="p">)</span>
            <span class="k">raise</span> <span class="n">GeneratorConfigurationError</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;MP3 format only supports the following sample rates (in Hz): </span><span class="si">{</span><span class="n">supported_rates</span><span class="si">}</span><span class="s2">. &quot;</span>
                <span class="sa">f</span><span class="s2">&quot;Got </span><span class="si">{</span><span class="n">sampling_rate</span><span class="si">}</span><span class="s2"> Hz. Please choose a supported rate from the list.&quot;</span>
            <span class="p">)</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">_validate_bit_depth</span><span class="p">(</span><span class="n">bit_depth</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Validate bit depth is supported.</span>

<span class="sd">        Args:</span>
<span class="sd">            bit_depth: Bit depth in bits</span>

<span class="sd">        Raises:</span>
<span class="sd">            GeneratorConfigurationError: If bit depth is not supported</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">bit_depth</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">SUPPORTED_BIT_DEPTHS</span><span class="p">:</span>
            <span class="n">supported_depths</span> <span class="o">=</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">SUPPORTED_BIT_DEPTHS</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>
            <span class="k">raise</span> <span class="n">GeneratorConfigurationError</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Unsupported bit depth: </span><span class="si">{</span><span class="n">bit_depth</span><span class="si">}</span><span class="s2">. &quot;</span>
                <span class="sa">f</span><span class="s2">&quot;Supported bit depths are: </span><span class="si">{</span><span class="n">supported_depths</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="p">)</span>

    <span class="c1"># TODO: uncomment when ConfigAudio is implemented</span>
    <span class="c1"># @staticmethod</span>
    <span class="c1"># def create_synthetic_audio(config: ConfigAudio) -&gt; str:</span>
    <span class="nd">@staticmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">create_synthetic_audio</span><span class="p">(</span><span class="n">config</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Generate audio data with specified parameters.</span>

<span class="sd">        Args:</span>
<span class="sd">            config: ConfigAudio object containing audio generation parameters</span>

<span class="sd">        Returns:</span>
<span class="sd">            Data URI containing base64-encoded audio data with format specification</span>

<span class="sd">        Raises:</span>
<span class="sd">            GeneratorConfigurationError: If any of the following conditions are met:</span>
<span class="sd">                - audio_length_mean is less than 0.1 seconds</span>
<span class="sd">                - channels is not 1 (mono) or 2 (stereo)</span>
<span class="sd">                - sampling rate is not supported for MP3 format</span>
<span class="sd">                - bit depth is not supported (must be 8, 16, 24, or 32)</span>
<span class="sd">                - audio format is not supported (must be &#39;wav&#39; or &#39;mp3&#39;)</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">config</span><span class="o">.</span><span class="n">num_channels</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">):</span>
            <span class="k">raise</span> <span class="n">GeneratorConfigurationError</span><span class="p">(</span>
                <span class="s2">&quot;Only mono (1) and stereo (2) channels are supported&quot;</span>
            <span class="p">)</span>

        <span class="c1"># Sample audio length (in seconds) using rejection sampling</span>
        <span class="n">audio_length</span> <span class="o">=</span> <span class="n">AudioGenerator</span><span class="o">.</span><span class="n">_sample_positive_normal</span><span class="p">(</span>
            <span class="n">config</span><span class="o">.</span><span class="n">length</span><span class="o">.</span><span class="n">mean</span><span class="p">,</span> <span class="n">config</span><span class="o">.</span><span class="n">length</span><span class="o">.</span><span class="n">stddev</span>
        <span class="p">)</span>

        <span class="c1"># Randomly select sampling rate and bit depth</span>
        <span class="n">sampling_rate</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span>
            <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">sample_rates</span><span class="p">)</span> <span class="o">*</span> <span class="mi">1000</span>
        <span class="p">)</span>  <span class="c1"># Convert kHz to Hz</span>
        <span class="n">bit_depth</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">depths</span><span class="p">)</span>

        <span class="c1"># Validate sampling rate and bit depth</span>
        <span class="n">AudioGenerator</span><span class="o">.</span><span class="n">_validate_sampling_rate</span><span class="p">(</span><span class="n">sampling_rate</span><span class="p">,</span> <span class="n">config</span><span class="o">.</span><span class="n">format</span><span class="p">)</span>
        <span class="n">AudioGenerator</span><span class="o">.</span><span class="n">_validate_bit_depth</span><span class="p">(</span><span class="n">bit_depth</span><span class="p">)</span>

        <span class="c1"># Generate synthetic audio data (gaussian noise)</span>
        <span class="n">num_samples</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">audio_length</span> <span class="o">*</span> <span class="n">sampling_rate</span><span class="p">)</span>
        <span class="n">audio_data</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">normal</span><span class="p">(</span>
            <span class="mi">0</span><span class="p">,</span>
            <span class="mf">0.3</span><span class="p">,</span>
            <span class="p">(</span>
                <span class="p">(</span><span class="n">num_samples</span><span class="p">,</span> <span class="n">config</span><span class="o">.</span><span class="n">num_channels</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">config</span><span class="o">.</span><span class="n">num_channels</span> <span class="o">&gt;</span> <span class="mi">1</span>
                <span class="k">else</span> <span class="n">num_samples</span>
            <span class="p">),</span>
        <span class="p">)</span>

        <span class="c1"># Ensure the signal is within [-1, 1] range</span>
        <span class="n">audio_data</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">clip</span><span class="p">(</span><span class="n">audio_data</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>

        <span class="c1"># Scale to the appropriate bit depth range</span>
        <span class="n">max_val</span> <span class="o">=</span> <span class="mi">2</span> <span class="o">**</span> <span class="p">(</span><span class="n">bit_depth</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span>
        <span class="n">numpy_type</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">SUPPORTED_BIT_DEPTHS</span><span class="p">[</span><span class="n">bit_depth</span><span class="p">]</span>
        <span class="n">audio_data</span> <span class="o">=</span> <span class="p">(</span><span class="n">audio_data</span> <span class="o">*</span> <span class="n">max_val</span><span class="p">)</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="n">numpy_type</span><span class="p">)</span>

        <span class="c1"># Write audio using soundfile</span>
        <span class="n">output_buffer</span> <span class="o">=</span> <span class="n">io</span><span class="o">.</span><span class="n">BytesIO</span><span class="p">()</span>

        <span class="c1"># Select appropriate subtype based on format</span>
        <span class="k">if</span> <span class="n">config</span><span class="o">.</span><span class="n">format</span> <span class="o">==</span> <span class="n">AudioFormat</span><span class="o">.</span><span class="n">MP3</span><span class="p">:</span>
            <span class="n">subtype</span> <span class="o">=</span> <span class="s2">&quot;MPEG_LAYER_III&quot;</span>
        <span class="k">elif</span> <span class="n">config</span><span class="o">.</span><span class="n">format</span> <span class="o">==</span> <span class="n">AudioFormat</span><span class="o">.</span><span class="n">WAV</span><span class="p">:</span>
            <span class="n">_</span><span class="p">,</span> <span class="n">subtype</span> <span class="o">=</span> <span class="n">SUPPORTED_BIT_DEPTHS</span><span class="p">[</span><span class="n">bit_depth</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">GeneratorConfigurationError</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Unsupported audio format: </span><span class="si">{</span><span class="n">config</span><span class="o">.</span><span class="n">format</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">. &quot;</span>
                <span class="sa">f</span><span class="s2">&quot;Supported formats are: </span><span class="si">{</span><span class="n">AudioFormat</span><span class="o">.</span><span class="n">WAV</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">, </span><span class="si">{</span><span class="n">AudioFormat</span><span class="o">.</span><span class="n">MP3</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="p">)</span>

        <span class="n">sf</span><span class="o">.</span><span class="n">write</span><span class="p">(</span>
            <span class="n">output_buffer</span><span class="p">,</span>
            <span class="n">audio_data</span><span class="p">,</span>
            <span class="n">sampling_rate</span><span class="p">,</span>
            <span class="nb">format</span><span class="o">=</span><span class="n">config</span><span class="o">.</span><span class="n">format</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
            <span class="n">subtype</span><span class="o">=</span><span class="n">subtype</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="n">audio_bytes</span> <span class="o">=</span> <span class="n">output_buffer</span><span class="o">.</span><span class="n">getvalue</span><span class="p">()</span>

        <span class="c1"># Encode to base64 with data URI scheme: &quot;{format},{data}&quot;</span>
        <span class="n">base64_data</span> <span class="o">=</span> <span class="n">base64</span><span class="o">.</span><span class="n">b64encode</span><span class="p">(</span><span class="n">audio_bytes</span><span class="p">)</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s2">&quot;utf-8&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">config</span><span class="o">.</span><span class="n">format</span><span class="o">.</span><span class="n">name</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span><span class="si">}</span><span class="s2">,</span><span class="si">{</span><span class="n">base64_data</span><span class="si">}</span><span class="s2">&quot;</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h3 id="aiperf.services.dataset.generator.audio.AudioGenerator.create_synthetic_audio" class="doc doc-heading">
            <code class=" language-python"><span class="n">create_synthetic_audio</span><span class="p">(</span><span class="n">config</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-staticmethod"><code>staticmethod</code></small>
  </span>

<a href="#aiperf.services.dataset.generator.audio.AudioGenerator.create_synthetic_audio" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Generate audio data with specified parameters.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>config</code>
            </td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>ConfigAudio object containing audio generation parameters</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Data URI containing base64-encoded audio data with format specification</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="GeneratorConfigurationError (aiperf.common.exceptions.GeneratorConfigurationError)" href="#aiperf.common.exceptions.GeneratorConfigurationError">GeneratorConfigurationError</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If any of the following conditions are met:
- audio_length_mean is less than 0.1 seconds
- channels is not 1 (mono) or 2 (stereo)
- sampling rate is not supported for MP3 format
- bit depth is not supported (must be 8, 16, 24, or 32)
- audio format is not supported (must be 'wav' or 'mp3')</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>aiperf/services/dataset/generator/audio.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@staticmethod</span>
<span class="k">def</span><span class="w"> </span><span class="nf">create_synthetic_audio</span><span class="p">(</span><span class="n">config</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Generate audio data with specified parameters.</span>

<span class="sd">    Args:</span>
<span class="sd">        config: ConfigAudio object containing audio generation parameters</span>

<span class="sd">    Returns:</span>
<span class="sd">        Data URI containing base64-encoded audio data with format specification</span>

<span class="sd">    Raises:</span>
<span class="sd">        GeneratorConfigurationError: If any of the following conditions are met:</span>
<span class="sd">            - audio_length_mean is less than 0.1 seconds</span>
<span class="sd">            - channels is not 1 (mono) or 2 (stereo)</span>
<span class="sd">            - sampling rate is not supported for MP3 format</span>
<span class="sd">            - bit depth is not supported (must be 8, 16, 24, or 32)</span>
<span class="sd">            - audio format is not supported (must be &#39;wav&#39; or &#39;mp3&#39;)</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">config</span><span class="o">.</span><span class="n">num_channels</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">):</span>
        <span class="k">raise</span> <span class="n">GeneratorConfigurationError</span><span class="p">(</span>
            <span class="s2">&quot;Only mono (1) and stereo (2) channels are supported&quot;</span>
        <span class="p">)</span>

    <span class="c1"># Sample audio length (in seconds) using rejection sampling</span>
    <span class="n">audio_length</span> <span class="o">=</span> <span class="n">AudioGenerator</span><span class="o">.</span><span class="n">_sample_positive_normal</span><span class="p">(</span>
        <span class="n">config</span><span class="o">.</span><span class="n">length</span><span class="o">.</span><span class="n">mean</span><span class="p">,</span> <span class="n">config</span><span class="o">.</span><span class="n">length</span><span class="o">.</span><span class="n">stddev</span>
    <span class="p">)</span>

    <span class="c1"># Randomly select sampling rate and bit depth</span>
    <span class="n">sampling_rate</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span>
        <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">sample_rates</span><span class="p">)</span> <span class="o">*</span> <span class="mi">1000</span>
    <span class="p">)</span>  <span class="c1"># Convert kHz to Hz</span>
    <span class="n">bit_depth</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">depths</span><span class="p">)</span>

    <span class="c1"># Validate sampling rate and bit depth</span>
    <span class="n">AudioGenerator</span><span class="o">.</span><span class="n">_validate_sampling_rate</span><span class="p">(</span><span class="n">sampling_rate</span><span class="p">,</span> <span class="n">config</span><span class="o">.</span><span class="n">format</span><span class="p">)</span>
    <span class="n">AudioGenerator</span><span class="o">.</span><span class="n">_validate_bit_depth</span><span class="p">(</span><span class="n">bit_depth</span><span class="p">)</span>

    <span class="c1"># Generate synthetic audio data (gaussian noise)</span>
    <span class="n">num_samples</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">audio_length</span> <span class="o">*</span> <span class="n">sampling_rate</span><span class="p">)</span>
    <span class="n">audio_data</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">normal</span><span class="p">(</span>
        <span class="mi">0</span><span class="p">,</span>
        <span class="mf">0.3</span><span class="p">,</span>
        <span class="p">(</span>
            <span class="p">(</span><span class="n">num_samples</span><span class="p">,</span> <span class="n">config</span><span class="o">.</span><span class="n">num_channels</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">config</span><span class="o">.</span><span class="n">num_channels</span> <span class="o">&gt;</span> <span class="mi">1</span>
            <span class="k">else</span> <span class="n">num_samples</span>
        <span class="p">),</span>
    <span class="p">)</span>

    <span class="c1"># Ensure the signal is within [-1, 1] range</span>
    <span class="n">audio_data</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">clip</span><span class="p">(</span><span class="n">audio_data</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>

    <span class="c1"># Scale to the appropriate bit depth range</span>
    <span class="n">max_val</span> <span class="o">=</span> <span class="mi">2</span> <span class="o">**</span> <span class="p">(</span><span class="n">bit_depth</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span>
    <span class="n">numpy_type</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">SUPPORTED_BIT_DEPTHS</span><span class="p">[</span><span class="n">bit_depth</span><span class="p">]</span>
    <span class="n">audio_data</span> <span class="o">=</span> <span class="p">(</span><span class="n">audio_data</span> <span class="o">*</span> <span class="n">max_val</span><span class="p">)</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="n">numpy_type</span><span class="p">)</span>

    <span class="c1"># Write audio using soundfile</span>
    <span class="n">output_buffer</span> <span class="o">=</span> <span class="n">io</span><span class="o">.</span><span class="n">BytesIO</span><span class="p">()</span>

    <span class="c1"># Select appropriate subtype based on format</span>
    <span class="k">if</span> <span class="n">config</span><span class="o">.</span><span class="n">format</span> <span class="o">==</span> <span class="n">AudioFormat</span><span class="o">.</span><span class="n">MP3</span><span class="p">:</span>
        <span class="n">subtype</span> <span class="o">=</span> <span class="s2">&quot;MPEG_LAYER_III&quot;</span>
    <span class="k">elif</span> <span class="n">config</span><span class="o">.</span><span class="n">format</span> <span class="o">==</span> <span class="n">AudioFormat</span><span class="o">.</span><span class="n">WAV</span><span class="p">:</span>
        <span class="n">_</span><span class="p">,</span> <span class="n">subtype</span> <span class="o">=</span> <span class="n">SUPPORTED_BIT_DEPTHS</span><span class="p">[</span><span class="n">bit_depth</span><span class="p">]</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">GeneratorConfigurationError</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;Unsupported audio format: </span><span class="si">{</span><span class="n">config</span><span class="o">.</span><span class="n">format</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">. &quot;</span>
            <span class="sa">f</span><span class="s2">&quot;Supported formats are: </span><span class="si">{</span><span class="n">AudioFormat</span><span class="o">.</span><span class="n">WAV</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">, </span><span class="si">{</span><span class="n">AudioFormat</span><span class="o">.</span><span class="n">MP3</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="p">)</span>

    <span class="n">sf</span><span class="o">.</span><span class="n">write</span><span class="p">(</span>
        <span class="n">output_buffer</span><span class="p">,</span>
        <span class="n">audio_data</span><span class="p">,</span>
        <span class="n">sampling_rate</span><span class="p">,</span>
        <span class="nb">format</span><span class="o">=</span><span class="n">config</span><span class="o">.</span><span class="n">format</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
        <span class="n">subtype</span><span class="o">=</span><span class="n">subtype</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">audio_bytes</span> <span class="o">=</span> <span class="n">output_buffer</span><span class="o">.</span><span class="n">getvalue</span><span class="p">()</span>

    <span class="c1"># Encode to base64 with data URI scheme: &quot;{format},{data}&quot;</span>
    <span class="n">base64_data</span> <span class="o">=</span> <span class="n">base64</span><span class="o">.</span><span class="n">b64encode</span><span class="p">(</span><span class="n">audio_bytes</span><span class="p">)</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s2">&quot;utf-8&quot;</span><span class="p">)</span>
    <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">config</span><span class="o">.</span><span class="n">format</span><span class="o">.</span><span class="n">name</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span><span class="si">}</span><span class="s2">,</span><span class="si">{</span><span class="n">base64_data</span><span class="si">}</span><span class="s2">&quot;</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>




  </div>

    </div>

</div><h2 id="aiperfservicesdatasetgeneratorimage">aiperf.services.dataset.generator.image<a class="headerlink" href="#aiperfservicesdatasetgeneratorimage" title="Permanent link">&para;</a></h2>


<div class="doc doc-object doc-module">



<a id="aiperf.services.dataset.generator.image"></a>
    <div class="doc doc-contents first">









  <div class="doc doc-children">








<div class="doc doc-object doc-class">



<h2 id="aiperf.services.dataset.generator.image.ImageGenerator" class="doc doc-heading">
            <code>ImageGenerator</code>


<a href="#aiperf.services.dataset.generator.image.ImageGenerator" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">


        <p>A class that generates images from source images.</p>
<p>This class provides methods to create synthetic images by resizing
source images (located in the 'assets/source_images' directory)
to specified dimensions and converting them to a chosen image format (e.g., PNG, JPEG).
The dimensions can be randomized based on mean and standard deviation values.</p>







              <details class="quote">
                <summary>Source code in <code>aiperf/services/dataset/generator/image.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span>
<span class="normal">71</span>
<span class="normal">72</span>
<span class="normal">73</span>
<span class="normal">74</span>
<span class="normal">75</span>
<span class="normal">76</span>
<span class="normal">77</span>
<span class="normal">78</span>
<span class="normal">79</span>
<span class="normal">80</span>
<span class="normal">81</span>
<span class="normal">82</span>
<span class="normal">83</span>
<span class="normal">84</span>
<span class="normal">85</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">ImageGenerator</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;A class that generates images from source images.</span>

<span class="sd">    This class provides methods to create synthetic images by resizing</span>
<span class="sd">    source images (located in the &#39;assets/source_images&#39; directory)</span>
<span class="sd">    to specified dimensions and converting them to a chosen image format (e.g., PNG, JPEG).</span>
<span class="sd">    The dimensions can be randomized based on mean and standard deviation values.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">create_synthetic_image</span><span class="p">(</span>
        <span class="bp">cls</span><span class="p">,</span>
        <span class="n">image_width_mean</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
        <span class="n">image_width_stddev</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
        <span class="n">image_height_mean</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
        <span class="n">image_height_stddev</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
        <span class="n">image_format</span><span class="p">:</span> <span class="n">ImageFormat</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Generate an image with the provided parameters.</span>

<span class="sd">        Args:</span>
<span class="sd">            image_width_mean: The mean width of the image.</span>
<span class="sd">            image_width_stddev: The standard deviation of the image width.</span>
<span class="sd">            image_height_mean: The mean height of the image.</span>
<span class="sd">            image_height_stddev: The standard deviation of the image height.</span>
<span class="sd">            image_format: The format of the image.</span>

<span class="sd">        Returns:</span>
<span class="sd">            A base64 encoded string of the generated image.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">image_format</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">image_format</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">ImageFormat</span><span class="p">))</span>
        <span class="n">width</span> <span class="o">=</span> <span class="bp">cls</span><span class="o">.</span><span class="n">_sample_random_positive_integer</span><span class="p">(</span>
            <span class="n">image_width_mean</span><span class="p">,</span> <span class="n">image_width_stddev</span>
        <span class="p">)</span>
        <span class="n">height</span> <span class="o">=</span> <span class="bp">cls</span><span class="o">.</span><span class="n">_sample_random_positive_integer</span><span class="p">(</span>
            <span class="n">image_height_mean</span><span class="p">,</span> <span class="n">image_height_stddev</span>
        <span class="p">)</span>

        <span class="n">image</span> <span class="o">=</span> <span class="bp">cls</span><span class="o">.</span><span class="n">_sample_source_image</span><span class="p">()</span>
        <span class="n">image</span> <span class="o">=</span> <span class="n">image</span><span class="o">.</span><span class="n">resize</span><span class="p">(</span><span class="n">size</span><span class="o">=</span><span class="p">(</span><span class="n">width</span><span class="p">,</span> <span class="n">height</span><span class="p">))</span>
        <span class="n">base64_image</span> <span class="o">=</span> <span class="n">utils</span><span class="o">.</span><span class="n">encode_image</span><span class="p">(</span><span class="n">image</span><span class="p">,</span> <span class="n">image_format</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>

        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;data:image/</span><span class="si">{</span><span class="n">image_format</span><span class="o">.</span><span class="n">name</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span><span class="si">}</span><span class="s2">;base64,</span><span class="si">{</span><span class="n">base64_image</span><span class="si">}</span><span class="s2">&quot;</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">_sample_source_image</span><span class="p">(</span><span class="bp">cls</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Sample one image among the source images.</span>

<span class="sd">        Returns:</span>
<span class="sd">            A PIL Image object randomly selected from the source images.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">filepath</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="vm">__file__</span><span class="p">)</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">resolve</span><span class="p">()</span> <span class="o">/</span> <span class="s2">&quot;assets&quot;</span> <span class="o">/</span> <span class="s2">&quot;source_images&quot;</span> <span class="o">/</span> <span class="s2">&quot;*&quot;</span>
        <span class="n">filenames</span> <span class="o">=</span> <span class="n">glob</span><span class="o">.</span><span class="n">glob</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">filepath</span><span class="p">))</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">filenames</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;No source images found in &#39;</span><span class="si">{</span><span class="n">filepath</span><span class="si">}</span><span class="s2">&#39;&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">Image</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">(</span><span class="n">filenames</span><span class="p">))</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">_sample_random_positive_integer</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">mean</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">stddev</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Sample a random positive integer from a Gaussian distribution.</span>

<span class="sd">        Args:</span>
<span class="sd">            mean: The mean of the Gaussian distribution.</span>
<span class="sd">            stddev: The standard deviation of the Gaussian distribution.</span>

<span class="sd">        Returns:</span>
<span class="sd">            A positive integer sampled from the distribution. If the sampled</span>
<span class="sd">            number is zero, it returns 1.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">n</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="nb">abs</span><span class="p">(</span><span class="n">random</span><span class="o">.</span><span class="n">gauss</span><span class="p">(</span><span class="n">mean</span><span class="p">,</span> <span class="n">stddev</span><span class="p">)))</span>
        <span class="k">return</span> <span class="n">n</span> <span class="k">if</span> <span class="n">n</span> <span class="o">!=</span> <span class="mi">0</span> <span class="k">else</span> <span class="mi">1</span>  <span class="c1"># avoid zero</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h3 id="aiperf.services.dataset.generator.image.ImageGenerator.create_synthetic_image" class="doc doc-heading">
            <code class=" language-python"><span class="n">create_synthetic_image</span><span class="p">(</span><span class="n">image_width_mean</span><span class="p">,</span> <span class="n">image_width_stddev</span><span class="p">,</span> <span class="n">image_height_mean</span><span class="p">,</span> <span class="n">image_height_stddev</span><span class="p">,</span> <span class="n">image_format</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-classmethod"><code>classmethod</code></small>
  </span>

<a href="#aiperf.services.dataset.generator.image.ImageGenerator.create_synthetic_image" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Generate an image with the provided parameters.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>image_width_mean</code>
            </td>
            <td>
                  <code><span title="int">int</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The mean width of the image.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>image_width_stddev</code>
            </td>
            <td>
                  <code><span title="int">int</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The standard deviation of the image width.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>image_height_mean</code>
            </td>
            <td>
                  <code><span title="int">int</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The mean height of the image.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>image_height_stddev</code>
            </td>
            <td>
                  <code><span title="int">int</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The standard deviation of the image height.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>image_format</code>
            </td>
            <td>
                  <code><span title="aiperf.common.enums.ImageFormat">ImageFormat</span> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The format of the image.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A base64 encoded string of the generated image.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>aiperf/services/dataset/generator/image.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@classmethod</span>
<span class="k">def</span><span class="w"> </span><span class="nf">create_synthetic_image</span><span class="p">(</span>
    <span class="bp">cls</span><span class="p">,</span>
    <span class="n">image_width_mean</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
    <span class="n">image_width_stddev</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
    <span class="n">image_height_mean</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
    <span class="n">image_height_stddev</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
    <span class="n">image_format</span><span class="p">:</span> <span class="n">ImageFormat</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Generate an image with the provided parameters.</span>

<span class="sd">    Args:</span>
<span class="sd">        image_width_mean: The mean width of the image.</span>
<span class="sd">        image_width_stddev: The standard deviation of the image width.</span>
<span class="sd">        image_height_mean: The mean height of the image.</span>
<span class="sd">        image_height_stddev: The standard deviation of the image height.</span>
<span class="sd">        image_format: The format of the image.</span>

<span class="sd">    Returns:</span>
<span class="sd">        A base64 encoded string of the generated image.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">image_format</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">image_format</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">ImageFormat</span><span class="p">))</span>
    <span class="n">width</span> <span class="o">=</span> <span class="bp">cls</span><span class="o">.</span><span class="n">_sample_random_positive_integer</span><span class="p">(</span>
        <span class="n">image_width_mean</span><span class="p">,</span> <span class="n">image_width_stddev</span>
    <span class="p">)</span>
    <span class="n">height</span> <span class="o">=</span> <span class="bp">cls</span><span class="o">.</span><span class="n">_sample_random_positive_integer</span><span class="p">(</span>
        <span class="n">image_height_mean</span><span class="p">,</span> <span class="n">image_height_stddev</span>
    <span class="p">)</span>

    <span class="n">image</span> <span class="o">=</span> <span class="bp">cls</span><span class="o">.</span><span class="n">_sample_source_image</span><span class="p">()</span>
    <span class="n">image</span> <span class="o">=</span> <span class="n">image</span><span class="o">.</span><span class="n">resize</span><span class="p">(</span><span class="n">size</span><span class="o">=</span><span class="p">(</span><span class="n">width</span><span class="p">,</span> <span class="n">height</span><span class="p">))</span>
    <span class="n">base64_image</span> <span class="o">=</span> <span class="n">utils</span><span class="o">.</span><span class="n">encode_image</span><span class="p">(</span><span class="n">image</span><span class="p">,</span> <span class="n">image_format</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>

    <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;data:image/</span><span class="si">{</span><span class="n">image_format</span><span class="o">.</span><span class="n">name</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span><span class="si">}</span><span class="s2">;base64,</span><span class="si">{</span><span class="n">base64_image</span><span class="si">}</span><span class="s2">&quot;</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>




  </div>

    </div>

</div><h2 id="aiperfservicesdatasetgeneratorprompt">aiperf.services.dataset.generator.prompt<a class="headerlink" href="#aiperfservicesdatasetgeneratorprompt" title="Permanent link">&para;</a></h2>


<div class="doc doc-object doc-module">



<a id="aiperf.services.dataset.generator.prompt"></a>
    <div class="doc doc-contents first">









  <div class="doc doc-children">








<div class="doc doc-object doc-class">



<h2 id="aiperf.services.dataset.generator.prompt.PromptGenerator" class="doc doc-heading">
            <code>PromptGenerator</code>


<a href="#aiperf.services.dataset.generator.prompt.PromptGenerator" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">


        <p>A class for generating synthetic prompts from a text corpus.</p>
<p>This class loads a text corpus (e.g., Shakespearean text), tokenizes it,
and uses the tokenized corpus to generate synthetic prompts of specified
lengths. It supports generating prompts with a target number of tokens
(with optional randomization around a mean and standard deviation) and
can reuse previously generated token blocks to optimize generation for
certain use cases. It also allows for the creation of a pool of prefix
prompts that can be randomly selected.</p>







              <details class="quote">
                <summary>Source code in <code>aiperf/services/dataset/generator/prompt.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 21</span>
<span class="normal"> 22</span>
<span class="normal"> 23</span>
<span class="normal"> 24</span>
<span class="normal"> 25</span>
<span class="normal"> 26</span>
<span class="normal"> 27</span>
<span class="normal"> 28</span>
<span class="normal"> 29</span>
<span class="normal"> 30</span>
<span class="normal"> 31</span>
<span class="normal"> 32</span>
<span class="normal"> 33</span>
<span class="normal"> 34</span>
<span class="normal"> 35</span>
<span class="normal"> 36</span>
<span class="normal"> 37</span>
<span class="normal"> 38</span>
<span class="normal"> 39</span>
<span class="normal"> 40</span>
<span class="normal"> 41</span>
<span class="normal"> 42</span>
<span class="normal"> 43</span>
<span class="normal"> 44</span>
<span class="normal"> 45</span>
<span class="normal"> 46</span>
<span class="normal"> 47</span>
<span class="normal"> 48</span>
<span class="normal"> 49</span>
<span class="normal"> 50</span>
<span class="normal"> 51</span>
<span class="normal"> 52</span>
<span class="normal"> 53</span>
<span class="normal"> 54</span>
<span class="normal"> 55</span>
<span class="normal"> 56</span>
<span class="normal"> 57</span>
<span class="normal"> 58</span>
<span class="normal"> 59</span>
<span class="normal"> 60</span>
<span class="normal"> 61</span>
<span class="normal"> 62</span>
<span class="normal"> 63</span>
<span class="normal"> 64</span>
<span class="normal"> 65</span>
<span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">PromptGenerator</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;A class for generating synthetic prompts from a text corpus.</span>

<span class="sd">    This class loads a text corpus (e.g., Shakespearean text), tokenizes it,</span>
<span class="sd">    and uses the tokenized corpus to generate synthetic prompts of specified</span>
<span class="sd">    lengths. It supports generating prompts with a target number of tokens</span>
<span class="sd">    (with optional randomization around a mean and standard deviation) and</span>
<span class="sd">    can reuse previously generated token blocks to optimize generation for</span>
<span class="sd">    certain use cases. It also allows for the creation of a pool of prefix</span>
<span class="sd">    prompts that can be randomly selected.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">_tokenized_corpus</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">_corpus_length</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">_prefix_prompts</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">_cache</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">list</span><span class="p">[</span><span class="nb">int</span><span class="p">]]</span> <span class="o">=</span> <span class="p">{}</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">create_synthetic_prompt</span><span class="p">(</span>
        <span class="bp">cls</span><span class="p">,</span>
        <span class="n">tokenizer</span><span class="p">:</span> <span class="n">Tokenizer</span><span class="p">,</span>
        <span class="n">prompt_tokens_mean</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">550</span><span class="p">,</span>
        <span class="n">prompt_tokens_stddev</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">250</span><span class="p">,</span>
        <span class="n">hash_ids</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">block_size</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">512</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Generate a synthetic prompt with a specific number of tokens.</span>

<span class="sd">        Args:</span>
<span class="sd">            tokenizer: Tokenizer instance.</span>
<span class="sd">            prompt_tokens_mean: Mean number of tokens in the prompt.</span>
<span class="sd">            prompt_tokens_stddev: Standard deviation for the number of tokens in the prompt.</span>
<span class="sd">            hash_ids: Optional list of integers for token reuse.</span>
<span class="sd">            block_size: Size of the token block for reuse.</span>

<span class="sd">        Returns:</span>
<span class="sd">            A synthetic prompt as a string.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">cls</span><span class="o">.</span><span class="n">_tokenized_corpus</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">cls</span><span class="o">.</span><span class="n">_initialize_corpus</span><span class="p">(</span><span class="n">tokenizer</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">hash_ids</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">cls</span><span class="o">.</span><span class="n">_generate_prompt_with_token_reuse</span><span class="p">(</span>
                <span class="n">tokenizer</span><span class="p">,</span> <span class="n">prompt_tokens_mean</span><span class="p">,</span> <span class="n">hash_ids</span><span class="p">,</span> <span class="n">block_size</span>
            <span class="p">)</span>

        <span class="n">num_prompt_tokens</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span>
            <span class="mi">0</span><span class="p">,</span> <span class="nb">int</span><span class="p">(</span><span class="n">random</span><span class="o">.</span><span class="n">gauss</span><span class="p">(</span><span class="n">prompt_tokens_mean</span><span class="p">,</span> <span class="n">prompt_tokens_stddev</span><span class="p">))</span>
        <span class="p">)</span>

        <span class="k">return</span> <span class="bp">cls</span><span class="o">.</span><span class="n">_generate_prompt</span><span class="p">(</span><span class="n">tokenizer</span><span class="p">,</span> <span class="n">num_prompt_tokens</span><span class="p">)</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">_initialize_corpus</span><span class="p">(</span>
        <span class="bp">cls</span><span class="p">,</span> <span class="n">tokenizer</span><span class="p">:</span> <span class="n">Tokenizer</span><span class="p">,</span> <span class="n">corpus_file</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">DEFAULT_CORPUS_FILE</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Load and tokenize the corpus once, storing it for reuse.</span>

<span class="sd">        Args:</span>
<span class="sd">            tokenizer: Tokenizer for tokenizing the corpus.</span>
<span class="sd">            corpus_file: Path to the corpus file.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">corpus_path</span> <span class="o">=</span> <span class="n">pathlib</span><span class="o">.</span><span class="n">Path</span><span class="p">(</span><span class="vm">__file__</span><span class="p">)</span><span class="o">.</span><span class="n">parent</span> <span class="o">/</span> <span class="n">corpus_file</span>

        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">corpus_path</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
            <span class="n">lines</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">readlines</span><span class="p">()</span>

        <span class="k">def</span><span class="w"> </span><span class="nf">tokenize_chunk</span><span class="p">(</span><span class="n">chunk</span><span class="p">):</span>
            <span class="n">cleaned_text</span> <span class="o">=</span> <span class="s2">&quot; &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">line</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span> <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">chunk</span> <span class="k">if</span> <span class="n">line</span><span class="o">.</span><span class="n">strip</span><span class="p">())</span>
            <span class="n">tokens</span> <span class="o">=</span> <span class="n">tokenizer</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="n">cleaned_text</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">tokens</span>

        <span class="n">num_threads</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">cpu_count</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">num_threads</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">num_threads</span> <span class="o">=</span> <span class="mi">4</span>
        <span class="n">chunk_size</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">lines</span><span class="p">)</span> <span class="o">//</span> <span class="n">num_threads</span>
        <span class="n">chunks</span> <span class="o">=</span> <span class="p">[</span><span class="n">lines</span><span class="p">[</span><span class="n">i</span> <span class="p">:</span> <span class="n">i</span> <span class="o">+</span> <span class="n">chunk_size</span><span class="p">]</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">lines</span><span class="p">),</span> <span class="n">chunk_size</span><span class="p">)]</span>

        <span class="k">with</span> <span class="n">ThreadPoolExecutor</span><span class="p">(</span><span class="n">max_workers</span><span class="o">=</span><span class="n">num_threads</span><span class="p">)</span> <span class="k">as</span> <span class="n">executor</span><span class="p">:</span>
            <span class="n">tokenized_chunks</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">executor</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="n">tokenize_chunk</span><span class="p">,</span> <span class="n">chunks</span><span class="p">))</span>

        <span class="bp">cls</span><span class="o">.</span><span class="n">_tokenized_corpus</span> <span class="o">=</span> <span class="p">[</span><span class="n">token</span> <span class="k">for</span> <span class="n">chunk</span> <span class="ow">in</span> <span class="n">tokenized_chunks</span> <span class="k">for</span> <span class="n">token</span> <span class="ow">in</span> <span class="n">chunk</span><span class="p">]</span>
        <span class="bp">cls</span><span class="o">.</span><span class="n">_corpus_length</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">cls</span><span class="o">.</span><span class="n">_tokenized_corpus</span><span class="p">)</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">_generate_prompt_tokens</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">num_tokens</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="nb">int</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Generate a prompt containing exactly `num_tokens` using the preloaded tokenized corpus.</span>

<span class="sd">        Args:</span>
<span class="sd">            num_tokens: Number of tokens required in the prompt.</span>

<span class="sd">        Returns:</span>
<span class="sd">            A synthetic prompt of tokens.</span>

<span class="sd">        Raises:</span>
<span class="sd">            GeneratorInitializationError: If the tokenized corpus is not initialized</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">cls</span><span class="o">.</span><span class="n">_tokenized_corpus</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">GeneratorInitializationError</span><span class="p">(</span><span class="s2">&quot;Tokenized corpus is not initialized.&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">num_tokens</span> <span class="o">&gt;</span> <span class="bp">cls</span><span class="o">.</span><span class="n">_corpus_length</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Requested prompt length </span><span class="si">{</span><span class="n">num_tokens</span><span class="si">}</span><span class="s2"> is longer than the corpus. &quot;</span>
                <span class="sa">f</span><span class="s2">&quot;Returning a prompt of length </span><span class="si">{</span><span class="bp">cls</span><span class="o">.</span><span class="n">_corpus_length</span><span class="si">}</span><span class="s2">.&quot;</span>
            <span class="p">)</span>

        <span class="n">start_idx</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">randrange</span><span class="p">(</span><span class="bp">cls</span><span class="o">.</span><span class="n">_corpus_length</span><span class="p">)</span>

        <span class="n">end_idx</span> <span class="o">=</span> <span class="n">start_idx</span> <span class="o">+</span> <span class="n">num_tokens</span>
        <span class="n">prompt_tokens</span> <span class="o">=</span> <span class="bp">cls</span><span class="o">.</span><span class="n">_tokenized_corpus</span><span class="p">[</span><span class="n">start_idx</span><span class="p">:</span><span class="n">end_idx</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">end_idx</span> <span class="o">&gt;</span> <span class="bp">cls</span><span class="o">.</span><span class="n">_corpus_length</span><span class="p">:</span>
            <span class="n">prompt_tokens</span> <span class="o">+=</span> <span class="bp">cls</span><span class="o">.</span><span class="n">_tokenized_corpus</span><span class="p">[:</span> <span class="n">end_idx</span> <span class="o">-</span> <span class="bp">cls</span><span class="o">.</span><span class="n">_corpus_length</span><span class="p">]</span>

        <span class="k">return</span> <span class="n">prompt_tokens</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">_generate_prompt</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">tokenizer</span><span class="p">:</span> <span class="n">Tokenizer</span><span class="p">,</span> <span class="n">num_tokens</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Generate a prompt containing exactly `num_tokens` using the preloaded tokenized corpus.</span>

<span class="sd">        Args:</span>
<span class="sd">            tokenizer: Tokenizer instance.</span>
<span class="sd">            num_tokens: Number of tokens required in the prompt.</span>

<span class="sd">        Returns:</span>
<span class="sd">            A synthetic prompt as a string.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">tokenizer</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="bp">cls</span><span class="o">.</span><span class="n">_generate_prompt_tokens</span><span class="p">(</span><span class="n">num_tokens</span><span class="p">))</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">_generate_prompt_with_token_reuse</span><span class="p">(</span>
        <span class="bp">cls</span><span class="p">,</span>
        <span class="n">tokenizer</span><span class="p">:</span> <span class="n">Tokenizer</span><span class="p">,</span>
        <span class="n">num_tokens</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
        <span class="n">prompt_hash_list</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">int</span><span class="p">],</span>
        <span class="n">block_size</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Generate a prompt containing exactly `num_tokens` by reusing previously generated prompts</span>
<span class="sd">        stored in `_cache`. Each hash index in `prompt_hash_list` corresponds to a block of</span>
<span class="sd">        `block_size` tokens. If a hash index is found in `_cache`, its stored prompt is reused.</span>
<span class="sd">        Otherwise, a new prompt is generated using `_generate_prompt()` and stored in `_cache`.</span>

<span class="sd">        Args:</span>
<span class="sd">            tokenizer : Tokenizer</span>
<span class="sd">                The tokenizer used to generate prompts.</span>
<span class="sd">            num_tokens : int</span>
<span class="sd">                The number of tokens required in the prompt.</span>
<span class="sd">            prompt_hash_list : list[int]</span>
<span class="sd">                A list of hash indices used for token reuse.</span>
<span class="sd">            block_size : int</span>
<span class="sd">                The number of tokens allocated per hash block (default 512).</span>

<span class="sd">        Returns:</span>
<span class="sd">            str: A synthetic prompt as a string.</span>

<span class="sd">        Raises:</span>
<span class="sd">            GeneratorConfigurationError: If the input parameters are not compatible.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">final_prompt</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">size_to_use</span> <span class="o">=</span> <span class="n">block_size</span>
        <span class="n">last_hash_length</span> <span class="o">=</span> <span class="n">num_tokens</span> <span class="o">-</span> <span class="p">((</span><span class="nb">len</span><span class="p">(</span><span class="n">prompt_hash_list</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span> <span class="o">*</span> <span class="n">block_size</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">last_hash_length</span> <span class="o">&lt;=</span> <span class="mi">0</span> <span class="ow">or</span> <span class="n">block_size</span> <span class="o">&lt;</span> <span class="n">last_hash_length</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">GeneratorConfigurationError</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Input_length: </span><span class="si">{</span><span class="n">num_tokens</span><span class="si">}</span><span class="s2">, Hash_ids: </span><span class="si">{</span><span class="n">prompt_hash_list</span><span class="si">}</span><span class="s2">, Block_size: </span><span class="si">{</span><span class="n">block_size</span><span class="si">}</span><span class="s2"> &quot;</span>
                <span class="sa">f</span><span class="s2">&quot;are not compatible. The final hash id length: </span><span class="si">{</span><span class="n">last_hash_length</span><span class="si">}</span><span class="s2"> must be greater &quot;</span>
                <span class="sa">f</span><span class="s2">&quot;than 0 and less than or equal to </span><span class="si">{</span><span class="n">block_size</span><span class="si">}</span><span class="s2">.&quot;</span>
            <span class="p">)</span>
        <span class="k">for</span> <span class="n">index</span><span class="p">,</span> <span class="n">hash_index</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">prompt_hash_list</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">index</span> <span class="o">==</span> <span class="nb">len</span><span class="p">(</span><span class="n">prompt_hash_list</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">:</span>
                <span class="n">size_to_use</span> <span class="o">=</span> <span class="n">num_tokens</span> <span class="o">-</span> <span class="p">(</span><span class="n">index</span> <span class="o">*</span> <span class="n">block_size</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">hash_index</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">cls</span><span class="o">.</span><span class="n">_cache</span><span class="p">:</span>
                <span class="c1"># To ensure that the prompt doesn&#39;t merge chunks, we pop the last token</span>
                <span class="c1"># and insert the bos token at the beginning. Length is maintained and</span>
                <span class="c1"># the prompt generates the expected number of tokens.</span>
                <span class="n">prompt_tokens</span> <span class="o">=</span> <span class="bp">cls</span><span class="o">.</span><span class="n">_generate_prompt_tokens</span><span class="p">(</span><span class="n">size_to_use</span><span class="p">)</span>
                <span class="n">prompt_tokens</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
                <span class="n">prompt_tokens</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">tokenizer</span><span class="o">.</span><span class="n">bos_token_id</span><span class="p">())</span>
                <span class="bp">cls</span><span class="o">.</span><span class="n">_cache</span><span class="p">[</span><span class="n">hash_index</span><span class="p">]</span> <span class="o">=</span> <span class="n">prompt_tokens</span>
            <span class="n">final_prompt</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="bp">cls</span><span class="o">.</span><span class="n">_cache</span><span class="p">[</span><span class="n">hash_index</span><span class="p">])</span>
        <span class="n">prompt</span> <span class="o">=</span> <span class="n">tokenizer</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="n">final_prompt</span><span class="p">,</span> <span class="n">skip_special_tokens</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">prompt</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">create_prefix_prompts_pool</span><span class="p">(</span>
        <span class="bp">cls</span><span class="p">,</span> <span class="n">tokenizer</span><span class="p">:</span> <span class="n">Tokenizer</span><span class="p">,</span> <span class="n">num_prompts</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">prompt_length</span><span class="p">:</span> <span class="nb">int</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Generate a pool of prefix prompts.</span>

<span class="sd">        Args:</span>
<span class="sd">            tokenizer: Tokenizer instance.</span>
<span class="sd">            num_prompts: Number of prefix prompts to generate.</span>
<span class="sd">            prompt_length: Number of tokens per prefix prompt.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">cls</span><span class="o">.</span><span class="n">_tokenized_corpus</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">cls</span><span class="o">.</span><span class="n">_initialize_corpus</span><span class="p">(</span><span class="n">tokenizer</span><span class="p">)</span>

        <span class="bp">cls</span><span class="o">.</span><span class="n">_prefix_prompts</span> <span class="o">=</span> <span class="p">[</span>
            <span class="bp">cls</span><span class="o">.</span><span class="n">_generate_prompt</span><span class="p">(</span><span class="n">tokenizer</span><span class="p">,</span> <span class="n">prompt_length</span><span class="p">)</span> <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">num_prompts</span><span class="p">)</span>
        <span class="p">]</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">get_random_prefix_prompt</span><span class="p">(</span><span class="bp">cls</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Fetch a random prefix prompt from the pool.</span>

<span class="sd">        Returns:</span>
<span class="sd">            A random prefix prompt.</span>

<span class="sd">        Raises:</span>
<span class="sd">            GeneratorInitializationError: If the prefix prompts pool is empty.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">cls</span><span class="o">.</span><span class="n">_prefix_prompts</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">GeneratorInitializationError</span><span class="p">(</span>
                <span class="s2">&quot;Prefix prompts pool is empty. Call `create_prefix_prompts_pool` first.&quot;</span>
            <span class="p">)</span>
        <span class="k">return</span> <span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">(</span><span class="bp">cls</span><span class="o">.</span><span class="n">_prefix_prompts</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h3 id="aiperf.services.dataset.generator.prompt.PromptGenerator.create_prefix_prompts_pool" class="doc doc-heading">
            <code class=" language-python"><span class="n">create_prefix_prompts_pool</span><span class="p">(</span><span class="n">tokenizer</span><span class="p">,</span> <span class="n">num_prompts</span><span class="p">,</span> <span class="n">prompt_length</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-classmethod"><code>classmethod</code></small>
  </span>

<a href="#aiperf.services.dataset.generator.prompt.PromptGenerator.create_prefix_prompts_pool" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Generate a pool of prefix prompts.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>tokenizer</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="Tokenizer (aiperf.common.tokenizer.Tokenizer)" href="#aiperf.common.tokenizer.Tokenizer">Tokenizer</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Tokenizer instance.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>num_prompts</code>
            </td>
            <td>
                  <code><span title="int">int</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Number of prefix prompts to generate.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>prompt_length</code>
            </td>
            <td>
                  <code><span title="int">int</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Number of tokens per prefix prompt.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>aiperf/services/dataset/generator/prompt.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@classmethod</span>
<span class="k">def</span><span class="w"> </span><span class="nf">create_prefix_prompts_pool</span><span class="p">(</span>
    <span class="bp">cls</span><span class="p">,</span> <span class="n">tokenizer</span><span class="p">:</span> <span class="n">Tokenizer</span><span class="p">,</span> <span class="n">num_prompts</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">prompt_length</span><span class="p">:</span> <span class="nb">int</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Generate a pool of prefix prompts.</span>

<span class="sd">    Args:</span>
<span class="sd">        tokenizer: Tokenizer instance.</span>
<span class="sd">        num_prompts: Number of prefix prompts to generate.</span>
<span class="sd">        prompt_length: Number of tokens per prefix prompt.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="bp">cls</span><span class="o">.</span><span class="n">_tokenized_corpus</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="bp">cls</span><span class="o">.</span><span class="n">_initialize_corpus</span><span class="p">(</span><span class="n">tokenizer</span><span class="p">)</span>

    <span class="bp">cls</span><span class="o">.</span><span class="n">_prefix_prompts</span> <span class="o">=</span> <span class="p">[</span>
        <span class="bp">cls</span><span class="o">.</span><span class="n">_generate_prompt</span><span class="p">(</span><span class="n">tokenizer</span><span class="p">,</span> <span class="n">prompt_length</span><span class="p">)</span> <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">num_prompts</span><span class="p">)</span>
    <span class="p">]</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="aiperf.services.dataset.generator.prompt.PromptGenerator.create_synthetic_prompt" class="doc doc-heading">
            <code class=" language-python"><span class="n">create_synthetic_prompt</span><span class="p">(</span><span class="n">tokenizer</span><span class="p">,</span> <span class="n">prompt_tokens_mean</span><span class="o">=</span><span class="mi">550</span><span class="p">,</span> <span class="n">prompt_tokens_stddev</span><span class="o">=</span><span class="mi">250</span><span class="p">,</span> <span class="n">hash_ids</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">block_size</span><span class="o">=</span><span class="mi">512</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-classmethod"><code>classmethod</code></small>
  </span>

<a href="#aiperf.services.dataset.generator.prompt.PromptGenerator.create_synthetic_prompt" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Generate a synthetic prompt with a specific number of tokens.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>tokenizer</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="Tokenizer (aiperf.common.tokenizer.Tokenizer)" href="#aiperf.common.tokenizer.Tokenizer">Tokenizer</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Tokenizer instance.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>prompt_tokens_mean</code>
            </td>
            <td>
                  <code><span title="int">int</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Mean number of tokens in the prompt.</p>
              </div>
            </td>
            <td>
                  <code>550</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>prompt_tokens_stddev</code>
            </td>
            <td>
                  <code><span title="int">int</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Standard deviation for the number of tokens in the prompt.</p>
              </div>
            </td>
            <td>
                  <code>250</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>hash_ids</code>
            </td>
            <td>
                  <code><span title="list">list</span>[<span title="int">int</span>] | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Optional list of integers for token reuse.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>block_size</code>
            </td>
            <td>
                  <code><span title="int">int</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Size of the token block for reuse.</p>
              </div>
            </td>
            <td>
                  <code>512</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A synthetic prompt as a string.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>aiperf/services/dataset/generator/prompt.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span>
<span class="normal">71</span>
<span class="normal">72</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@classmethod</span>
<span class="k">def</span><span class="w"> </span><span class="nf">create_synthetic_prompt</span><span class="p">(</span>
    <span class="bp">cls</span><span class="p">,</span>
    <span class="n">tokenizer</span><span class="p">:</span> <span class="n">Tokenizer</span><span class="p">,</span>
    <span class="n">prompt_tokens_mean</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">550</span><span class="p">,</span>
    <span class="n">prompt_tokens_stddev</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">250</span><span class="p">,</span>
    <span class="n">hash_ids</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">block_size</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">512</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Generate a synthetic prompt with a specific number of tokens.</span>

<span class="sd">    Args:</span>
<span class="sd">        tokenizer: Tokenizer instance.</span>
<span class="sd">        prompt_tokens_mean: Mean number of tokens in the prompt.</span>
<span class="sd">        prompt_tokens_stddev: Standard deviation for the number of tokens in the prompt.</span>
<span class="sd">        hash_ids: Optional list of integers for token reuse.</span>
<span class="sd">        block_size: Size of the token block for reuse.</span>

<span class="sd">    Returns:</span>
<span class="sd">        A synthetic prompt as a string.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="bp">cls</span><span class="o">.</span><span class="n">_tokenized_corpus</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="bp">cls</span><span class="o">.</span><span class="n">_initialize_corpus</span><span class="p">(</span><span class="n">tokenizer</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">hash_ids</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">cls</span><span class="o">.</span><span class="n">_generate_prompt_with_token_reuse</span><span class="p">(</span>
            <span class="n">tokenizer</span><span class="p">,</span> <span class="n">prompt_tokens_mean</span><span class="p">,</span> <span class="n">hash_ids</span><span class="p">,</span> <span class="n">block_size</span>
        <span class="p">)</span>

    <span class="n">num_prompt_tokens</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span>
        <span class="mi">0</span><span class="p">,</span> <span class="nb">int</span><span class="p">(</span><span class="n">random</span><span class="o">.</span><span class="n">gauss</span><span class="p">(</span><span class="n">prompt_tokens_mean</span><span class="p">,</span> <span class="n">prompt_tokens_stddev</span><span class="p">))</span>
    <span class="p">)</span>

    <span class="k">return</span> <span class="bp">cls</span><span class="o">.</span><span class="n">_generate_prompt</span><span class="p">(</span><span class="n">tokenizer</span><span class="p">,</span> <span class="n">num_prompt_tokens</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="aiperf.services.dataset.generator.prompt.PromptGenerator.get_random_prefix_prompt" class="doc doc-heading">
            <code class=" language-python"><span class="n">get_random_prefix_prompt</span><span class="p">()</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-classmethod"><code>classmethod</code></small>
  </span>

<a href="#aiperf.services.dataset.generator.prompt.PromptGenerator.get_random_prefix_prompt" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Fetch a random prefix prompt from the pool.</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A random prefix prompt.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="GeneratorInitializationError (aiperf.common.exceptions.GeneratorInitializationError)" href="#aiperf.common.exceptions.GeneratorInitializationError">GeneratorInitializationError</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If the prefix prompts pool is empty.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>aiperf/services/dataset/generator/prompt.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@classmethod</span>
<span class="k">def</span><span class="w"> </span><span class="nf">get_random_prefix_prompt</span><span class="p">(</span><span class="bp">cls</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Fetch a random prefix prompt from the pool.</span>

<span class="sd">    Returns:</span>
<span class="sd">        A random prefix prompt.</span>

<span class="sd">    Raises:</span>
<span class="sd">        GeneratorInitializationError: If the prefix prompts pool is empty.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="bp">cls</span><span class="o">.</span><span class="n">_prefix_prompts</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">GeneratorInitializationError</span><span class="p">(</span>
            <span class="s2">&quot;Prefix prompts pool is empty. Call `create_prefix_prompts_pool` first.&quot;</span>
        <span class="p">)</span>
    <span class="k">return</span> <span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">(</span><span class="bp">cls</span><span class="o">.</span><span class="n">_prefix_prompts</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>




  </div>

    </div>

</div><h2 id="aiperfservicesdatasetgeneratorutils">aiperf.services.dataset.generator.utils<a class="headerlink" href="#aiperfservicesdatasetgeneratorutils" title="Permanent link">&para;</a></h2>


<div class="doc doc-object doc-module">



<a id="aiperf.services.dataset.generator.utils"></a>
    <div class="doc doc-contents first">









  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h2 id="aiperf.services.dataset.generator.utils.encode_image" class="doc doc-heading">
            <code class=" language-python"><span class="n">encode_image</span><span class="p">(</span><span class="n">img</span><span class="p">,</span> <span class="nb">format</span><span class="p">)</span></code>

<a href="#aiperf.services.dataset.generator.utils.encode_image" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">

        <p>Encodes an image into base64 encoded string.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>img</code>
            </td>
            <td>
                  <code><span title="PIL.Image">Image</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The PIL Image object to encode.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>format</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The image format to use (e.g., "JPEG", "PNG").</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A base64 encoded string representation of the image.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>aiperf/services/dataset/generator/utils.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">encode_image</span><span class="p">(</span><span class="n">img</span><span class="p">:</span> <span class="n">Image</span><span class="p">,</span> <span class="nb">format</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Encodes an image into base64 encoded string.</span>

<span class="sd">    Args:</span>
<span class="sd">        img: The PIL Image object to encode.</span>
<span class="sd">        format: The image format to use (e.g., &quot;JPEG&quot;, &quot;PNG&quot;).</span>

<span class="sd">    Returns:</span>
<span class="sd">        A base64 encoded string representation of the image.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># JPEG does not support P or RGBA mode (commonly used for PNG) so it needs</span>
    <span class="c1"># to be converted to RGB before an image can be saved as JPEG format.</span>
    <span class="k">if</span> <span class="nb">format</span> <span class="o">==</span> <span class="s2">&quot;JPEG&quot;</span> <span class="ow">and</span> <span class="n">img</span><span class="o">.</span><span class="n">mode</span> <span class="o">!=</span> <span class="s2">&quot;RGB&quot;</span><span class="p">:</span>
        <span class="n">img</span> <span class="o">=</span> <span class="n">img</span><span class="o">.</span><span class="n">convert</span><span class="p">(</span><span class="s2">&quot;RGB&quot;</span><span class="p">)</span>

    <span class="n">buffer</span> <span class="o">=</span> <span class="n">BytesIO</span><span class="p">()</span>
    <span class="n">img</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">buffer</span><span class="p">,</span> <span class="nb">format</span><span class="o">=</span><span class="nb">format</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">base64</span><span class="o">.</span><span class="n">b64encode</span><span class="p">(</span><span class="n">buffer</span><span class="o">.</span><span class="n">getvalue</span><span class="p">())</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s2">&quot;utf-8&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div><h2 id="aiperfservicespost_processor_managerpost_processor_manager">aiperf.services.post_processor_manager.post_processor_manager<a class="headerlink" href="#aiperfservicespost_processor_managerpost_processor_manager" title="Permanent link">&para;</a></h2>


<div class="doc doc-object doc-module">



<a id="aiperf.services.post_processor_manager.post_processor_manager"></a>
    <div class="doc doc-contents first">









  <div class="doc doc-children">








<div class="doc doc-object doc-class">



<h2 id="aiperf.services.post_processor_manager.post_processor_manager.PostProcessorManager" class="doc doc-heading">
            <code>PostProcessorManager</code>


<a href="#aiperf.services.post_processor_manager.post_processor_manager.PostProcessorManager" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="BaseComponentService (aiperf.common.service.base_component_service.BaseComponentService)" href="#aiperf.common.service.base_component_service.BaseComponentService">BaseComponentService</a></code></p>


        <p>PostProcessorManager is primarily responsible for iterating over the
records to generate metrics and other conclusions from the records.</p>







              <details class="quote">
                <summary>Source code in <code>aiperf/services/post_processor_manager/post_processor_manager.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@ServiceFactory</span><span class="o">.</span><span class="n">register</span><span class="p">(</span><span class="n">ServiceType</span><span class="o">.</span><span class="n">POST_PROCESSOR_MANAGER</span><span class="p">)</span>
<span class="k">class</span><span class="w"> </span><span class="nc">PostProcessorManager</span><span class="p">(</span><span class="n">BaseComponentService</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;PostProcessorManager is primarily responsible for iterating over the</span>
<span class="sd">    records to generate metrics and other conclusions from the records.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">service_config</span><span class="p">:</span> <span class="n">ServiceConfig</span><span class="p">,</span> <span class="n">service_id</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">service_config</span><span class="o">=</span><span class="n">service_config</span><span class="p">,</span> <span class="n">service_id</span><span class="o">=</span><span class="n">service_id</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Initializing post processor manager&quot;</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">service_type</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ServiceType</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;The type of service.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">ServiceType</span><span class="o">.</span><span class="n">POST_PROCESSOR_MANAGER</span>

    <span class="nd">@on_init</span>
    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">_initialize</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Initialize post processor manager-specific components.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Initializing post processor manager&quot;</span><span class="p">)</span>
        <span class="c1"># TODO: Implement post processor manager initialization</span>

    <span class="nd">@on_start</span>
    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">_start</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Start the post processor manager.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Starting post processor manager&quot;</span><span class="p">)</span>
        <span class="c1"># TODO: Implement post processor manager start</span>

    <span class="nd">@on_stop</span>
    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">_stop</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Stop the post processor manager.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Stopping post processor manager&quot;</span><span class="p">)</span>
        <span class="c1"># TODO: Implement post processor manager stop</span>

    <span class="nd">@on_cleanup</span>
    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">_cleanup</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Clean up post processor manager-specific components.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Cleaning up post processor manager&quot;</span><span class="p">)</span>
        <span class="c1"># TODO: Implement post processor manager cleanup</span>

    <span class="nd">@on_configure</span>
    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">_configure</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">message</span><span class="p">:</span> <span class="n">Message</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Configure the post processor manager.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Configuring post processor manager with message: </span><span class="si">{</span><span class="n">message</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">







<div class="doc doc-object doc-attribute">



<h3 id="aiperf.services.post_processor_manager.post_processor_manager.PostProcessorManager.service_type" class="doc doc-heading">
            <code class=" language-python"><span class="n">service_type</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

<a href="#aiperf.services.post_processor_manager.post_processor_manager.PostProcessorManager.service_type" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>The type of service.</p>

    </div>

</div>





  </div>

    </div>

</div>


<div class="doc doc-object doc-function">


<h2 id="aiperf.services.post_processor_manager.post_processor_manager.main" class="doc doc-heading">
            <code class=" language-python"><span class="n">main</span><span class="p">()</span></code>

<a href="#aiperf.services.post_processor_manager.post_processor_manager.main" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">

        <p>Main entry point for the post processor manager.</p>


            <details class="quote">
              <summary>Source code in <code>aiperf/services/post_processor_manager/post_processor_manager.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span>
<span class="normal">71</span>
<span class="normal">72</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">main</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Main entry point for the post processor manager.&quot;&quot;&quot;</span>

    <span class="kn">from</span><span class="w"> </span><span class="nn">aiperf.common.bootstrap</span><span class="w"> </span><span class="kn">import</span> <span class="n">bootstrap_and_run_service</span>

    <span class="n">bootstrap_and_run_service</span><span class="p">(</span><span class="n">PostProcessorManager</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div><h2 id="aiperfservicesrecords_managermetricsbase_metric">aiperf.services.records_manager.metrics.base_metric<a class="headerlink" href="#aiperfservicesrecords_managermetricsbase_metric" title="Permanent link">&para;</a></h2>


<div class="doc doc-object doc-module">



<a id="aiperf.services.records_manager.metrics.base_metric"></a>
    <div class="doc doc-contents first">









  <div class="doc doc-children">








<div class="doc doc-object doc-class">



<h2 id="aiperf.services.records_manager.metrics.base_metric.BaseMetric" class="doc doc-heading">
            <code>BaseMetric</code>


<a href="#aiperf.services.records_manager.metrics.base_metric.BaseMetric" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="abc.ABC">ABC</span></code></p>


        <p>Base class for all metricss with automatic subclass registration.</p>







              <details class="quote">
                <summary>Source code in <code>aiperf/services/records_manager/metrics/base_metric.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 14</span>
<span class="normal"> 15</span>
<span class="normal"> 16</span>
<span class="normal"> 17</span>
<span class="normal"> 18</span>
<span class="normal"> 19</span>
<span class="normal"> 20</span>
<span class="normal"> 21</span>
<span class="normal"> 22</span>
<span class="normal"> 23</span>
<span class="normal"> 24</span>
<span class="normal"> 25</span>
<span class="normal"> 26</span>
<span class="normal"> 27</span>
<span class="normal"> 28</span>
<span class="normal"> 29</span>
<span class="normal"> 30</span>
<span class="normal"> 31</span>
<span class="normal"> 32</span>
<span class="normal"> 33</span>
<span class="normal"> 34</span>
<span class="normal"> 35</span>
<span class="normal"> 36</span>
<span class="normal"> 37</span>
<span class="normal"> 38</span>
<span class="normal"> 39</span>
<span class="normal"> 40</span>
<span class="normal"> 41</span>
<span class="normal"> 42</span>
<span class="normal"> 43</span>
<span class="normal"> 44</span>
<span class="normal"> 45</span>
<span class="normal"> 46</span>
<span class="normal"> 47</span>
<span class="normal"> 48</span>
<span class="normal"> 49</span>
<span class="normal"> 50</span>
<span class="normal"> 51</span>
<span class="normal"> 52</span>
<span class="normal"> 53</span>
<span class="normal"> 54</span>
<span class="normal"> 55</span>
<span class="normal"> 56</span>
<span class="normal"> 57</span>
<span class="normal"> 58</span>
<span class="normal"> 59</span>
<span class="normal"> 60</span>
<span class="normal"> 61</span>
<span class="normal"> 62</span>
<span class="normal"> 63</span>
<span class="normal"> 64</span>
<span class="normal"> 65</span>
<span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">BaseMetric</span><span class="p">(</span><span class="n">ABC</span><span class="p">):</span>
    <span class="s2">&quot;Base class for all metricss with automatic subclass registration.&quot;</span>

    <span class="c1"># Class attributes that subclasses must override</span>
    <span class="n">tag</span><span class="p">:</span> <span class="n">ClassVar</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
    <span class="n">unit</span><span class="p">:</span> <span class="n">ClassVar</span><span class="p">[</span><span class="n">MetricTimeType</span><span class="p">]</span> <span class="o">=</span> <span class="n">MetricTimeType</span><span class="o">.</span><span class="n">NANOSECONDS</span>
    <span class="n">larger_is_better</span><span class="p">:</span> <span class="n">ClassVar</span><span class="p">[</span><span class="nb">bool</span><span class="p">]</span> <span class="o">=</span> <span class="kc">True</span>
    <span class="n">header</span><span class="p">:</span> <span class="n">ClassVar</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>

    <span class="n">metric_interfaces</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">type</span><span class="p">[</span><span class="s2">&quot;BaseMetric&quot;</span><span class="p">]]</span> <span class="o">=</span> <span class="p">{}</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">__init_subclass__</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        This method is called when a class is subclassed from Metric.</span>
<span class="sd">        It automatically registers the subclass in the metric_interfaces</span>
<span class="sd">        dictionary using the `tag` class attribute.</span>
<span class="sd">        The `tag` attribute must be a non-empty string that uniquely identifies the</span>
<span class="sd">        metric type. Only concrete (non-abstract) classes will be registered.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">__init_subclass__</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

        <span class="c1"># Only register concrete classes (not abstract ones)</span>
        <span class="k">if</span> <span class="n">inspect</span><span class="o">.</span><span class="n">isabstract</span><span class="p">(</span><span class="bp">cls</span><span class="p">):</span>
            <span class="k">return</span>

        <span class="c1"># Enforce that subclasses define a non-empty tag</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">cls</span><span class="o">.</span><span class="n">tag</span> <span class="ow">or</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">cls</span><span class="o">.</span><span class="n">tag</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Concrete metric class </span><span class="si">{</span><span class="bp">cls</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s2"> must define a non-empty &#39;tag&#39; class attribute&quot;</span>
            <span class="p">)</span>

        <span class="c1"># Check for duplicate tags</span>
        <span class="k">if</span> <span class="bp">cls</span><span class="o">.</span><span class="n">tag</span> <span class="ow">in</span> <span class="bp">cls</span><span class="o">.</span><span class="n">metric_interfaces</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Metric tag &#39;</span><span class="si">{</span><span class="bp">cls</span><span class="o">.</span><span class="n">tag</span><span class="si">}</span><span class="s2">&#39; is already registered by </span><span class="si">{</span><span class="bp">cls</span><span class="o">.</span><span class="n">metric_interfaces</span><span class="p">[</span><span class="bp">cls</span><span class="o">.</span><span class="n">tag</span><span class="p">]</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="p">)</span>

        <span class="bp">cls</span><span class="o">.</span><span class="n">metric_interfaces</span><span class="p">[</span><span class="bp">cls</span><span class="o">.</span><span class="n">tag</span><span class="p">]</span> <span class="o">=</span> <span class="bp">cls</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">get_all</span><span class="p">(</span><span class="bp">cls</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">type</span><span class="p">[</span><span class="s2">&quot;BaseMetric&quot;</span><span class="p">]]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns the dictionary of all registered metric interfaces.</span>

<span class="sd">        This method dynamically imports all metric type modules from the &#39;types&#39;</span>
<span class="sd">        directory to ensure all metric classes are registered via __init_subclass__.</span>

<span class="sd">        Returns:</span>
<span class="sd">            dict[str, type[Metric]]: Mapping of metric tags to their corresponding classes</span>

<span class="sd">        Raises:</span>
<span class="sd">            MetricTypeError: If there&#39;s an error importing metric type modules</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Get the types directory path</span>
        <span class="n">types_dir</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="vm">__file__</span><span class="p">)</span><span class="o">.</span><span class="n">parent</span> <span class="o">/</span> <span class="s2">&quot;types&quot;</span>

        <span class="c1"># Import all metric type modules to trigger registration</span>
        <span class="k">if</span> <span class="n">types_dir</span><span class="o">.</span><span class="n">exists</span><span class="p">():</span>
            <span class="k">for</span> <span class="n">python_file</span> <span class="ow">in</span> <span class="n">types_dir</span><span class="o">.</span><span class="n">glob</span><span class="p">(</span><span class="s2">&quot;*.py&quot;</span><span class="p">):</span>
                <span class="k">if</span> <span class="n">python_file</span><span class="o">.</span><span class="n">name</span> <span class="o">!=</span> <span class="s2">&quot;__init__.py&quot;</span><span class="p">:</span>
                    <span class="n">module_name</span> <span class="o">=</span> <span class="n">python_file</span><span class="o">.</span><span class="n">stem</span>  <span class="c1"># Get filename without extension</span>
                    <span class="k">try</span><span class="p">:</span>
                        <span class="n">importlib</span><span class="o">.</span><span class="n">import_module</span><span class="p">(</span>
                            <span class="sa">f</span><span class="s2">&quot;aiperf.services.records_manager.metrics.types.</span><span class="si">{</span><span class="n">module_name</span><span class="si">}</span><span class="s2">&quot;</span>
                        <span class="p">)</span>
                    <span class="k">except</span> <span class="ne">ImportError</span> <span class="k">as</span> <span class="n">err</span><span class="p">:</span>
                        <span class="k">raise</span> <span class="n">MetricTypeError</span><span class="p">(</span>
                            <span class="sa">f</span><span class="s2">&quot;Error importing metric type module &#39;</span><span class="si">{</span><span class="n">module_name</span><span class="si">}</span><span class="s2">&#39;&quot;</span>
                        <span class="p">)</span> <span class="kn">from</span><span class="w"> </span><span class="nn">err</span>

        <span class="k">return</span> <span class="bp">cls</span><span class="o">.</span><span class="n">metric_interfaces</span>

    <span class="nd">@abstractmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">update_value</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">record</span><span class="p">:</span> <span class="n">Record</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">metrics</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="s2">&quot;BaseMetric&quot;</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Updates the metric value based on the provided record and dictionary of other metrics.</span>

<span class="sd">        Args:</span>
<span class="sd">            record (Optional[Record]): The record to update the metric with.</span>
<span class="sd">            metrics (Optional[dict[BaseMetric]]): A dictionary of other metrics that may be needed for calculation.</span>
<span class="sd">        &quot;&quot;&quot;</span>

    <span class="nd">@abstractmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">values</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Any</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns the list of calculated metrics.</span>
<span class="sd">        &quot;&quot;&quot;</span>

    <span class="nd">@abstractmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">_check_record</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">record</span><span class="p">:</span> <span class="n">Record</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Checks if the record is valid for metric calculation.</span>

<span class="sd">        Raises:</span>
<span class="sd">            ValueError: If the record does not meet the required conditions.</span>
<span class="sd">        &quot;&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">get_converted_metrics</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">unit</span><span class="p">:</span> <span class="n">MetricTimeType</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="n">Any</span><span class="p">]:</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">unit</span><span class="p">,</span> <span class="n">MetricTimeType</span><span class="p">):</span>
            <span class="k">raise</span> <span class="n">MetricTypeError</span><span class="p">(</span><span class="s2">&quot;Invalid metric time type for conversion.&quot;</span><span class="p">)</span>

        <span class="n">scale_factor</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">unit</span><span class="o">.</span><span class="n">value</span> <span class="o">-</span> <span class="n">unit</span><span class="o">.</span><span class="n">value</span>

        <span class="k">return</span> <span class="p">[</span><span class="n">metric</span> <span class="o">/</span> <span class="mi">10</span><span class="o">**</span><span class="n">scale_factor</span> <span class="k">for</span> <span class="n">metric</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">values</span><span class="p">()]</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h3 id="aiperf.services.records_manager.metrics.base_metric.BaseMetric.__init_subclass__" class="doc doc-heading">
            <code class=" language-python"><span class="n">__init_subclass__</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>

<a href="#aiperf.services.records_manager.metrics.base_metric.BaseMetric.__init_subclass__" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>This method is called when a class is subclassed from Metric.
It automatically registers the subclass in the metric_interfaces
dictionary using the <code>tag</code> class attribute.
The <code>tag</code> attribute must be a non-empty string that uniquely identifies the
metric type. Only concrete (non-abstract) classes will be registered.</p>


            <details class="quote">
              <summary>Source code in <code>aiperf/services/records_manager/metrics/base_metric.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">__init_subclass__</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    This method is called when a class is subclassed from Metric.</span>
<span class="sd">    It automatically registers the subclass in the metric_interfaces</span>
<span class="sd">    dictionary using the `tag` class attribute.</span>
<span class="sd">    The `tag` attribute must be a non-empty string that uniquely identifies the</span>
<span class="sd">    metric type. Only concrete (non-abstract) classes will be registered.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">__init_subclass__</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

    <span class="c1"># Only register concrete classes (not abstract ones)</span>
    <span class="k">if</span> <span class="n">inspect</span><span class="o">.</span><span class="n">isabstract</span><span class="p">(</span><span class="bp">cls</span><span class="p">):</span>
        <span class="k">return</span>

    <span class="c1"># Enforce that subclasses define a non-empty tag</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="bp">cls</span><span class="o">.</span><span class="n">tag</span> <span class="ow">or</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">cls</span><span class="o">.</span><span class="n">tag</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;Concrete metric class </span><span class="si">{</span><span class="bp">cls</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s2"> must define a non-empty &#39;tag&#39; class attribute&quot;</span>
        <span class="p">)</span>

    <span class="c1"># Check for duplicate tags</span>
    <span class="k">if</span> <span class="bp">cls</span><span class="o">.</span><span class="n">tag</span> <span class="ow">in</span> <span class="bp">cls</span><span class="o">.</span><span class="n">metric_interfaces</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;Metric tag &#39;</span><span class="si">{</span><span class="bp">cls</span><span class="o">.</span><span class="n">tag</span><span class="si">}</span><span class="s2">&#39; is already registered by </span><span class="si">{</span><span class="bp">cls</span><span class="o">.</span><span class="n">metric_interfaces</span><span class="p">[</span><span class="bp">cls</span><span class="o">.</span><span class="n">tag</span><span class="p">]</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="p">)</span>

    <span class="bp">cls</span><span class="o">.</span><span class="n">metric_interfaces</span><span class="p">[</span><span class="bp">cls</span><span class="o">.</span><span class="n">tag</span><span class="p">]</span> <span class="o">=</span> <span class="bp">cls</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="aiperf.services.records_manager.metrics.base_metric.BaseMetric.get_all" class="doc doc-heading">
            <code class=" language-python"><span class="n">get_all</span><span class="p">()</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-classmethod"><code>classmethod</code></small>
  </span>

<a href="#aiperf.services.records_manager.metrics.base_metric.BaseMetric.get_all" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Returns the dictionary of all registered metric interfaces.</p>
<p>This method dynamically imports all metric type modules from the 'types'
directory to ensure all metric classes are registered via <strong>init_subclass</strong>.</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="dict">dict</span>[<span title="str">str</span>, <span title="type">type</span>[<a class="autorefs autorefs-internal" title="BaseMetric (aiperf.services.records_manager.metrics.base_metric.BaseMetric)" href="#aiperf.services.records_manager.metrics.base_metric.BaseMetric">BaseMetric</a>]]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>dict[str, type[Metric]]: Mapping of metric tags to their corresponding classes</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="MetricTypeError (aiperf.common.exceptions.MetricTypeError)" href="#aiperf.common.exceptions.MetricTypeError">MetricTypeError</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If there's an error importing metric type modules</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>aiperf/services/records_manager/metrics/base_metric.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span>
<span class="normal">71</span>
<span class="normal">72</span>
<span class="normal">73</span>
<span class="normal">74</span>
<span class="normal">75</span>
<span class="normal">76</span>
<span class="normal">77</span>
<span class="normal">78</span>
<span class="normal">79</span>
<span class="normal">80</span>
<span class="normal">81</span>
<span class="normal">82</span>
<span class="normal">83</span>
<span class="normal">84</span>
<span class="normal">85</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@classmethod</span>
<span class="k">def</span><span class="w"> </span><span class="nf">get_all</span><span class="p">(</span><span class="bp">cls</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">type</span><span class="p">[</span><span class="s2">&quot;BaseMetric&quot;</span><span class="p">]]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Returns the dictionary of all registered metric interfaces.</span>

<span class="sd">    This method dynamically imports all metric type modules from the &#39;types&#39;</span>
<span class="sd">    directory to ensure all metric classes are registered via __init_subclass__.</span>

<span class="sd">    Returns:</span>
<span class="sd">        dict[str, type[Metric]]: Mapping of metric tags to their corresponding classes</span>

<span class="sd">    Raises:</span>
<span class="sd">        MetricTypeError: If there&#39;s an error importing metric type modules</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Get the types directory path</span>
    <span class="n">types_dir</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="vm">__file__</span><span class="p">)</span><span class="o">.</span><span class="n">parent</span> <span class="o">/</span> <span class="s2">&quot;types&quot;</span>

    <span class="c1"># Import all metric type modules to trigger registration</span>
    <span class="k">if</span> <span class="n">types_dir</span><span class="o">.</span><span class="n">exists</span><span class="p">():</span>
        <span class="k">for</span> <span class="n">python_file</span> <span class="ow">in</span> <span class="n">types_dir</span><span class="o">.</span><span class="n">glob</span><span class="p">(</span><span class="s2">&quot;*.py&quot;</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">python_file</span><span class="o">.</span><span class="n">name</span> <span class="o">!=</span> <span class="s2">&quot;__init__.py&quot;</span><span class="p">:</span>
                <span class="n">module_name</span> <span class="o">=</span> <span class="n">python_file</span><span class="o">.</span><span class="n">stem</span>  <span class="c1"># Get filename without extension</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="n">importlib</span><span class="o">.</span><span class="n">import_module</span><span class="p">(</span>
                        <span class="sa">f</span><span class="s2">&quot;aiperf.services.records_manager.metrics.types.</span><span class="si">{</span><span class="n">module_name</span><span class="si">}</span><span class="s2">&quot;</span>
                    <span class="p">)</span>
                <span class="k">except</span> <span class="ne">ImportError</span> <span class="k">as</span> <span class="n">err</span><span class="p">:</span>
                    <span class="k">raise</span> <span class="n">MetricTypeError</span><span class="p">(</span>
                        <span class="sa">f</span><span class="s2">&quot;Error importing metric type module &#39;</span><span class="si">{</span><span class="n">module_name</span><span class="si">}</span><span class="s2">&#39;&quot;</span>
                    <span class="p">)</span> <span class="kn">from</span><span class="w"> </span><span class="nn">err</span>

    <span class="k">return</span> <span class="bp">cls</span><span class="o">.</span><span class="n">metric_interfaces</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="aiperf.services.records_manager.metrics.base_metric.BaseMetric.update_value" class="doc doc-heading">
            <code class=" language-python"><span class="n">update_value</span><span class="p">(</span><span class="n">record</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">metrics</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-abstractmethod"><code>abstractmethod</code></small>
  </span>

<a href="#aiperf.services.records_manager.metrics.base_metric.BaseMetric.update_value" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Updates the metric value based on the provided record and dictionary of other metrics.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>record</code>
            </td>
            <td>
                  <code><span title="Optional">Optional</span>[<a class="autorefs autorefs-internal" title="Record (aiperf.services.records_manager.records.Record)" href="#aiperf.common.record_models.Record">Record</a>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The record to update the metric with.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>metrics</code>
            </td>
            <td>
                  <code><span title="Optional">Optional</span>[<span title="dict">dict</span>[<a class="autorefs autorefs-internal" title="BaseMetric (aiperf.services.records_manager.metrics.base_metric.BaseMetric)" href="#aiperf.services.records_manager.metrics.base_metric.BaseMetric">BaseMetric</a>]]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A dictionary of other metrics that may be needed for calculation.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>aiperf/services/records_manager/metrics/base_metric.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">87</span>
<span class="normal">88</span>
<span class="normal">89</span>
<span class="normal">90</span>
<span class="normal">91</span>
<span class="normal">92</span>
<span class="normal">93</span>
<span class="normal">94</span>
<span class="normal">95</span>
<span class="normal">96</span>
<span class="normal">97</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@abstractmethod</span>
<span class="k">def</span><span class="w"> </span><span class="nf">update_value</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span> <span class="n">record</span><span class="p">:</span> <span class="n">Record</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">metrics</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="s2">&quot;BaseMetric&quot;</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Updates the metric value based on the provided record and dictionary of other metrics.</span>

<span class="sd">    Args:</span>
<span class="sd">        record (Optional[Record]): The record to update the metric with.</span>
<span class="sd">        metrics (Optional[dict[BaseMetric]]): A dictionary of other metrics that may be needed for calculation.</span>
<span class="sd">    &quot;&quot;&quot;</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="aiperf.services.records_manager.metrics.base_metric.BaseMetric.values" class="doc doc-heading">
            <code class=" language-python"><span class="n">values</span><span class="p">()</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-abstractmethod"><code>abstractmethod</code></small>
  </span>

<a href="#aiperf.services.records_manager.metrics.base_metric.BaseMetric.values" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Returns the list of calculated metrics.</p>


            <details class="quote">
              <summary>Source code in <code>aiperf/services/records_manager/metrics/base_metric.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@abstractmethod</span>
<span class="k">def</span><span class="w"> </span><span class="nf">values</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Any</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Returns the list of calculated metrics.</span>
<span class="sd">    &quot;&quot;&quot;</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>




  </div>

    </div>

</div><h2 id="aiperfservicesrecords_managermetricstypesbenchmark_duration_metric">aiperf.services.records_manager.metrics.types.benchmark_duration_metric<a class="headerlink" href="#aiperfservicesrecords_managermetricstypesbenchmark_duration_metric" title="Permanent link">&para;</a></h2>


<div class="doc doc-object doc-module">



<a id="aiperf.services.records_manager.metrics.types.benchmark_duration_metric"></a>
    <div class="doc doc-contents first">









  <div class="doc doc-children">








<div class="doc doc-object doc-class">



<h2 id="aiperf.services.records_manager.metrics.types.benchmark_duration_metric.BenchmarkDurationMetric" class="doc doc-heading">
            <code>BenchmarkDurationMetric</code>


<a href="#aiperf.services.records_manager.metrics.types.benchmark_duration_metric.BenchmarkDurationMetric" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="BaseMetric (aiperf.services.records_manager.metrics.base_metric.BaseMetric)" href="#aiperf.services.records_manager.metrics.base_metric.BaseMetric">BaseMetric</a></code></p>


        <p>Post-processor for calculating the Benchmark Duration metric.</p>







              <details class="quote">
                <summary>Source code in <code>aiperf/services/records_manager/metrics/types/benchmark_duration_metric.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">BenchmarkDurationMetric</span><span class="p">(</span><span class="n">BaseMetric</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Post-processor for calculating the Benchmark Duration metric.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">tag</span> <span class="o">=</span> <span class="s2">&quot;benchmark_duration&quot;</span>
    <span class="n">unit</span> <span class="o">=</span> <span class="n">MetricTimeType</span><span class="o">.</span><span class="n">NANOSECONDS</span>
    <span class="n">larger_is_better</span> <span class="o">=</span> <span class="kc">False</span>
    <span class="n">header</span> <span class="o">=</span> <span class="s2">&quot;Benchmark Duration&quot;</span>
    <span class="nb">type</span> <span class="o">=</span> <span class="n">MetricType</span><span class="o">.</span><span class="n">METRIC_OF_METRICS</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">metric</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">0.0</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">update_value</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">record</span><span class="p">:</span> <span class="n">Record</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">metrics</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="s2">&quot;BaseMetric&quot;</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">min_req_time</span> <span class="o">=</span> <span class="n">metrics</span><span class="p">[</span><span class="n">MinRequestMetric</span><span class="o">.</span><span class="n">tag</span><span class="p">]</span><span class="o">.</span><span class="n">values</span><span class="p">()</span>
        <span class="n">max_res_time</span> <span class="o">=</span> <span class="n">metrics</span><span class="p">[</span><span class="n">MaxResponseMetric</span><span class="o">.</span><span class="n">tag</span><span class="p">]</span><span class="o">.</span><span class="n">values</span><span class="p">()</span>
        <span class="n">benchmark_duration</span> <span class="o">=</span> <span class="n">max_res_time</span> <span class="o">-</span> <span class="n">min_req_time</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">metric</span> <span class="o">=</span> <span class="n">benchmark_duration</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">values</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns the list of Time to First Token (BenchmarkDuration) metrics.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">metric</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_check_record</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">record</span><span class="p">:</span> <span class="n">Record</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">pass</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h3 id="aiperf.services.records_manager.metrics.types.benchmark_duration_metric.BenchmarkDurationMetric.values" class="doc doc-heading">
            <code class=" language-python"><span class="n">values</span><span class="p">()</span></code>

<a href="#aiperf.services.records_manager.metrics.types.benchmark_duration_metric.BenchmarkDurationMetric.values" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Returns the list of Time to First Token (BenchmarkDuration) metrics.</p>


            <details class="quote">
              <summary>Source code in <code>aiperf/services/records_manager/metrics/types/benchmark_duration_metric.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">values</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Returns the list of Time to First Token (BenchmarkDuration) metrics.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">metric</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>




  </div>

    </div>

</div><h2 id="aiperfservicesrecords_managermetricstypesmax_response_metric">aiperf.services.records_manager.metrics.types.max_response_metric<a class="headerlink" href="#aiperfservicesrecords_managermetricstypesmax_response_metric" title="Permanent link">&para;</a></h2>


<div class="doc doc-object doc-module">



<a id="aiperf.services.records_manager.metrics.types.max_response_metric"></a>
    <div class="doc doc-contents first">









  <div class="doc doc-children">








<div class="doc doc-object doc-class">



<h2 id="aiperf.services.records_manager.metrics.types.max_response_metric.MaxResponseMetric" class="doc doc-heading">
            <code>MaxResponseMetric</code>


<a href="#aiperf.services.records_manager.metrics.types.max_response_metric.MaxResponseMetric" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="BaseMetric (aiperf.services.records_manager.metrics.base_metric.BaseMetric)" href="#aiperf.services.records_manager.metrics.base_metric.BaseMetric">BaseMetric</a></code></p>


        <p>Post-processor for calculating the maximum response time stamp metric from records.</p>







              <details class="quote">
                <summary>Source code in <code>aiperf/services/records_manager/metrics/types/max_response_metric.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">MaxResponseMetric</span><span class="p">(</span><span class="n">BaseMetric</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Post-processor for calculating the maximum response time stamp metric from records.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">tag</span> <span class="o">=</span> <span class="s2">&quot;max_response&quot;</span>
    <span class="n">unit</span> <span class="o">=</span> <span class="n">MetricTimeType</span><span class="o">.</span><span class="n">NANOSECONDS</span>
    <span class="nb">type</span> <span class="o">=</span> <span class="n">MetricType</span><span class="o">.</span><span class="n">METRIC_OF_RECORDS</span>
    <span class="n">larger_is_better</span> <span class="o">=</span> <span class="kc">False</span>
    <span class="n">header</span> <span class="o">=</span> <span class="s2">&quot;Maximum Response Timestamp&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">metric</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mi">0</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">update_value</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">record</span><span class="p">:</span> <span class="n">Record</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">metrics</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="s2">&quot;BaseMetric&quot;</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Adds a new record and calculates the maximum response timestamp metric.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_check_record</span><span class="p">(</span><span class="n">record</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">record</span><span class="o">.</span><span class="n">responses</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">timestamp</span> <span class="o">&gt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">metric</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">metric</span> <span class="o">=</span> <span class="n">record</span><span class="o">.</span><span class="n">responses</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">timestamp</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">values</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns the list of Time to First Token (TTFT) metrics.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">metric</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_check_record</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">record</span><span class="p">:</span> <span class="n">Record</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Checks if the record is valid for calculations.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">record</span><span class="o">.</span><span class="n">responses</span> <span class="ow">or</span> <span class="ow">not</span> <span class="n">record</span><span class="o">.</span><span class="n">responses</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">timestamp</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Record must have valid responses with timestamps.&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h3 id="aiperf.services.records_manager.metrics.types.max_response_metric.MaxResponseMetric.update_value" class="doc doc-heading">
            <code class=" language-python"><span class="n">update_value</span><span class="p">(</span><span class="n">record</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">metrics</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

<a href="#aiperf.services.records_manager.metrics.types.max_response_metric.MaxResponseMetric.update_value" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Adds a new record and calculates the maximum response timestamp metric.</p>


            <details class="quote">
              <summary>Source code in <code>aiperf/services/records_manager/metrics/types/max_response_metric.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">update_value</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span> <span class="n">record</span><span class="p">:</span> <span class="n">Record</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">metrics</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="s2">&quot;BaseMetric&quot;</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Adds a new record and calculates the maximum response timestamp metric.</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_check_record</span><span class="p">(</span><span class="n">record</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">record</span><span class="o">.</span><span class="n">responses</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">timestamp</span> <span class="o">&gt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">metric</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">metric</span> <span class="o">=</span> <span class="n">record</span><span class="o">.</span><span class="n">responses</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">timestamp</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="aiperf.services.records_manager.metrics.types.max_response_metric.MaxResponseMetric.values" class="doc doc-heading">
            <code class=" language-python"><span class="n">values</span><span class="p">()</span></code>

<a href="#aiperf.services.records_manager.metrics.types.max_response_metric.MaxResponseMetric.values" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Returns the list of Time to First Token (TTFT) metrics.</p>


            <details class="quote">
              <summary>Source code in <code>aiperf/services/records_manager/metrics/types/max_response_metric.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">values</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Returns the list of Time to First Token (TTFT) metrics.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">metric</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>




  </div>

    </div>

</div><h2 id="aiperfservicesrecords_managermetricstypesmin_request_metric">aiperf.services.records_manager.metrics.types.min_request_metric<a class="headerlink" href="#aiperfservicesrecords_managermetricstypesmin_request_metric" title="Permanent link">&para;</a></h2>


<div class="doc doc-object doc-module">



<a id="aiperf.services.records_manager.metrics.types.min_request_metric"></a>
    <div class="doc doc-contents first">









  <div class="doc doc-children">








<div class="doc doc-object doc-class">



<h2 id="aiperf.services.records_manager.metrics.types.min_request_metric.MinRequestMetric" class="doc doc-heading">
            <code>MinRequestMetric</code>


<a href="#aiperf.services.records_manager.metrics.types.min_request_metric.MinRequestMetric" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="BaseMetric (aiperf.services.records_manager.metrics.base_metric.BaseMetric)" href="#aiperf.services.records_manager.metrics.base_metric.BaseMetric">BaseMetric</a></code></p>


        <p>Post-processor for calculating the minimum request time stamp metric from records.</p>







              <details class="quote">
                <summary>Source code in <code>aiperf/services/records_manager/metrics/types/min_request_metric.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">MinRequestMetric</span><span class="p">(</span><span class="n">BaseMetric</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Post-processor for calculating the minimum request time stamp metric from records.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">tag</span> <span class="o">=</span> <span class="s2">&quot;min_request&quot;</span>
    <span class="n">unit</span> <span class="o">=</span> <span class="n">MetricTimeType</span><span class="o">.</span><span class="n">NANOSECONDS</span>
    <span class="nb">type</span> <span class="o">=</span> <span class="n">MetricType</span><span class="o">.</span><span class="n">METRIC_OF_RECORDS</span>
    <span class="n">larger_is_better</span> <span class="o">=</span> <span class="kc">False</span>
    <span class="n">header</span> <span class="o">=</span> <span class="s2">&quot;Minimum Request Timestamp&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">metric</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="s2">&quot;inf&quot;</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">update_value</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">record</span><span class="p">:</span> <span class="n">Record</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">metrics</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="s2">&quot;BaseMetric&quot;</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Adds a new record and calculates the minimum request timestamp metric.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_check_record</span><span class="p">(</span><span class="n">record</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">record</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">timestamp</span> <span class="o">&lt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">metric</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">metric</span> <span class="o">=</span> <span class="n">record</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">timestamp</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">values</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns the list of Time to First Token (TTFT) metrics.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">metric</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_check_record</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">record</span><span class="p">:</span> <span class="n">Record</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Checks if the record is valid for calculations.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">record</span><span class="o">.</span><span class="n">request</span> <span class="ow">or</span> <span class="ow">not</span> <span class="n">record</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">timestamp</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Record must have a valid request with a timestamp.&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h3 id="aiperf.services.records_manager.metrics.types.min_request_metric.MinRequestMetric.update_value" class="doc doc-heading">
            <code class=" language-python"><span class="n">update_value</span><span class="p">(</span><span class="n">record</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">metrics</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

<a href="#aiperf.services.records_manager.metrics.types.min_request_metric.MinRequestMetric.update_value" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Adds a new record and calculates the minimum request timestamp metric.</p>


            <details class="quote">
              <summary>Source code in <code>aiperf/services/records_manager/metrics/types/min_request_metric.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">update_value</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span> <span class="n">record</span><span class="p">:</span> <span class="n">Record</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">metrics</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="s2">&quot;BaseMetric&quot;</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Adds a new record and calculates the minimum request timestamp metric.</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_check_record</span><span class="p">(</span><span class="n">record</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">record</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">timestamp</span> <span class="o">&lt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">metric</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">metric</span> <span class="o">=</span> <span class="n">record</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">timestamp</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="aiperf.services.records_manager.metrics.types.min_request_metric.MinRequestMetric.values" class="doc doc-heading">
            <code class=" language-python"><span class="n">values</span><span class="p">()</span></code>

<a href="#aiperf.services.records_manager.metrics.types.min_request_metric.MinRequestMetric.values" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Returns the list of Time to First Token (TTFT) metrics.</p>


            <details class="quote">
              <summary>Source code in <code>aiperf/services/records_manager/metrics/types/min_request_metric.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">values</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Returns the list of Time to First Token (TTFT) metrics.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">metric</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>




  </div>

    </div>

</div><h2 id="aiperfservicesrecords_managermetricstypesrequest_latency_metric">aiperf.services.records_manager.metrics.types.request_latency_metric<a class="headerlink" href="#aiperfservicesrecords_managermetricstypesrequest_latency_metric" title="Permanent link">&para;</a></h2>


<div class="doc doc-object doc-module">



<a id="aiperf.services.records_manager.metrics.types.request_latency_metric"></a>
    <div class="doc doc-contents first">









  <div class="doc doc-children">








<div class="doc doc-object doc-class">



<h2 id="aiperf.services.records_manager.metrics.types.request_latency_metric.RequestLatencyMetric" class="doc doc-heading">
            <code>RequestLatencyMetric</code>


<a href="#aiperf.services.records_manager.metrics.types.request_latency_metric.RequestLatencyMetric" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="BaseMetric (aiperf.services.records_manager.metrics.base_metric.BaseMetric)" href="#aiperf.services.records_manager.metrics.base_metric.BaseMetric">BaseMetric</a></code></p>


        <p>Post-processor for calculating Request Latency metrics from records.</p>







              <details class="quote">
                <summary>Source code in <code>aiperf/services/records_manager/metrics/types/request_latency_metric.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">RequestLatencyMetric</span><span class="p">(</span><span class="n">BaseMetric</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Post-processor for calculating Request Latency metrics from records.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">tag</span> <span class="o">=</span> <span class="s2">&quot;request_latency&quot;</span>
    <span class="n">unit</span> <span class="o">=</span> <span class="n">MetricTimeType</span><span class="o">.</span><span class="n">NANOSECONDS</span>
    <span class="nb">type</span> <span class="o">=</span> <span class="n">MetricType</span><span class="o">.</span><span class="n">METRIC_OF_RECORDS</span>
    <span class="n">larger_is_better</span> <span class="o">=</span> <span class="kc">False</span>
    <span class="n">header</span> <span class="o">=</span> <span class="s2">&quot;Request Latency&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">metric</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">update_value</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">record</span><span class="p">:</span> <span class="n">Record</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">metrics</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="s2">&quot;BaseMetric&quot;</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Adds a new record and calculates the Request Latencies metric.</span>

<span class="sd">        This method extracts the request and last response timestamps, calculates the differences in time, and</span>
<span class="sd">        appends the result to the metric list.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_check_record</span><span class="p">(</span><span class="n">record</span><span class="p">)</span>
        <span class="n">request_ts</span> <span class="o">=</span> <span class="n">record</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">timestamp</span>
        <span class="n">final_response_ts</span> <span class="o">=</span> <span class="n">record</span><span class="o">.</span><span class="n">responses</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">timestamp</span>
        <span class="n">request_latency</span> <span class="o">=</span> <span class="n">final_response_ts</span> <span class="o">-</span> <span class="n">request_ts</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">metric</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">request_latency</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">values</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="nb">int</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns the list of Time to First Token (Request Latencies) metrics.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">metric</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_check_record</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">record</span><span class="p">:</span> <span class="n">Record</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">record</span><span class="o">.</span><span class="n">request</span> <span class="ow">or</span> <span class="ow">not</span> <span class="n">record</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">timestamp</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Record must have a valid request with a timestamp.&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">record</span><span class="o">.</span><span class="n">responses</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">1</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Record must have at least one response.&quot;</span><span class="p">)</span>

        <span class="n">request_ts</span> <span class="o">=</span> <span class="n">record</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">timestamp</span>
        <span class="n">response_ts</span> <span class="o">=</span> <span class="n">record</span><span class="o">.</span><span class="n">responses</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">timestamp</span>

        <span class="k">if</span> <span class="n">request_ts</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="ow">or</span> <span class="n">response_ts</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Timestamps must be positive values.&quot;</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">response_ts</span> <span class="o">&lt;</span> <span class="n">request_ts</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                <span class="s2">&quot;Response timestamp must be greater than or equal to request timestamp.&quot;</span>
            <span class="p">)</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h3 id="aiperf.services.records_manager.metrics.types.request_latency_metric.RequestLatencyMetric.update_value" class="doc doc-heading">
            <code class=" language-python"><span class="n">update_value</span><span class="p">(</span><span class="n">record</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">metrics</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

<a href="#aiperf.services.records_manager.metrics.types.request_latency_metric.RequestLatencyMetric.update_value" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Adds a new record and calculates the Request Latencies metric.</p>
<p>This method extracts the request and last response timestamps, calculates the differences in time, and
appends the result to the metric list.</p>


            <details class="quote">
              <summary>Source code in <code>aiperf/services/records_manager/metrics/types/request_latency_metric.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">update_value</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span> <span class="n">record</span><span class="p">:</span> <span class="n">Record</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">metrics</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="s2">&quot;BaseMetric&quot;</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Adds a new record and calculates the Request Latencies metric.</span>

<span class="sd">    This method extracts the request and last response timestamps, calculates the differences in time, and</span>
<span class="sd">    appends the result to the metric list.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_check_record</span><span class="p">(</span><span class="n">record</span><span class="p">)</span>
    <span class="n">request_ts</span> <span class="o">=</span> <span class="n">record</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">timestamp</span>
    <span class="n">final_response_ts</span> <span class="o">=</span> <span class="n">record</span><span class="o">.</span><span class="n">responses</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">timestamp</span>
    <span class="n">request_latency</span> <span class="o">=</span> <span class="n">final_response_ts</span> <span class="o">-</span> <span class="n">request_ts</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">metric</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">request_latency</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="aiperf.services.records_manager.metrics.types.request_latency_metric.RequestLatencyMetric.values" class="doc doc-heading">
            <code class=" language-python"><span class="n">values</span><span class="p">()</span></code>

<a href="#aiperf.services.records_manager.metrics.types.request_latency_metric.RequestLatencyMetric.values" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Returns the list of Time to First Token (Request Latencies) metrics.</p>


            <details class="quote">
              <summary>Source code in <code>aiperf/services/records_manager/metrics/types/request_latency_metric.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">values</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="nb">int</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Returns the list of Time to First Token (Request Latencies) metrics.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">metric</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>




  </div>

    </div>

</div><h2 id="aiperfservicesrecords_managermetricstypesttft_metric">aiperf.services.records_manager.metrics.types.ttft_metric<a class="headerlink" href="#aiperfservicesrecords_managermetricstypesttft_metric" title="Permanent link">&para;</a></h2>


<div class="doc doc-object doc-module">



<a id="aiperf.services.records_manager.metrics.types.ttft_metric"></a>
    <div class="doc doc-contents first">









  <div class="doc doc-children">








<div class="doc doc-object doc-class">



<h2 id="aiperf.services.records_manager.metrics.types.ttft_metric.TTFTMetric" class="doc doc-heading">
            <code>TTFTMetric</code>


<a href="#aiperf.services.records_manager.metrics.types.ttft_metric.TTFTMetric" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="BaseMetric (aiperf.services.records_manager.metrics.base_metric.BaseMetric)" href="#aiperf.services.records_manager.metrics.base_metric.BaseMetric">BaseMetric</a></code></p>


        <p>Post-processor for calculating Time to First Token (TTFT) metrics from records.</p>







              <details class="quote">
                <summary>Source code in <code>aiperf/services/records_manager/metrics/types/ttft_metric.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">TTFTMetric</span><span class="p">(</span><span class="n">BaseMetric</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Post-processor for calculating Time to First Token (TTFT) metrics from records.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">tag</span> <span class="o">=</span> <span class="s2">&quot;ttft&quot;</span>
    <span class="n">unit</span> <span class="o">=</span> <span class="n">MetricTimeType</span><span class="o">.</span><span class="n">NANOSECONDS</span>
    <span class="n">larger_is_better</span> <span class="o">=</span> <span class="kc">False</span>
    <span class="n">header</span> <span class="o">=</span> <span class="s2">&quot;Time to First Token (TTFT)&quot;</span>
    <span class="nb">type</span> <span class="o">=</span> <span class="n">MetricType</span><span class="o">.</span><span class="n">METRIC_OF_RECORDS</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">metric</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">update_value</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">record</span><span class="p">:</span> <span class="n">Record</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">metrics</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="s2">&quot;BaseMetric&quot;</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Adds a new record and calculates the Time To First Token (TTFT) metric.</span>

<span class="sd">        This method extracts the timestamp from the request and the first response in the given</span>
<span class="sd">        Record object, computes the difference (TTFT), and appends the result to the metric list.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_check_record</span><span class="p">(</span><span class="n">record</span><span class="p">)</span>
        <span class="n">request_ts</span> <span class="o">=</span> <span class="n">record</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">timestamp</span>
        <span class="n">response_ts</span> <span class="o">=</span> <span class="n">record</span><span class="o">.</span><span class="n">responses</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">timestamp</span>
        <span class="n">ttft</span> <span class="o">=</span> <span class="n">response_ts</span> <span class="o">-</span> <span class="n">request_ts</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">metric</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">ttft</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">values</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="nb">int</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns the list of Time to First Token (TTFT) metrics.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">metric</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_check_record</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">record</span><span class="p">:</span> <span class="n">Record</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Checks if the record is valid for TTFT calculation.</span>

<span class="sd">        Raises:</span>
<span class="sd">            ValueError: If the record does not have at least one response.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">record</span><span class="o">.</span><span class="n">request</span> <span class="ow">or</span> <span class="ow">not</span> <span class="n">record</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">timestamp</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Record must have a valid request with a timestamp.&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">record</span><span class="o">.</span><span class="n">responses</span> <span class="ow">or</span> <span class="nb">len</span><span class="p">(</span><span class="n">record</span><span class="o">.</span><span class="n">responses</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">1</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                <span class="s2">&quot;Record must have at least one response to calculate TTFT.&quot;</span>
            <span class="p">)</span>
        <span class="k">if</span> <span class="n">record</span><span class="o">.</span><span class="n">responses</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">timestamp</span> <span class="o">&lt;</span> <span class="n">record</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">timestamp</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                <span class="s2">&quot;Response timestamp must be greater than or equal to request timestamp.&quot;</span>
            <span class="p">)</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h3 id="aiperf.services.records_manager.metrics.types.ttft_metric.TTFTMetric.update_value" class="doc doc-heading">
            <code class=" language-python"><span class="n">update_value</span><span class="p">(</span><span class="n">record</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">metrics</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

<a href="#aiperf.services.records_manager.metrics.types.ttft_metric.TTFTMetric.update_value" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Adds a new record and calculates the Time To First Token (TTFT) metric.</p>
<p>This method extracts the timestamp from the request and the first response in the given
Record object, computes the difference (TTFT), and appends the result to the metric list.</p>


            <details class="quote">
              <summary>Source code in <code>aiperf/services/records_manager/metrics/types/ttft_metric.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">update_value</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span> <span class="n">record</span><span class="p">:</span> <span class="n">Record</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">metrics</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="s2">&quot;BaseMetric&quot;</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Adds a new record and calculates the Time To First Token (TTFT) metric.</span>

<span class="sd">    This method extracts the timestamp from the request and the first response in the given</span>
<span class="sd">    Record object, computes the difference (TTFT), and appends the result to the metric list.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_check_record</span><span class="p">(</span><span class="n">record</span><span class="p">)</span>
    <span class="n">request_ts</span> <span class="o">=</span> <span class="n">record</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">timestamp</span>
    <span class="n">response_ts</span> <span class="o">=</span> <span class="n">record</span><span class="o">.</span><span class="n">responses</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">timestamp</span>
    <span class="n">ttft</span> <span class="o">=</span> <span class="n">response_ts</span> <span class="o">-</span> <span class="n">request_ts</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">metric</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">ttft</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="aiperf.services.records_manager.metrics.types.ttft_metric.TTFTMetric.values" class="doc doc-heading">
            <code class=" language-python"><span class="n">values</span><span class="p">()</span></code>

<a href="#aiperf.services.records_manager.metrics.types.ttft_metric.TTFTMetric.values" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Returns the list of Time to First Token (TTFT) metrics.</p>


            <details class="quote">
              <summary>Source code in <code>aiperf/services/records_manager/metrics/types/ttft_metric.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">values</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="nb">int</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Returns the list of Time to First Token (TTFT) metrics.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">metric</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>




  </div>

    </div>

</div><h2 id="aiperfservicesrecords_managermetricstypesttst_metric">aiperf.services.records_manager.metrics.types.ttst_metric<a class="headerlink" href="#aiperfservicesrecords_managermetricstypesttst_metric" title="Permanent link">&para;</a></h2>


<div class="doc doc-object doc-module">



<a id="aiperf.services.records_manager.metrics.types.ttst_metric"></a>
    <div class="doc doc-contents first">









  <div class="doc doc-children">








<div class="doc doc-object doc-class">



<h2 id="aiperf.services.records_manager.metrics.types.ttst_metric.TTSTMetric" class="doc doc-heading">
            <code>TTSTMetric</code>


<a href="#aiperf.services.records_manager.metrics.types.ttst_metric.TTSTMetric" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="BaseMetric (aiperf.services.records_manager.metrics.base_metric.BaseMetric)" href="#aiperf.services.records_manager.metrics.base_metric.BaseMetric">BaseMetric</a></code></p>


        <p>Post-processor for calculating Time to Second Token (TTST) metrics from records.</p>







              <details class="quote">
                <summary>Source code in <code>aiperf/services/records_manager/metrics/types/ttst_metric.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">TTSTMetric</span><span class="p">(</span><span class="n">BaseMetric</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Post-processor for calculating Time to Second Token (TTST) metrics from records.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">tag</span> <span class="o">=</span> <span class="s2">&quot;ttst&quot;</span>
    <span class="n">unit</span> <span class="o">=</span> <span class="n">MetricTimeType</span><span class="o">.</span><span class="n">NANOSECONDS</span>
    <span class="n">larger_is_better</span> <span class="o">=</span> <span class="kc">False</span>
    <span class="n">header</span> <span class="o">=</span> <span class="s2">&quot;Time to Second Token (TTST)&quot;</span>
    <span class="nb">type</span> <span class="o">=</span> <span class="n">MetricType</span><span class="o">.</span><span class="n">METRIC_OF_RECORDS</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">metric</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">update_value</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">record</span><span class="p">:</span> <span class="n">Record</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">metrics</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="s2">&quot;BaseMetric&quot;</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Adds a new record and calculates the Time To Second Token (TTST) metric.</span>

<span class="sd">        This method extracts the timestamp from the first and second response in the given</span>
<span class="sd">        Record object, computes the difference (TTST), and appends the result to the metric list.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_check_record</span><span class="p">(</span><span class="n">record</span><span class="p">)</span>
        <span class="n">first_reponse_ts</span> <span class="o">=</span> <span class="n">record</span><span class="o">.</span><span class="n">responses</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">timestamp</span>
        <span class="n">second_response_ts</span> <span class="o">=</span> <span class="n">record</span><span class="o">.</span><span class="n">responses</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">timestamp</span>
        <span class="n">ttst</span> <span class="o">=</span> <span class="n">second_response_ts</span> <span class="o">-</span> <span class="n">first_reponse_ts</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">metric</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">ttst</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">values</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="nb">int</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns the list of Time to First Token (TTST) metrics.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">metric</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_check_record</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">record</span><span class="p">:</span> <span class="n">Record</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Checks if the record is valid for TTST calculation.</span>

<span class="sd">        Raises:</span>
<span class="sd">            ValueError: If the record does not have at least two responses.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">record</span><span class="o">.</span><span class="n">request</span> <span class="ow">or</span> <span class="ow">not</span> <span class="n">record</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">timestamp</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Record must have a valid request with a timestamp.&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">record</span><span class="o">.</span><span class="n">responses</span> <span class="ow">or</span> <span class="nb">len</span><span class="p">(</span><span class="n">record</span><span class="o">.</span><span class="n">responses</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">2</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                <span class="s2">&quot;Record must have at least two responses to calculate TTST.&quot;</span>
            <span class="p">)</span>
        <span class="k">if</span> <span class="n">record</span><span class="o">.</span><span class="n">responses</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">timestamp</span> <span class="o">&lt;</span> <span class="n">record</span><span class="o">.</span><span class="n">responses</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">timestamp</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                <span class="s2">&quot;Second response timestamp must be greater than or equal to the first response timestamp.&quot;</span>
            <span class="p">)</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h3 id="aiperf.services.records_manager.metrics.types.ttst_metric.TTSTMetric.update_value" class="doc doc-heading">
            <code class=" language-python"><span class="n">update_value</span><span class="p">(</span><span class="n">record</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">metrics</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

<a href="#aiperf.services.records_manager.metrics.types.ttst_metric.TTSTMetric.update_value" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Adds a new record and calculates the Time To Second Token (TTST) metric.</p>
<p>This method extracts the timestamp from the first and second response in the given
Record object, computes the difference (TTST), and appends the result to the metric list.</p>


            <details class="quote">
              <summary>Source code in <code>aiperf/services/records_manager/metrics/types/ttst_metric.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">update_value</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span> <span class="n">record</span><span class="p">:</span> <span class="n">Record</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">metrics</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="s2">&quot;BaseMetric&quot;</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Adds a new record and calculates the Time To Second Token (TTST) metric.</span>

<span class="sd">    This method extracts the timestamp from the first and second response in the given</span>
<span class="sd">    Record object, computes the difference (TTST), and appends the result to the metric list.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_check_record</span><span class="p">(</span><span class="n">record</span><span class="p">)</span>
    <span class="n">first_reponse_ts</span> <span class="o">=</span> <span class="n">record</span><span class="o">.</span><span class="n">responses</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">timestamp</span>
    <span class="n">second_response_ts</span> <span class="o">=</span> <span class="n">record</span><span class="o">.</span><span class="n">responses</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">timestamp</span>
    <span class="n">ttst</span> <span class="o">=</span> <span class="n">second_response_ts</span> <span class="o">-</span> <span class="n">first_reponse_ts</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">metric</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">ttst</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="aiperf.services.records_manager.metrics.types.ttst_metric.TTSTMetric.values" class="doc doc-heading">
            <code class=" language-python"><span class="n">values</span><span class="p">()</span></code>

<a href="#aiperf.services.records_manager.metrics.types.ttst_metric.TTSTMetric.values" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Returns the list of Time to First Token (TTST) metrics.</p>


            <details class="quote">
              <summary>Source code in <code>aiperf/services/records_manager/metrics/types/ttst_metric.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">values</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="nb">int</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Returns the list of Time to First Token (TTST) metrics.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">metric</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>




  </div>

    </div>

</div><h2 id="aiperfservicesrecords_managerpost_processorsmetric_summary">aiperf.services.records_manager.post_processors.metric_summary<a class="headerlink" href="#aiperfservicesrecords_managerpost_processorsmetric_summary" title="Permanent link">&para;</a></h2>


<div class="doc doc-object doc-module">



<a id="aiperf.services.records_manager.post_processors.metric_summary"></a>
    <div class="doc doc-contents first">









  <div class="doc doc-children">








<div class="doc doc-object doc-class">



<h2 id="aiperf.services.records_manager.post_processors.metric_summary.MetricSummary" class="doc doc-heading">
            <code>MetricSummary</code>


<a href="#aiperf.services.records_manager.post_processors.metric_summary.MetricSummary" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">


        <p>MetricSummary is a post-processor that generates a summary of metrics from the records.
It processes the records to extract relevant metrics and returns them in a structured format.</p>







              <details class="quote">
                <summary>Source code in <code>aiperf/services/records_manager/post_processors/metric_summary.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@PostProcessorFactory</span><span class="o">.</span><span class="n">register</span><span class="p">(</span><span class="n">PostProcessorType</span><span class="o">.</span><span class="n">METRIC_SUMMARY</span><span class="p">)</span>
<span class="k">class</span><span class="w"> </span><span class="nc">MetricSummary</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    MetricSummary is a post-processor that generates a summary of metrics from the records.</span>
<span class="sd">    It processes the records to extract relevant metrics and returns them in a structured format.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span> <span class="o">=</span> <span class="n">logging</span><span class="o">.</span><span class="n">getLogger</span><span class="p">(</span><span class="vm">__name__</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Initializing MetricSummary post-processor&quot;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_metrics</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">metric_cls</span> <span class="ow">in</span> <span class="n">BaseMetric</span><span class="o">.</span><span class="n">get_all</span><span class="p">()</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_metrics</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">metric_cls</span><span class="p">())</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">process</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">records</span><span class="p">:</span> <span class="nb">list</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Process the records to generate a summary of metrics.</span>

<span class="sd">        :param records: The input records to be processed.</span>
<span class="sd">        :return: A dictionary containing the summarized metrics.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">record</span> <span class="ow">in</span> <span class="n">records</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">metric</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_metrics</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">metric</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="n">MetricType</span><span class="o">.</span><span class="n">METRIC_OF_RECORDS</span><span class="p">:</span>
                    <span class="n">metric</span><span class="o">.</span><span class="n">update_value</span><span class="p">(</span><span class="n">record</span><span class="o">=</span><span class="n">record</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">metric</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_metrics</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">metric</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="n">MetricType</span><span class="o">.</span><span class="n">METRIC_OF_METRICS</span><span class="p">:</span>
                    <span class="n">metric</span><span class="o">.</span><span class="n">update_value</span><span class="p">(</span><span class="n">metrics</span><span class="o">=</span><span class="p">{</span><span class="n">m</span><span class="o">.</span><span class="n">tag</span><span class="p">:</span> <span class="n">m</span> <span class="k">for</span> <span class="n">m</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_metrics</span><span class="p">})</span>
                <span class="k">elif</span> <span class="n">metric</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="n">MetricType</span><span class="o">.</span><span class="n">METRIC_OF_BOTH</span><span class="p">:</span>
                    <span class="n">metric</span><span class="o">.</span><span class="n">update_value</span><span class="p">(</span>
                        <span class="n">record</span><span class="o">=</span><span class="n">record</span><span class="p">,</span> <span class="n">metrics</span><span class="o">=</span><span class="p">{</span><span class="n">m</span><span class="o">.</span><span class="n">tag</span><span class="p">:</span> <span class="n">m</span> <span class="k">for</span> <span class="n">m</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_metrics</span><span class="p">}</span>
                    <span class="p">)</span>

        <span class="c1"># TODO: Fix this after we add support for dependencies</span>
        <span class="c1"># between metrics of metrics</span>
        <span class="c1"># This is a workaround to ensure that metrics of metrics</span>
        <span class="c1"># are updated after all records are processed</span>
        <span class="k">for</span> <span class="n">metric</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_metrics</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">metric</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="n">MetricType</span><span class="o">.</span><span class="n">METRIC_OF_METRICS</span><span class="p">:</span>
                <span class="n">metric</span><span class="o">.</span><span class="n">update_value</span><span class="p">(</span><span class="n">metrics</span><span class="o">=</span><span class="p">{</span><span class="n">m</span><span class="o">.</span><span class="n">tag</span><span class="p">:</span> <span class="n">m</span> <span class="k">for</span> <span class="n">m</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_metrics</span><span class="p">})</span>
            <span class="k">elif</span> <span class="n">metric</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="n">MetricType</span><span class="o">.</span><span class="n">METRIC_OF_BOTH</span><span class="p">:</span>
                <span class="n">metric</span><span class="o">.</span><span class="n">update_value</span><span class="p">(</span>
                    <span class="n">record</span><span class="o">=</span><span class="n">record</span><span class="p">,</span> <span class="n">metrics</span><span class="o">=</span><span class="p">{</span><span class="n">m</span><span class="o">.</span><span class="n">tag</span><span class="p">:</span> <span class="n">m</span> <span class="k">for</span> <span class="n">m</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_metrics</span><span class="p">}</span>
                <span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">get_metrics_summary</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
        <span class="n">metrics_summary</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">metric</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_metrics</span><span class="p">:</span>
            <span class="n">metrics_summary</span><span class="p">[</span><span class="n">metric</span><span class="o">.</span><span class="n">tag</span><span class="p">]</span> <span class="o">=</span> <span class="n">metric</span><span class="o">.</span><span class="n">values</span><span class="p">()</span>

        <span class="k">return</span> <span class="n">metrics_summary</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h3 id="aiperf.services.records_manager.post_processors.metric_summary.MetricSummary.process" class="doc doc-heading">
            <code class=" language-python"><span class="n">process</span><span class="p">(</span><span class="n">records</span><span class="p">)</span></code>

<a href="#aiperf.services.records_manager.post_processors.metric_summary.MetricSummary.process" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Process the records to generate a summary of metrics.</p>
<p>:param records: The input records to be processed.
:return: A dictionary containing the summarized metrics.</p>


            <details class="quote">
              <summary>Source code in <code>aiperf/services/records_manager/post_processors/metric_summary.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">process</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">records</span><span class="p">:</span> <span class="nb">list</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Process the records to generate a summary of metrics.</span>

<span class="sd">    :param records: The input records to be processed.</span>
<span class="sd">    :return: A dictionary containing the summarized metrics.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">for</span> <span class="n">record</span> <span class="ow">in</span> <span class="n">records</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">metric</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_metrics</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">metric</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="n">MetricType</span><span class="o">.</span><span class="n">METRIC_OF_RECORDS</span><span class="p">:</span>
                <span class="n">metric</span><span class="o">.</span><span class="n">update_value</span><span class="p">(</span><span class="n">record</span><span class="o">=</span><span class="n">record</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">metric</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_metrics</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">metric</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="n">MetricType</span><span class="o">.</span><span class="n">METRIC_OF_METRICS</span><span class="p">:</span>
                <span class="n">metric</span><span class="o">.</span><span class="n">update_value</span><span class="p">(</span><span class="n">metrics</span><span class="o">=</span><span class="p">{</span><span class="n">m</span><span class="o">.</span><span class="n">tag</span><span class="p">:</span> <span class="n">m</span> <span class="k">for</span> <span class="n">m</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_metrics</span><span class="p">})</span>
            <span class="k">elif</span> <span class="n">metric</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="n">MetricType</span><span class="o">.</span><span class="n">METRIC_OF_BOTH</span><span class="p">:</span>
                <span class="n">metric</span><span class="o">.</span><span class="n">update_value</span><span class="p">(</span>
                    <span class="n">record</span><span class="o">=</span><span class="n">record</span><span class="p">,</span> <span class="n">metrics</span><span class="o">=</span><span class="p">{</span><span class="n">m</span><span class="o">.</span><span class="n">tag</span><span class="p">:</span> <span class="n">m</span> <span class="k">for</span> <span class="n">m</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_metrics</span><span class="p">}</span>
                <span class="p">)</span>

    <span class="c1"># TODO: Fix this after we add support for dependencies</span>
    <span class="c1"># between metrics of metrics</span>
    <span class="c1"># This is a workaround to ensure that metrics of metrics</span>
    <span class="c1"># are updated after all records are processed</span>
    <span class="k">for</span> <span class="n">metric</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_metrics</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">metric</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="n">MetricType</span><span class="o">.</span><span class="n">METRIC_OF_METRICS</span><span class="p">:</span>
            <span class="n">metric</span><span class="o">.</span><span class="n">update_value</span><span class="p">(</span><span class="n">metrics</span><span class="o">=</span><span class="p">{</span><span class="n">m</span><span class="o">.</span><span class="n">tag</span><span class="p">:</span> <span class="n">m</span> <span class="k">for</span> <span class="n">m</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_metrics</span><span class="p">})</span>
        <span class="k">elif</span> <span class="n">metric</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="n">MetricType</span><span class="o">.</span><span class="n">METRIC_OF_BOTH</span><span class="p">:</span>
            <span class="n">metric</span><span class="o">.</span><span class="n">update_value</span><span class="p">(</span>
                <span class="n">record</span><span class="o">=</span><span class="n">record</span><span class="p">,</span> <span class="n">metrics</span><span class="o">=</span><span class="p">{</span><span class="n">m</span><span class="o">.</span><span class="n">tag</span><span class="p">:</span> <span class="n">m</span> <span class="k">for</span> <span class="n">m</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_metrics</span><span class="p">}</span>
            <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>




  </div>

    </div>

</div><h2 id="aiperfservicesrecords_managerrecords">aiperf.services.records_manager.records<a class="headerlink" href="#aiperfservicesrecords_managerrecords" title="Permanent link">&para;</a></h2>


<div class="doc doc-object doc-module">



<a id="aiperf.services.records_manager.records"></a>
    <div class="doc doc-contents first">









  <div class="doc doc-children">








<div class="doc doc-object doc-class">



<h2 id="aiperf.services.records_manager.records.Records" class="doc doc-heading">
            <code>Records</code>


<a href="#aiperf.services.records_manager.records.Records" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="pydantic.BaseModel">BaseModel</span></code></p>


        <p>A collection of records, each containing a request and a list of responses.</p>







              <details class="quote">
                <summary>Source code in <code>aiperf/services/records_manager/records.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">Records</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A collection of records, each containing a request and a list of responses.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">records</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">Record</span><span class="p">]</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">default_factory</span><span class="o">=</span><span class="nb">list</span><span class="p">,</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;A list of records, each containing a request and its responses.&quot;</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">add_record</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">:</span> <span class="n">Transaction</span><span class="p">,</span> <span class="n">responses</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">Transaction</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Add a new record with the given request and responses.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">records</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">Record</span><span class="p">(</span><span class="n">request</span><span class="o">=</span><span class="n">request</span><span class="p">,</span> <span class="n">responses</span><span class="o">=</span><span class="n">responses</span><span class="p">))</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h3 id="aiperf.services.records_manager.records.Records.add_record" class="doc doc-heading">
            <code class=" language-python"><span class="n">add_record</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">responses</span><span class="p">)</span></code>

<a href="#aiperf.services.records_manager.records.Records.add_record" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Add a new record with the given request and responses.</p>


            <details class="quote">
              <summary>Source code in <code>aiperf/services/records_manager/records.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">add_record</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">:</span> <span class="n">Transaction</span><span class="p">,</span> <span class="n">responses</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">Transaction</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Add a new record with the given request and responses.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">records</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">Record</span><span class="p">(</span><span class="n">request</span><span class="o">=</span><span class="n">request</span><span class="p">,</span> <span class="n">responses</span><span class="o">=</span><span class="n">responses</span><span class="p">))</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>




  </div>

    </div>

</div><h2 id="aiperfservicesrecords_managerrecords_manager">aiperf.services.records_manager.records_manager<a class="headerlink" href="#aiperfservicesrecords_managerrecords_manager" title="Permanent link">&para;</a></h2>


<div class="doc doc-object doc-module">



<a id="aiperf.services.records_manager.records_manager"></a>
    <div class="doc doc-contents first">









  <div class="doc doc-children">








<div class="doc doc-object doc-class">



<h2 id="aiperf.services.records_manager.records_manager.RecordsManager" class="doc doc-heading">
            <code>RecordsManager</code>


<a href="#aiperf.services.records_manager.records_manager.RecordsManager" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="BaseComponentService (aiperf.common.service.base_component_service.BaseComponentService)" href="#aiperf.common.service.base_component_service.BaseComponentService">BaseComponentService</a></code></p>


        <p>The RecordsManager service is primarily responsible for holding the
results returned from the workers.</p>







              <details class="quote">
                <summary>Source code in <code>aiperf/services/records_manager/records_manager.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@ServiceFactory</span><span class="o">.</span><span class="n">register</span><span class="p">(</span><span class="n">ServiceType</span><span class="o">.</span><span class="n">RECORDS_MANAGER</span><span class="p">)</span>
<span class="k">class</span><span class="w"> </span><span class="nc">RecordsManager</span><span class="p">(</span><span class="n">BaseComponentService</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    The RecordsManager service is primarily responsible for holding the</span>
<span class="sd">    results returned from the workers.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">service_config</span><span class="p">:</span> <span class="n">ServiceConfig</span><span class="p">,</span> <span class="n">service_id</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">service_config</span><span class="o">=</span><span class="n">service_config</span><span class="p">,</span> <span class="n">service_id</span><span class="o">=</span><span class="n">service_id</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Initializing records manager&quot;</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">service_type</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ServiceType</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;The type of service.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">ServiceType</span><span class="o">.</span><span class="n">RECORDS_MANAGER</span>

    <span class="nd">@on_init</span>
    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">_initialize</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Initialize records manager-specific components.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Initializing records manager&quot;</span><span class="p">)</span>
        <span class="c1"># TODO: Implement records manager initialization</span>

    <span class="nd">@on_start</span>
    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">_start</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Start the records manager.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Starting records manager&quot;</span><span class="p">)</span>
        <span class="c1"># TODO: Implement records manager start</span>

    <span class="nd">@on_stop</span>
    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">_stop</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Stop the records manager.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Stopping records manager&quot;</span><span class="p">)</span>
        <span class="c1"># TODO: Implement records manager stop</span>

    <span class="nd">@on_cleanup</span>
    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">_cleanup</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Clean up records manager-specific components.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Cleaning up records manager&quot;</span><span class="p">)</span>
        <span class="c1"># TODO: Implement records manager cleanup</span>

    <span class="nd">@on_configure</span>
    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">_configure</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">message</span><span class="p">:</span> <span class="n">Message</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Configure the records manager.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Configuring records manager with message: </span><span class="si">{</span><span class="n">message</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">







<div class="doc doc-object doc-attribute">



<h3 id="aiperf.services.records_manager.records_manager.RecordsManager.service_type" class="doc doc-heading">
            <code class=" language-python"><span class="n">service_type</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

<a href="#aiperf.services.records_manager.records_manager.RecordsManager.service_type" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>The type of service.</p>

    </div>

</div>





  </div>

    </div>

</div>


<div class="doc doc-object doc-function">


<h2 id="aiperf.services.records_manager.records_manager.main" class="doc doc-heading">
            <code class=" language-python"><span class="n">main</span><span class="p">()</span></code>

<a href="#aiperf.services.records_manager.records_manager.main" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">

        <p>Main entry point for the records manager.</p>


            <details class="quote">
              <summary>Source code in <code>aiperf/services/records_manager/records_manager.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span>
<span class="normal">71</span>
<span class="normal">72</span>
<span class="normal">73</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">main</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Main entry point for the records manager.&quot;&quot;&quot;</span>

    <span class="kn">from</span><span class="w"> </span><span class="nn">aiperf.common.bootstrap</span><span class="w"> </span><span class="kn">import</span> <span class="n">bootstrap_and_run_service</span>

    <span class="n">bootstrap_and_run_service</span><span class="p">(</span><span class="n">RecordsManager</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div><h2 id="aiperfservicesservice_managerbase">aiperf.services.service_manager.base<a class="headerlink" href="#aiperfservicesservice_managerbase" title="Permanent link">&para;</a></h2>


<div class="doc doc-object doc-module">



<a id="aiperf.services.service_manager.base"></a>
    <div class="doc doc-contents first">









  <div class="doc doc-children">








<div class="doc doc-object doc-class">



<h2 id="aiperf.services.service_manager.base.BaseServiceManager" class="doc doc-heading">
            <code>BaseServiceManager</code>


<a href="#aiperf.services.service_manager.base.BaseServiceManager" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="abc.ABC">ABC</span></code></p>


        <p>Base class for service managers. It provides a common interface for
managing services and a way to look up service information by service ID.</p>







              <details class="quote">
                <summary>Source code in <code>aiperf/services/service_manager/base.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">BaseServiceManager</span><span class="p">(</span><span class="n">ABC</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Base class for service managers. It provides a common interface for</span>
<span class="sd">    managing services and a way to look up service information by service ID.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">required_service_types</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">ServiceType</span><span class="p">],</span> <span class="n">config</span><span class="p">:</span> <span class="n">ServiceConfig</span>
    <span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span> <span class="o">=</span> <span class="n">logging</span><span class="o">.</span><span class="n">getLogger</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">required_service_types</span> <span class="o">=</span> <span class="n">required_service_types</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">config</span> <span class="o">=</span> <span class="n">config</span>

        <span class="c1"># Maps to track service information</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">service_map</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="n">ServiceType</span><span class="p">,</span> <span class="nb">list</span><span class="p">[</span><span class="n">ServiceRunInfo</span><span class="p">]]</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="c1"># Create service ID map for component lookups</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">service_id_map</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">ServiceRunInfo</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>

    <span class="nd">@abstractmethod</span>
    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">initialize_all_services</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Initialize all required services.&quot;&quot;&quot;</span>
        <span class="k">pass</span>

    <span class="nd">@abstractmethod</span>
    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">stop_all_services</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Stop all managed services.&quot;&quot;&quot;</span>
        <span class="k">pass</span>

    <span class="nd">@abstractmethod</span>
    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">wait_for_all_services_registration</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">stop_event</span><span class="p">:</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">Event</span><span class="p">,</span> <span class="n">timeout_seconds</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">30</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Wait for all required services to be registered.&quot;&quot;&quot;</span>
        <span class="k">pass</span>

    <span class="nd">@abstractmethod</span>
    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">wait_for_all_services_start</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Wait for all required services to be started.&quot;&quot;&quot;</span>
        <span class="k">pass</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h3 id="aiperf.services.service_manager.base.BaseServiceManager.initialize_all_services" class="doc doc-heading">
            <code class=" language-python"><span class="n">initialize_all_services</span><span class="p">()</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-abstractmethod"><code>abstractmethod</code></small>
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#aiperf.services.service_manager.base.BaseServiceManager.initialize_all_services" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Initialize all required services.</p>


            <details class="quote">
              <summary>Source code in <code>aiperf/services/service_manager/base.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@abstractmethod</span>
<span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">initialize_all_services</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Initialize all required services.&quot;&quot;&quot;</span>
    <span class="k">pass</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="aiperf.services.service_manager.base.BaseServiceManager.stop_all_services" class="doc doc-heading">
            <code class=" language-python"><span class="n">stop_all_services</span><span class="p">()</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-abstractmethod"><code>abstractmethod</code></small>
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#aiperf.services.service_manager.base.BaseServiceManager.stop_all_services" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Stop all managed services.</p>


            <details class="quote">
              <summary>Source code in <code>aiperf/services/service_manager/base.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@abstractmethod</span>
<span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">stop_all_services</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Stop all managed services.&quot;&quot;&quot;</span>
    <span class="k">pass</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="aiperf.services.service_manager.base.BaseServiceManager.wait_for_all_services_registration" class="doc doc-heading">
            <code class=" language-python"><span class="n">wait_for_all_services_registration</span><span class="p">(</span><span class="n">stop_event</span><span class="p">,</span> <span class="n">timeout_seconds</span><span class="o">=</span><span class="mi">30</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-abstractmethod"><code>abstractmethod</code></small>
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#aiperf.services.service_manager.base.BaseServiceManager.wait_for_all_services_registration" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Wait for all required services to be registered.</p>


            <details class="quote">
              <summary>Source code in <code>aiperf/services/service_manager/base.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@abstractmethod</span>
<span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">wait_for_all_services_registration</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span> <span class="n">stop_event</span><span class="p">:</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">Event</span><span class="p">,</span> <span class="n">timeout_seconds</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">30</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Wait for all required services to be registered.&quot;&quot;&quot;</span>
    <span class="k">pass</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="aiperf.services.service_manager.base.BaseServiceManager.wait_for_all_services_start" class="doc doc-heading">
            <code class=" language-python"><span class="n">wait_for_all_services_start</span><span class="p">()</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-abstractmethod"><code>abstractmethod</code></small>
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#aiperf.services.service_manager.base.BaseServiceManager.wait_for_all_services_start" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Wait for all required services to be started.</p>


            <details class="quote">
              <summary>Source code in <code>aiperf/services/service_manager/base.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@abstractmethod</span>
<span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">wait_for_all_services_start</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Wait for all required services to be started.&quot;&quot;&quot;</span>
    <span class="k">pass</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>




  </div>

    </div>

</div><h2 id="aiperfservicesservice_managerkubernetes">aiperf.services.service_manager.kubernetes<a class="headerlink" href="#aiperfservicesservice_managerkubernetes" title="Permanent link">&para;</a></h2>


<div class="doc doc-object doc-module">



<a id="aiperf.services.service_manager.kubernetes"></a>
    <div class="doc doc-contents first">









  <div class="doc doc-children">








<div class="doc doc-object doc-class">



<h2 id="aiperf.services.service_manager.kubernetes.KubernetesServiceManager" class="doc doc-heading">
            <code>KubernetesServiceManager</code>


<a href="#aiperf.services.service_manager.kubernetes.KubernetesServiceManager" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="BaseServiceManager (aiperf.services.service_manager.base.BaseServiceManager)" href="#aiperf.services.service_manager.base.BaseServiceManager">BaseServiceManager</a></code></p>


        <p>Service Manager for starting and stopping services in a Kubernetes cluster.</p>







              <details class="quote">
                <summary>Source code in <code>aiperf/services/service_manager/kubernetes.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">KubernetesServiceManager</span><span class="p">(</span><span class="n">BaseServiceManager</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Service Manager for starting and stopping services in a Kubernetes cluster.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">required_service_types</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">ServiceType</span><span class="p">],</span> <span class="n">config</span><span class="p">:</span> <span class="n">ServiceConfig</span>
    <span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">required_service_types</span><span class="p">,</span> <span class="n">config</span><span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">initialize_all_services</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Initialize all required services as Kubernetes pods.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Initializing all required services as Kubernetes pods&quot;</span><span class="p">)</span>
        <span class="c1"># TODO: Implement Kubernetes</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span>
            <span class="s2">&quot;KubernetesServiceManager.initialize_all_services not implemented&quot;</span>
        <span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">stop_all_services</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Stop all required services as Kubernetes pods.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Stopping all required services as Kubernetes pods&quot;</span><span class="p">)</span>
        <span class="c1"># TODO: Implement Kubernetes</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span>
            <span class="s2">&quot;KubernetesServiceManager.stop_all_services not implemented&quot;</span>
        <span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">wait_for_all_services_registration</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">stop_event</span><span class="p">:</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">Event</span><span class="p">,</span> <span class="n">timeout_seconds</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">30</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Wait for all required services to be registered in Kubernetes.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span>
            <span class="s2">&quot;Waiting for all required services to be registered in Kubernetes&quot;</span>
        <span class="p">)</span>
        <span class="c1"># TODO: Implement Kubernetes</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span>
            <span class="s2">&quot;KubernetesServiceManager.wait_for_all_services_registration not implemented&quot;</span>
        <span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">wait_for_all_services_start</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Wait for all required services to be started in Kubernetes.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span>
            <span class="s2">&quot;Waiting for all required services to be started in Kubernetes&quot;</span>
        <span class="p">)</span>
        <span class="c1"># TODO: Implement Kubernetes</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span>
            <span class="s2">&quot;KubernetesServiceManager.wait_for_all_services_start not implemented&quot;</span>
        <span class="p">)</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h3 id="aiperf.services.service_manager.kubernetes.KubernetesServiceManager.initialize_all_services" class="doc doc-heading">
            <code class=" language-python"><span class="n">initialize_all_services</span><span class="p">()</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#aiperf.services.service_manager.kubernetes.KubernetesServiceManager.initialize_all_services" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Initialize all required services as Kubernetes pods.</p>


            <details class="quote">
              <summary>Source code in <code>aiperf/services/service_manager/kubernetes.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">initialize_all_services</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Initialize all required services as Kubernetes pods.&quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Initializing all required services as Kubernetes pods&quot;</span><span class="p">)</span>
    <span class="c1"># TODO: Implement Kubernetes</span>
    <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span>
        <span class="s2">&quot;KubernetesServiceManager.initialize_all_services not implemented&quot;</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="aiperf.services.service_manager.kubernetes.KubernetesServiceManager.stop_all_services" class="doc doc-heading">
            <code class=" language-python"><span class="n">stop_all_services</span><span class="p">()</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#aiperf.services.service_manager.kubernetes.KubernetesServiceManager.stop_all_services" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Stop all required services as Kubernetes pods.</p>


            <details class="quote">
              <summary>Source code in <code>aiperf/services/service_manager/kubernetes.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">stop_all_services</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Stop all required services as Kubernetes pods.&quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Stopping all required services as Kubernetes pods&quot;</span><span class="p">)</span>
    <span class="c1"># TODO: Implement Kubernetes</span>
    <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span>
        <span class="s2">&quot;KubernetesServiceManager.stop_all_services not implemented&quot;</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="aiperf.services.service_manager.kubernetes.KubernetesServiceManager.wait_for_all_services_registration" class="doc doc-heading">
            <code class=" language-python"><span class="n">wait_for_all_services_registration</span><span class="p">(</span><span class="n">stop_event</span><span class="p">,</span> <span class="n">timeout_seconds</span><span class="o">=</span><span class="mi">30</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#aiperf.services.service_manager.kubernetes.KubernetesServiceManager.wait_for_all_services_registration" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Wait for all required services to be registered in Kubernetes.</p>


            <details class="quote">
              <summary>Source code in <code>aiperf/services/service_manager/kubernetes.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">wait_for_all_services_registration</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span> <span class="n">stop_event</span><span class="p">:</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">Event</span><span class="p">,</span> <span class="n">timeout_seconds</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">30</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Wait for all required services to be registered in Kubernetes.&quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span>
        <span class="s2">&quot;Waiting for all required services to be registered in Kubernetes&quot;</span>
    <span class="p">)</span>
    <span class="c1"># TODO: Implement Kubernetes</span>
    <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span>
        <span class="s2">&quot;KubernetesServiceManager.wait_for_all_services_registration not implemented&quot;</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="aiperf.services.service_manager.kubernetes.KubernetesServiceManager.wait_for_all_services_start" class="doc doc-heading">
            <code class=" language-python"><span class="n">wait_for_all_services_start</span><span class="p">()</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#aiperf.services.service_manager.kubernetes.KubernetesServiceManager.wait_for_all_services_start" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Wait for all required services to be started in Kubernetes.</p>


            <details class="quote">
              <summary>Source code in <code>aiperf/services/service_manager/kubernetes.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">wait_for_all_services_start</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Wait for all required services to be started in Kubernetes.&quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span>
        <span class="s2">&quot;Waiting for all required services to be started in Kubernetes&quot;</span>
    <span class="p">)</span>
    <span class="c1"># TODO: Implement Kubernetes</span>
    <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span>
        <span class="s2">&quot;KubernetesServiceManager.wait_for_all_services_start not implemented&quot;</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="aiperf.services.service_manager.kubernetes.ServiceKubernetesRunInfo" class="doc doc-heading">
            <code>ServiceKubernetesRunInfo</code>


<a href="#aiperf.services.service_manager.kubernetes.ServiceKubernetesRunInfo" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="pydantic.BaseModel">BaseModel</span></code></p>


        <p>Information about a service running in a Kubernetes pod.</p>







              <details class="quote">
                <summary>Source code in <code>aiperf/services/service_manager/kubernetes.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">ServiceKubernetesRunInfo</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Information about a service running in a Kubernetes pod.&quot;&quot;&quot;</span>

    <span class="n">pod_name</span><span class="p">:</span> <span class="nb">str</span>
    <span class="n">node_name</span><span class="p">:</span> <span class="nb">str</span>
    <span class="n">namespace</span><span class="p">:</span> <span class="nb">str</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">











  </div>

    </div>

</div>




  </div>

    </div>

</div><h2 id="aiperfservicesservice_managermultiprocess">aiperf.services.service_manager.multiprocess<a class="headerlink" href="#aiperfservicesservice_managermultiprocess" title="Permanent link">&para;</a></h2>


<div class="doc doc-object doc-module">



<a id="aiperf.services.service_manager.multiprocess"></a>
    <div class="doc doc-contents first">









  <div class="doc doc-children">








<div class="doc doc-object doc-class">



<h2 id="aiperf.services.service_manager.multiprocess.MultiProcessRunInfo" class="doc doc-heading">
            <code>MultiProcessRunInfo</code>


<a href="#aiperf.services.service_manager.multiprocess.MultiProcessRunInfo" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="pydantic.BaseModel">BaseModel</span></code></p>


        <p>Information about a service running as a multiprocessing process.</p>







              <details class="quote">
                <summary>Source code in <code>aiperf/services/service_manager/multiprocess.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">MultiProcessRunInfo</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Information about a service running as a multiprocessing process.&quot;&quot;&quot;</span>

    <span class="n">model_config</span> <span class="o">=</span> <span class="n">ConfigDict</span><span class="p">(</span><span class="n">arbitrary_types_allowed</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

    <span class="n">process</span><span class="p">:</span> <span class="n">Process</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
    <span class="n">service_type</span><span class="p">:</span> <span class="n">ServiceType</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="o">...</span><span class="p">,</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Type of service running in the process&quot;</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">











  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="aiperf.services.service_manager.multiprocess.MultiProcessServiceManager" class="doc doc-heading">
            <code>MultiProcessServiceManager</code>


<a href="#aiperf.services.service_manager.multiprocess.MultiProcessServiceManager" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="BaseServiceManager (aiperf.services.service_manager.base.BaseServiceManager)" href="#aiperf.services.service_manager.base.BaseServiceManager">BaseServiceManager</a></code></p>


        <p>Service Manager for starting and stopping services as multiprocessing processes.</p>







              <details class="quote">
                <summary>Source code in <code>aiperf/services/service_manager/multiprocess.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 27</span>
<span class="normal"> 28</span>
<span class="normal"> 29</span>
<span class="normal"> 30</span>
<span class="normal"> 31</span>
<span class="normal"> 32</span>
<span class="normal"> 33</span>
<span class="normal"> 34</span>
<span class="normal"> 35</span>
<span class="normal"> 36</span>
<span class="normal"> 37</span>
<span class="normal"> 38</span>
<span class="normal"> 39</span>
<span class="normal"> 40</span>
<span class="normal"> 41</span>
<span class="normal"> 42</span>
<span class="normal"> 43</span>
<span class="normal"> 44</span>
<span class="normal"> 45</span>
<span class="normal"> 46</span>
<span class="normal"> 47</span>
<span class="normal"> 48</span>
<span class="normal"> 49</span>
<span class="normal"> 50</span>
<span class="normal"> 51</span>
<span class="normal"> 52</span>
<span class="normal"> 53</span>
<span class="normal"> 54</span>
<span class="normal"> 55</span>
<span class="normal"> 56</span>
<span class="normal"> 57</span>
<span class="normal"> 58</span>
<span class="normal"> 59</span>
<span class="normal"> 60</span>
<span class="normal"> 61</span>
<span class="normal"> 62</span>
<span class="normal"> 63</span>
<span class="normal"> 64</span>
<span class="normal"> 65</span>
<span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">MultiProcessServiceManager</span><span class="p">(</span><span class="n">BaseServiceManager</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Service Manager for starting and stopping services as multiprocessing processes.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">required_service_types</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">ServiceType</span><span class="p">],</span> <span class="n">config</span><span class="p">:</span> <span class="n">ServiceConfig</span>
    <span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">required_service_types</span><span class="p">,</span> <span class="n">config</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">multi_process_info</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">MultiProcessRunInfo</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>

    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">initialize_all_services</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Start all required services as multiprocessing processes.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Starting all required services as multiprocessing processes&quot;</span><span class="p">)</span>

        <span class="c1"># Create and start all service processes</span>
        <span class="k">for</span> <span class="n">service_type</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">required_service_types</span><span class="p">:</span>
            <span class="n">service_class</span> <span class="o">=</span> <span class="n">ServiceFactory</span><span class="o">.</span><span class="n">get_class_from_type</span><span class="p">(</span><span class="n">service_type</span><span class="p">)</span>

            <span class="n">process</span> <span class="o">=</span> <span class="n">Process</span><span class="p">(</span>
                <span class="n">target</span><span class="o">=</span><span class="n">bootstrap_and_run_service</span><span class="p">,</span>
                <span class="n">name</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">service_type</span><span class="si">}</span><span class="s2">_process&quot;</span><span class="p">,</span>
                <span class="n">args</span><span class="o">=</span><span class="p">(</span><span class="n">service_class</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="p">),</span>
                <span class="n">daemon</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
            <span class="p">)</span>
            <span class="n">process</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span>
                <span class="s2">&quot;Service </span><span class="si">%s</span><span class="s2"> started as process (pid: </span><span class="si">%d</span><span class="s2">)&quot;</span><span class="p">,</span>
                <span class="n">service_type</span><span class="p">,</span>
                <span class="n">process</span><span class="o">.</span><span class="n">pid</span><span class="p">,</span>
            <span class="p">)</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">multi_process_info</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
                <span class="n">MultiProcessRunInfo</span><span class="p">(</span><span class="n">process</span><span class="o">=</span><span class="n">process</span><span class="p">,</span> <span class="n">service_type</span><span class="o">=</span><span class="n">service_type</span><span class="p">)</span>
            <span class="p">)</span>

            <span class="c1"># Sleep to allow the service to register</span>
            <span class="k">await</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mf">0.01</span><span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">stop_all_services</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Stop all required services as multiprocessing processes.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Stopping all service processes&quot;</span><span class="p">)</span>

        <span class="c1"># Wait for all to finish in parallel</span>
        <span class="k">await</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">gather</span><span class="p">(</span>
            <span class="o">*</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_wait_for_process</span><span class="p">(</span><span class="n">info</span><span class="p">)</span> <span class="k">for</span> <span class="n">info</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">multi_process_info</span><span class="p">]</span>
        <span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">wait_for_all_services_registration</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">stop_event</span><span class="p">:</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">Event</span><span class="p">,</span> <span class="n">timeout_seconds</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">30</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Wait for all required services to be registered.</span>

<span class="sd">        Args:</span>
<span class="sd">            stop_event: Event to check if operation should be cancelled</span>
<span class="sd">            timeout_seconds: Maximum time to wait in seconds</span>

<span class="sd">        Raises:</span>
<span class="sd">            Exception if any service failed to register, None otherwise</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Waiting for all required services to register...&quot;</span><span class="p">)</span>

        <span class="c1"># Get the set of required service types for checking completion</span>
        <span class="n">required_types</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">required_service_types</span><span class="p">)</span>

        <span class="c1"># TODO: Can this be done better by using asyncio.Event()?</span>

        <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">_wait_for_registration</span><span class="p">():</span>
            <span class="k">while</span> <span class="ow">not</span> <span class="n">stop_event</span><span class="o">.</span><span class="n">is_set</span><span class="p">():</span>
                <span class="c1"># Get all registered service types from the id map</span>
                <span class="n">registered_types</span> <span class="o">=</span> <span class="p">{</span>
                    <span class="n">service_info</span><span class="o">.</span><span class="n">service_type</span>
                    <span class="k">for</span> <span class="n">service_info</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">service_id_map</span><span class="o">.</span><span class="n">values</span><span class="p">()</span>
                    <span class="k">if</span> <span class="n">service_info</span><span class="o">.</span><span class="n">registration_status</span>
                    <span class="o">==</span> <span class="n">ServiceRegistrationStatus</span><span class="o">.</span><span class="n">REGISTERED</span>
                <span class="p">}</span>

                <span class="c1"># Check if all required types are registered</span>
                <span class="k">if</span> <span class="n">required_types</span><span class="o">.</span><span class="n">issubset</span><span class="p">(</span><span class="n">registered_types</span><span class="p">):</span>
                    <span class="k">return</span>

                <span class="c1"># Wait a bit before checking again</span>
                <span class="k">await</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mf">0.5</span><span class="p">)</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="k">await</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">wait_for</span><span class="p">(</span><span class="n">_wait_for_registration</span><span class="p">(),</span> <span class="n">timeout</span><span class="o">=</span><span class="n">timeout_seconds</span><span class="p">)</span>
        <span class="k">except</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">TimeoutError</span><span class="p">:</span>
            <span class="c1"># Log which services didn&#39;t register in time</span>
            <span class="n">registered_types</span> <span class="o">=</span> <span class="p">{</span>
                <span class="n">service_info</span><span class="o">.</span><span class="n">service_type</span>
                <span class="k">for</span> <span class="n">service_info</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">service_id_map</span><span class="o">.</span><span class="n">values</span><span class="p">()</span>
                <span class="k">if</span> <span class="n">service_info</span><span class="o">.</span><span class="n">registration_status</span>
                <span class="o">==</span> <span class="n">ServiceRegistrationStatus</span><span class="o">.</span><span class="n">REGISTERED</span>
            <span class="p">}</span>

            <span class="k">for</span> <span class="n">service_type</span> <span class="ow">in</span> <span class="n">required_types</span> <span class="o">-</span> <span class="n">registered_types</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span>
                    <span class="sa">f</span><span class="s2">&quot;Service </span><span class="si">{</span><span class="n">service_type</span><span class="si">}</span><span class="s2"> failed to register within timeout&quot;</span>
                <span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">wait_for_all_services_start</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Wait for all required services to be started.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Waiting for all required services to start...&quot;</span><span class="p">)</span>

        <span class="c1"># TODO: Implement this</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;wait_for_all_services_start not implemented&quot;</span><span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">_wait_for_process</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">info</span><span class="p">:</span> <span class="n">MultiProcessRunInfo</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Wait for a process to terminate with timeout handling.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">info</span><span class="o">.</span><span class="n">process</span> <span class="ow">or</span> <span class="ow">not</span> <span class="n">info</span><span class="o">.</span><span class="n">process</span><span class="o">.</span><span class="n">is_alive</span><span class="p">():</span>
            <span class="k">return</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="n">info</span><span class="o">.</span><span class="n">process</span><span class="o">.</span><span class="n">terminate</span><span class="p">()</span>
            <span class="k">await</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">wait_for</span><span class="p">(</span>
                <span class="n">asyncio</span><span class="o">.</span><span class="n">to_thread</span><span class="p">(</span>
                    <span class="n">info</span><span class="o">.</span><span class="n">process</span><span class="o">.</span><span class="n">join</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="mf">1.0</span>
                <span class="p">),</span>  <span class="c1"># Add timeout to join</span>
                <span class="n">timeout</span><span class="o">=</span><span class="mf">5.0</span><span class="p">,</span>  <span class="c1"># Overall timeout</span>
            <span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span>
                <span class="s2">&quot;Service </span><span class="si">%s</span><span class="s2"> process stopped (pid: </span><span class="si">%d</span><span class="s2">)&quot;</span><span class="p">,</span>
                <span class="n">info</span><span class="o">.</span><span class="n">service_type</span><span class="p">,</span>
                <span class="n">info</span><span class="o">.</span><span class="n">process</span><span class="o">.</span><span class="n">pid</span><span class="p">,</span>
            <span class="p">)</span>
        <span class="k">except</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">TimeoutError</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span>
                <span class="s2">&quot;Service </span><span class="si">%s</span><span class="s2"> process (pid: </span><span class="si">%d</span><span class="s2">) did not terminate gracefully, killing&quot;</span><span class="p">,</span>
                <span class="n">info</span><span class="o">.</span><span class="n">service_type</span><span class="p">,</span>
                <span class="n">info</span><span class="o">.</span><span class="n">process</span><span class="o">.</span><span class="n">pid</span><span class="p">,</span>
            <span class="p">)</span>
            <span class="n">info</span><span class="o">.</span><span class="n">process</span><span class="o">.</span><span class="n">kill</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h3 id="aiperf.services.service_manager.multiprocess.MultiProcessServiceManager.initialize_all_services" class="doc doc-heading">
            <code class=" language-python"><span class="n">initialize_all_services</span><span class="p">()</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#aiperf.services.service_manager.multiprocess.MultiProcessServiceManager.initialize_all_services" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Start all required services as multiprocessing processes.</p>


            <details class="quote">
              <summary>Source code in <code>aiperf/services/service_manager/multiprocess.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">initialize_all_services</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Start all required services as multiprocessing processes.&quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Starting all required services as multiprocessing processes&quot;</span><span class="p">)</span>

    <span class="c1"># Create and start all service processes</span>
    <span class="k">for</span> <span class="n">service_type</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">required_service_types</span><span class="p">:</span>
        <span class="n">service_class</span> <span class="o">=</span> <span class="n">ServiceFactory</span><span class="o">.</span><span class="n">get_class_from_type</span><span class="p">(</span><span class="n">service_type</span><span class="p">)</span>

        <span class="n">process</span> <span class="o">=</span> <span class="n">Process</span><span class="p">(</span>
            <span class="n">target</span><span class="o">=</span><span class="n">bootstrap_and_run_service</span><span class="p">,</span>
            <span class="n">name</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">service_type</span><span class="si">}</span><span class="s2">_process&quot;</span><span class="p">,</span>
            <span class="n">args</span><span class="o">=</span><span class="p">(</span><span class="n">service_class</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="p">),</span>
            <span class="n">daemon</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="n">process</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span>
            <span class="s2">&quot;Service </span><span class="si">%s</span><span class="s2"> started as process (pid: </span><span class="si">%d</span><span class="s2">)&quot;</span><span class="p">,</span>
            <span class="n">service_type</span><span class="p">,</span>
            <span class="n">process</span><span class="o">.</span><span class="n">pid</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">multi_process_info</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
            <span class="n">MultiProcessRunInfo</span><span class="p">(</span><span class="n">process</span><span class="o">=</span><span class="n">process</span><span class="p">,</span> <span class="n">service_type</span><span class="o">=</span><span class="n">service_type</span><span class="p">)</span>
        <span class="p">)</span>

        <span class="c1"># Sleep to allow the service to register</span>
        <span class="k">await</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mf">0.01</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="aiperf.services.service_manager.multiprocess.MultiProcessServiceManager.stop_all_services" class="doc doc-heading">
            <code class=" language-python"><span class="n">stop_all_services</span><span class="p">()</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#aiperf.services.service_manager.multiprocess.MultiProcessServiceManager.stop_all_services" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Stop all required services as multiprocessing processes.</p>


            <details class="quote">
              <summary>Source code in <code>aiperf/services/service_manager/multiprocess.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span>
<span class="normal">71</span>
<span class="normal">72</span>
<span class="normal">73</span>
<span class="normal">74</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">stop_all_services</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Stop all required services as multiprocessing processes.&quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Stopping all service processes&quot;</span><span class="p">)</span>

    <span class="c1"># Wait for all to finish in parallel</span>
    <span class="k">await</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">gather</span><span class="p">(</span>
        <span class="o">*</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_wait_for_process</span><span class="p">(</span><span class="n">info</span><span class="p">)</span> <span class="k">for</span> <span class="n">info</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">multi_process_info</span><span class="p">]</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="aiperf.services.service_manager.multiprocess.MultiProcessServiceManager.wait_for_all_services_registration" class="doc doc-heading">
            <code class=" language-python"><span class="n">wait_for_all_services_registration</span><span class="p">(</span><span class="n">stop_event</span><span class="p">,</span> <span class="n">timeout_seconds</span><span class="o">=</span><span class="mi">30</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#aiperf.services.service_manager.multiprocess.MultiProcessServiceManager.wait_for_all_services_registration" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Wait for all required services to be registered.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>stop_event</code>
            </td>
            <td>
                  <code><span title="asyncio.Event">Event</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Event to check if operation should be cancelled</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>timeout_seconds</code>
            </td>
            <td>
                  <code><span title="int">int</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Maximum time to wait in seconds</p>
              </div>
            </td>
            <td>
                  <code>30</code>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>aiperf/services/service_manager/multiprocess.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">wait_for_all_services_registration</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span> <span class="n">stop_event</span><span class="p">:</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">Event</span><span class="p">,</span> <span class="n">timeout_seconds</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">30</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Wait for all required services to be registered.</span>

<span class="sd">    Args:</span>
<span class="sd">        stop_event: Event to check if operation should be cancelled</span>
<span class="sd">        timeout_seconds: Maximum time to wait in seconds</span>

<span class="sd">    Raises:</span>
<span class="sd">        Exception if any service failed to register, None otherwise</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Waiting for all required services to register...&quot;</span><span class="p">)</span>

    <span class="c1"># Get the set of required service types for checking completion</span>
    <span class="n">required_types</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">required_service_types</span><span class="p">)</span>

    <span class="c1"># TODO: Can this be done better by using asyncio.Event()?</span>

    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">_wait_for_registration</span><span class="p">():</span>
        <span class="k">while</span> <span class="ow">not</span> <span class="n">stop_event</span><span class="o">.</span><span class="n">is_set</span><span class="p">():</span>
            <span class="c1"># Get all registered service types from the id map</span>
            <span class="n">registered_types</span> <span class="o">=</span> <span class="p">{</span>
                <span class="n">service_info</span><span class="o">.</span><span class="n">service_type</span>
                <span class="k">for</span> <span class="n">service_info</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">service_id_map</span><span class="o">.</span><span class="n">values</span><span class="p">()</span>
                <span class="k">if</span> <span class="n">service_info</span><span class="o">.</span><span class="n">registration_status</span>
                <span class="o">==</span> <span class="n">ServiceRegistrationStatus</span><span class="o">.</span><span class="n">REGISTERED</span>
            <span class="p">}</span>

            <span class="c1"># Check if all required types are registered</span>
            <span class="k">if</span> <span class="n">required_types</span><span class="o">.</span><span class="n">issubset</span><span class="p">(</span><span class="n">registered_types</span><span class="p">):</span>
                <span class="k">return</span>

            <span class="c1"># Wait a bit before checking again</span>
            <span class="k">await</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mf">0.5</span><span class="p">)</span>

    <span class="k">try</span><span class="p">:</span>
        <span class="k">await</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">wait_for</span><span class="p">(</span><span class="n">_wait_for_registration</span><span class="p">(),</span> <span class="n">timeout</span><span class="o">=</span><span class="n">timeout_seconds</span><span class="p">)</span>
    <span class="k">except</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">TimeoutError</span><span class="p">:</span>
        <span class="c1"># Log which services didn&#39;t register in time</span>
        <span class="n">registered_types</span> <span class="o">=</span> <span class="p">{</span>
            <span class="n">service_info</span><span class="o">.</span><span class="n">service_type</span>
            <span class="k">for</span> <span class="n">service_info</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">service_id_map</span><span class="o">.</span><span class="n">values</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">service_info</span><span class="o">.</span><span class="n">registration_status</span>
            <span class="o">==</span> <span class="n">ServiceRegistrationStatus</span><span class="o">.</span><span class="n">REGISTERED</span>
        <span class="p">}</span>

        <span class="k">for</span> <span class="n">service_type</span> <span class="ow">in</span> <span class="n">required_types</span> <span class="o">-</span> <span class="n">registered_types</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Service </span><span class="si">{</span><span class="n">service_type</span><span class="si">}</span><span class="s2"> failed to register within timeout&quot;</span>
            <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="aiperf.services.service_manager.multiprocess.MultiProcessServiceManager.wait_for_all_services_start" class="doc doc-heading">
            <code class=" language-python"><span class="n">wait_for_all_services_start</span><span class="p">()</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#aiperf.services.service_manager.multiprocess.MultiProcessServiceManager.wait_for_all_services_start" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Wait for all required services to be started.</p>


            <details class="quote">
              <summary>Source code in <code>aiperf/services/service_manager/multiprocess.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">wait_for_all_services_start</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Wait for all required services to be started.&quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Waiting for all required services to start...&quot;</span><span class="p">)</span>

    <span class="c1"># TODO: Implement this</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;wait_for_all_services_start not implemented&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>




  </div>

    </div>

</div><h2 id="aiperfservicessystem_controllersystem_controller">aiperf.services.system_controller.system_controller<a class="headerlink" href="#aiperfservicessystem_controllersystem_controller" title="Permanent link">&para;</a></h2>


<div class="doc doc-object doc-module">



<a id="aiperf.services.system_controller.system_controller"></a>
    <div class="doc doc-contents first">









  <div class="doc doc-children">








<div class="doc doc-object doc-class">



<h2 id="aiperf.services.system_controller.system_controller.SystemController" class="doc doc-heading">
            <code>SystemController</code>


<a href="#aiperf.services.system_controller.system_controller.SystemController" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="BaseControllerService (aiperf.common.service.base_controller_service.BaseControllerService)" href="#aiperf.common.service.base_controller_service.BaseControllerService">BaseControllerService</a></code></p>


        <p>System Controller service.</p>
<p>This service is responsible for managing the lifecycle of all other services.
It will start, stop, and configure all other services.</p>







              <details class="quote">
                <summary>Source code in <code>aiperf/services/system_controller/system_controller.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 45</span>
<span class="normal"> 46</span>
<span class="normal"> 47</span>
<span class="normal"> 48</span>
<span class="normal"> 49</span>
<span class="normal"> 50</span>
<span class="normal"> 51</span>
<span class="normal"> 52</span>
<span class="normal"> 53</span>
<span class="normal"> 54</span>
<span class="normal"> 55</span>
<span class="normal"> 56</span>
<span class="normal"> 57</span>
<span class="normal"> 58</span>
<span class="normal"> 59</span>
<span class="normal"> 60</span>
<span class="normal"> 61</span>
<span class="normal"> 62</span>
<span class="normal"> 63</span>
<span class="normal"> 64</span>
<span class="normal"> 65</span>
<span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span>
<span class="normal">278</span>
<span class="normal">279</span>
<span class="normal">280</span>
<span class="normal">281</span>
<span class="normal">282</span>
<span class="normal">283</span>
<span class="normal">284</span>
<span class="normal">285</span>
<span class="normal">286</span>
<span class="normal">287</span>
<span class="normal">288</span>
<span class="normal">289</span>
<span class="normal">290</span>
<span class="normal">291</span>
<span class="normal">292</span>
<span class="normal">293</span>
<span class="normal">294</span>
<span class="normal">295</span>
<span class="normal">296</span>
<span class="normal">297</span>
<span class="normal">298</span>
<span class="normal">299</span>
<span class="normal">300</span>
<span class="normal">301</span>
<span class="normal">302</span>
<span class="normal">303</span>
<span class="normal">304</span>
<span class="normal">305</span>
<span class="normal">306</span>
<span class="normal">307</span>
<span class="normal">308</span>
<span class="normal">309</span>
<span class="normal">310</span>
<span class="normal">311</span>
<span class="normal">312</span>
<span class="normal">313</span>
<span class="normal">314</span>
<span class="normal">315</span>
<span class="normal">316</span>
<span class="normal">317</span>
<span class="normal">318</span>
<span class="normal">319</span>
<span class="normal">320</span>
<span class="normal">321</span>
<span class="normal">322</span>
<span class="normal">323</span>
<span class="normal">324</span>
<span class="normal">325</span>
<span class="normal">326</span>
<span class="normal">327</span>
<span class="normal">328</span>
<span class="normal">329</span>
<span class="normal">330</span>
<span class="normal">331</span>
<span class="normal">332</span>
<span class="normal">333</span>
<span class="normal">334</span>
<span class="normal">335</span>
<span class="normal">336</span>
<span class="normal">337</span>
<span class="normal">338</span>
<span class="normal">339</span>
<span class="normal">340</span>
<span class="normal">341</span>
<span class="normal">342</span>
<span class="normal">343</span>
<span class="normal">344</span>
<span class="normal">345</span>
<span class="normal">346</span>
<span class="normal">347</span>
<span class="normal">348</span>
<span class="normal">349</span>
<span class="normal">350</span>
<span class="normal">351</span>
<span class="normal">352</span>
<span class="normal">353</span>
<span class="normal">354</span>
<span class="normal">355</span>
<span class="normal">356</span>
<span class="normal">357</span>
<span class="normal">358</span>
<span class="normal">359</span>
<span class="normal">360</span>
<span class="normal">361</span>
<span class="normal">362</span>
<span class="normal">363</span>
<span class="normal">364</span>
<span class="normal">365</span>
<span class="normal">366</span>
<span class="normal">367</span>
<span class="normal">368</span>
<span class="normal">369</span>
<span class="normal">370</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@ServiceFactory</span><span class="o">.</span><span class="n">register</span><span class="p">(</span><span class="n">ServiceType</span><span class="o">.</span><span class="n">SYSTEM_CONTROLLER</span><span class="p">)</span>
<span class="k">class</span><span class="w"> </span><span class="nc">SystemController</span><span class="p">(</span><span class="n">BaseControllerService</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;System Controller service.</span>

<span class="sd">    This service is responsible for managing the lifecycle of all other services.</span>
<span class="sd">    It will start, stop, and configure all other services.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">service_config</span><span class="p">:</span> <span class="n">ServiceConfig</span><span class="p">,</span> <span class="n">service_id</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">service_config</span><span class="o">=</span><span class="n">service_config</span><span class="p">,</span> <span class="n">service_id</span><span class="o">=</span><span class="n">service_id</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Creating System Controller&quot;</span><span class="p">)</span>

        <span class="c1"># List of required service types, in no particular order</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">required_service_types</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">ServiceType</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span>
            <span class="n">ServiceType</span><span class="o">.</span><span class="n">DATASET_MANAGER</span><span class="p">,</span>
            <span class="n">ServiceType</span><span class="o">.</span><span class="n">TIMING_MANAGER</span><span class="p">,</span>
            <span class="n">ServiceType</span><span class="o">.</span><span class="n">WORKER_MANAGER</span><span class="p">,</span>
            <span class="n">ServiceType</span><span class="o">.</span><span class="n">RECORDS_MANAGER</span><span class="p">,</span>
            <span class="n">ServiceType</span><span class="o">.</span><span class="n">POST_PROCESSOR_MANAGER</span><span class="p">,</span>
        <span class="p">]</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">service_manager</span><span class="p">:</span> <span class="n">BaseServiceManager</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;System Controller created&quot;</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">service_type</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ServiceType</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;The type of service.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">ServiceType</span><span class="o">.</span><span class="n">SYSTEM_CONTROLLER</span>

    <span class="nd">@on_init</span>
    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">_initialize</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Initialize system controller-specific components.</span>

<span class="sd">        This method will:</span>
<span class="sd">        - Initialize the service manager</span>
<span class="sd">        - Subscribe to relevant messages</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Initializing System Controller&quot;</span><span class="p">)</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">service_config</span><span class="o">.</span><span class="n">service_run_type</span> <span class="o">==</span> <span class="n">ServiceRunType</span><span class="o">.</span><span class="n">MULTIPROCESSING</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">service_manager</span> <span class="o">=</span> <span class="n">MultiProcessServiceManager</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">required_service_types</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">service_config</span>
            <span class="p">)</span>

        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">service_config</span><span class="o">.</span><span class="n">service_run_type</span> <span class="o">==</span> <span class="n">ServiceRunType</span><span class="o">.</span><span class="n">KUBERNETES</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">service_manager</span> <span class="o">=</span> <span class="n">KubernetesServiceManager</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">required_service_types</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">service_config</span>
            <span class="p">)</span>

        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">ConfigError</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Unsupported service run type: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">service_config</span><span class="o">.</span><span class="n">service_run_type</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="p">)</span>

        <span class="c1"># Subscribe to relevant messages</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">comms</span><span class="o">.</span><span class="n">subscribe</span><span class="p">(</span>
                <span class="n">topic</span><span class="o">=</span><span class="n">Topic</span><span class="o">.</span><span class="n">REGISTRATION</span><span class="p">,</span>
                <span class="n">callback</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_process_registration_message</span><span class="p">,</span>
            <span class="p">)</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">&quot;Failed to subscribe to registration topic: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">e</span><span class="p">)</span>
            <span class="k">raise</span> <span class="n">CommunicationSubscribeError</span> <span class="kn">from</span><span class="w"> </span><span class="nn">e</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">comms</span><span class="o">.</span><span class="n">subscribe</span><span class="p">(</span>
                <span class="n">topic</span><span class="o">=</span><span class="n">Topic</span><span class="o">.</span><span class="n">HEARTBEAT</span><span class="p">,</span>
                <span class="n">callback</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_process_heartbeat_message</span><span class="p">,</span>
            <span class="p">)</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">&quot;Failed to subscribe to heartbeat topic: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">e</span><span class="p">)</span>
            <span class="k">raise</span> <span class="n">CommunicationSubscribeError</span> <span class="kn">from</span><span class="w"> </span><span class="nn">e</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">comms</span><span class="o">.</span><span class="n">subscribe</span><span class="p">(</span>
                <span class="n">topic</span><span class="o">=</span><span class="n">Topic</span><span class="o">.</span><span class="n">STATUS</span><span class="p">,</span>
                <span class="n">callback</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_process_status_message</span><span class="p">,</span>
            <span class="p">)</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">&quot;Failed to subscribe to status topic: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">e</span><span class="p">)</span>
            <span class="k">raise</span> <span class="n">CommunicationSubscribeError</span> <span class="kn">from</span><span class="w"> </span><span class="nn">e</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span>
            <span class="s2">&quot;System controller waiting for 1 second to ensure that the &quot;</span>
            <span class="s2">&quot;communication is initialized&quot;</span>
        <span class="p">)</span>

        <span class="c1"># wait 1 second to ensure that the communication is initialized</span>
        <span class="k">await</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>

    <span class="nd">@on_start</span>
    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">_start</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Start the system controller and launch required services.</span>

<span class="sd">        This method will:</span>
<span class="sd">        - Initialize all required services</span>
<span class="sd">        - Wait for all required services to be registered</span>
<span class="sd">        - Start all required services</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Starting System Controller&quot;</span><span class="p">)</span>

        <span class="c1"># Start all required services</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">service_manager</span><span class="o">.</span><span class="n">initialize_all_services</span><span class="p">()</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">&quot;Failed to initialize all services: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">e</span><span class="p">)</span>
            <span class="k">raise</span> <span class="n">ServiceInitializationError</span> <span class="kn">from</span><span class="w"> </span><span class="nn">e</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="c1"># Wait for all required services to be registered</span>
            <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">service_manager</span><span class="o">.</span><span class="n">wait_for_all_services_registration</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">stop_event</span>
            <span class="p">)</span>

            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">stop_event</span><span class="o">.</span><span class="n">is_set</span><span class="p">():</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span>
                    <span class="s2">&quot;System Controller stopped before all services registered&quot;</span>
                <span class="p">)</span>
                <span class="k">return</span>  <span class="c1"># Don&#39;t continue with the rest of the initialization</span>

        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span>
                <span class="s2">&quot;Not all required services registered within the timeout period&quot;</span>
            <span class="p">)</span>
            <span class="k">raise</span> <span class="n">ServiceInitializationError</span><span class="p">(</span>
                <span class="s2">&quot;Not all required services registered within the timeout period&quot;</span>
            <span class="p">)</span> <span class="kn">from</span><span class="w"> </span><span class="nn">e</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;All required services registered successfully&quot;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;AIPerf System is READY&quot;</span><span class="p">)</span>
        <span class="c1"># Wait for all required services to be started</span>
        <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">start_all_services</span><span class="p">()</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">service_manager</span><span class="o">.</span><span class="n">wait_for_all_services_start</span><span class="p">()</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">&quot;Failed to wait for all services to start: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">e</span><span class="p">)</span>
            <span class="k">raise</span> <span class="n">ServiceInitializationError</span> <span class="kn">from</span><span class="w"> </span><span class="nn">e</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">stop_event</span><span class="o">.</span><span class="n">is_set</span><span class="p">():</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;System Controller stopped before all services started&quot;</span><span class="p">)</span>
            <span class="k">return</span>  <span class="c1"># Don&#39;t continue with the rest of the initialization</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;All required services started successfully&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;AIPerf System is RUNNING&quot;</span><span class="p">)</span>

    <span class="nd">@on_stop</span>
    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">_stop</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Stop the system controller and all running services.</span>

<span class="sd">        This method will:</span>
<span class="sd">        - Stop all running services</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Stopping System Controller&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;AIPerf System is SHUTTING DOWN&quot;</span><span class="p">)</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">service_manager</span><span class="o">.</span><span class="n">stop_all_services</span><span class="p">()</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">&quot;Failed to stop all services: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">e</span><span class="p">)</span>
            <span class="k">raise</span> <span class="n">ServiceStopError</span> <span class="kn">from</span><span class="w"> </span><span class="nn">e</span>

    <span class="nd">@on_cleanup</span>
    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">_cleanup</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Clean up system controller-specific components.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Cleaning up System Controller&quot;</span><span class="p">)</span>
        <span class="c1"># TODO: Additional cleanup if needed</span>

    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">start_all_services</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Start all required services.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Starting services&quot;</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">service_info</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">service_manager</span><span class="o">.</span><span class="n">service_id_map</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
            <span class="k">if</span> <span class="n">service_info</span><span class="o">.</span><span class="n">state</span> <span class="o">==</span> <span class="n">ServiceState</span><span class="o">.</span><span class="n">READY</span><span class="p">:</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">send_command_to_service</span><span class="p">(</span>
                        <span class="n">target_service_id</span><span class="o">=</span><span class="n">service_info</span><span class="o">.</span><span class="n">service_id</span><span class="p">,</span>
                        <span class="n">command</span><span class="o">=</span><span class="n">CommandType</span><span class="o">.</span><span class="n">PROFILE_START</span><span class="p">,</span>
                    <span class="p">)</span>

                <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;Failed to start service: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">e</span><span class="p">)</span>
                    <span class="c1"># Continue to the next service</span>
                    <span class="c1"># TODO: should we have some sort of retries?</span>
                    <span class="k">continue</span>

    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">_process_registration_message</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">message</span><span class="p">:</span> <span class="n">RegistrationMessage</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Process a registration message from a service. It will</span>
<span class="sd">        add the service to the service manager and send a configure command</span>
<span class="sd">        to the service.</span>

<span class="sd">        Args:</span>
<span class="sd">            message: The registration message to process</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">service_id</span> <span class="o">=</span> <span class="n">message</span><span class="o">.</span><span class="n">service_id</span>
        <span class="n">service_type</span> <span class="o">=</span> <span class="n">message</span><span class="o">.</span><span class="n">service_type</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;Processing registration from </span><span class="si">{</span><span class="n">service_type</span><span class="si">}</span><span class="s2"> with ID: </span><span class="si">{</span><span class="n">service_id</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="p">)</span>

        <span class="n">service_info</span> <span class="o">=</span> <span class="n">ServiceRunInfo</span><span class="p">(</span>
            <span class="n">registration_status</span><span class="o">=</span><span class="n">ServiceRegistrationStatus</span><span class="o">.</span><span class="n">REGISTERED</span><span class="p">,</span>
            <span class="n">service_type</span><span class="o">=</span><span class="n">service_type</span><span class="p">,</span>
            <span class="n">service_id</span><span class="o">=</span><span class="n">service_id</span><span class="p">,</span>
            <span class="n">first_seen</span><span class="o">=</span><span class="n">time</span><span class="o">.</span><span class="n">time_ns</span><span class="p">(),</span>
            <span class="n">state</span><span class="o">=</span><span class="n">ServiceState</span><span class="o">.</span><span class="n">READY</span><span class="p">,</span>
            <span class="n">last_seen</span><span class="o">=</span><span class="n">time</span><span class="o">.</span><span class="n">time_ns</span><span class="p">(),</span>
        <span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">service_manager</span><span class="o">.</span><span class="n">service_id_map</span><span class="p">[</span><span class="n">service_id</span><span class="p">]</span> <span class="o">=</span> <span class="n">service_info</span>
        <span class="k">if</span> <span class="n">service_type</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">service_manager</span><span class="o">.</span><span class="n">service_map</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">service_manager</span><span class="o">.</span><span class="n">service_map</span><span class="p">[</span><span class="n">service_type</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">service_manager</span><span class="o">.</span><span class="n">service_map</span><span class="p">[</span><span class="n">service_type</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">service_info</span><span class="p">)</span>

        <span class="n">is_required</span> <span class="o">=</span> <span class="n">service_type</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">required_service_types</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;Registered </span><span class="si">{</span><span class="s1">&#39;required&#39;</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="n">is_required</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="s1">&#39;non-required&#39;</span><span class="si">}</span><span class="s2"> &quot;</span>
            <span class="sa">f</span><span class="s2">&quot;service: </span><span class="si">{</span><span class="n">service_type</span><span class="si">}</span><span class="s2"> with ID: </span><span class="si">{</span><span class="n">service_id</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="p">)</span>

        <span class="c1"># Send configure command to the newly registered service</span>
        <span class="c1"># TODO: Retrieve the configuration to send to the service</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">send_command_to_service</span><span class="p">(</span>
                <span class="n">target_service_id</span><span class="o">=</span><span class="n">service_id</span><span class="p">,</span>
                <span class="n">command</span><span class="o">=</span><span class="n">CommandType</span><span class="o">.</span><span class="n">PROFILE_CONFIGURE</span><span class="p">,</span>
                <span class="n">data</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
            <span class="p">)</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Failed to send configure command to </span><span class="si">{</span><span class="n">service_type</span><span class="si">}</span><span class="s2"> (ID: </span><span class="si">{</span><span class="n">service_id</span><span class="si">}</span><span class="s2">): </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="p">)</span>
            <span class="k">raise</span> <span class="n">ServiceConfigureError</span> <span class="kn">from</span><span class="w"> </span><span class="nn">e</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;Sent configure command to </span><span class="si">{</span><span class="n">service_type</span><span class="si">}</span><span class="s2"> (ID: </span><span class="si">{</span><span class="n">service_id</span><span class="si">}</span><span class="s2">)&quot;</span>
        <span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">_process_heartbeat_message</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">message</span><span class="p">:</span> <span class="n">HeartbeatMessage</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Process a heartbeat message from a service. It will</span>
<span class="sd">        update the last seen timestamp and state of the service.</span>

<span class="sd">        Args:</span>
<span class="sd">            message: The heartbeat message to process</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">service_id</span> <span class="o">=</span> <span class="n">message</span><span class="o">.</span><span class="n">service_id</span>
        <span class="n">service_type</span> <span class="o">=</span> <span class="n">message</span><span class="o">.</span><span class="n">service_type</span>
        <span class="n">timestamp</span> <span class="o">=</span> <span class="n">message</span><span class="o">.</span><span class="n">request_ns</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Received heartbeat from </span><span class="si">{</span><span class="n">service_type</span><span class="si">}</span><span class="s2"> (ID: </span><span class="si">{</span><span class="n">service_id</span><span class="si">}</span><span class="s2">)&quot;</span><span class="p">)</span>

        <span class="c1"># Update the last heartbeat timestamp if the component exists</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">service_info</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">service_manager</span><span class="o">.</span><span class="n">service_id_map</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">service_id</span><span class="p">)</span>
            <span class="n">service_info</span><span class="o">.</span><span class="n">last_seen</span> <span class="o">=</span> <span class="n">timestamp</span>
            <span class="n">service_info</span><span class="o">.</span><span class="n">state</span> <span class="o">=</span> <span class="n">message</span><span class="o">.</span><span class="n">state</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Updated heartbeat for </span><span class="si">{</span><span class="n">service_id</span><span class="si">}</span><span class="s2"> to </span><span class="si">{</span><span class="n">timestamp</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Received heartbeat from unknown service: </span><span class="si">{</span><span class="n">service_id</span><span class="si">}</span><span class="s2"> (</span><span class="si">{</span><span class="n">service_type</span><span class="si">}</span><span class="s2">)&quot;</span>
            <span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">_process_status_message</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">message</span><span class="p">:</span> <span class="n">StatusMessage</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Process a status message from a service. It will</span>
<span class="sd">        update the state of the service with the service manager.</span>

<span class="sd">        Args:</span>
<span class="sd">            message: The status message to process</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">service_id</span> <span class="o">=</span> <span class="n">message</span><span class="o">.</span><span class="n">service_id</span>
        <span class="n">service_type</span> <span class="o">=</span> <span class="n">message</span><span class="o">.</span><span class="n">service_type</span>
        <span class="n">state</span> <span class="o">=</span> <span class="n">message</span><span class="o">.</span><span class="n">state</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;Received status update from </span><span class="si">{</span><span class="n">service_type</span><span class="si">}</span><span class="s2"> (ID: </span><span class="si">{</span><span class="n">service_id</span><span class="si">}</span><span class="s2">): </span><span class="si">{</span><span class="n">state</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="p">)</span>

        <span class="c1"># Update the component state if the component exists</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">service_info</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">service_manager</span><span class="o">.</span><span class="n">service_id_map</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">service_id</span><span class="p">)</span>
            <span class="n">service_info</span><span class="o">.</span><span class="n">state</span> <span class="o">=</span> <span class="n">message</span><span class="o">.</span><span class="n">state</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Updated state for </span><span class="si">{</span><span class="n">service_id</span><span class="si">}</span><span class="s2"> to </span><span class="si">{</span><span class="n">state</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Received status update from un-registered service: </span><span class="si">{</span><span class="n">service_id</span><span class="si">}</span><span class="s2"> (</span><span class="si">{</span><span class="n">service_type</span><span class="si">}</span><span class="s2">)&quot;</span>
            <span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">send_command_to_service</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">target_service_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">command</span><span class="p">:</span> <span class="n">CommandType</span><span class="p">,</span>
        <span class="n">data</span><span class="p">:</span> <span class="n">Any</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Send a command to a specific service.</span>

<span class="sd">        Args:</span>
<span class="sd">            target_service_id: ID of the target service</span>
<span class="sd">            command: The command to send (from CommandType enum).</span>
<span class="sd">            data: Optional data to send with the command.</span>

<span class="sd">        Raises:</span>
<span class="sd">            CommunicationNotInitializedError if the communication is not initialized</span>
<span class="sd">            CommunicationPublishError if the command was not sent successfully</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_comms</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">&quot;Cannot send command: Communication is not initialized&quot;</span><span class="p">)</span>
            <span class="k">raise</span> <span class="n">CommunicationNotInitializedError</span><span class="p">()</span>

        <span class="c1"># Create command message using the helper method</span>
        <span class="n">command_message</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">create_command_message</span><span class="p">(</span>
            <span class="n">command</span><span class="o">=</span><span class="n">command</span><span class="p">,</span>
            <span class="n">target_service_id</span><span class="o">=</span><span class="n">target_service_id</span><span class="p">,</span>
            <span class="n">data</span><span class="o">=</span><span class="n">data</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="c1"># Publish command message</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">comms</span><span class="o">.</span><span class="n">publish</span><span class="p">(</span>
                <span class="n">topic</span><span class="o">=</span><span class="n">Topic</span><span class="o">.</span><span class="n">COMMAND</span><span class="p">,</span>
                <span class="n">message</span><span class="o">=</span><span class="n">command_message</span><span class="p">,</span>
            <span class="p">)</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">&quot;Exception publishing command: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">e</span><span class="p">)</span>
            <span class="k">raise</span> <span class="n">CommunicationPublishError</span> <span class="kn">from</span><span class="w"> </span><span class="nn">e</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">







<div class="doc doc-object doc-attribute">



<h3 id="aiperf.services.system_controller.system_controller.SystemController.service_type" class="doc doc-heading">
            <code class=" language-python"><span class="n">service_type</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

<a href="#aiperf.services.system_controller.system_controller.SystemController.service_type" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>The type of service.</p>

    </div>

</div>



<div class="doc doc-object doc-function">


<h3 id="aiperf.services.system_controller.system_controller.SystemController.send_command_to_service" class="doc doc-heading">
            <code class=" language-python"><span class="n">send_command_to_service</span><span class="p">(</span><span class="n">target_service_id</span><span class="p">,</span> <span class="n">command</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#aiperf.services.system_controller.system_controller.SystemController.send_command_to_service" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Send a command to a specific service.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>target_service_id</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>ID of the target service</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>command</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="CommandType (aiperf.common.enums.CommandType)" href="#aiperf.common.enums.CommandType">CommandType</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The command to send (from CommandType enum).</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>data</code>
            </td>
            <td>
                  <code><span title="typing.Any">Any</span> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Optional data to send with the command.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>aiperf/services/system_controller/system_controller.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">334</span>
<span class="normal">335</span>
<span class="normal">336</span>
<span class="normal">337</span>
<span class="normal">338</span>
<span class="normal">339</span>
<span class="normal">340</span>
<span class="normal">341</span>
<span class="normal">342</span>
<span class="normal">343</span>
<span class="normal">344</span>
<span class="normal">345</span>
<span class="normal">346</span>
<span class="normal">347</span>
<span class="normal">348</span>
<span class="normal">349</span>
<span class="normal">350</span>
<span class="normal">351</span>
<span class="normal">352</span>
<span class="normal">353</span>
<span class="normal">354</span>
<span class="normal">355</span>
<span class="normal">356</span>
<span class="normal">357</span>
<span class="normal">358</span>
<span class="normal">359</span>
<span class="normal">360</span>
<span class="normal">361</span>
<span class="normal">362</span>
<span class="normal">363</span>
<span class="normal">364</span>
<span class="normal">365</span>
<span class="normal">366</span>
<span class="normal">367</span>
<span class="normal">368</span>
<span class="normal">369</span>
<span class="normal">370</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">send_command_to_service</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">target_service_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">command</span><span class="p">:</span> <span class="n">CommandType</span><span class="p">,</span>
    <span class="n">data</span><span class="p">:</span> <span class="n">Any</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Send a command to a specific service.</span>

<span class="sd">    Args:</span>
<span class="sd">        target_service_id: ID of the target service</span>
<span class="sd">        command: The command to send (from CommandType enum).</span>
<span class="sd">        data: Optional data to send with the command.</span>

<span class="sd">    Raises:</span>
<span class="sd">        CommunicationNotInitializedError if the communication is not initialized</span>
<span class="sd">        CommunicationPublishError if the command was not sent successfully</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_comms</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">&quot;Cannot send command: Communication is not initialized&quot;</span><span class="p">)</span>
        <span class="k">raise</span> <span class="n">CommunicationNotInitializedError</span><span class="p">()</span>

    <span class="c1"># Create command message using the helper method</span>
    <span class="n">command_message</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">create_command_message</span><span class="p">(</span>
        <span class="n">command</span><span class="o">=</span><span class="n">command</span><span class="p">,</span>
        <span class="n">target_service_id</span><span class="o">=</span><span class="n">target_service_id</span><span class="p">,</span>
        <span class="n">data</span><span class="o">=</span><span class="n">data</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="c1"># Publish command message</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">comms</span><span class="o">.</span><span class="n">publish</span><span class="p">(</span>
            <span class="n">topic</span><span class="o">=</span><span class="n">Topic</span><span class="o">.</span><span class="n">COMMAND</span><span class="p">,</span>
            <span class="n">message</span><span class="o">=</span><span class="n">command_message</span><span class="p">,</span>
        <span class="p">)</span>
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">&quot;Exception publishing command: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">e</span><span class="p">)</span>
        <span class="k">raise</span> <span class="n">CommunicationPublishError</span> <span class="kn">from</span><span class="w"> </span><span class="nn">e</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="aiperf.services.system_controller.system_controller.SystemController.start_all_services" class="doc doc-heading">
            <code class=" language-python"><span class="n">start_all_services</span><span class="p">()</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#aiperf.services.system_controller.system_controller.SystemController.start_all_services" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Start all required services.</p>


            <details class="quote">
              <summary>Source code in <code>aiperf/services/system_controller/system_controller.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">start_all_services</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Start all required services.&quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Starting services&quot;</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">service_info</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">service_manager</span><span class="o">.</span><span class="n">service_id_map</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
        <span class="k">if</span> <span class="n">service_info</span><span class="o">.</span><span class="n">state</span> <span class="o">==</span> <span class="n">ServiceState</span><span class="o">.</span><span class="n">READY</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">send_command_to_service</span><span class="p">(</span>
                    <span class="n">target_service_id</span><span class="o">=</span><span class="n">service_info</span><span class="o">.</span><span class="n">service_id</span><span class="p">,</span>
                    <span class="n">command</span><span class="o">=</span><span class="n">CommandType</span><span class="o">.</span><span class="n">PROFILE_START</span><span class="p">,</span>
                <span class="p">)</span>

            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;Failed to start service: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">e</span><span class="p">)</span>
                <span class="c1"># Continue to the next service</span>
                <span class="c1"># TODO: should we have some sort of retries?</span>
                <span class="k">continue</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>


<div class="doc doc-object doc-function">


<h2 id="aiperf.services.system_controller.system_controller.main" class="doc doc-heading">
            <code class=" language-python"><span class="n">main</span><span class="p">()</span></code>

<a href="#aiperf.services.system_controller.system_controller.main" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">

        <p>Main entry point for the system controller.</p>


            <details class="quote">
              <summary>Source code in <code>aiperf/services/system_controller/system_controller.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">373</span>
<span class="normal">374</span>
<span class="normal">375</span>
<span class="normal">376</span>
<span class="normal">377</span>
<span class="normal">378</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">main</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Main entry point for the system controller.&quot;&quot;&quot;</span>

    <span class="kn">from</span><span class="w"> </span><span class="nn">aiperf.common.bootstrap</span><span class="w"> </span><span class="kn">import</span> <span class="n">bootstrap_and_run_service</span>

    <span class="n">bootstrap_and_run_service</span><span class="p">(</span><span class="n">SystemController</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div><h2 id="aiperfservicestiming_managertiming_manager">aiperf.services.timing_manager.timing_manager<a class="headerlink" href="#aiperfservicestiming_managertiming_manager" title="Permanent link">&para;</a></h2>


<div class="doc doc-object doc-module">



<a id="aiperf.services.timing_manager.timing_manager"></a>
    <div class="doc doc-contents first">









  <div class="doc doc-children">








<div class="doc doc-object doc-class">



<h2 id="aiperf.services.timing_manager.timing_manager.TimingManager" class="doc doc-heading">
            <code>TimingManager</code>


<a href="#aiperf.services.timing_manager.timing_manager.TimingManager" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="BaseComponentService (aiperf.common.service.base_component_service.BaseComponentService)" href="#aiperf.common.service.base_component_service.BaseComponentService">BaseComponentService</a></code></p>


        <p>The TimingManager service is responsible to generate the schedule and issuing
timing credits for requests.</p>







              <details class="quote">
                <summary>Source code in <code>aiperf/services/timing_manager/timing_manager.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 21</span>
<span class="normal"> 22</span>
<span class="normal"> 23</span>
<span class="normal"> 24</span>
<span class="normal"> 25</span>
<span class="normal"> 26</span>
<span class="normal"> 27</span>
<span class="normal"> 28</span>
<span class="normal"> 29</span>
<span class="normal"> 30</span>
<span class="normal"> 31</span>
<span class="normal"> 32</span>
<span class="normal"> 33</span>
<span class="normal"> 34</span>
<span class="normal"> 35</span>
<span class="normal"> 36</span>
<span class="normal"> 37</span>
<span class="normal"> 38</span>
<span class="normal"> 39</span>
<span class="normal"> 40</span>
<span class="normal"> 41</span>
<span class="normal"> 42</span>
<span class="normal"> 43</span>
<span class="normal"> 44</span>
<span class="normal"> 45</span>
<span class="normal"> 46</span>
<span class="normal"> 47</span>
<span class="normal"> 48</span>
<span class="normal"> 49</span>
<span class="normal"> 50</span>
<span class="normal"> 51</span>
<span class="normal"> 52</span>
<span class="normal"> 53</span>
<span class="normal"> 54</span>
<span class="normal"> 55</span>
<span class="normal"> 56</span>
<span class="normal"> 57</span>
<span class="normal"> 58</span>
<span class="normal"> 59</span>
<span class="normal"> 60</span>
<span class="normal"> 61</span>
<span class="normal"> 62</span>
<span class="normal"> 63</span>
<span class="normal"> 64</span>
<span class="normal"> 65</span>
<span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@ServiceFactory</span><span class="o">.</span><span class="n">register</span><span class="p">(</span><span class="n">ServiceType</span><span class="o">.</span><span class="n">TIMING_MANAGER</span><span class="p">)</span>
<span class="k">class</span><span class="w"> </span><span class="nc">TimingManager</span><span class="p">(</span><span class="n">BaseComponentService</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    The TimingManager service is responsible to generate the schedule and issuing</span>
<span class="sd">    timing credits for requests.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">service_config</span><span class="p">:</span> <span class="n">ServiceConfig</span><span class="p">,</span> <span class="n">service_id</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">service_config</span><span class="o">=</span><span class="n">service_config</span><span class="p">,</span> <span class="n">service_id</span><span class="o">=</span><span class="n">service_id</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_credit_lock</span> <span class="o">=</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">Lock</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_credits_available</span> <span class="o">=</span> <span class="mi">100</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Initializing timing manager&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_credit_drop_task</span><span class="p">:</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">Task</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">service_type</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ServiceType</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;The type of service.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">ServiceType</span><span class="o">.</span><span class="n">TIMING_MANAGER</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">required_clients</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="n">ClientType</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;The communication clients required by the service.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="p">[</span>
            <span class="o">*</span><span class="p">(</span><span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">required_clients</span> <span class="ow">or</span> <span class="p">[]),</span>
            <span class="n">PullClientType</span><span class="o">.</span><span class="n">CREDIT_RETURN</span><span class="p">,</span>
            <span class="n">PushClientType</span><span class="o">.</span><span class="n">CREDIT_DROP</span><span class="p">,</span>
        <span class="p">]</span>

    <span class="nd">@on_init</span>
    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">_initialize</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Initialize timing manager-specific components.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Initializing timing manager&quot;</span><span class="p">)</span>
        <span class="c1"># TODO: Implement timing manager initialization</span>

    <span class="nd">@on_configure</span>
    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">_configure</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">message</span><span class="p">:</span> <span class="n">Message</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Configure the timing manager.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Configuring timing manager with message: </span><span class="si">{</span><span class="n">message</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="c1"># TODO: Implement timing manager configuration</span>

    <span class="nd">@on_start</span>
    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">_start</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Start the timing manager.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Starting timing manager&quot;</span><span class="p">)</span>
        <span class="c1"># TODO: Implement timing manager start</span>
        <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">comms</span><span class="o">.</span><span class="n">register_pull_callback</span><span class="p">(</span>
            <span class="n">message_type</span><span class="o">=</span><span class="n">MessageType</span><span class="o">.</span><span class="n">CREDIT_RETURN</span><span class="p">,</span>
            <span class="n">callback</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_on_credit_return</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">set_state</span><span class="p">(</span><span class="n">ServiceState</span><span class="o">.</span><span class="n">RUNNING</span><span class="p">)</span>
        <span class="k">await</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_credit_drop_task</span> <span class="o">=</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">create_task</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_issue_credit_drops</span><span class="p">())</span>

    <span class="nd">@on_stop</span>
    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">_stop</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Stop the timing manager.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Stopping timing manager&quot;</span><span class="p">)</span>
        <span class="c1"># TODO: Implement timing manager stop</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_credit_drop_task</span> <span class="ow">and</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_credit_drop_task</span><span class="o">.</span><span class="n">done</span><span class="p">():</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_credit_drop_task</span><span class="o">.</span><span class="n">cancel</span><span class="p">()</span>
            <span class="k">with</span> <span class="n">contextlib</span><span class="o">.</span><span class="n">suppress</span><span class="p">(</span><span class="n">asyncio</span><span class="o">.</span><span class="n">CancelledError</span><span class="p">):</span>
                <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_credit_drop_task</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_credit_drop_task</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="nd">@on_cleanup</span>
    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">_cleanup</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Clean up timing manager-specific components.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Cleaning up timing manager&quot;</span><span class="p">)</span>
        <span class="c1"># TODO: Implement timing manager cleanup</span>

    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">_issue_credit_drops</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Issue credit drops to workers.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Issuing credit drops to workers&quot;</span><span class="p">)</span>
        <span class="c1"># TODO: Actually implement real credit drop logic</span>
        <span class="k">while</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">stop_event</span><span class="o">.</span><span class="n">is_set</span><span class="p">():</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="k">await</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mf">0.1</span><span class="p">)</span>

                <span class="k">async</span> <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">_credit_lock</span><span class="p">:</span>
                    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_credits_available</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="p">:</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span>
                            <span class="s2">&quot;No credits available, skipping credit drop&quot;</span>
                        <span class="p">)</span>
                        <span class="k">continue</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Issuing credit drop&quot;</span><span class="p">)</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_credits_available</span> <span class="o">-=</span> <span class="mi">1</span>

                <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">comms</span><span class="o">.</span><span class="n">push</span><span class="p">(</span>
                    <span class="n">topic</span><span class="o">=</span><span class="n">Topic</span><span class="o">.</span><span class="n">CREDIT_DROP</span><span class="p">,</span>
                    <span class="n">message</span><span class="o">=</span><span class="n">CreditDropMessage</span><span class="p">(</span>
                        <span class="n">service_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">service_id</span><span class="p">,</span>
                        <span class="n">amount</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
                        <span class="n">credit_drop_ns</span><span class="o">=</span><span class="n">time</span><span class="o">.</span><span class="n">time_ns</span><span class="p">(),</span>
                    <span class="p">),</span>
                <span class="p">)</span>
            <span class="k">except</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">CancelledError</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Credit drop task cancelled&quot;</span><span class="p">)</span>
                <span class="k">break</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Exception issuing credit drop: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
                <span class="k">await</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mf">0.1</span><span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">_on_credit_return</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">message</span><span class="p">:</span> <span class="n">CreditReturnMessage</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Process a credit return message.</span>

<span class="sd">        Args:</span>
<span class="sd">            message: The credit return message received from the pull request</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Processing credit return: </span><span class="si">{</span><span class="n">message</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">async</span> <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">_credit_lock</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_credits_available</span> <span class="o">+=</span> <span class="n">message</span><span class="o">.</span><span class="n">amount</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">







<div class="doc doc-object doc-attribute">



<h3 id="aiperf.services.timing_manager.timing_manager.TimingManager.required_clients" class="doc doc-heading">
            <code class=" language-python"><span class="n">required_clients</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

<a href="#aiperf.services.timing_manager.timing_manager.TimingManager.required_clients" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>The communication clients required by the service.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="aiperf.services.timing_manager.timing_manager.TimingManager.service_type" class="doc doc-heading">
            <code class=" language-python"><span class="n">service_type</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

<a href="#aiperf.services.timing_manager.timing_manager.TimingManager.service_type" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>The type of service.</p>

    </div>

</div>





  </div>

    </div>

</div>


<div class="doc doc-object doc-function">


<h2 id="aiperf.services.timing_manager.timing_manager.main" class="doc doc-heading">
            <code class=" language-python"><span class="n">main</span><span class="p">()</span></code>

<a href="#aiperf.services.timing_manager.timing_manager.main" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">

        <p>Main entry point for the timing manager.</p>


            <details class="quote">
              <summary>Source code in <code>aiperf/services/timing_manager/timing_manager.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">main</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Main entry point for the timing manager.&quot;&quot;&quot;</span>
    <span class="kn">from</span><span class="w"> </span><span class="nn">aiperf.common.bootstrap</span><span class="w"> </span><span class="kn">import</span> <span class="n">bootstrap_and_run_service</span>

    <span class="n">bootstrap_and_run_service</span><span class="p">(</span><span class="n">TimingManager</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div><h2 id="aiperfservicesworkerworker">aiperf.services.worker.worker<a class="headerlink" href="#aiperfservicesworkerworker" title="Permanent link">&para;</a></h2>


<div class="doc doc-object doc-module">



<a id="aiperf.services.worker.worker"></a>
    <div class="doc doc-contents first">









  <div class="doc doc-children">








<div class="doc doc-object doc-class">



<h2 id="aiperf.services.worker.worker.Worker" class="doc doc-heading">
            <code>Worker</code>


<a href="#aiperf.services.worker.worker.Worker" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="BaseService (aiperf.common.service.base_service.BaseService)" href="#aiperf.common.service.base_service.BaseService">BaseService</a></code></p>


        <p>Worker is primarily responsible for converting the data into the appropriate
format for the interface being used by the server. Also responsible for managing
the conversation between turns.</p>







              <details class="quote">
                <summary>Source code in <code>aiperf/services/worker/worker.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span>
<span class="normal">71</span>
<span class="normal">72</span>
<span class="normal">73</span>
<span class="normal">74</span>
<span class="normal">75</span>
<span class="normal">76</span>
<span class="normal">77</span>
<span class="normal">78</span>
<span class="normal">79</span>
<span class="normal">80</span>
<span class="normal">81</span>
<span class="normal">82</span>
<span class="normal">83</span>
<span class="normal">84</span>
<span class="normal">85</span>
<span class="normal">86</span>
<span class="normal">87</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">Worker</span><span class="p">(</span><span class="n">BaseService</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Worker is primarily responsible for converting the data into the appropriate</span>
<span class="sd">    format for the interface being used by the server. Also responsible for managing</span>
<span class="sd">    the conversation between turns.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">service_config</span><span class="p">:</span> <span class="n">ServiceConfig</span><span class="p">,</span> <span class="n">service_id</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">service_config</span><span class="o">=</span><span class="n">service_config</span><span class="p">,</span> <span class="n">service_id</span><span class="o">=</span><span class="n">service_id</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Initializing worker&quot;</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">service_type</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ServiceType</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;The type of service.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">ServiceType</span><span class="o">.</span><span class="n">WORKER</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">required_clients</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="n">ClientType</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;The communication clients required by the service.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="p">[</span>
            <span class="o">*</span><span class="p">(</span><span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">required_clients</span> <span class="ow">or</span> <span class="p">[]),</span>
            <span class="n">PullClientType</span><span class="o">.</span><span class="n">CREDIT_DROP</span><span class="p">,</span>
            <span class="n">PushClientType</span><span class="o">.</span><span class="n">CREDIT_RETURN</span><span class="p">,</span>
        <span class="p">]</span>

    <span class="nd">@on_init</span>
    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">_initialize</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Initialize worker-specific components.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Initializing worker&quot;</span><span class="p">)</span>

    <span class="nd">@on_run</span>
    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">_run</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Automatically start the worker in the run method.&quot;&quot;&quot;</span>
        <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>

    <span class="nd">@on_start</span>
    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">_start</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Start the worker.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Starting worker&quot;</span><span class="p">)</span>
        <span class="c1"># Subscribe to the credit drop topic</span>
        <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">comms</span><span class="o">.</span><span class="n">register_pull_callback</span><span class="p">(</span>
            <span class="n">message_type</span><span class="o">=</span><span class="n">Topic</span><span class="o">.</span><span class="n">CREDIT_DROP</span><span class="p">,</span>
            <span class="n">callback</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_process_credit_drop</span><span class="p">,</span>
        <span class="p">)</span>

    <span class="nd">@on_stop</span>
    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">_stop</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Stop the worker.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Stopping worker&quot;</span><span class="p">)</span>

    <span class="nd">@on_cleanup</span>
    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">_cleanup</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Clean up worker-specific components.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Cleaning up worker&quot;</span><span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">_process_credit_drop</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">message</span><span class="p">:</span> <span class="n">CreditDropMessage</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Process a credit drop response.</span>

<span class="sd">        Args:</span>
<span class="sd">            message: The message received from the credit drop</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Processing credit drop: </span><span class="si">{</span><span class="n">message</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="c1"># TODO: Implement actual worker logic</span>
        <span class="k">await</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>  <span class="c1"># Simulate some processing time</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Returning credits&quot;</span><span class="p">)</span>
        <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">comms</span><span class="o">.</span><span class="n">push</span><span class="p">(</span>
            <span class="n">topic</span><span class="o">=</span><span class="n">Topic</span><span class="o">.</span><span class="n">CREDIT_RETURN</span><span class="p">,</span>
            <span class="n">message</span><span class="o">=</span><span class="n">CreditReturnMessage</span><span class="p">(</span>
                <span class="n">service_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">service_id</span><span class="p">,</span>
                <span class="n">amount</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
            <span class="p">),</span>
        <span class="p">)</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">







<div class="doc doc-object doc-attribute">



<h3 id="aiperf.services.worker.worker.Worker.required_clients" class="doc doc-heading">
            <code class=" language-python"><span class="n">required_clients</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

<a href="#aiperf.services.worker.worker.Worker.required_clients" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>The communication clients required by the service.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="aiperf.services.worker.worker.Worker.service_type" class="doc doc-heading">
            <code class=" language-python"><span class="n">service_type</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

<a href="#aiperf.services.worker.worker.Worker.service_type" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>The type of service.</p>

    </div>

</div>





  </div>

    </div>

</div>


<div class="doc doc-object doc-function">


<h2 id="aiperf.services.worker.worker.main" class="doc doc-heading">
            <code class=" language-python"><span class="n">main</span><span class="p">()</span></code>

<a href="#aiperf.services.worker.worker.main" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">

        <p>Main entry point for the worker.</p>


            <details class="quote">
              <summary>Source code in <code>aiperf/services/worker/worker.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">main</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Main entry point for the worker.&quot;&quot;&quot;</span>

    <span class="kn">import</span><span class="w"> </span><span class="nn">uvloop</span>

    <span class="kn">from</span><span class="w"> </span><span class="nn">aiperf.common.config.loader</span><span class="w"> </span><span class="kn">import</span> <span class="n">load_service_config</span>

    <span class="c1"># Load the service configuration</span>
    <span class="n">cfg</span> <span class="o">=</span> <span class="n">load_service_config</span><span class="p">()</span>

    <span class="c1"># Create and run the worker</span>
    <span class="n">worker</span> <span class="o">=</span> <span class="n">Worker</span><span class="p">(</span><span class="n">cfg</span><span class="p">)</span>
    <span class="n">uvloop</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">worker</span><span class="o">.</span><span class="n">run_forever</span><span class="p">())</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div><h2 id="aiperfservicesworker_managerworker_manager">aiperf.services.worker_manager.worker_manager<a class="headerlink" href="#aiperfservicesworker_managerworker_manager" title="Permanent link">&para;</a></h2>


<div class="doc doc-object doc-module">



<a id="aiperf.services.worker_manager.worker_manager"></a>
    <div class="doc doc-contents first">









  <div class="doc doc-children">








<div class="doc doc-object doc-class">



<h2 id="aiperf.services.worker_manager.worker_manager.WorkerManager" class="doc doc-heading">
            <code>WorkerManager</code>


<a href="#aiperf.services.worker_manager.worker_manager.WorkerManager" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="BaseComponentService (aiperf.common.service.base_component_service.BaseComponentService)" href="#aiperf.common.service.base_component_service.BaseComponentService">BaseComponentService</a></code></p>


        <p>The WorkerManager service is primary responsibility is to pull data from the dataset manager
after receiving the timing credit from the timing manager. It will then push the request data
to the worker to issue to the request.</p>







              <details class="quote">
                <summary>Source code in <code>aiperf/services/worker_manager/worker_manager.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 34</span>
<span class="normal"> 35</span>
<span class="normal"> 36</span>
<span class="normal"> 37</span>
<span class="normal"> 38</span>
<span class="normal"> 39</span>
<span class="normal"> 40</span>
<span class="normal"> 41</span>
<span class="normal"> 42</span>
<span class="normal"> 43</span>
<span class="normal"> 44</span>
<span class="normal"> 45</span>
<span class="normal"> 46</span>
<span class="normal"> 47</span>
<span class="normal"> 48</span>
<span class="normal"> 49</span>
<span class="normal"> 50</span>
<span class="normal"> 51</span>
<span class="normal"> 52</span>
<span class="normal"> 53</span>
<span class="normal"> 54</span>
<span class="normal"> 55</span>
<span class="normal"> 56</span>
<span class="normal"> 57</span>
<span class="normal"> 58</span>
<span class="normal"> 59</span>
<span class="normal"> 60</span>
<span class="normal"> 61</span>
<span class="normal"> 62</span>
<span class="normal"> 63</span>
<span class="normal"> 64</span>
<span class="normal"> 65</span>
<span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@ServiceFactory</span><span class="o">.</span><span class="n">register</span><span class="p">(</span><span class="n">ServiceType</span><span class="o">.</span><span class="n">WORKER_MANAGER</span><span class="p">)</span>
<span class="k">class</span><span class="w"> </span><span class="nc">WorkerManager</span><span class="p">(</span><span class="n">BaseComponentService</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    The WorkerManager service is primary responsibility is to pull data from the dataset manager</span>
<span class="sd">    after receiving the timing credit from the timing manager. It will then push the request data</span>
<span class="sd">    to the worker to issue to the request.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">service_config</span><span class="p">:</span> <span class="n">ServiceConfig</span><span class="p">,</span> <span class="n">service_id</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">service_config</span><span class="o">=</span><span class="n">service_config</span><span class="p">,</span> <span class="n">service_id</span><span class="o">=</span><span class="n">service_id</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Initializing worker manager&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">workers</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">WorkerProcess</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="c1"># TODO: Need to implement some sort of max workers</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cpu_count</span> <span class="o">=</span> <span class="n">multiprocessing</span><span class="o">.</span><span class="n">cpu_count</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">worker_count</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">cpu_count</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;Detected </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">cpu_count</span><span class="si">}</span><span class="s2"> CPU threads. Spawning </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">worker_count</span><span class="si">}</span><span class="s2"> workers&quot;</span>
        <span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">service_type</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ServiceType</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;The type of service.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">ServiceType</span><span class="o">.</span><span class="n">WORKER_MANAGER</span>

    <span class="nd">@on_init</span>
    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">_initialize</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Initialize worker manager-specific components.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Initializing worker manager&quot;</span><span class="p">)</span>

    <span class="nd">@on_start</span>
    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">_start</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Start the worker manager.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Starting worker manager&quot;</span><span class="p">)</span>

        <span class="c1"># Spawn workers based on CPU count</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">service_config</span><span class="o">.</span><span class="n">service_run_type</span> <span class="o">==</span> <span class="n">ServiceRunType</span><span class="o">.</span><span class="n">MULTIPROCESSING</span><span class="p">:</span>
            <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_spawn_multiprocessing_workers</span><span class="p">()</span>

        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">service_config</span><span class="o">.</span><span class="n">service_run_type</span> <span class="o">==</span> <span class="n">ServiceRunType</span><span class="o">.</span><span class="n">KUBERNETES</span><span class="p">:</span>
            <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_spawn_kubernetes_workers</span><span class="p">()</span>

        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Unsupported run type: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">service_config</span><span class="o">.</span><span class="n">service_run_type</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="p">)</span>
            <span class="k">raise</span> <span class="n">ConfigError</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Unsupported run type: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">service_config</span><span class="o">.</span><span class="n">service_run_type</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="p">)</span>

    <span class="nd">@on_stop</span>
    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">_stop</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Stop the worker manager.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Stopping worker manager&quot;</span><span class="p">)</span>
        <span class="c1"># TODO: This needs to be investigated, as currently we handle the exit signal</span>
        <span class="c1">#       by all workers already, so need to understand best way to handle this</span>
        <span class="c1"># # Stop all workers</span>
        <span class="c1"># if self.service_config.service_run_type == ServiceRunType.MULTIPROCESSING:</span>
        <span class="c1">#     await self._stop_multiprocessing_workers()</span>
        <span class="c1"># elif self.service_config.service_run_type == ServiceRunType.KUBERNETES:</span>
        <span class="c1">#     await self._stop_kubernetes_workers()</span>
        <span class="c1"># else:</span>
        <span class="c1">#     self.logger.warning(</span>
        <span class="c1">#         f&quot;Unsupported run type: {self.service_config.service_run_type}&quot;</span>
        <span class="c1">#     )</span>

    <span class="nd">@on_cleanup</span>
    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">_cleanup</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Clean up worker manager-specific components.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Cleaning up worker manager&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">workers</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>

    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">_spawn_kubernetes_workers</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Spawn worker processes using Kubernetes.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Spawning </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">worker_count</span><span class="si">}</span><span class="s2"> worker processes&quot;</span><span class="p">)</span>

        <span class="c1"># TODO: Implement Kubernetes start</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s2">&quot;Kubernetes start not implemented&quot;</span><span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">_stop_kubernetes_workers</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Stop worker processes using Kubernetes.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Stopping all worker processes&quot;</span><span class="p">)</span>

        <span class="c1"># TODO: Implement Kubernetes stop</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s2">&quot;Kubernetes stop not implemented&quot;</span><span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">_spawn_multiprocessing_workers</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Spawn worker processes using multiprocessing.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Spawning </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">worker_count</span><span class="si">}</span><span class="s2"> worker processes&quot;</span><span class="p">)</span>

        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">worker_count</span><span class="p">):</span>
            <span class="n">worker_id</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;worker_</span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="n">process</span> <span class="o">=</span> <span class="n">multiprocessing</span><span class="o">.</span><span class="n">Process</span><span class="p">(</span>
                <span class="n">target</span><span class="o">=</span><span class="n">bootstrap_and_run_service</span><span class="p">,</span>
                <span class="n">name</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;worker_</span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s2">_process&quot;</span><span class="p">,</span>
                <span class="n">args</span><span class="o">=</span><span class="p">(</span><span class="n">Worker</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">service_config</span><span class="p">),</span>
                <span class="n">daemon</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
            <span class="p">)</span>
            <span class="n">process</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">workers</span><span class="p">[</span><span class="n">worker_id</span><span class="p">]</span> <span class="o">=</span> <span class="n">WorkerProcess</span><span class="p">(</span>
                <span class="n">worker_id</span><span class="o">=</span><span class="n">worker_id</span><span class="p">,</span> <span class="n">process</span><span class="o">=</span><span class="n">process</span>
            <span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Started worker process </span><span class="si">{</span><span class="n">worker_id</span><span class="si">}</span><span class="s2"> (pid: </span><span class="si">{</span><span class="n">process</span><span class="o">.</span><span class="n">pid</span><span class="si">}</span><span class="s2">)&quot;</span>
            <span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">_stop_multiprocessing_workers</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Stop all multiprocessing worker processes.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Stopping all worker processes&quot;</span><span class="p">)</span>

        <span class="c1"># First terminate all processes</span>
        <span class="k">for</span> <span class="n">worker_id</span><span class="p">,</span> <span class="n">worker_info</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">workers</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Stopping worker process </span><span class="si">{</span><span class="n">worker_id</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">worker_info</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="n">process</span> <span class="o">=</span> <span class="n">worker_info</span><span class="o">.</span><span class="n">process</span>
            <span class="k">if</span> <span class="n">process</span> <span class="ow">and</span> <span class="n">process</span><span class="o">.</span><span class="n">is_alive</span><span class="p">():</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span>
                    <span class="sa">f</span><span class="s2">&quot;Terminating worker process </span><span class="si">{</span><span class="n">worker_id</span><span class="si">}</span><span class="s2"> (pid: </span><span class="si">{</span><span class="n">process</span><span class="o">.</span><span class="n">pid</span><span class="si">}</span><span class="s2">)&quot;</span>
                <span class="p">)</span>
                <span class="n">process</span><span class="o">.</span><span class="n">terminate</span><span class="p">()</span>

        <span class="c1"># Then wait for all to finish</span>
        <span class="k">await</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">gather</span><span class="p">(</span>
            <span class="o">*</span><span class="p">[</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_wait_for_process</span><span class="p">(</span><span class="n">worker_id</span><span class="p">,</span> <span class="n">worker_info</span><span class="o">.</span><span class="n">process</span><span class="p">)</span>
                <span class="k">for</span> <span class="n">worker_id</span><span class="p">,</span> <span class="n">worker_info</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">workers</span><span class="o">.</span><span class="n">items</span><span class="p">()</span>
                <span class="k">if</span> <span class="n">worker_info</span><span class="o">.</span><span class="n">process</span>
            <span class="p">]</span>
        <span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;All worker processes stopped&quot;</span><span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">_wait_for_process</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">worker_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">process</span><span class="p">:</span> <span class="n">multiprocessing</span><span class="o">.</span><span class="n">Process</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Wait for a process to terminate with timeout handling.&quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">await</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">wait_for</span><span class="p">(</span>
                <span class="n">asyncio</span><span class="o">.</span><span class="n">to_thread</span><span class="p">(</span><span class="n">process</span><span class="o">.</span><span class="n">join</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="mf">1.0</span><span class="p">),</span>  <span class="c1"># Add timeout to join</span>
                <span class="n">timeout</span><span class="o">=</span><span class="mf">5.0</span><span class="p">,</span>  <span class="c1"># Overall timeout</span>
            <span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Worker process </span><span class="si">{</span><span class="n">worker_id</span><span class="si">}</span><span class="s2"> (pid: </span><span class="si">{</span><span class="n">process</span><span class="o">.</span><span class="n">pid</span><span class="si">}</span><span class="s2">) stopped&quot;</span>
            <span class="p">)</span>
        <span class="k">except</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">TimeoutError</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Worker process </span><span class="si">{</span><span class="n">worker_id</span><span class="si">}</span><span class="s2"> (pid: </span><span class="si">{</span><span class="n">process</span><span class="o">.</span><span class="n">pid</span><span class="si">}</span><span class="s2">) did not &quot;</span>
                <span class="sa">f</span><span class="s2">&quot;terminate gracefully, killing&quot;</span>
            <span class="p">)</span>
            <span class="n">process</span><span class="o">.</span><span class="n">kill</span><span class="p">()</span>

    <span class="nd">@on_configure</span>
    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">_configure</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">message</span><span class="p">:</span> <span class="n">Message</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Configure the worker manager.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Configuring worker manager with message: </span><span class="si">{</span><span class="n">message</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">







<div class="doc doc-object doc-attribute">



<h3 id="aiperf.services.worker_manager.worker_manager.WorkerManager.service_type" class="doc doc-heading">
            <code class=" language-python"><span class="n">service_type</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

<a href="#aiperf.services.worker_manager.worker_manager.WorkerManager.service_type" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>The type of service.</p>

    </div>

</div>





  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="aiperf.services.worker_manager.worker_manager.WorkerProcess" class="doc doc-heading">
            <code>WorkerProcess</code>


<a href="#aiperf.services.worker_manager.worker_manager.WorkerProcess" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="pydantic.BaseModel">BaseModel</span></code></p>


        <p>Information about a worker process.</p>







              <details class="quote">
                <summary>Source code in <code>aiperf/services/worker_manager/worker_manager.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">WorkerProcess</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Information about a worker process.&quot;&quot;&quot;</span>

    <span class="n">worker_id</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="o">...</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="s2">&quot;ID of the worker process&quot;</span><span class="p">)</span>
    <span class="n">process</span><span class="p">:</span> <span class="n">Any</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Process object or task&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">











  </div>

    </div>

</div>


<div class="doc doc-object doc-function">


<h2 id="aiperf.services.worker_manager.worker_manager.main" class="doc doc-heading">
            <code class=" language-python"><span class="n">main</span><span class="p">()</span></code>

<a href="#aiperf.services.worker_manager.worker_manager.main" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">

        <p>Main entry point for the worker manager.</p>


            <details class="quote">
              <summary>Source code in <code>aiperf/services/worker_manager/worker_manager.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">main</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Main entry point for the worker manager.&quot;&quot;&quot;</span>

    <span class="kn">from</span><span class="w"> </span><span class="nn">aiperf.common.bootstrap</span><span class="w"> </span><span class="kn">import</span> <span class="n">bootstrap_and_run_service</span>

    <span class="n">bootstrap_and_run_service</span><span class="p">(</span><span class="n">WorkerManager</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div><h2 id="aiperftestsbase_test_component_service">aiperf.tests.base_test_component_service<a class="headerlink" href="#aiperftestsbase_test_component_service" title="Permanent link">&para;</a></h2>


<div class="doc doc-object doc-module">



<a id="aiperf.tests.base_test_component_service"></a>
    <div class="doc doc-contents first">

        <p>Base test class for component services.</p>









  <div class="doc doc-children">








<div class="doc doc-object doc-class">



<h2 id="aiperf.tests.base_test_component_service.BaseTestComponentService" class="doc doc-heading">
            <code>BaseTestComponentService</code>


<a href="#aiperf.tests.base_test_component_service.BaseTestComponentService" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="BaseTestService (aiperf.tests.base_test_service.BaseTestService)" href="#aiperf.tests.base_test_service.BaseTestService">BaseTestService</a></code></p>


        <p>Base class for testing component services.</p>
<p>This extends BaseTestService with specific tests for the component service
functionality such as heartbeat, registration, and status updates.</p>







              <details class="quote">
                <summary>Source code in <code>aiperf/tests/base_test_component_service.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 17</span>
<span class="normal"> 18</span>
<span class="normal"> 19</span>
<span class="normal"> 20</span>
<span class="normal"> 21</span>
<span class="normal"> 22</span>
<span class="normal"> 23</span>
<span class="normal"> 24</span>
<span class="normal"> 25</span>
<span class="normal"> 26</span>
<span class="normal"> 27</span>
<span class="normal"> 28</span>
<span class="normal"> 29</span>
<span class="normal"> 30</span>
<span class="normal"> 31</span>
<span class="normal"> 32</span>
<span class="normal"> 33</span>
<span class="normal"> 34</span>
<span class="normal"> 35</span>
<span class="normal"> 36</span>
<span class="normal"> 37</span>
<span class="normal"> 38</span>
<span class="normal"> 39</span>
<span class="normal"> 40</span>
<span class="normal"> 41</span>
<span class="normal"> 42</span>
<span class="normal"> 43</span>
<span class="normal"> 44</span>
<span class="normal"> 45</span>
<span class="normal"> 46</span>
<span class="normal"> 47</span>
<span class="normal"> 48</span>
<span class="normal"> 49</span>
<span class="normal"> 50</span>
<span class="normal"> 51</span>
<span class="normal"> 52</span>
<span class="normal"> 53</span>
<span class="normal"> 54</span>
<span class="normal"> 55</span>
<span class="normal"> 56</span>
<span class="normal"> 57</span>
<span class="normal"> 58</span>
<span class="normal"> 59</span>
<span class="normal"> 60</span>
<span class="normal"> 61</span>
<span class="normal"> 62</span>
<span class="normal"> 63</span>
<span class="normal"> 64</span>
<span class="normal"> 65</span>
<span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">BaseTestComponentService</span><span class="p">(</span><span class="n">BaseTestService</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Base class for testing component services.</span>

<span class="sd">    This extends BaseTestService with specific tests for the component service</span>
<span class="sd">    functionality such as heartbeat, registration, and status updates.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="nd">@pytest</span><span class="o">.</span><span class="n">fixture</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">service_class</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">type</span><span class="p">[</span><span class="n">BaseService</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Return the service class to test.</span>

<span class="sd">        Returns:</span>
<span class="sd">            The BaseComponentService class for testing</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">BaseComponentService</span>

    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">test_service_heartbeat</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">initialized_service</span><span class="p">:</span> <span class="n">BaseComponentService</span><span class="p">,</span> <span class="n">mock_communication</span><span class="p">:</span> <span class="n">MagicMock</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Test that the service sends heartbeat messages correctly.</span>

<span class="sd">        Verifies:</span>
<span class="sd">        1. The service generates and sends a valid heartbeat message</span>
<span class="sd">        2. The message contains the correct service information</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">service</span> <span class="o">=</span> <span class="k">await</span> <span class="n">async_fixture</span><span class="p">(</span><span class="n">initialized_service</span><span class="p">)</span>

        <span class="c1"># Directly send a heartbeat instead of waiting for the task</span>
        <span class="k">await</span> <span class="n">service</span><span class="o">.</span><span class="n">send_heartbeat</span><span class="p">()</span>

        <span class="c1"># Check that a heartbeat message was published</span>
        <span class="k">assert</span> <span class="n">Topic</span><span class="o">.</span><span class="n">HEARTBEAT</span> <span class="ow">in</span> <span class="n">mock_communication</span><span class="o">.</span><span class="n">mock_data</span><span class="o">.</span><span class="n">published_messages</span>
        <span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">mock_communication</span><span class="o">.</span><span class="n">mock_data</span><span class="o">.</span><span class="n">published_messages</span><span class="p">[</span><span class="n">Topic</span><span class="o">.</span><span class="n">HEARTBEAT</span><span class="p">])</span> <span class="o">&gt;</span> <span class="mi">0</span>

        <span class="c1"># Verify heartbeat message contents</span>
        <span class="n">heartbeat_msg</span> <span class="o">=</span> <span class="n">mock_communication</span><span class="o">.</span><span class="n">mock_data</span><span class="o">.</span><span class="n">published_messages</span><span class="p">[</span>
            <span class="n">Topic</span><span class="o">.</span><span class="n">HEARTBEAT</span>
        <span class="p">][</span><span class="mi">0</span><span class="p">]</span>
        <span class="k">assert</span> <span class="n">heartbeat_msg</span><span class="o">.</span><span class="n">service_id</span> <span class="o">==</span> <span class="n">service</span><span class="o">.</span><span class="n">service_id</span>
        <span class="k">assert</span> <span class="n">heartbeat_msg</span><span class="o">.</span><span class="n">service_type</span> <span class="o">==</span> <span class="n">service</span><span class="o">.</span><span class="n">service_type</span>

    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">test_service_registration</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">initialized_service</span><span class="p">:</span> <span class="n">BaseComponentService</span><span class="p">,</span> <span class="n">mock_communication</span><span class="p">:</span> <span class="n">MagicMock</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Test that the service registers with the system controller.</span>

<span class="sd">        Verifies:</span>
<span class="sd">        1. The service sends a registration message to the controller</span>
<span class="sd">        2. The registration message contains the correct service information</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">service</span> <span class="o">=</span> <span class="k">await</span> <span class="n">async_fixture</span><span class="p">(</span><span class="n">initialized_service</span><span class="p">)</span>

        <span class="c1"># Register the service</span>
        <span class="k">await</span> <span class="n">service</span><span class="o">.</span><span class="n">register</span><span class="p">()</span>

        <span class="c1"># Check that a registration message was published</span>
        <span class="k">assert</span> <span class="n">Topic</span><span class="o">.</span><span class="n">REGISTRATION</span> <span class="ow">in</span> <span class="n">mock_communication</span><span class="o">.</span><span class="n">mock_data</span><span class="o">.</span><span class="n">published_messages</span>

        <span class="c1"># Verify registration message contents</span>
        <span class="n">registration_msg</span> <span class="o">=</span> <span class="n">mock_communication</span><span class="o">.</span><span class="n">mock_data</span><span class="o">.</span><span class="n">published_messages</span><span class="p">[</span>
            <span class="n">Topic</span><span class="o">.</span><span class="n">REGISTRATION</span>
        <span class="p">][</span><span class="mi">0</span><span class="p">]</span>
        <span class="k">assert</span> <span class="n">registration_msg</span><span class="o">.</span><span class="n">service_id</span> <span class="o">==</span> <span class="n">service</span><span class="o">.</span><span class="n">service_id</span>
        <span class="k">assert</span> <span class="n">registration_msg</span><span class="o">.</span><span class="n">service_type</span> <span class="o">==</span> <span class="n">service</span><span class="o">.</span><span class="n">service_type</span>

    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">test_service_status_update</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">initialized_service</span><span class="p">:</span> <span class="n">BaseComponentService</span><span class="p">,</span> <span class="n">mock_communication</span><span class="p">:</span> <span class="n">MagicMock</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Test that the service updates its status correctly.</span>

<span class="sd">        Verifies:</span>
<span class="sd">        1. The service publishes status messages when state changes</span>
<span class="sd">        2. The status message contains the correct state and service information</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">service</span> <span class="o">=</span> <span class="k">await</span> <span class="n">async_fixture</span><span class="p">(</span><span class="n">initialized_service</span><span class="p">)</span>

        <span class="c1"># Update the service status</span>
        <span class="k">await</span> <span class="n">service</span><span class="o">.</span><span class="n">set_state</span><span class="p">(</span><span class="n">ServiceState</span><span class="o">.</span><span class="n">READY</span><span class="p">)</span>

        <span class="c1"># Check that a status message was published</span>
        <span class="k">assert</span> <span class="n">Topic</span><span class="o">.</span><span class="n">STATUS</span> <span class="ow">in</span> <span class="n">mock_communication</span><span class="o">.</span><span class="n">mock_data</span><span class="o">.</span><span class="n">published_messages</span>

        <span class="c1"># Verify status message contents</span>
        <span class="n">status_msg</span> <span class="o">=</span> <span class="n">mock_communication</span><span class="o">.</span><span class="n">mock_data</span><span class="o">.</span><span class="n">published_messages</span><span class="p">[</span><span class="n">Topic</span><span class="o">.</span><span class="n">STATUS</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
        <span class="k">assert</span> <span class="n">status_msg</span><span class="o">.</span><span class="n">service_id</span> <span class="o">==</span> <span class="n">service</span><span class="o">.</span><span class="n">service_id</span>
        <span class="k">assert</span> <span class="n">status_msg</span><span class="o">.</span><span class="n">service_type</span> <span class="o">==</span> <span class="n">service</span><span class="o">.</span><span class="n">service_type</span>
        <span class="k">assert</span> <span class="n">status_msg</span><span class="o">.</span><span class="n">state</span> <span class="o">==</span> <span class="n">ServiceState</span><span class="o">.</span><span class="n">READY</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h3 id="aiperf.tests.base_test_component_service.BaseTestComponentService.service_class" class="doc doc-heading">
            <code class=" language-python"><span class="n">service_class</span><span class="p">()</span></code>

<a href="#aiperf.tests.base_test_component_service.BaseTestComponentService.service_class" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Return the service class to test.</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="type">type</span>[<a class="autorefs autorefs-internal" title="BaseService (aiperf.common.service.base_service.BaseService)" href="#aiperf.common.service.base_service.BaseService">BaseService</a>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The BaseComponentService class for testing</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>aiperf/tests/base_test_component_service.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@pytest</span><span class="o">.</span><span class="n">fixture</span>
<span class="k">def</span><span class="w"> </span><span class="nf">service_class</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">type</span><span class="p">[</span><span class="n">BaseService</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Return the service class to test.</span>

<span class="sd">    Returns:</span>
<span class="sd">        The BaseComponentService class for testing</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">BaseComponentService</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="aiperf.tests.base_test_component_service.BaseTestComponentService.test_service_heartbeat" class="doc doc-heading">
            <code class=" language-python"><span class="n">test_service_heartbeat</span><span class="p">(</span><span class="n">initialized_service</span><span class="p">,</span> <span class="n">mock_communication</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#aiperf.tests.base_test_component_service.BaseTestComponentService.test_service_heartbeat" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Test that the service sends heartbeat messages correctly.</p>
<p>Verifies:
1. The service generates and sends a valid heartbeat message
2. The message contains the correct service information</p>


            <details class="quote">
              <summary>Source code in <code>aiperf/tests/base_test_component_service.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">test_service_heartbeat</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span> <span class="n">initialized_service</span><span class="p">:</span> <span class="n">BaseComponentService</span><span class="p">,</span> <span class="n">mock_communication</span><span class="p">:</span> <span class="n">MagicMock</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Test that the service sends heartbeat messages correctly.</span>

<span class="sd">    Verifies:</span>
<span class="sd">    1. The service generates and sends a valid heartbeat message</span>
<span class="sd">    2. The message contains the correct service information</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">service</span> <span class="o">=</span> <span class="k">await</span> <span class="n">async_fixture</span><span class="p">(</span><span class="n">initialized_service</span><span class="p">)</span>

    <span class="c1"># Directly send a heartbeat instead of waiting for the task</span>
    <span class="k">await</span> <span class="n">service</span><span class="o">.</span><span class="n">send_heartbeat</span><span class="p">()</span>

    <span class="c1"># Check that a heartbeat message was published</span>
    <span class="k">assert</span> <span class="n">Topic</span><span class="o">.</span><span class="n">HEARTBEAT</span> <span class="ow">in</span> <span class="n">mock_communication</span><span class="o">.</span><span class="n">mock_data</span><span class="o">.</span><span class="n">published_messages</span>
    <span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">mock_communication</span><span class="o">.</span><span class="n">mock_data</span><span class="o">.</span><span class="n">published_messages</span><span class="p">[</span><span class="n">Topic</span><span class="o">.</span><span class="n">HEARTBEAT</span><span class="p">])</span> <span class="o">&gt;</span> <span class="mi">0</span>

    <span class="c1"># Verify heartbeat message contents</span>
    <span class="n">heartbeat_msg</span> <span class="o">=</span> <span class="n">mock_communication</span><span class="o">.</span><span class="n">mock_data</span><span class="o">.</span><span class="n">published_messages</span><span class="p">[</span>
        <span class="n">Topic</span><span class="o">.</span><span class="n">HEARTBEAT</span>
    <span class="p">][</span><span class="mi">0</span><span class="p">]</span>
    <span class="k">assert</span> <span class="n">heartbeat_msg</span><span class="o">.</span><span class="n">service_id</span> <span class="o">==</span> <span class="n">service</span><span class="o">.</span><span class="n">service_id</span>
    <span class="k">assert</span> <span class="n">heartbeat_msg</span><span class="o">.</span><span class="n">service_type</span> <span class="o">==</span> <span class="n">service</span><span class="o">.</span><span class="n">service_type</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="aiperf.tests.base_test_component_service.BaseTestComponentService.test_service_registration" class="doc doc-heading">
            <code class=" language-python"><span class="n">test_service_registration</span><span class="p">(</span><span class="n">initialized_service</span><span class="p">,</span> <span class="n">mock_communication</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#aiperf.tests.base_test_component_service.BaseTestComponentService.test_service_registration" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Test that the service registers with the system controller.</p>
<p>Verifies:
1. The service sends a registration message to the controller
2. The registration message contains the correct service information</p>


            <details class="quote">
              <summary>Source code in <code>aiperf/tests/base_test_component_service.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span>
<span class="normal">71</span>
<span class="normal">72</span>
<span class="normal">73</span>
<span class="normal">74</span>
<span class="normal">75</span>
<span class="normal">76</span>
<span class="normal">77</span>
<span class="normal">78</span>
<span class="normal">79</span>
<span class="normal">80</span>
<span class="normal">81</span>
<span class="normal">82</span>
<span class="normal">83</span>
<span class="normal">84</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">test_service_registration</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span> <span class="n">initialized_service</span><span class="p">:</span> <span class="n">BaseComponentService</span><span class="p">,</span> <span class="n">mock_communication</span><span class="p">:</span> <span class="n">MagicMock</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Test that the service registers with the system controller.</span>

<span class="sd">    Verifies:</span>
<span class="sd">    1. The service sends a registration message to the controller</span>
<span class="sd">    2. The registration message contains the correct service information</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">service</span> <span class="o">=</span> <span class="k">await</span> <span class="n">async_fixture</span><span class="p">(</span><span class="n">initialized_service</span><span class="p">)</span>

    <span class="c1"># Register the service</span>
    <span class="k">await</span> <span class="n">service</span><span class="o">.</span><span class="n">register</span><span class="p">()</span>

    <span class="c1"># Check that a registration message was published</span>
    <span class="k">assert</span> <span class="n">Topic</span><span class="o">.</span><span class="n">REGISTRATION</span> <span class="ow">in</span> <span class="n">mock_communication</span><span class="o">.</span><span class="n">mock_data</span><span class="o">.</span><span class="n">published_messages</span>

    <span class="c1"># Verify registration message contents</span>
    <span class="n">registration_msg</span> <span class="o">=</span> <span class="n">mock_communication</span><span class="o">.</span><span class="n">mock_data</span><span class="o">.</span><span class="n">published_messages</span><span class="p">[</span>
        <span class="n">Topic</span><span class="o">.</span><span class="n">REGISTRATION</span>
    <span class="p">][</span><span class="mi">0</span><span class="p">]</span>
    <span class="k">assert</span> <span class="n">registration_msg</span><span class="o">.</span><span class="n">service_id</span> <span class="o">==</span> <span class="n">service</span><span class="o">.</span><span class="n">service_id</span>
    <span class="k">assert</span> <span class="n">registration_msg</span><span class="o">.</span><span class="n">service_type</span> <span class="o">==</span> <span class="n">service</span><span class="o">.</span><span class="n">service_type</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="aiperf.tests.base_test_component_service.BaseTestComponentService.test_service_status_update" class="doc doc-heading">
            <code class=" language-python"><span class="n">test_service_status_update</span><span class="p">(</span><span class="n">initialized_service</span><span class="p">,</span> <span class="n">mock_communication</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#aiperf.tests.base_test_component_service.BaseTestComponentService.test_service_status_update" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Test that the service updates its status correctly.</p>
<p>Verifies:
1. The service publishes status messages when state changes
2. The status message contains the correct state and service information</p>


            <details class="quote">
              <summary>Source code in <code>aiperf/tests/base_test_component_service.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">test_service_status_update</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span> <span class="n">initialized_service</span><span class="p">:</span> <span class="n">BaseComponentService</span><span class="p">,</span> <span class="n">mock_communication</span><span class="p">:</span> <span class="n">MagicMock</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Test that the service updates its status correctly.</span>

<span class="sd">    Verifies:</span>
<span class="sd">    1. The service publishes status messages when state changes</span>
<span class="sd">    2. The status message contains the correct state and service information</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">service</span> <span class="o">=</span> <span class="k">await</span> <span class="n">async_fixture</span><span class="p">(</span><span class="n">initialized_service</span><span class="p">)</span>

    <span class="c1"># Update the service status</span>
    <span class="k">await</span> <span class="n">service</span><span class="o">.</span><span class="n">set_state</span><span class="p">(</span><span class="n">ServiceState</span><span class="o">.</span><span class="n">READY</span><span class="p">)</span>

    <span class="c1"># Check that a status message was published</span>
    <span class="k">assert</span> <span class="n">Topic</span><span class="o">.</span><span class="n">STATUS</span> <span class="ow">in</span> <span class="n">mock_communication</span><span class="o">.</span><span class="n">mock_data</span><span class="o">.</span><span class="n">published_messages</span>

    <span class="c1"># Verify status message contents</span>
    <span class="n">status_msg</span> <span class="o">=</span> <span class="n">mock_communication</span><span class="o">.</span><span class="n">mock_data</span><span class="o">.</span><span class="n">published_messages</span><span class="p">[</span><span class="n">Topic</span><span class="o">.</span><span class="n">STATUS</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
    <span class="k">assert</span> <span class="n">status_msg</span><span class="o">.</span><span class="n">service_id</span> <span class="o">==</span> <span class="n">service</span><span class="o">.</span><span class="n">service_id</span>
    <span class="k">assert</span> <span class="n">status_msg</span><span class="o">.</span><span class="n">service_type</span> <span class="o">==</span> <span class="n">service</span><span class="o">.</span><span class="n">service_type</span>
    <span class="k">assert</span> <span class="n">status_msg</span><span class="o">.</span><span class="n">state</span> <span class="o">==</span> <span class="n">ServiceState</span><span class="o">.</span><span class="n">READY</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>




  </div>

    </div>

</div><h2 id="aiperftestsbase_test_controller_service">aiperf.tests.base_test_controller_service<a class="headerlink" href="#aiperftestsbase_test_controller_service" title="Permanent link">&para;</a></h2>


<div class="doc doc-object doc-module">



<a id="aiperf.tests.base_test_controller_service"></a>
    <div class="doc doc-contents first">

        <p>Base test class for controller services.</p>









  <div class="doc doc-children">








<div class="doc doc-object doc-class">



<h2 id="aiperf.tests.base_test_controller_service.BaseTestControllerService" class="doc doc-heading">
            <code>BaseTestControllerService</code>


<a href="#aiperf.tests.base_test_controller_service.BaseTestControllerService" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="BaseTestService (aiperf.tests.base_test_service.BaseTestService)" href="#aiperf.tests.base_test_service.BaseTestService">BaseTestService</a></code></p>


        <p>Base class for testing controller services.</p>
<p>This extends BaseTestService with specific tests for controller service
functionality such as command sending, service registration handling,
and monitoring of component services.</p>







              <details class="quote">
                <summary>Source code in <code>aiperf/tests/base_test_controller_service.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">BaseTestControllerService</span><span class="p">(</span><span class="n">BaseTestService</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Base class for testing controller services.</span>

<span class="sd">    This extends BaseTestService with specific tests for controller service</span>
<span class="sd">    functionality such as command sending, service registration handling,</span>
<span class="sd">    and monitoring of component services.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">test_controller_command_publishing</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">initialized_service</span><span class="p">:</span> <span class="n">BaseControllerService</span><span class="p">,</span> <span class="n">mock_communication</span><span class="p">:</span> <span class="n">MagicMock</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Test that the controller can publish command messages.</span>

<span class="sd">        Verifies the controller can send properly formatted commands to components.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">service</span> <span class="o">=</span> <span class="k">await</span> <span class="n">async_fixture</span><span class="p">(</span><span class="n">initialized_service</span><span class="p">)</span>

        <span class="c1"># Create a test command message</span>
        <span class="n">test_service_id</span> <span class="o">=</span> <span class="s2">&quot;test_service_123&quot;</span>
        <span class="n">command</span> <span class="o">=</span> <span class="n">CommandType</span><span class="o">.</span><span class="n">PROFILE_START</span>

        <span class="c1"># Create a command message</span>
        <span class="n">command_message</span> <span class="o">=</span> <span class="n">service</span><span class="o">.</span><span class="n">create_command_message</span><span class="p">(</span>
            <span class="n">command</span><span class="o">=</span><span class="n">command</span><span class="p">,</span>
            <span class="n">target_service_id</span><span class="o">=</span><span class="n">test_service_id</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="c1"># Publish the command</span>
        <span class="k">await</span> <span class="n">service</span><span class="o">.</span><span class="n">comms</span><span class="o">.</span><span class="n">publish</span><span class="p">(</span><span class="n">Topic</span><span class="o">.</span><span class="n">COMMAND</span><span class="p">,</span> <span class="n">command_message</span><span class="p">)</span>

        <span class="c1"># Check that the command was published</span>
        <span class="k">assert</span> <span class="n">Topic</span><span class="o">.</span><span class="n">COMMAND</span> <span class="ow">in</span> <span class="n">mock_communication</span><span class="o">.</span><span class="n">mock_data</span><span class="o">.</span><span class="n">published_messages</span>
        <span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">mock_communication</span><span class="o">.</span><span class="n">mock_data</span><span class="o">.</span><span class="n">published_messages</span><span class="p">[</span><span class="n">Topic</span><span class="o">.</span><span class="n">COMMAND</span><span class="p">])</span> <span class="o">==</span> <span class="mi">1</span>

        <span class="c1"># Verify command message</span>
        <span class="n">published_cmd</span> <span class="o">=</span> <span class="n">mock_communication</span><span class="o">.</span><span class="n">mock_data</span><span class="o">.</span><span class="n">published_messages</span><span class="p">[</span><span class="n">Topic</span><span class="o">.</span><span class="n">COMMAND</span><span class="p">][</span>
            <span class="mi">0</span>
        <span class="p">]</span>
        <span class="k">assert</span> <span class="n">published_cmd</span><span class="o">.</span><span class="n">service_id</span> <span class="o">==</span> <span class="n">service</span><span class="o">.</span><span class="n">service_id</span>
        <span class="k">assert</span> <span class="n">published_cmd</span><span class="o">.</span><span class="n">command</span> <span class="o">==</span> <span class="n">command</span>
        <span class="k">assert</span> <span class="n">published_cmd</span><span class="o">.</span><span class="n">target_service_id</span> <span class="o">==</span> <span class="n">test_service_id</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h3 id="aiperf.tests.base_test_controller_service.BaseTestControllerService.test_controller_command_publishing" class="doc doc-heading">
            <code class=" language-python"><span class="n">test_controller_command_publishing</span><span class="p">(</span><span class="n">initialized_service</span><span class="p">,</span> <span class="n">mock_communication</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#aiperf.tests.base_test_controller_service.BaseTestControllerService.test_controller_command_publishing" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Test that the controller can publish command messages.</p>
<p>Verifies the controller can send properly formatted commands to components.</p>


            <details class="quote">
              <summary>Source code in <code>aiperf/tests/base_test_controller_service.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">test_controller_command_publishing</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span> <span class="n">initialized_service</span><span class="p">:</span> <span class="n">BaseControllerService</span><span class="p">,</span> <span class="n">mock_communication</span><span class="p">:</span> <span class="n">MagicMock</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Test that the controller can publish command messages.</span>

<span class="sd">    Verifies the controller can send properly formatted commands to components.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">service</span> <span class="o">=</span> <span class="k">await</span> <span class="n">async_fixture</span><span class="p">(</span><span class="n">initialized_service</span><span class="p">)</span>

    <span class="c1"># Create a test command message</span>
    <span class="n">test_service_id</span> <span class="o">=</span> <span class="s2">&quot;test_service_123&quot;</span>
    <span class="n">command</span> <span class="o">=</span> <span class="n">CommandType</span><span class="o">.</span><span class="n">PROFILE_START</span>

    <span class="c1"># Create a command message</span>
    <span class="n">command_message</span> <span class="o">=</span> <span class="n">service</span><span class="o">.</span><span class="n">create_command_message</span><span class="p">(</span>
        <span class="n">command</span><span class="o">=</span><span class="n">command</span><span class="p">,</span>
        <span class="n">target_service_id</span><span class="o">=</span><span class="n">test_service_id</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="c1"># Publish the command</span>
    <span class="k">await</span> <span class="n">service</span><span class="o">.</span><span class="n">comms</span><span class="o">.</span><span class="n">publish</span><span class="p">(</span><span class="n">Topic</span><span class="o">.</span><span class="n">COMMAND</span><span class="p">,</span> <span class="n">command_message</span><span class="p">)</span>

    <span class="c1"># Check that the command was published</span>
    <span class="k">assert</span> <span class="n">Topic</span><span class="o">.</span><span class="n">COMMAND</span> <span class="ow">in</span> <span class="n">mock_communication</span><span class="o">.</span><span class="n">mock_data</span><span class="o">.</span><span class="n">published_messages</span>
    <span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">mock_communication</span><span class="o">.</span><span class="n">mock_data</span><span class="o">.</span><span class="n">published_messages</span><span class="p">[</span><span class="n">Topic</span><span class="o">.</span><span class="n">COMMAND</span><span class="p">])</span> <span class="o">==</span> <span class="mi">1</span>

    <span class="c1"># Verify command message</span>
    <span class="n">published_cmd</span> <span class="o">=</span> <span class="n">mock_communication</span><span class="o">.</span><span class="n">mock_data</span><span class="o">.</span><span class="n">published_messages</span><span class="p">[</span><span class="n">Topic</span><span class="o">.</span><span class="n">COMMAND</span><span class="p">][</span>
        <span class="mi">0</span>
    <span class="p">]</span>
    <span class="k">assert</span> <span class="n">published_cmd</span><span class="o">.</span><span class="n">service_id</span> <span class="o">==</span> <span class="n">service</span><span class="o">.</span><span class="n">service_id</span>
    <span class="k">assert</span> <span class="n">published_cmd</span><span class="o">.</span><span class="n">command</span> <span class="o">==</span> <span class="n">command</span>
    <span class="k">assert</span> <span class="n">published_cmd</span><span class="o">.</span><span class="n">target_service_id</span> <span class="o">==</span> <span class="n">test_service_id</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>




  </div>

    </div>

</div><h2 id="aiperftestsbase_test_service">aiperf.tests.base_test_service<a class="headerlink" href="#aiperftestsbase_test_service" title="Permanent link">&para;</a></h2>


<div class="doc doc-object doc-module">



<a id="aiperf.tests.base_test_service"></a>
    <div class="doc doc-contents first">

        <p>Base test class for testing AIPerf services.</p>









  <div class="doc doc-children">








<div class="doc doc-object doc-class">



<h2 id="aiperf.tests.base_test_service.BaseTestService" class="doc doc-heading">
            <code>BaseTestService</code>


<a href="#aiperf.tests.base_test_service.BaseTestService" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="abc.ABC">ABC</span></code></p>


        <p>Base test class for all service tests.</p>
<p>This class provides common test methods and fixtures for testing
AIPerf services. Specific service test classes should inherit from
this class and implement service-specific fixtures and tests.</p>







              <details class="quote">
                <summary>Source code in <code>aiperf/tests/base_test_service.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 20</span>
<span class="normal"> 21</span>
<span class="normal"> 22</span>
<span class="normal"> 23</span>
<span class="normal"> 24</span>
<span class="normal"> 25</span>
<span class="normal"> 26</span>
<span class="normal"> 27</span>
<span class="normal"> 28</span>
<span class="normal"> 29</span>
<span class="normal"> 30</span>
<span class="normal"> 31</span>
<span class="normal"> 32</span>
<span class="normal"> 33</span>
<span class="normal"> 34</span>
<span class="normal"> 35</span>
<span class="normal"> 36</span>
<span class="normal"> 37</span>
<span class="normal"> 38</span>
<span class="normal"> 39</span>
<span class="normal"> 40</span>
<span class="normal"> 41</span>
<span class="normal"> 42</span>
<span class="normal"> 43</span>
<span class="normal"> 44</span>
<span class="normal"> 45</span>
<span class="normal"> 46</span>
<span class="normal"> 47</span>
<span class="normal"> 48</span>
<span class="normal"> 49</span>
<span class="normal"> 50</span>
<span class="normal"> 51</span>
<span class="normal"> 52</span>
<span class="normal"> 53</span>
<span class="normal"> 54</span>
<span class="normal"> 55</span>
<span class="normal"> 56</span>
<span class="normal"> 57</span>
<span class="normal"> 58</span>
<span class="normal"> 59</span>
<span class="normal"> 60</span>
<span class="normal"> 61</span>
<span class="normal"> 62</span>
<span class="normal"> 63</span>
<span class="normal"> 64</span>
<span class="normal"> 65</span>
<span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">BaseTestService</span><span class="p">(</span><span class="n">ABC</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Base test class for all service tests.</span>

<span class="sd">    This class provides common test methods and fixtures for testing</span>
<span class="sd">    AIPerf services. Specific service test classes should inherit from</span>
<span class="sd">    this class and implement service-specific fixtures and tests.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="nd">@pytest</span><span class="o">.</span><span class="n">fixture</span><span class="p">(</span><span class="n">autouse</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">no_sleep</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">monkeypatch</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Patch asyncio.sleep with a no-op to prevent test delays.</span>

<span class="sd">        This ensures tests don&#39;t need to wait for real sleep calls.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">monkeypatch</span><span class="o">.</span><span class="n">setattr</span><span class="p">(</span><span class="n">asyncio</span><span class="p">,</span> <span class="s2">&quot;sleep&quot;</span><span class="p">,</span> <span class="n">async_noop</span><span class="p">)</span>

    <span class="nd">@pytest</span><span class="o">.</span><span class="n">fixture</span><span class="p">(</span><span class="n">autouse</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">patch_communication_factory</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">mock_communication</span><span class="p">:</span> <span class="n">MagicMock</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Generator</span><span class="p">[</span><span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Patch the communication factory to always return our mock communication.</span>

<span class="sd">        This ensures no real communication is attempted during tests.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">with</span> <span class="n">patch</span><span class="p">(</span>
            <span class="s2">&quot;aiperf.common.factories.CommunicationFactory.create_instance&quot;</span><span class="p">,</span>
            <span class="n">return_value</span><span class="o">=</span><span class="n">mock_communication</span><span class="p">,</span>
        <span class="p">):</span>
            <span class="k">yield</span>

    <span class="nd">@abstractmethod</span>
    <span class="nd">@pytest</span><span class="o">.</span><span class="n">fixture</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">service_class</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">type</span><span class="p">[</span><span class="n">BaseService</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Return the service class to test.</span>

<span class="sd">        Must be implemented by subclasses to specify which service is being tested.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s2">&quot;Subclasses must implement this method&quot;</span><span class="p">)</span>

    <span class="nd">@pytest</span><span class="o">.</span><span class="n">fixture</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">service_config</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ServiceConfig</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Create a service configuration for testing.</span>

<span class="sd">        Returns:</span>
<span class="sd">            A ServiceConfig instance with test settings</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">ServiceConfig</span><span class="p">(</span>
            <span class="n">service_run_type</span><span class="o">=</span><span class="n">ServiceRunType</span><span class="o">.</span><span class="n">MULTIPROCESSING</span><span class="p">,</span>
            <span class="n">comm_backend</span><span class="o">=</span><span class="n">CommunicationBackend</span><span class="o">.</span><span class="n">ZMQ_TCP</span><span class="p">,</span>
        <span class="p">)</span>

    <span class="nd">@pytest</span><span class="o">.</span><span class="n">fixture</span>
    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">uninitialized_service</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">service_class</span><span class="p">:</span> <span class="nb">type</span><span class="p">[</span><span class="n">BaseService</span><span class="p">],</span>
        <span class="n">service_config</span><span class="p">:</span> <span class="n">ServiceConfig</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">AsyncGenerator</span><span class="p">[</span><span class="n">BaseService</span><span class="p">,</span> <span class="kc">None</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Create an uninitialized instance of the service under test.</span>

<span class="sd">        This provides a service instance before initialize() has been called,</span>
<span class="sd">        allowing tests to verify initialization behavior.</span>

<span class="sd">        Returns:</span>
<span class="sd">            An uninitialized instance of the service</span>

<span class="sd">        Example usage:</span>
<span class="sd">        ```python</span>
<span class="sd">        async def test_service_initialization(uninitialized_service: BaseService):</span>
<span class="sd">            service = await async_fixture(uninitialized_service)</span>
<span class="sd">            await service.initialize()</span>
<span class="sd">        ```</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Patch the heartbeat task otherwise it will run forever</span>
        <span class="k">with</span> <span class="n">patch</span><span class="p">(</span>
            <span class="s2">&quot;aiperf.common.service.base_component_service.BaseComponentService._heartbeat_task&quot;</span><span class="p">,</span>
            <span class="k">lambda</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
        <span class="p">):</span>
            <span class="n">service</span> <span class="o">=</span> <span class="n">service_class</span><span class="p">(</span><span class="n">service_config</span><span class="o">=</span><span class="n">service_config</span><span class="p">)</span>
            <span class="k">yield</span> <span class="n">service</span>

    <span class="nd">@pytest</span><span class="o">.</span><span class="n">fixture</span>
    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">initialized_service</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">uninitialized_service</span><span class="p">:</span> <span class="n">BaseService</span><span class="p">,</span>
        <span class="n">mock_communication</span><span class="p">:</span> <span class="n">MagicMock</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">AsyncGenerator</span><span class="p">[</span><span class="n">BaseService</span><span class="p">,</span> <span class="kc">None</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Create and initialize the service under test.</span>

<span class="sd">        This fixture sets up a complete service instance ready for testing,</span>
<span class="sd">        with the communication layer mocked.</span>

<span class="sd">        Returns:</span>
<span class="sd">            An initialized instance of the service</span>

<span class="sd">        Example usage:</span>
<span class="sd">        ```python</span>
<span class="sd">        async def test_service_foo(initialized_service: BaseService):</span>
<span class="sd">            service = await async_fixture(initialized_service)</span>
<span class="sd">            await service.foo()</span>
<span class="sd">        ```</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">service</span> <span class="o">=</span> <span class="k">await</span> <span class="n">async_fixture</span><span class="p">(</span><span class="n">uninitialized_service</span><span class="p">)</span>

        <span class="k">await</span> <span class="n">service</span><span class="o">.</span><span class="n">initialize</span><span class="p">()</span>

        <span class="k">yield</span> <span class="n">service</span>

    <span class="nd">@pytest</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">asyncio</span>
    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">test_service_initialization</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">uninitialized_service</span><span class="p">:</span> <span class="n">BaseService</span><span class="p">,</span> <span class="n">mock_communication</span><span class="p">:</span> <span class="n">MagicMock</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Test that the service initializes correctly. This will be executed</span>
<span class="sd">        for every service that inherits from BaseTestService.</span>

<span class="sd">        This verifies:</span>
<span class="sd">        1. The service has a valid ID and type</span>
<span class="sd">        2. The service transitions to the correct state during initialization</span>
<span class="sd">        3. The service&#39;s internal initialization method is called</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">service</span> <span class="o">=</span> <span class="k">await</span> <span class="n">async_fixture</span><span class="p">(</span><span class="n">uninitialized_service</span><span class="p">)</span>

        <span class="c1"># Check that the service has an ID and type</span>
        <span class="k">assert</span> <span class="n">service</span><span class="o">.</span><span class="n">service_id</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
        <span class="k">assert</span> <span class="n">service</span><span class="o">.</span><span class="n">service_type</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>

        <span class="c1"># Check that the service is not initialized</span>
        <span class="k">assert</span> <span class="n">service</span><span class="o">.</span><span class="n">state</span> <span class="o">==</span> <span class="n">ServiceState</span><span class="o">.</span><span class="n">UNKNOWN</span>

        <span class="c1"># Initialize the service</span>
        <span class="k">await</span> <span class="n">service</span><span class="o">.</span><span class="n">initialize</span><span class="p">()</span>

        <span class="c1"># Check that the service is initialized and in the READY state</span>
        <span class="k">assert</span> <span class="n">service</span><span class="o">.</span><span class="n">is_initialized</span>
        <span class="k">assert</span> <span class="n">service</span><span class="o">.</span><span class="n">state</span> <span class="o">==</span> <span class="n">ServiceState</span><span class="o">.</span><span class="n">READY</span>

        <span class="k">await</span> <span class="n">service</span><span class="o">.</span><span class="n">stop</span><span class="p">()</span>

    <span class="nd">@pytest</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">asyncio</span>
    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">test_service_start_stop</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">initialized_service</span><span class="p">:</span> <span class="n">BaseService</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Test that the service can start and stop correctly. This will be executed</span>
<span class="sd">        for every service that inherits from BaseTestService.</span>

<span class="sd">        This verifies:</span>
<span class="sd">        1. The service transitions to the `ServiceState.RUNNING` state when started</span>
<span class="sd">        2. The service transitions to the `ServiceState.STOPPED` state when stopped</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">service</span> <span class="o">=</span> <span class="k">await</span> <span class="n">async_fixture</span><span class="p">(</span><span class="n">initialized_service</span><span class="p">)</span>

        <span class="c1"># Start the service</span>
        <span class="k">await</span> <span class="n">service</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>
        <span class="k">assert</span> <span class="n">service</span><span class="o">.</span><span class="n">state</span> <span class="o">==</span> <span class="n">ServiceState</span><span class="o">.</span><span class="n">RUNNING</span>

        <span class="c1"># Stop the service</span>
        <span class="k">await</span> <span class="n">service</span><span class="o">.</span><span class="n">stop</span><span class="p">()</span>
        <span class="k">assert</span> <span class="n">service</span><span class="o">.</span><span class="n">state</span> <span class="o">==</span> <span class="n">ServiceState</span><span class="o">.</span><span class="n">STOPPED</span>

    <span class="nd">@pytest</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">parametrize</span><span class="p">(</span>
        <span class="s2">&quot;state&quot;</span><span class="p">,</span>
        <span class="p">[</span><span class="n">state</span> <span class="k">for</span> <span class="n">state</span> <span class="ow">in</span> <span class="n">ServiceState</span> <span class="k">if</span> <span class="n">state</span> <span class="o">!=</span> <span class="n">ServiceState</span><span class="o">.</span><span class="n">UNKNOWN</span><span class="p">],</span>
    <span class="p">)</span>
    <span class="nd">@pytest</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">asyncio</span>
    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">test_service_state_transitions</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">initialized_service</span><span class="p">:</span> <span class="n">BaseService</span><span class="p">,</span> <span class="n">state</span><span class="p">:</span> <span class="n">ServiceState</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Test that the service can transition to all possible states. This will be executed</span>
<span class="sd">        for every service that inherits from BaseTestService.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">service</span> <span class="o">=</span> <span class="k">await</span> <span class="n">async_fixture</span><span class="p">(</span><span class="n">initialized_service</span><span class="p">)</span>

        <span class="c1"># Update the service state</span>
        <span class="k">await</span> <span class="n">service</span><span class="o">.</span><span class="n">set_state</span><span class="p">(</span><span class="n">state</span><span class="p">)</span>

        <span class="c1"># Check that the service state was updated</span>
        <span class="k">assert</span> <span class="n">service</span><span class="o">.</span><span class="n">state</span> <span class="o">==</span> <span class="n">state</span>

    <span class="nd">@pytest</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">asyncio</span>
    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">test_service_run_does_not_start</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">initialized_service</span><span class="p">:</span> <span class="n">BaseService</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Test that the service does not start when the run method is called (default behavior). This will be executed</span>
<span class="sd">        for every service that inherits from BaseTestService.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">service</span> <span class="o">=</span> <span class="k">await</span> <span class="n">async_fixture</span><span class="p">(</span><span class="n">MagicMock</span><span class="p">(</span><span class="n">wraps</span><span class="o">=</span><span class="n">initialized_service</span><span class="p">))</span>

        <span class="n">service</span><span class="o">.</span><span class="n">_forever_loop</span><span class="o">.</span><span class="n">return_value</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">await</span> <span class="n">service</span><span class="o">.</span><span class="n">run_forever</span><span class="p">()</span>
        <span class="k">assert</span> <span class="ow">not</span> <span class="n">service</span><span class="o">.</span><span class="n">start</span><span class="o">.</span><span class="n">called</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h3 id="aiperf.tests.base_test_service.BaseTestService.initialized_service" class="doc doc-heading">
            <code class=" language-python"><span class="n">initialized_service</span><span class="p">(</span><span class="n">uninitialized_service</span><span class="p">,</span> <span class="n">mock_communication</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#aiperf.tests.base_test_service.BaseTestService.initialized_service" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Create and initialize the service under test.</p>
<p>This fixture sets up a complete service instance ready for testing,
with the communication layer mocked.</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="collections.abc.AsyncGenerator">AsyncGenerator</span>[<a class="autorefs autorefs-internal" title="BaseService (aiperf.common.service.base_service.BaseService)" href="#aiperf.common.service.base_service.BaseService">BaseService</a>, None]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>An initialized instance of the service</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>
        <p>Example usage:</p>
<div class="codehilite"><pre><span></span><code><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">test_service_foo</span><span class="p">(</span><span class="n">initialized_service</span><span class="p">:</span> <span class="n">BaseService</span><span class="p">):</span>
    <span class="n">service</span> <span class="o">=</span> <span class="k">await</span> <span class="n">async_fixture</span><span class="p">(</span><span class="n">initialized_service</span><span class="p">)</span>
    <span class="k">await</span> <span class="n">service</span><span class="o">.</span><span class="n">foo</span><span class="p">()</span>
</code></pre></div>


            <details class="quote">
              <summary>Source code in <code>aiperf/tests/base_test_service.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@pytest</span><span class="o">.</span><span class="n">fixture</span>
<span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">initialized_service</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">uninitialized_service</span><span class="p">:</span> <span class="n">BaseService</span><span class="p">,</span>
    <span class="n">mock_communication</span><span class="p">:</span> <span class="n">MagicMock</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">AsyncGenerator</span><span class="p">[</span><span class="n">BaseService</span><span class="p">,</span> <span class="kc">None</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Create and initialize the service under test.</span>

<span class="sd">    This fixture sets up a complete service instance ready for testing,</span>
<span class="sd">    with the communication layer mocked.</span>

<span class="sd">    Returns:</span>
<span class="sd">        An initialized instance of the service</span>

<span class="sd">    Example usage:</span>
<span class="sd">    ```python</span>
<span class="sd">    async def test_service_foo(initialized_service: BaseService):</span>
<span class="sd">        service = await async_fixture(initialized_service)</span>
<span class="sd">        await service.foo()</span>
<span class="sd">    ```</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">service</span> <span class="o">=</span> <span class="k">await</span> <span class="n">async_fixture</span><span class="p">(</span><span class="n">uninitialized_service</span><span class="p">)</span>

    <span class="k">await</span> <span class="n">service</span><span class="o">.</span><span class="n">initialize</span><span class="p">()</span>

    <span class="k">yield</span> <span class="n">service</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="aiperf.tests.base_test_service.BaseTestService.no_sleep" class="doc doc-heading">
            <code class=" language-python"><span class="n">no_sleep</span><span class="p">(</span><span class="n">monkeypatch</span><span class="p">)</span></code>

<a href="#aiperf.tests.base_test_service.BaseTestService.no_sleep" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Patch asyncio.sleep with a no-op to prevent test delays.</p>
<p>This ensures tests don't need to wait for real sleep calls.</p>


            <details class="quote">
              <summary>Source code in <code>aiperf/tests/base_test_service.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@pytest</span><span class="o">.</span><span class="n">fixture</span><span class="p">(</span><span class="n">autouse</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="k">def</span><span class="w"> </span><span class="nf">no_sleep</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">monkeypatch</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Patch asyncio.sleep with a no-op to prevent test delays.</span>

<span class="sd">    This ensures tests don&#39;t need to wait for real sleep calls.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">monkeypatch</span><span class="o">.</span><span class="n">setattr</span><span class="p">(</span><span class="n">asyncio</span><span class="p">,</span> <span class="s2">&quot;sleep&quot;</span><span class="p">,</span> <span class="n">async_noop</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="aiperf.tests.base_test_service.BaseTestService.patch_communication_factory" class="doc doc-heading">
            <code class=" language-python"><span class="n">patch_communication_factory</span><span class="p">(</span><span class="n">mock_communication</span><span class="p">)</span></code>

<a href="#aiperf.tests.base_test_service.BaseTestService.patch_communication_factory" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Patch the communication factory to always return our mock communication.</p>
<p>This ensures no real communication is attempted during tests.</p>


            <details class="quote">
              <summary>Source code in <code>aiperf/tests/base_test_service.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@pytest</span><span class="o">.</span><span class="n">fixture</span><span class="p">(</span><span class="n">autouse</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="k">def</span><span class="w"> </span><span class="nf">patch_communication_factory</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span> <span class="n">mock_communication</span><span class="p">:</span> <span class="n">MagicMock</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Generator</span><span class="p">[</span><span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Patch the communication factory to always return our mock communication.</span>

<span class="sd">    This ensures no real communication is attempted during tests.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">with</span> <span class="n">patch</span><span class="p">(</span>
        <span class="s2">&quot;aiperf.common.factories.CommunicationFactory.create_instance&quot;</span><span class="p">,</span>
        <span class="n">return_value</span><span class="o">=</span><span class="n">mock_communication</span><span class="p">,</span>
    <span class="p">):</span>
        <span class="k">yield</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="aiperf.tests.base_test_service.BaseTestService.service_class" class="doc doc-heading">
            <code class=" language-python"><span class="n">service_class</span><span class="p">()</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-abstractmethod"><code>abstractmethod</code></small>
  </span>

<a href="#aiperf.tests.base_test_service.BaseTestService.service_class" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Return the service class to test.</p>
<p>Must be implemented by subclasses to specify which service is being tested.</p>


            <details class="quote">
              <summary>Source code in <code>aiperf/tests/base_test_service.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@abstractmethod</span>
<span class="nd">@pytest</span><span class="o">.</span><span class="n">fixture</span>
<span class="k">def</span><span class="w"> </span><span class="nf">service_class</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">type</span><span class="p">[</span><span class="n">BaseService</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Return the service class to test.</span>

<span class="sd">    Must be implemented by subclasses to specify which service is being tested.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s2">&quot;Subclasses must implement this method&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="aiperf.tests.base_test_service.BaseTestService.service_config" class="doc doc-heading">
            <code class=" language-python"><span class="n">service_config</span><span class="p">()</span></code>

<a href="#aiperf.tests.base_test_service.BaseTestService.service_config" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Create a service configuration for testing.</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="ServiceConfig (aiperf.common.config.service_config.ServiceConfig)" href="#aiperf.common.config.service_config.ServiceConfig">ServiceConfig</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A ServiceConfig instance with test settings</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>aiperf/tests/base_test_service.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span>
<span class="normal">71</span>
<span class="normal">72</span>
<span class="normal">73</span>
<span class="normal">74</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@pytest</span><span class="o">.</span><span class="n">fixture</span>
<span class="k">def</span><span class="w"> </span><span class="nf">service_config</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ServiceConfig</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Create a service configuration for testing.</span>

<span class="sd">    Returns:</span>
<span class="sd">        A ServiceConfig instance with test settings</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">ServiceConfig</span><span class="p">(</span>
        <span class="n">service_run_type</span><span class="o">=</span><span class="n">ServiceRunType</span><span class="o">.</span><span class="n">MULTIPROCESSING</span><span class="p">,</span>
        <span class="n">comm_backend</span><span class="o">=</span><span class="n">CommunicationBackend</span><span class="o">.</span><span class="n">ZMQ_TCP</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="aiperf.tests.base_test_service.BaseTestService.test_service_initialization" class="doc doc-heading">
            <code class=" language-python"><span class="n">test_service_initialization</span><span class="p">(</span><span class="n">uninitialized_service</span><span class="p">,</span> <span class="n">mock_communication</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#aiperf.tests.base_test_service.BaseTestService.test_service_initialization" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Test that the service initializes correctly. This will be executed
for every service that inherits from BaseTestService.</p>
<p>This verifies:
1. The service has a valid ID and type
2. The service transitions to the correct state during initialization
3. The service's internal initialization method is called</p>


            <details class="quote">
              <summary>Source code in <code>aiperf/tests/base_test_service.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@pytest</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">asyncio</span>
<span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">test_service_initialization</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span> <span class="n">uninitialized_service</span><span class="p">:</span> <span class="n">BaseService</span><span class="p">,</span> <span class="n">mock_communication</span><span class="p">:</span> <span class="n">MagicMock</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Test that the service initializes correctly. This will be executed</span>
<span class="sd">    for every service that inherits from BaseTestService.</span>

<span class="sd">    This verifies:</span>
<span class="sd">    1. The service has a valid ID and type</span>
<span class="sd">    2. The service transitions to the correct state during initialization</span>
<span class="sd">    3. The service&#39;s internal initialization method is called</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">service</span> <span class="o">=</span> <span class="k">await</span> <span class="n">async_fixture</span><span class="p">(</span><span class="n">uninitialized_service</span><span class="p">)</span>

    <span class="c1"># Check that the service has an ID and type</span>
    <span class="k">assert</span> <span class="n">service</span><span class="o">.</span><span class="n">service_id</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
    <span class="k">assert</span> <span class="n">service</span><span class="o">.</span><span class="n">service_type</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>

    <span class="c1"># Check that the service is not initialized</span>
    <span class="k">assert</span> <span class="n">service</span><span class="o">.</span><span class="n">state</span> <span class="o">==</span> <span class="n">ServiceState</span><span class="o">.</span><span class="n">UNKNOWN</span>

    <span class="c1"># Initialize the service</span>
    <span class="k">await</span> <span class="n">service</span><span class="o">.</span><span class="n">initialize</span><span class="p">()</span>

    <span class="c1"># Check that the service is initialized and in the READY state</span>
    <span class="k">assert</span> <span class="n">service</span><span class="o">.</span><span class="n">is_initialized</span>
    <span class="k">assert</span> <span class="n">service</span><span class="o">.</span><span class="n">state</span> <span class="o">==</span> <span class="n">ServiceState</span><span class="o">.</span><span class="n">READY</span>

    <span class="k">await</span> <span class="n">service</span><span class="o">.</span><span class="n">stop</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="aiperf.tests.base_test_service.BaseTestService.test_service_run_does_not_start" class="doc doc-heading">
            <code class=" language-python"><span class="n">test_service_run_does_not_start</span><span class="p">(</span><span class="n">initialized_service</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#aiperf.tests.base_test_service.BaseTestService.test_service_run_does_not_start" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Test that the service does not start when the run method is called (default behavior). This will be executed
for every service that inherits from BaseTestService.</p>


            <details class="quote">
              <summary>Source code in <code>aiperf/tests/base_test_service.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@pytest</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">asyncio</span>
<span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">test_service_run_does_not_start</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span> <span class="n">initialized_service</span><span class="p">:</span> <span class="n">BaseService</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Test that the service does not start when the run method is called (default behavior). This will be executed</span>
<span class="sd">    for every service that inherits from BaseTestService.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">service</span> <span class="o">=</span> <span class="k">await</span> <span class="n">async_fixture</span><span class="p">(</span><span class="n">MagicMock</span><span class="p">(</span><span class="n">wraps</span><span class="o">=</span><span class="n">initialized_service</span><span class="p">))</span>

    <span class="n">service</span><span class="o">.</span><span class="n">_forever_loop</span><span class="o">.</span><span class="n">return_value</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="k">await</span> <span class="n">service</span><span class="o">.</span><span class="n">run_forever</span><span class="p">()</span>
    <span class="k">assert</span> <span class="ow">not</span> <span class="n">service</span><span class="o">.</span><span class="n">start</span><span class="o">.</span><span class="n">called</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="aiperf.tests.base_test_service.BaseTestService.test_service_start_stop" class="doc doc-heading">
            <code class=" language-python"><span class="n">test_service_start_stop</span><span class="p">(</span><span class="n">initialized_service</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#aiperf.tests.base_test_service.BaseTestService.test_service_start_stop" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Test that the service can start and stop correctly. This will be executed
for every service that inherits from BaseTestService.</p>
<p>This verifies:
1. The service transitions to the <code>ServiceState.RUNNING</code> state when started
2. The service transitions to the <code>ServiceState.STOPPED</code> state when stopped</p>


            <details class="quote">
              <summary>Source code in <code>aiperf/tests/base_test_service.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@pytest</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">asyncio</span>
<span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">test_service_start_stop</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">initialized_service</span><span class="p">:</span> <span class="n">BaseService</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Test that the service can start and stop correctly. This will be executed</span>
<span class="sd">    for every service that inherits from BaseTestService.</span>

<span class="sd">    This verifies:</span>
<span class="sd">    1. The service transitions to the `ServiceState.RUNNING` state when started</span>
<span class="sd">    2. The service transitions to the `ServiceState.STOPPED` state when stopped</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">service</span> <span class="o">=</span> <span class="k">await</span> <span class="n">async_fixture</span><span class="p">(</span><span class="n">initialized_service</span><span class="p">)</span>

    <span class="c1"># Start the service</span>
    <span class="k">await</span> <span class="n">service</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>
    <span class="k">assert</span> <span class="n">service</span><span class="o">.</span><span class="n">state</span> <span class="o">==</span> <span class="n">ServiceState</span><span class="o">.</span><span class="n">RUNNING</span>

    <span class="c1"># Stop the service</span>
    <span class="k">await</span> <span class="n">service</span><span class="o">.</span><span class="n">stop</span><span class="p">()</span>
    <span class="k">assert</span> <span class="n">service</span><span class="o">.</span><span class="n">state</span> <span class="o">==</span> <span class="n">ServiceState</span><span class="o">.</span><span class="n">STOPPED</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="aiperf.tests.base_test_service.BaseTestService.test_service_state_transitions" class="doc doc-heading">
            <code class=" language-python"><span class="n">test_service_state_transitions</span><span class="p">(</span><span class="n">initialized_service</span><span class="p">,</span> <span class="n">state</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#aiperf.tests.base_test_service.BaseTestService.test_service_state_transitions" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Test that the service can transition to all possible states. This will be executed
for every service that inherits from BaseTestService.</p>


            <details class="quote">
              <summary>Source code in <code>aiperf/tests/base_test_service.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@pytest</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">parametrize</span><span class="p">(</span>
    <span class="s2">&quot;state&quot;</span><span class="p">,</span>
    <span class="p">[</span><span class="n">state</span> <span class="k">for</span> <span class="n">state</span> <span class="ow">in</span> <span class="n">ServiceState</span> <span class="k">if</span> <span class="n">state</span> <span class="o">!=</span> <span class="n">ServiceState</span><span class="o">.</span><span class="n">UNKNOWN</span><span class="p">],</span>
<span class="p">)</span>
<span class="nd">@pytest</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">asyncio</span>
<span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">test_service_state_transitions</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span> <span class="n">initialized_service</span><span class="p">:</span> <span class="n">BaseService</span><span class="p">,</span> <span class="n">state</span><span class="p">:</span> <span class="n">ServiceState</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Test that the service can transition to all possible states. This will be executed</span>
<span class="sd">    for every service that inherits from BaseTestService.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">service</span> <span class="o">=</span> <span class="k">await</span> <span class="n">async_fixture</span><span class="p">(</span><span class="n">initialized_service</span><span class="p">)</span>

    <span class="c1"># Update the service state</span>
    <span class="k">await</span> <span class="n">service</span><span class="o">.</span><span class="n">set_state</span><span class="p">(</span><span class="n">state</span><span class="p">)</span>

    <span class="c1"># Check that the service state was updated</span>
    <span class="k">assert</span> <span class="n">service</span><span class="o">.</span><span class="n">state</span> <span class="o">==</span> <span class="n">state</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="aiperf.tests.base_test_service.BaseTestService.uninitialized_service" class="doc doc-heading">
            <code class=" language-python"><span class="n">uninitialized_service</span><span class="p">(</span><span class="n">service_class</span><span class="p">,</span> <span class="n">service_config</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#aiperf.tests.base_test_service.BaseTestService.uninitialized_service" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Create an uninitialized instance of the service under test.</p>
<p>This provides a service instance before initialize() has been called,
allowing tests to verify initialization behavior.</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="collections.abc.AsyncGenerator">AsyncGenerator</span>[<a class="autorefs autorefs-internal" title="BaseService (aiperf.common.service.base_service.BaseService)" href="#aiperf.common.service.base_service.BaseService">BaseService</a>, None]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>An uninitialized instance of the service</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>
        <p>Example usage:</p>
<div class="codehilite"><pre><span></span><code><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">test_service_initialization</span><span class="p">(</span><span class="n">uninitialized_service</span><span class="p">:</span> <span class="n">BaseService</span><span class="p">):</span>
    <span class="n">service</span> <span class="o">=</span> <span class="k">await</span> <span class="n">async_fixture</span><span class="p">(</span><span class="n">uninitialized_service</span><span class="p">)</span>
    <span class="k">await</span> <span class="n">service</span><span class="o">.</span><span class="n">initialize</span><span class="p">()</span>
</code></pre></div>


            <details class="quote">
              <summary>Source code in <code>aiperf/tests/base_test_service.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@pytest</span><span class="o">.</span><span class="n">fixture</span>
<span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">uninitialized_service</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">service_class</span><span class="p">:</span> <span class="nb">type</span><span class="p">[</span><span class="n">BaseService</span><span class="p">],</span>
    <span class="n">service_config</span><span class="p">:</span> <span class="n">ServiceConfig</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">AsyncGenerator</span><span class="p">[</span><span class="n">BaseService</span><span class="p">,</span> <span class="kc">None</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Create an uninitialized instance of the service under test.</span>

<span class="sd">    This provides a service instance before initialize() has been called,</span>
<span class="sd">    allowing tests to verify initialization behavior.</span>

<span class="sd">    Returns:</span>
<span class="sd">        An uninitialized instance of the service</span>

<span class="sd">    Example usage:</span>
<span class="sd">    ```python</span>
<span class="sd">    async def test_service_initialization(uninitialized_service: BaseService):</span>
<span class="sd">        service = await async_fixture(uninitialized_service)</span>
<span class="sd">        await service.initialize()</span>
<span class="sd">    ```</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Patch the heartbeat task otherwise it will run forever</span>
    <span class="k">with</span> <span class="n">patch</span><span class="p">(</span>
        <span class="s2">&quot;aiperf.common.service.base_component_service.BaseComponentService._heartbeat_task&quot;</span><span class="p">,</span>
        <span class="k">lambda</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">):</span>
        <span class="n">service</span> <span class="o">=</span> <span class="n">service_class</span><span class="p">(</span><span class="n">service_config</span><span class="o">=</span><span class="n">service_config</span><span class="p">)</span>
        <span class="k">yield</span> <span class="n">service</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>




  </div>

    </div>

</div><h2 id="aiperftestscommsmock_zmq">aiperf.tests.comms.mock_zmq<a class="headerlink" href="#aiperftestscommsmock_zmq" title="Permanent link">&para;</a></h2>


<div class="doc doc-object doc-module">



<a id="aiperf.tests.comms.mock_zmq"></a>
    <div class="doc doc-contents first">









  <div class="doc doc-children">








<div class="doc doc-object doc-class">



<h2 id="aiperf.tests.comms.mock_zmq.MockCommunicationData" class="doc doc-heading">
            <code>MockCommunicationData</code>


<a href="#aiperf.tests.comms.mock_zmq.MockCommunicationData" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="pydantic.BaseModel">BaseModel</span></code></p>


        <p>Data structure to hold state information for mock communication objects.</p>







              <details class="quote">
                <summary>Source code in <code>aiperf/tests/comms/mock_zmq.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">MockCommunicationData</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Data structure to hold state information for mock communication objects.&quot;&quot;&quot;</span>

    <span class="n">published_messages</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="n">Topic</span><span class="p">,</span> <span class="nb">list</span><span class="p">[</span><span class="n">Message</span><span class="p">]]</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">default_factory</span><span class="o">=</span><span class="nb">dict</span><span class="p">)</span>
    <span class="n">subscriptions</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Callable</span><span class="p">[[</span><span class="n">Message</span><span class="p">],</span> <span class="n">Coroutine</span><span class="p">[</span><span class="n">Any</span><span class="p">,</span> <span class="n">Any</span><span class="p">,</span> <span class="kc">None</span><span class="p">]]]</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">default_factory</span><span class="o">=</span><span class="nb">dict</span>
    <span class="p">)</span>
    <span class="n">pull_callbacks</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="n">Topic</span><span class="p">,</span> <span class="n">Callable</span><span class="p">[[</span><span class="n">Message</span><span class="p">],</span> <span class="kc">None</span><span class="p">]]</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">default_factory</span><span class="o">=</span><span class="nb">dict</span><span class="p">)</span>
    <span class="n">push_messages</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="n">Topic</span><span class="p">,</span> <span class="n">Message</span><span class="p">]</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">default_factory</span><span class="o">=</span><span class="nb">dict</span><span class="p">)</span>
    <span class="n">requests</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Message</span><span class="p">]</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">default_factory</span><span class="o">=</span><span class="nb">dict</span><span class="p">)</span>
    <span class="n">responses</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Message</span><span class="p">]</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">default_factory</span><span class="o">=</span><span class="nb">dict</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">clear</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">published_messages</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">subscriptions</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pull_callbacks</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">push_messages</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">requests</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">responses</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">











  </div>

    </div>

</div>


<div class="doc doc-object doc-function">


<h2 id="aiperf.tests.comms.mock_zmq.mock_zmq_communication" class="doc doc-heading">
            <code class=" language-python"><span class="n">mock_zmq_communication</span><span class="p">()</span></code>

<a href="#aiperf.tests.comms.mock_zmq.mock_zmq_communication" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">

        <p>Create a mock communication object for testing service communication.</p>
<p>This mock tracks published messages, subscriptions, pull callbacks,
push messages, and requests and responses for verification in tests.</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="unittest.mock.MagicMock">MagicMock</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A MagicMock configured to behave like ZMQCommunication</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>aiperf/tests/comms/mock_zmq.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 37</span>
<span class="normal"> 38</span>
<span class="normal"> 39</span>
<span class="normal"> 40</span>
<span class="normal"> 41</span>
<span class="normal"> 42</span>
<span class="normal"> 43</span>
<span class="normal"> 44</span>
<span class="normal"> 45</span>
<span class="normal"> 46</span>
<span class="normal"> 47</span>
<span class="normal"> 48</span>
<span class="normal"> 49</span>
<span class="normal"> 50</span>
<span class="normal"> 51</span>
<span class="normal"> 52</span>
<span class="normal"> 53</span>
<span class="normal"> 54</span>
<span class="normal"> 55</span>
<span class="normal"> 56</span>
<span class="normal"> 57</span>
<span class="normal"> 58</span>
<span class="normal"> 59</span>
<span class="normal"> 60</span>
<span class="normal"> 61</span>
<span class="normal"> 62</span>
<span class="normal"> 63</span>
<span class="normal"> 64</span>
<span class="normal"> 65</span>
<span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@pytest</span><span class="o">.</span><span class="n">fixture</span>
<span class="k">def</span><span class="w"> </span><span class="nf">mock_zmq_communication</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="n">MagicMock</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Create a mock communication object for testing service communication.</span>

<span class="sd">    This mock tracks published messages, subscriptions, pull callbacks,</span>
<span class="sd">    push messages, and requests and responses for verification in tests.</span>

<span class="sd">    Returns:</span>
<span class="sd">        A MagicMock configured to behave like ZMQCommunication</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">mock_comm</span> <span class="o">=</span> <span class="n">MagicMock</span><span class="p">(</span><span class="n">spec</span><span class="o">=</span><span class="n">ZMQCommunication</span><span class="p">)</span>

    <span class="c1"># Configure basic behavior</span>
    <span class="n">mock_comm</span><span class="o">.</span><span class="n">initialize</span><span class="o">.</span><span class="n">return_value</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">mock_comm</span><span class="o">.</span><span class="n">shutdown</span><span class="o">.</span><span class="n">return_value</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">mock_comm</span><span class="o">.</span><span class="n">create_clients</span><span class="o">.</span><span class="n">return_value</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="n">mock_comm</span><span class="o">.</span><span class="n">mock_data</span> <span class="o">=</span> <span class="n">MockCommunicationData</span><span class="p">()</span>

    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">mock_publish</span><span class="p">(</span><span class="n">topic</span><span class="p">:</span> <span class="n">Topic</span><span class="p">,</span> <span class="n">message</span><span class="p">:</span> <span class="n">Message</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Mock implementation of publish that stores messages by topic.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">topic</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">mock_comm</span><span class="o">.</span><span class="n">mock_data</span><span class="o">.</span><span class="n">published_messages</span><span class="p">:</span>
            <span class="n">mock_comm</span><span class="o">.</span><span class="n">mock_data</span><span class="o">.</span><span class="n">published_messages</span><span class="p">[</span><span class="n">topic</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="n">mock_comm</span><span class="o">.</span><span class="n">mock_data</span><span class="o">.</span><span class="n">published_messages</span><span class="p">[</span><span class="n">topic</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">message</span><span class="p">)</span>

    <span class="n">mock_comm</span><span class="o">.</span><span class="n">publish</span><span class="o">.</span><span class="n">side_effect</span> <span class="o">=</span> <span class="n">mock_publish</span>

    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">mock_subscribe</span><span class="p">(</span>
        <span class="n">topic</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">callback</span><span class="p">:</span> <span class="n">Callable</span><span class="p">[[</span><span class="n">Message</span><span class="p">],</span> <span class="n">Coroutine</span><span class="p">[</span><span class="n">Any</span><span class="p">,</span> <span class="n">Any</span><span class="p">,</span> <span class="kc">None</span><span class="p">]]</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Mock implementation of subscribe that stores callbacks by topic.&quot;&quot;&quot;</span>
        <span class="n">mock_comm</span><span class="o">.</span><span class="n">mock_data</span><span class="o">.</span><span class="n">subscriptions</span><span class="p">[</span><span class="n">topic</span><span class="p">]</span> <span class="o">=</span> <span class="n">callback</span>

    <span class="n">mock_comm</span><span class="o">.</span><span class="n">subscribe</span><span class="o">.</span><span class="n">side_effect</span> <span class="o">=</span> <span class="n">mock_subscribe</span>

    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">mock_register_pull_callback</span><span class="p">(</span>
        <span class="n">message_type</span><span class="p">:</span> <span class="n">MessageType</span><span class="p">,</span> <span class="n">callback</span><span class="p">:</span> <span class="n">Callable</span><span class="p">[[</span><span class="n">Message</span><span class="p">],</span> <span class="kc">None</span><span class="p">]</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Mock implementation of pull that stores callbacks by topic.&quot;&quot;&quot;</span>
        <span class="n">mock_comm</span><span class="o">.</span><span class="n">mock_data</span><span class="o">.</span><span class="n">pull_callbacks</span><span class="p">[</span><span class="n">message_type</span><span class="p">]</span> <span class="o">=</span> <span class="n">callback</span>

    <span class="n">mock_comm</span><span class="o">.</span><span class="n">register_pull_callback</span><span class="o">.</span><span class="n">side_effect</span> <span class="o">=</span> <span class="n">mock_register_pull_callback</span>

    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">mock_push</span><span class="p">(</span><span class="n">topic</span><span class="p">:</span> <span class="n">Topic</span><span class="p">,</span> <span class="n">message</span><span class="p">:</span> <span class="n">Message</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Mock implementation of push that stores messages by topic.&quot;&quot;&quot;</span>
        <span class="n">mock_comm</span><span class="o">.</span><span class="n">mock_data</span><span class="o">.</span><span class="n">push_messages</span><span class="p">[</span><span class="n">topic</span><span class="p">]</span> <span class="o">=</span> <span class="n">message</span>

    <span class="n">mock_comm</span><span class="o">.</span><span class="n">push</span><span class="o">.</span><span class="n">side_effect</span> <span class="o">=</span> <span class="n">mock_push</span>

    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">mock_request</span><span class="p">(</span><span class="n">target</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">request_data</span><span class="p">:</span> <span class="n">Message</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Message</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Mock implementation of request that stores requests by target.&quot;&quot;&quot;</span>
        <span class="n">mock_comm</span><span class="o">.</span><span class="n">mock_data</span><span class="o">.</span><span class="n">requests</span><span class="p">[</span><span class="n">target</span><span class="p">]</span> <span class="o">=</span> <span class="n">request_data</span>

        <span class="c1"># Return a fake mock response</span>
        <span class="k">return</span> <span class="n">StatusMessage</span><span class="p">(</span>
            <span class="n">service_id</span><span class="o">=</span><span class="s2">&quot;mock_service_id&quot;</span><span class="p">,</span>
            <span class="n">service_type</span><span class="o">=</span><span class="n">ServiceType</span><span class="o">.</span><span class="n">TEST</span><span class="p">,</span>
            <span class="n">state</span><span class="o">=</span><span class="n">ServiceState</span><span class="o">.</span><span class="n">READY</span><span class="p">,</span>
        <span class="p">)</span>

    <span class="n">mock_comm</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">side_effect</span> <span class="o">=</span> <span class="n">mock_request</span>

    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">mock_respond</span><span class="p">(</span><span class="n">target</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">response</span><span class="p">:</span> <span class="n">Message</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Mock implementation of respond that stores responses by target.&quot;&quot;&quot;</span>
        <span class="n">mock_comm</span><span class="o">.</span><span class="n">mock_data</span><span class="o">.</span><span class="n">responses</span><span class="p">[</span><span class="n">target</span><span class="p">]</span> <span class="o">=</span> <span class="n">response</span>

    <span class="n">mock_comm</span><span class="o">.</span><span class="n">respond</span><span class="o">.</span><span class="n">side_effect</span> <span class="o">=</span> <span class="n">mock_respond</span>

    <span class="k">return</span> <span class="n">mock_comm</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div><h2 id="aiperftestscommstest_zmq_communication">aiperf.tests.comms.test_zmq_communication<a class="headerlink" href="#aiperftestscommstest_zmq_communication" title="Permanent link">&para;</a></h2>


<div class="doc doc-object doc-module">



<a id="aiperf.tests.comms.test_zmq_communication"></a>
    <div class="doc doc-contents first">

        <p>Tests for the ZMQ communication module.</p>









  <div class="doc doc-children">








<div class="doc doc-object doc-class">



<h2 id="aiperf.tests.comms.test_zmq_communication.TestZMQCommunication" class="doc doc-heading">
            <code>TestZMQCommunication</code>


<a href="#aiperf.tests.comms.test_zmq_communication.TestZMQCommunication" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">


        <p>Tests for the ZMQ communication class.</p>







              <details class="quote">
                <summary>Source code in <code>aiperf/tests/comms/test_zmq_communication.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 22</span>
<span class="normal"> 23</span>
<span class="normal"> 24</span>
<span class="normal"> 25</span>
<span class="normal"> 26</span>
<span class="normal"> 27</span>
<span class="normal"> 28</span>
<span class="normal"> 29</span>
<span class="normal"> 30</span>
<span class="normal"> 31</span>
<span class="normal"> 32</span>
<span class="normal"> 33</span>
<span class="normal"> 34</span>
<span class="normal"> 35</span>
<span class="normal"> 36</span>
<span class="normal"> 37</span>
<span class="normal"> 38</span>
<span class="normal"> 39</span>
<span class="normal"> 40</span>
<span class="normal"> 41</span>
<span class="normal"> 42</span>
<span class="normal"> 43</span>
<span class="normal"> 44</span>
<span class="normal"> 45</span>
<span class="normal"> 46</span>
<span class="normal"> 47</span>
<span class="normal"> 48</span>
<span class="normal"> 49</span>
<span class="normal"> 50</span>
<span class="normal"> 51</span>
<span class="normal"> 52</span>
<span class="normal"> 53</span>
<span class="normal"> 54</span>
<span class="normal"> 55</span>
<span class="normal"> 56</span>
<span class="normal"> 57</span>
<span class="normal"> 58</span>
<span class="normal"> 59</span>
<span class="normal"> 60</span>
<span class="normal"> 61</span>
<span class="normal"> 62</span>
<span class="normal"> 63</span>
<span class="normal"> 64</span>
<span class="normal"> 65</span>
<span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@pytest</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">asyncio</span>
<span class="k">class</span><span class="w"> </span><span class="nc">TestZMQCommunication</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Tests for the ZMQ communication class.&quot;&quot;&quot;</span>

    <span class="nd">@pytest</span><span class="o">.</span><span class="n">fixture</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">mock_config</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Return a mock configuration for ZMQCommunication.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">ZMQCommunicationConfig</span><span class="p">(</span>
            <span class="n">protocol_config</span><span class="o">=</span><span class="n">ZMQTCPTransportConfig</span><span class="p">(),</span> <span class="n">client_id</span><span class="o">=</span><span class="s2">&quot;test-client&quot;</span>
        <span class="p">)</span>

    <span class="nd">@pytest</span><span class="o">.</span><span class="n">fixture</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">zmq_communication</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mock_config</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Return a ZMQCommunication instance for testing.&quot;&quot;&quot;</span>
        <span class="k">with</span> <span class="n">patch</span><span class="p">(</span><span class="s2">&quot;zmq.asyncio.Context&quot;</span><span class="p">,</span> <span class="n">MagicMock</span><span class="p">())</span> <span class="k">as</span> <span class="n">mock_context</span><span class="p">:</span>
            <span class="c1"># Set up the context mock to return properly</span>
            <span class="n">mock_context</span><span class="o">.</span><span class="n">return_value</span> <span class="o">=</span> <span class="n">MagicMock</span><span class="p">()</span>
            <span class="n">comm</span> <span class="o">=</span> <span class="n">ZMQCommunication</span><span class="p">(</span><span class="n">config</span><span class="o">=</span><span class="n">mock_config</span><span class="p">)</span>
            <span class="n">comm</span><span class="o">.</span><span class="n">_context</span> <span class="o">=</span> <span class="n">mock_context</span>
            <span class="k">return</span> <span class="n">comm</span>

    <span class="nd">@pytest</span><span class="o">.</span><span class="n">fixture</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">test_message</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Create a test message for communication tests.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">StatusMessage</span><span class="p">(</span>
            <span class="n">service_id</span><span class="o">=</span><span class="s2">&quot;test-service&quot;</span><span class="p">,</span>
            <span class="n">service_type</span><span class="o">=</span><span class="n">ServiceType</span><span class="o">.</span><span class="n">TEST</span><span class="p">,</span>
            <span class="n">state</span><span class="o">=</span><span class="n">ServiceState</span><span class="o">.</span><span class="n">READY</span><span class="p">,</span>
        <span class="p">)</span>

    <span class="nd">@pytest</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">asyncio</span>
    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">test_initialization</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">zmq_communication</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Test that the ZMQ communication initializes correctly.&quot;&quot;&quot;</span>
        <span class="n">result</span> <span class="o">=</span> <span class="k">await</span> <span class="n">zmq_communication</span><span class="o">.</span><span class="n">initialize</span><span class="p">()</span>
        <span class="k">assert</span> <span class="n">result</span> <span class="ow">is</span> <span class="kc">None</span>
        <span class="k">assert</span> <span class="n">zmq_communication</span><span class="o">.</span><span class="n">is_initialized</span> <span class="ow">is</span> <span class="kc">True</span>

    <span class="nd">@pytest</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">asyncio</span>
    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">test_initialization_failure</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">zmq_communication</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Test initialization failure handling.&quot;&quot;&quot;</span>
        <span class="c1"># Temporarily clear initialized_event to test error path</span>
        <span class="n">zmq_communication</span><span class="o">.</span><span class="n">initialized_event</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>

        <span class="c1"># Create a mock implementation that raises an exception</span>
        <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">mock_init_with_error</span><span class="p">():</span>
            <span class="k">raise</span> <span class="n">CommunicationInitializationError</span><span class="p">(</span><span class="s2">&quot;Test connection error&quot;</span><span class="p">)</span>

        <span class="c1"># Replace the original method and call to test error handling</span>
        <span class="n">original_init</span> <span class="o">=</span> <span class="n">zmq_communication</span><span class="o">.</span><span class="n">initialize</span>
        <span class="n">zmq_communication</span><span class="o">.</span><span class="n">initialize</span> <span class="o">=</span> <span class="n">mock_init_with_error</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="k">with</span> <span class="n">pytest</span><span class="o">.</span><span class="n">raises</span><span class="p">(</span>
                <span class="n">CommunicationInitializationError</span><span class="p">,</span> <span class="n">match</span><span class="o">=</span><span class="s2">&quot;Test connection error&quot;</span>
            <span class="p">):</span>
                <span class="k">await</span> <span class="n">zmq_communication</span><span class="o">.</span><span class="n">initialize</span><span class="p">()</span>
        <span class="k">finally</span><span class="p">:</span>
            <span class="c1"># Restore the original method</span>
            <span class="n">zmq_communication</span><span class="o">.</span><span class="n">initialize</span> <span class="o">=</span> <span class="n">original_init</span>

    <span class="nd">@pytest</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">asyncio</span>
    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">test_create_clients</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">zmq_communication</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Test creating clients for different communication patterns.&quot;&quot;&quot;</span>
        <span class="c1"># Mock the client socket creation</span>
        <span class="n">mock_client</span> <span class="o">=</span> <span class="n">AsyncMock</span><span class="p">()</span>

        <span class="c1"># Patch the specific client classes and ensure they return our mock</span>
        <span class="k">with</span> <span class="p">(</span>
            <span class="n">patch</span><span class="p">(</span>
                <span class="s2">&quot;aiperf.common.comms.zmq.clients.ZMQPubClient&quot;</span><span class="p">,</span>
                <span class="n">return_value</span><span class="o">=</span><span class="n">mock_client</span><span class="p">,</span>
            <span class="p">),</span>
            <span class="n">patch</span><span class="p">(</span>
                <span class="s2">&quot;aiperf.common.comms.zmq.clients.ZMQSubClient&quot;</span><span class="p">,</span>
                <span class="n">return_value</span><span class="o">=</span><span class="n">mock_client</span><span class="p">,</span>
            <span class="p">),</span>
        <span class="p">):</span>
            <span class="c1"># Call create_clients</span>
            <span class="k">await</span> <span class="n">zmq_communication</span><span class="o">.</span><span class="n">create_clients</span><span class="p">(</span>
                <span class="n">PubClientType</span><span class="o">.</span><span class="n">COMPONENT</span><span class="p">,</span> <span class="n">SubClientType</span><span class="o">.</span><span class="n">COMPONENT</span>
            <span class="p">)</span>

            <span class="c1"># Verify clients were added to the dictionary</span>
            <span class="k">assert</span> <span class="n">PubClientType</span><span class="o">.</span><span class="n">COMPONENT</span> <span class="ow">in</span> <span class="n">zmq_communication</span><span class="o">.</span><span class="n">clients</span>
            <span class="k">assert</span> <span class="n">SubClientType</span><span class="o">.</span><span class="n">COMPONENT</span> <span class="ow">in</span> <span class="n">zmq_communication</span><span class="o">.</span><span class="n">clients</span>

            <span class="c1"># Verify initialize was called for each client</span>
            <span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">zmq_communication</span><span class="o">.</span><span class="n">clients</span><span class="p">)</span> <span class="o">==</span> <span class="mi">2</span>

    <span class="nd">@pytest</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">asyncio</span>
    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">test_publish_message</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">zmq_communication</span><span class="p">,</span> <span class="n">test_message</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Test publishing messages.&quot;&quot;&quot;</span>
        <span class="c1"># Mock the socket publish method</span>
        <span class="n">mock_client</span> <span class="o">=</span> <span class="n">AsyncMock</span><span class="p">()</span>
        <span class="n">mock_client</span><span class="o">.</span><span class="n">publish</span><span class="o">.</span><span class="n">return_value</span> <span class="o">=</span> <span class="kc">None</span>

        <span class="c1"># Set up the client in the clients dictionary</span>
        <span class="n">zmq_communication</span><span class="o">.</span><span class="n">clients</span> <span class="o">=</span> <span class="p">{</span><span class="n">PubClientType</span><span class="o">.</span><span class="n">COMPONENT</span><span class="p">:</span> <span class="n">mock_client</span><span class="p">}</span>
        <span class="n">zmq_communication</span><span class="o">.</span><span class="n">initialized_event</span><span class="o">.</span><span class="n">set</span><span class="p">()</span>

        <span class="c1"># Publish a message</span>
        <span class="n">result</span> <span class="o">=</span> <span class="k">await</span> <span class="n">zmq_communication</span><span class="o">.</span><span class="n">publish</span><span class="p">(</span><span class="n">Topic</span><span class="o">.</span><span class="n">STATUS</span><span class="p">,</span> <span class="n">test_message</span><span class="p">)</span>

        <span class="c1"># Verify the message was published</span>
        <span class="k">assert</span> <span class="n">result</span> <span class="ow">is</span> <span class="kc">None</span>
        <span class="n">mock_client</span><span class="o">.</span><span class="n">publish</span><span class="o">.</span><span class="n">assert_called_once_with</span><span class="p">(</span><span class="n">Topic</span><span class="o">.</span><span class="n">STATUS</span><span class="p">,</span> <span class="n">test_message</span><span class="p">)</span>

    <span class="nd">@pytest</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">asyncio</span>
    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">test_subscribe_to_topic</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">zmq_communication</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Test subscribing to a topic.&quot;&quot;&quot;</span>
        <span class="c1"># Mock the client socket</span>
        <span class="n">mock_client</span> <span class="o">=</span> <span class="n">AsyncMock</span><span class="p">()</span>
        <span class="n">mock_client</span><span class="o">.</span><span class="n">subscribe</span><span class="o">.</span><span class="n">return_value</span> <span class="o">=</span> <span class="kc">None</span>

        <span class="c1"># Set up the client in the clients dictionary</span>
        <span class="n">zmq_communication</span><span class="o">.</span><span class="n">clients</span> <span class="o">=</span> <span class="p">{</span><span class="n">SubClientType</span><span class="o">.</span><span class="n">COMPONENT</span><span class="p">:</span> <span class="n">mock_client</span><span class="p">}</span>
        <span class="n">zmq_communication</span><span class="o">.</span><span class="n">initialized_event</span><span class="o">.</span><span class="n">set</span><span class="p">()</span>

        <span class="c1"># Create a callback function</span>
        <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">callback</span><span class="p">(</span><span class="n">message</span><span class="p">:</span> <span class="n">Message</span><span class="p">):</span>
            <span class="k">pass</span>

        <span class="c1"># Subscribe to a topic</span>
        <span class="n">result</span> <span class="o">=</span> <span class="k">await</span> <span class="n">zmq_communication</span><span class="o">.</span><span class="n">subscribe</span><span class="p">(</span><span class="n">Topic</span><span class="o">.</span><span class="n">STATUS</span><span class="p">,</span> <span class="n">callback</span><span class="p">)</span>

        <span class="c1"># Verify subscription was set up</span>
        <span class="k">assert</span> <span class="n">result</span> <span class="ow">is</span> <span class="kc">None</span>
        <span class="n">mock_client</span><span class="o">.</span><span class="n">subscribe</span><span class="o">.</span><span class="n">assert_called_once_with</span><span class="p">(</span><span class="n">Topic</span><span class="o">.</span><span class="n">STATUS</span><span class="p">,</span> <span class="n">callback</span><span class="p">)</span>

    <span class="nd">@pytest</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">asyncio</span>
    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">test_shutdown</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">zmq_communication</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Test graceful shutdown of communication.&quot;&quot;&quot;</span>
        <span class="c1"># Mock the client socket</span>
        <span class="n">mock_client1</span> <span class="o">=</span> <span class="n">AsyncMock</span><span class="p">()</span>
        <span class="n">mock_client1</span><span class="o">.</span><span class="n">shutdown</span><span class="o">.</span><span class="n">return_value</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">mock_client2</span> <span class="o">=</span> <span class="n">AsyncMock</span><span class="p">()</span>
        <span class="n">mock_client2</span><span class="o">.</span><span class="n">shutdown</span><span class="o">.</span><span class="n">return_value</span> <span class="o">=</span> <span class="kc">None</span>

        <span class="c1"># Set up clients</span>
        <span class="n">zmq_communication</span><span class="o">.</span><span class="n">clients</span> <span class="o">=</span> <span class="p">{</span>
            <span class="n">PubClientType</span><span class="o">.</span><span class="n">COMPONENT</span><span class="p">:</span> <span class="n">mock_client1</span><span class="p">,</span>
            <span class="n">SubClientType</span><span class="o">.</span><span class="n">COMPONENT</span><span class="p">:</span> <span class="n">mock_client2</span><span class="p">,</span>
        <span class="p">}</span>
        <span class="n">zmq_communication</span><span class="o">.</span><span class="n">initialized_event</span><span class="o">.</span><span class="n">set</span><span class="p">()</span>
        <span class="n">zmq_communication</span><span class="o">.</span><span class="n">stop_event</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>

        <span class="c1"># Mock the context with a patched shutdown method to avoid setting</span>
        <span class="c1"># context to None</span>
        <span class="n">context_mock</span> <span class="o">=</span> <span class="n">MagicMock</span><span class="p">()</span>
        <span class="n">zmq_communication</span><span class="o">.</span><span class="n">_context</span> <span class="o">=</span> <span class="n">context_mock</span>

        <span class="c1"># Create a patched version of shutdown that doesn&#39;t set context to None</span>
        <span class="n">original_shutdown</span> <span class="o">=</span> <span class="n">zmq_communication</span><span class="o">.</span><span class="n">shutdown</span>

        <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">patched_shutdown</span><span class="p">():</span>
            <span class="c1"># Calls original gather but patch term() to prevent context from</span>
            <span class="c1"># becoming None</span>
            <span class="k">with</span> <span class="n">patch</span><span class="o">.</span><span class="n">object</span><span class="p">(</span><span class="n">zmq_communication</span><span class="p">,</span> <span class="s2">&quot;_context&quot;</span><span class="p">,</span> <span class="n">context_mock</span><span class="p">):</span>
                <span class="k">return</span> <span class="k">await</span> <span class="n">original_shutdown</span><span class="p">()</span>

        <span class="n">zmq_communication</span><span class="o">.</span><span class="n">shutdown</span> <span class="o">=</span> <span class="n">patched_shutdown</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="c1"># Shutdown the communication</span>
            <span class="n">result</span> <span class="o">=</span> <span class="k">await</span> <span class="n">zmq_communication</span><span class="o">.</span><span class="n">shutdown</span><span class="p">()</span>

            <span class="c1"># Verify both clients were shutdown</span>
            <span class="k">assert</span> <span class="n">result</span> <span class="ow">is</span> <span class="kc">None</span>
            <span class="k">assert</span> <span class="n">mock_client1</span><span class="o">.</span><span class="n">shutdown</span><span class="o">.</span><span class="n">called</span>
            <span class="k">assert</span> <span class="n">mock_client2</span><span class="o">.</span><span class="n">shutdown</span><span class="o">.</span><span class="n">called</span>
            <span class="k">assert</span> <span class="n">context_mock</span><span class="o">.</span><span class="n">term</span><span class="o">.</span><span class="n">called</span>
            <span class="k">assert</span> <span class="n">zmq_communication</span><span class="o">.</span><span class="n">stop_event</span><span class="o">.</span><span class="n">is_set</span><span class="p">()</span>
        <span class="k">finally</span><span class="p">:</span>
            <span class="c1"># Restore the original method</span>
            <span class="n">zmq_communication</span><span class="o">.</span><span class="n">shutdown</span> <span class="o">=</span> <span class="n">original_shutdown</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h3 id="aiperf.tests.comms.test_zmq_communication.TestZMQCommunication.mock_config" class="doc doc-heading">
            <code class=" language-python"><span class="n">mock_config</span><span class="p">()</span></code>

<a href="#aiperf.tests.comms.test_zmq_communication.TestZMQCommunication.mock_config" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Return a mock configuration for ZMQCommunication.</p>


            <details class="quote">
              <summary>Source code in <code>aiperf/tests/comms/test_zmq_communication.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@pytest</span><span class="o">.</span><span class="n">fixture</span>
<span class="k">def</span><span class="w"> </span><span class="nf">mock_config</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Return a mock configuration for ZMQCommunication.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">ZMQCommunicationConfig</span><span class="p">(</span>
        <span class="n">protocol_config</span><span class="o">=</span><span class="n">ZMQTCPTransportConfig</span><span class="p">(),</span> <span class="n">client_id</span><span class="o">=</span><span class="s2">&quot;test-client&quot;</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="aiperf.tests.comms.test_zmq_communication.TestZMQCommunication.test_create_clients" class="doc doc-heading">
            <code class=" language-python"><span class="n">test_create_clients</span><span class="p">(</span><span class="n">zmq_communication</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#aiperf.tests.comms.test_zmq_communication.TestZMQCommunication.test_create_clients" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Test creating clients for different communication patterns.</p>


            <details class="quote">
              <summary>Source code in <code>aiperf/tests/comms/test_zmq_communication.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@pytest</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">asyncio</span>
<span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">test_create_clients</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">zmq_communication</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Test creating clients for different communication patterns.&quot;&quot;&quot;</span>
    <span class="c1"># Mock the client socket creation</span>
    <span class="n">mock_client</span> <span class="o">=</span> <span class="n">AsyncMock</span><span class="p">()</span>

    <span class="c1"># Patch the specific client classes and ensure they return our mock</span>
    <span class="k">with</span> <span class="p">(</span>
        <span class="n">patch</span><span class="p">(</span>
            <span class="s2">&quot;aiperf.common.comms.zmq.clients.ZMQPubClient&quot;</span><span class="p">,</span>
            <span class="n">return_value</span><span class="o">=</span><span class="n">mock_client</span><span class="p">,</span>
        <span class="p">),</span>
        <span class="n">patch</span><span class="p">(</span>
            <span class="s2">&quot;aiperf.common.comms.zmq.clients.ZMQSubClient&quot;</span><span class="p">,</span>
            <span class="n">return_value</span><span class="o">=</span><span class="n">mock_client</span><span class="p">,</span>
        <span class="p">),</span>
    <span class="p">):</span>
        <span class="c1"># Call create_clients</span>
        <span class="k">await</span> <span class="n">zmq_communication</span><span class="o">.</span><span class="n">create_clients</span><span class="p">(</span>
            <span class="n">PubClientType</span><span class="o">.</span><span class="n">COMPONENT</span><span class="p">,</span> <span class="n">SubClientType</span><span class="o">.</span><span class="n">COMPONENT</span>
        <span class="p">)</span>

        <span class="c1"># Verify clients were added to the dictionary</span>
        <span class="k">assert</span> <span class="n">PubClientType</span><span class="o">.</span><span class="n">COMPONENT</span> <span class="ow">in</span> <span class="n">zmq_communication</span><span class="o">.</span><span class="n">clients</span>
        <span class="k">assert</span> <span class="n">SubClientType</span><span class="o">.</span><span class="n">COMPONENT</span> <span class="ow">in</span> <span class="n">zmq_communication</span><span class="o">.</span><span class="n">clients</span>

        <span class="c1"># Verify initialize was called for each client</span>
        <span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">zmq_communication</span><span class="o">.</span><span class="n">clients</span><span class="p">)</span> <span class="o">==</span> <span class="mi">2</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="aiperf.tests.comms.test_zmq_communication.TestZMQCommunication.test_initialization" class="doc doc-heading">
            <code class=" language-python"><span class="n">test_initialization</span><span class="p">(</span><span class="n">zmq_communication</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#aiperf.tests.comms.test_zmq_communication.TestZMQCommunication.test_initialization" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Test that the ZMQ communication initializes correctly.</p>


            <details class="quote">
              <summary>Source code in <code>aiperf/tests/comms/test_zmq_communication.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@pytest</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">asyncio</span>
<span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">test_initialization</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">zmq_communication</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Test that the ZMQ communication initializes correctly.&quot;&quot;&quot;</span>
    <span class="n">result</span> <span class="o">=</span> <span class="k">await</span> <span class="n">zmq_communication</span><span class="o">.</span><span class="n">initialize</span><span class="p">()</span>
    <span class="k">assert</span> <span class="n">result</span> <span class="ow">is</span> <span class="kc">None</span>
    <span class="k">assert</span> <span class="n">zmq_communication</span><span class="o">.</span><span class="n">is_initialized</span> <span class="ow">is</span> <span class="kc">True</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="aiperf.tests.comms.test_zmq_communication.TestZMQCommunication.test_initialization_failure" class="doc doc-heading">
            <code class=" language-python"><span class="n">test_initialization_failure</span><span class="p">(</span><span class="n">zmq_communication</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#aiperf.tests.comms.test_zmq_communication.TestZMQCommunication.test_initialization_failure" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Test initialization failure handling.</p>


            <details class="quote">
              <summary>Source code in <code>aiperf/tests/comms/test_zmq_communication.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span>
<span class="normal">71</span>
<span class="normal">72</span>
<span class="normal">73</span>
<span class="normal">74</span>
<span class="normal">75</span>
<span class="normal">76</span>
<span class="normal">77</span>
<span class="normal">78</span>
<span class="normal">79</span>
<span class="normal">80</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@pytest</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">asyncio</span>
<span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">test_initialization_failure</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">zmq_communication</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Test initialization failure handling.&quot;&quot;&quot;</span>
    <span class="c1"># Temporarily clear initialized_event to test error path</span>
    <span class="n">zmq_communication</span><span class="o">.</span><span class="n">initialized_event</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>

    <span class="c1"># Create a mock implementation that raises an exception</span>
    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">mock_init_with_error</span><span class="p">():</span>
        <span class="k">raise</span> <span class="n">CommunicationInitializationError</span><span class="p">(</span><span class="s2">&quot;Test connection error&quot;</span><span class="p">)</span>

    <span class="c1"># Replace the original method and call to test error handling</span>
    <span class="n">original_init</span> <span class="o">=</span> <span class="n">zmq_communication</span><span class="o">.</span><span class="n">initialize</span>
    <span class="n">zmq_communication</span><span class="o">.</span><span class="n">initialize</span> <span class="o">=</span> <span class="n">mock_init_with_error</span>

    <span class="k">try</span><span class="p">:</span>
        <span class="k">with</span> <span class="n">pytest</span><span class="o">.</span><span class="n">raises</span><span class="p">(</span>
            <span class="n">CommunicationInitializationError</span><span class="p">,</span> <span class="n">match</span><span class="o">=</span><span class="s2">&quot;Test connection error&quot;</span>
        <span class="p">):</span>
            <span class="k">await</span> <span class="n">zmq_communication</span><span class="o">.</span><span class="n">initialize</span><span class="p">()</span>
    <span class="k">finally</span><span class="p">:</span>
        <span class="c1"># Restore the original method</span>
        <span class="n">zmq_communication</span><span class="o">.</span><span class="n">initialize</span> <span class="o">=</span> <span class="n">original_init</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="aiperf.tests.comms.test_zmq_communication.TestZMQCommunication.test_message" class="doc doc-heading">
            <code class=" language-python"><span class="n">test_message</span><span class="p">()</span></code>

<a href="#aiperf.tests.comms.test_zmq_communication.TestZMQCommunication.test_message" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Create a test message for communication tests.</p>


            <details class="quote">
              <summary>Source code in <code>aiperf/tests/comms/test_zmq_communication.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@pytest</span><span class="o">.</span><span class="n">fixture</span>
<span class="k">def</span><span class="w"> </span><span class="nf">test_message</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Create a test message for communication tests.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">StatusMessage</span><span class="p">(</span>
        <span class="n">service_id</span><span class="o">=</span><span class="s2">&quot;test-service&quot;</span><span class="p">,</span>
        <span class="n">service_type</span><span class="o">=</span><span class="n">ServiceType</span><span class="o">.</span><span class="n">TEST</span><span class="p">,</span>
        <span class="n">state</span><span class="o">=</span><span class="n">ServiceState</span><span class="o">.</span><span class="n">READY</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="aiperf.tests.comms.test_zmq_communication.TestZMQCommunication.test_publish_message" class="doc doc-heading">
            <code class=" language-python"><span class="n">test_publish_message</span><span class="p">(</span><span class="n">zmq_communication</span><span class="p">,</span> <span class="n">test_message</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#aiperf.tests.comms.test_zmq_communication.TestZMQCommunication.test_publish_message" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Test publishing messages.</p>


            <details class="quote">
              <summary>Source code in <code>aiperf/tests/comms/test_zmq_communication.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@pytest</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">asyncio</span>
<span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">test_publish_message</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">zmq_communication</span><span class="p">,</span> <span class="n">test_message</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Test publishing messages.&quot;&quot;&quot;</span>
    <span class="c1"># Mock the socket publish method</span>
    <span class="n">mock_client</span> <span class="o">=</span> <span class="n">AsyncMock</span><span class="p">()</span>
    <span class="n">mock_client</span><span class="o">.</span><span class="n">publish</span><span class="o">.</span><span class="n">return_value</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="c1"># Set up the client in the clients dictionary</span>
    <span class="n">zmq_communication</span><span class="o">.</span><span class="n">clients</span> <span class="o">=</span> <span class="p">{</span><span class="n">PubClientType</span><span class="o">.</span><span class="n">COMPONENT</span><span class="p">:</span> <span class="n">mock_client</span><span class="p">}</span>
    <span class="n">zmq_communication</span><span class="o">.</span><span class="n">initialized_event</span><span class="o">.</span><span class="n">set</span><span class="p">()</span>

    <span class="c1"># Publish a message</span>
    <span class="n">result</span> <span class="o">=</span> <span class="k">await</span> <span class="n">zmq_communication</span><span class="o">.</span><span class="n">publish</span><span class="p">(</span><span class="n">Topic</span><span class="o">.</span><span class="n">STATUS</span><span class="p">,</span> <span class="n">test_message</span><span class="p">)</span>

    <span class="c1"># Verify the message was published</span>
    <span class="k">assert</span> <span class="n">result</span> <span class="ow">is</span> <span class="kc">None</span>
    <span class="n">mock_client</span><span class="o">.</span><span class="n">publish</span><span class="o">.</span><span class="n">assert_called_once_with</span><span class="p">(</span><span class="n">Topic</span><span class="o">.</span><span class="n">STATUS</span><span class="p">,</span> <span class="n">test_message</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="aiperf.tests.comms.test_zmq_communication.TestZMQCommunication.test_shutdown" class="doc doc-heading">
            <code class=" language-python"><span class="n">test_shutdown</span><span class="p">(</span><span class="n">zmq_communication</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#aiperf.tests.comms.test_zmq_communication.TestZMQCommunication.test_shutdown" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Test graceful shutdown of communication.</p>


            <details class="quote">
              <summary>Source code in <code>aiperf/tests/comms/test_zmq_communication.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@pytest</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">asyncio</span>
<span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">test_shutdown</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">zmq_communication</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Test graceful shutdown of communication.&quot;&quot;&quot;</span>
    <span class="c1"># Mock the client socket</span>
    <span class="n">mock_client1</span> <span class="o">=</span> <span class="n">AsyncMock</span><span class="p">()</span>
    <span class="n">mock_client1</span><span class="o">.</span><span class="n">shutdown</span><span class="o">.</span><span class="n">return_value</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">mock_client2</span> <span class="o">=</span> <span class="n">AsyncMock</span><span class="p">()</span>
    <span class="n">mock_client2</span><span class="o">.</span><span class="n">shutdown</span><span class="o">.</span><span class="n">return_value</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="c1"># Set up clients</span>
    <span class="n">zmq_communication</span><span class="o">.</span><span class="n">clients</span> <span class="o">=</span> <span class="p">{</span>
        <span class="n">PubClientType</span><span class="o">.</span><span class="n">COMPONENT</span><span class="p">:</span> <span class="n">mock_client1</span><span class="p">,</span>
        <span class="n">SubClientType</span><span class="o">.</span><span class="n">COMPONENT</span><span class="p">:</span> <span class="n">mock_client2</span><span class="p">,</span>
    <span class="p">}</span>
    <span class="n">zmq_communication</span><span class="o">.</span><span class="n">initialized_event</span><span class="o">.</span><span class="n">set</span><span class="p">()</span>
    <span class="n">zmq_communication</span><span class="o">.</span><span class="n">stop_event</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>

    <span class="c1"># Mock the context with a patched shutdown method to avoid setting</span>
    <span class="c1"># context to None</span>
    <span class="n">context_mock</span> <span class="o">=</span> <span class="n">MagicMock</span><span class="p">()</span>
    <span class="n">zmq_communication</span><span class="o">.</span><span class="n">_context</span> <span class="o">=</span> <span class="n">context_mock</span>

    <span class="c1"># Create a patched version of shutdown that doesn&#39;t set context to None</span>
    <span class="n">original_shutdown</span> <span class="o">=</span> <span class="n">zmq_communication</span><span class="o">.</span><span class="n">shutdown</span>

    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">patched_shutdown</span><span class="p">():</span>
        <span class="c1"># Calls original gather but patch term() to prevent context from</span>
        <span class="c1"># becoming None</span>
        <span class="k">with</span> <span class="n">patch</span><span class="o">.</span><span class="n">object</span><span class="p">(</span><span class="n">zmq_communication</span><span class="p">,</span> <span class="s2">&quot;_context&quot;</span><span class="p">,</span> <span class="n">context_mock</span><span class="p">):</span>
            <span class="k">return</span> <span class="k">await</span> <span class="n">original_shutdown</span><span class="p">()</span>

    <span class="n">zmq_communication</span><span class="o">.</span><span class="n">shutdown</span> <span class="o">=</span> <span class="n">patched_shutdown</span>

    <span class="k">try</span><span class="p">:</span>
        <span class="c1"># Shutdown the communication</span>
        <span class="n">result</span> <span class="o">=</span> <span class="k">await</span> <span class="n">zmq_communication</span><span class="o">.</span><span class="n">shutdown</span><span class="p">()</span>

        <span class="c1"># Verify both clients were shutdown</span>
        <span class="k">assert</span> <span class="n">result</span> <span class="ow">is</span> <span class="kc">None</span>
        <span class="k">assert</span> <span class="n">mock_client1</span><span class="o">.</span><span class="n">shutdown</span><span class="o">.</span><span class="n">called</span>
        <span class="k">assert</span> <span class="n">mock_client2</span><span class="o">.</span><span class="n">shutdown</span><span class="o">.</span><span class="n">called</span>
        <span class="k">assert</span> <span class="n">context_mock</span><span class="o">.</span><span class="n">term</span><span class="o">.</span><span class="n">called</span>
        <span class="k">assert</span> <span class="n">zmq_communication</span><span class="o">.</span><span class="n">stop_event</span><span class="o">.</span><span class="n">is_set</span><span class="p">()</span>
    <span class="k">finally</span><span class="p">:</span>
        <span class="c1"># Restore the original method</span>
        <span class="n">zmq_communication</span><span class="o">.</span><span class="n">shutdown</span> <span class="o">=</span> <span class="n">original_shutdown</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="aiperf.tests.comms.test_zmq_communication.TestZMQCommunication.test_subscribe_to_topic" class="doc doc-heading">
            <code class=" language-python"><span class="n">test_subscribe_to_topic</span><span class="p">(</span><span class="n">zmq_communication</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#aiperf.tests.comms.test_zmq_communication.TestZMQCommunication.test_subscribe_to_topic" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Test subscribing to a topic.</p>


            <details class="quote">
              <summary>Source code in <code>aiperf/tests/comms/test_zmq_communication.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@pytest</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">asyncio</span>
<span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">test_subscribe_to_topic</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">zmq_communication</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Test subscribing to a topic.&quot;&quot;&quot;</span>
    <span class="c1"># Mock the client socket</span>
    <span class="n">mock_client</span> <span class="o">=</span> <span class="n">AsyncMock</span><span class="p">()</span>
    <span class="n">mock_client</span><span class="o">.</span><span class="n">subscribe</span><span class="o">.</span><span class="n">return_value</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="c1"># Set up the client in the clients dictionary</span>
    <span class="n">zmq_communication</span><span class="o">.</span><span class="n">clients</span> <span class="o">=</span> <span class="p">{</span><span class="n">SubClientType</span><span class="o">.</span><span class="n">COMPONENT</span><span class="p">:</span> <span class="n">mock_client</span><span class="p">}</span>
    <span class="n">zmq_communication</span><span class="o">.</span><span class="n">initialized_event</span><span class="o">.</span><span class="n">set</span><span class="p">()</span>

    <span class="c1"># Create a callback function</span>
    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">callback</span><span class="p">(</span><span class="n">message</span><span class="p">:</span> <span class="n">Message</span><span class="p">):</span>
        <span class="k">pass</span>

    <span class="c1"># Subscribe to a topic</span>
    <span class="n">result</span> <span class="o">=</span> <span class="k">await</span> <span class="n">zmq_communication</span><span class="o">.</span><span class="n">subscribe</span><span class="p">(</span><span class="n">Topic</span><span class="o">.</span><span class="n">STATUS</span><span class="p">,</span> <span class="n">callback</span><span class="p">)</span>

    <span class="c1"># Verify subscription was set up</span>
    <span class="k">assert</span> <span class="n">result</span> <span class="ow">is</span> <span class="kc">None</span>
    <span class="n">mock_client</span><span class="o">.</span><span class="n">subscribe</span><span class="o">.</span><span class="n">assert_called_once_with</span><span class="p">(</span><span class="n">Topic</span><span class="o">.</span><span class="n">STATUS</span><span class="p">,</span> <span class="n">callback</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="aiperf.tests.comms.test_zmq_communication.TestZMQCommunication.zmq_communication" class="doc doc-heading">
            <code class=" language-python"><span class="n">zmq_communication</span><span class="p">(</span><span class="n">mock_config</span><span class="p">)</span></code>

<a href="#aiperf.tests.comms.test_zmq_communication.TestZMQCommunication.zmq_communication" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Return a ZMQCommunication instance for testing.</p>


            <details class="quote">
              <summary>Source code in <code>aiperf/tests/comms/test_zmq_communication.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@pytest</span><span class="o">.</span><span class="n">fixture</span>
<span class="k">def</span><span class="w"> </span><span class="nf">zmq_communication</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mock_config</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Return a ZMQCommunication instance for testing.&quot;&quot;&quot;</span>
    <span class="k">with</span> <span class="n">patch</span><span class="p">(</span><span class="s2">&quot;zmq.asyncio.Context&quot;</span><span class="p">,</span> <span class="n">MagicMock</span><span class="p">())</span> <span class="k">as</span> <span class="n">mock_context</span><span class="p">:</span>
        <span class="c1"># Set up the context mock to return properly</span>
        <span class="n">mock_context</span><span class="o">.</span><span class="n">return_value</span> <span class="o">=</span> <span class="n">MagicMock</span><span class="p">()</span>
        <span class="n">comm</span> <span class="o">=</span> <span class="n">ZMQCommunication</span><span class="p">(</span><span class="n">config</span><span class="o">=</span><span class="n">mock_config</span><span class="p">)</span>
        <span class="n">comm</span><span class="o">.</span><span class="n">_context</span> <span class="o">=</span> <span class="n">mock_context</span>
        <span class="k">return</span> <span class="n">comm</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>




  </div>

    </div>

</div><h2 id="aiperftestsconfigtest_audio_config">aiperf.tests.config.test_audio_config<a class="headerlink" href="#aiperftestsconfigtest_audio_config" title="Permanent link">&para;</a></h2>


<div class="doc doc-object doc-module">



<a id="aiperf.tests.config.test_audio_config"></a>
    <div class="doc doc-contents first">









  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h2 id="aiperf.tests.config.test_audio_config.test_audio_config_custom_values" class="doc doc-heading">
            <code class=" language-python"><span class="n">test_audio_config_custom_values</span><span class="p">()</span></code>

<a href="#aiperf.tests.config.test_audio_config.test_audio_config_custom_values" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">

        <p>This test ensures that the AudioConfig object is properly initialized
when provided with custom input values. It verifies that the attributes
of the object match the expected values specified in the test.</p>
<p>Assertions:
- Each attribute of the AudioConfig object matches the corresponding
    value in the custom_values dictionary.</p>


            <details class="quote">
              <summary>Source code in <code>aiperf/tests/config/test_audio_config.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">test_audio_config_custom_values</span><span class="p">():</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    This test ensures that the AudioConfig object is properly initialized</span>
<span class="sd">    when provided with custom input values. It verifies that the attributes</span>
<span class="sd">    of the object match the expected values specified in the test.</span>

<span class="sd">    Assertions:</span>
<span class="sd">    - Each attribute of the AudioConfig object matches the corresponding</span>
<span class="sd">        value in the custom_values dictionary.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">custom_values</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s2">&quot;batch_size&quot;</span><span class="p">:</span> <span class="mi">32</span><span class="p">,</span>
        <span class="s2">&quot;length&quot;</span><span class="p">:</span> <span class="n">AudioLengthConfig</span><span class="p">(</span><span class="n">mean</span><span class="o">=</span><span class="mf">5.0</span><span class="p">,</span> <span class="n">stddev</span><span class="o">=</span><span class="mf">1.0</span><span class="p">),</span>
        <span class="s2">&quot;format&quot;</span><span class="p">:</span> <span class="n">AudioFormat</span><span class="o">.</span><span class="n">WAV</span><span class="p">,</span>
        <span class="s2">&quot;depths&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">16</span><span class="p">,</span> <span class="mi">24</span><span class="p">],</span>
        <span class="s2">&quot;sample_rates&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">44</span><span class="p">,</span> <span class="mi">48</span><span class="p">],</span>
        <span class="s2">&quot;num_channels&quot;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span>
    <span class="p">}</span>
    <span class="n">config</span> <span class="o">=</span> <span class="n">AudioConfig</span><span class="p">(</span><span class="o">**</span><span class="n">custom_values</span><span class="p">)</span>

    <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">custom_values</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="k">assert</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">config</span><span class="p">,</span> <span class="n">key</span><span class="p">)</span> <span class="o">==</span> <span class="n">value</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="aiperf.tests.config.test_audio_config.test_audio_config_defaults" class="doc doc-heading">
            <code class=" language-python"><span class="n">test_audio_config_defaults</span><span class="p">()</span></code>

<a href="#aiperf.tests.config.test_audio_config.test_audio_config_defaults" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">

        <p>Test the default values of the AudioConfig class.</p>
<p>This test verifies that the AudioConfig object is initialized with the correct
default values as defined in the AudioDefaults class.</p>


            <details class="quote">
              <summary>Source code in <code>aiperf/tests/config/test_audio_config.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">test_audio_config_defaults</span><span class="p">():</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Test the default values of the AudioConfig class.</span>

<span class="sd">    This test verifies that the AudioConfig object is initialized with the correct</span>
<span class="sd">    default values as defined in the AudioDefaults class.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">config</span> <span class="o">=</span> <span class="n">AudioConfig</span><span class="p">()</span>
    <span class="k">assert</span> <span class="n">config</span><span class="o">.</span><span class="n">batch_size</span> <span class="o">==</span> <span class="n">AudioDefaults</span><span class="o">.</span><span class="n">BATCH_SIZE</span>
    <span class="k">assert</span> <span class="n">config</span><span class="o">.</span><span class="n">length</span><span class="o">.</span><span class="n">mean</span> <span class="o">==</span> <span class="n">AudioDefaults</span><span class="o">.</span><span class="n">LENGTH_MEAN</span>
    <span class="k">assert</span> <span class="n">config</span><span class="o">.</span><span class="n">length</span><span class="o">.</span><span class="n">stddev</span> <span class="o">==</span> <span class="n">AudioDefaults</span><span class="o">.</span><span class="n">LENGTH_STDDEV</span>
    <span class="k">assert</span> <span class="n">config</span><span class="o">.</span><span class="n">format</span> <span class="o">==</span> <span class="n">AudioDefaults</span><span class="o">.</span><span class="n">FORMAT</span>
    <span class="k">assert</span> <span class="n">config</span><span class="o">.</span><span class="n">depths</span> <span class="o">==</span> <span class="n">AudioDefaults</span><span class="o">.</span><span class="n">DEPTHS</span>
    <span class="k">assert</span> <span class="n">config</span><span class="o">.</span><span class="n">sample_rates</span> <span class="o">==</span> <span class="n">AudioDefaults</span><span class="o">.</span><span class="n">SAMPLE_RATES</span>
    <span class="k">assert</span> <span class="n">config</span><span class="o">.</span><span class="n">num_channels</span> <span class="o">==</span> <span class="n">AudioDefaults</span><span class="o">.</span><span class="n">NUM_CHANNELS</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div><h2 id="aiperftestsconfigtest_base_config">aiperf.tests.config.test_base_config<a class="headerlink" href="#aiperftestsconfigtest_base_config" title="Permanent link">&para;</a></h2>


<div class="doc doc-object doc-module">



<a id="aiperf.tests.config.test_base_config"></a>
    <div class="doc doc-contents first">









  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h2 id="aiperf.tests.config.test_base_config.test_attach_comments_with_verbose" class="doc doc-heading">
            <code class=" language-python"><span class="n">test_attach_comments_with_verbose</span><span class="p">()</span></code>

<a href="#aiperf.tests.config.test_base_config.test_attach_comments_with_verbose" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">

        <p>Test the <code>serialize_to_yaml</code> method of <code>BaseTestConfig</code> when the <code>verbose</code> flag is set to <code>True</code>.</p>
<p>This test ensures that:
- Comments (e.g., descriptions) are not attached to the YAML output when <code>verbose</code> is <code>True</code>.
- The serialized YAML output contains the expected structure, such as the presence of the "nested" key.</p>
<p>Assertions:
- Verify that the description comment for <code>field1</code> is not present in the YAML output.
- Verify that the "nested:" key is included in the YAML output.</p>


            <details class="quote">
              <summary>Source code in <code>aiperf/tests/config/test_base_config.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span>
<span class="normal">71</span>
<span class="normal">72</span>
<span class="normal">73</span>
<span class="normal">74</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">test_attach_comments_with_verbose</span><span class="p">():</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Test the `serialize_to_yaml` method of `BaseTestConfig` when the `verbose` flag is set to `True`.</span>

<span class="sd">    This test ensures that:</span>
<span class="sd">    - Comments (e.g., descriptions) are not attached to the YAML output when `verbose` is `True`.</span>
<span class="sd">    - The serialized YAML output contains the expected structure, such as the presence of the &quot;nested&quot; key.</span>

<span class="sd">    Assertions:</span>
<span class="sd">    - Verify that the description comment for `field1` is not present in the YAML output.</span>
<span class="sd">    - Verify that the &quot;nested:&quot; key is included in the YAML output.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">config</span> <span class="o">=</span> <span class="n">BaseTestConfig</span><span class="p">(</span>
        <span class="n">nested</span><span class="o">=</span><span class="n">NestedConfig</span><span class="p">(</span><span class="n">field1</span><span class="o">=</span><span class="s2">&quot;value1&quot;</span><span class="p">,</span> <span class="n">field2</span><span class="o">=</span><span class="mi">42</span><span class="p">),</span>
        <span class="n">verbose</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="n">yaml_output</span> <span class="o">=</span> <span class="n">config</span><span class="o">.</span><span class="n">serialize_to_yaml</span><span class="p">(</span><span class="n">verbose</span><span class="o">=</span><span class="n">config</span><span class="o">.</span><span class="n">verbose</span><span class="p">,</span> <span class="n">indent</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>

    <span class="c1"># Check if comments are attached when verbose is True</span>
    <span class="k">assert</span> <span class="p">(</span>
        <span class="s2">&quot;# field1 description&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">yaml_output</span>
    <span class="p">)</span>  <span class="c1"># No description provided in this example</span>
    <span class="k">assert</span> <span class="s2">&quot;nested:&quot;</span> <span class="ow">in</span> <span class="n">yaml_output</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="aiperf.tests.config.test_base_config.test_is_a_nested_config" class="doc doc-heading">
            <code class=" language-python"><span class="n">test_is_a_nested_config</span><span class="p">()</span></code>

<a href="#aiperf.tests.config.test_base_config.test_is_a_nested_config" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">

        <p>Test the <code>_is_a_nested_config</code> method of the <code>BaseConfig</code> class.</p>
<p>This test verifies the behavior of the <code>_is_a_nested_config</code> method when:
1. A valid nested configuration object is passed.
2. An invalid input (not a dictionary) is passed.</p>
<p>Assertions:
- The method should return <code>True</code> when a valid nested configuration object is passed.
- The method should return <code>False</code> when an invalid input is passed.</p>


            <details class="quote">
              <summary>Source code in <code>aiperf/tests/config/test_base_config.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">test_is_a_nested_config</span><span class="p">():</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Test the `_is_a_nested_config` method of the `BaseConfig` class.</span>

<span class="sd">    This test verifies the behavior of the `_is_a_nested_config` method when:</span>
<span class="sd">    1. A valid nested configuration object is passed.</span>
<span class="sd">    2. An invalid input (not a dictionary) is passed.</span>

<span class="sd">    Assertions:</span>
<span class="sd">    - The method should return `True` when a valid nested configuration object is passed.</span>
<span class="sd">    - The method should return `False` when an invalid input is passed.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">nested_model</span> <span class="o">=</span> <span class="n">NestedConfig</span><span class="p">(</span><span class="n">field1</span><span class="o">=</span><span class="s2">&quot;value1&quot;</span><span class="p">,</span> <span class="n">field2</span><span class="o">=</span><span class="mi">42</span><span class="p">)</span>
    <span class="n">field</span> <span class="o">=</span> <span class="n">BaseTestConfig</span><span class="o">.</span><span class="n">model_fields</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;nested&quot;</span><span class="p">)</span>

    <span class="k">assert</span> <span class="n">BaseConfig</span><span class="o">.</span><span class="n">_is_a_nested_config</span><span class="p">(</span><span class="n">field</span><span class="p">,</span> <span class="n">nested_model</span><span class="o">.</span><span class="n">model_dump</span><span class="p">())</span>
    <span class="k">assert</span> <span class="ow">not</span> <span class="n">BaseConfig</span><span class="o">.</span><span class="n">_is_a_nested_config</span><span class="p">(</span><span class="n">field</span><span class="p">,</span> <span class="s2">&quot;not a dict&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="aiperf.tests.config.test_base_config.test_preprocess_value_enum" class="doc doc-heading">
            <code class=" language-python"><span class="n">test_preprocess_value_enum</span><span class="p">()</span></code>

<a href="#aiperf.tests.config.test_base_config.test_preprocess_value_enum" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">

        <p>Test the <code>_preprocess_value</code> method of the <code>BaseConfig</code> class when handling
an enumeration value.</p>
<p>This test defines a sample enumeration <code>SampleEnum</code> with two options,
<code>OPTION_A</code> and <code>OPTION_B</code>. It verifies that when an enumeration value
(<code>SampleEnum.OPTION_A</code>) is passed to <code>_preprocess_value</code>, the method
correctly processes it into a lowercase string representation of the
enumeration value's name.</p>


<details class="assertions" open>
  <summary>Assertions</summary>
  <ul>
<li>The processed value of <code>SampleEnum.OPTION_A</code> should be "optiona".</li>
</ul>
</details>

            <details class="quote">
              <summary>Source code in <code>aiperf/tests/config/test_base_config.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">77</span>
<span class="normal">78</span>
<span class="normal">79</span>
<span class="normal">80</span>
<span class="normal">81</span>
<span class="normal">82</span>
<span class="normal">83</span>
<span class="normal">84</span>
<span class="normal">85</span>
<span class="normal">86</span>
<span class="normal">87</span>
<span class="normal">88</span>
<span class="normal">89</span>
<span class="normal">90</span>
<span class="normal">91</span>
<span class="normal">92</span>
<span class="normal">93</span>
<span class="normal">94</span>
<span class="normal">95</span>
<span class="normal">96</span>
<span class="normal">97</span>
<span class="normal">98</span>
<span class="normal">99</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">test_preprocess_value_enum</span><span class="p">():</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Test the `_preprocess_value` method of the `BaseConfig` class when handling</span>
<span class="sd">    an enumeration value.</span>

<span class="sd">    This test defines a sample enumeration `SampleEnum` with two options,</span>
<span class="sd">    `OPTION_A` and `OPTION_B`. It verifies that when an enumeration value</span>
<span class="sd">    (`SampleEnum.OPTION_A`) is passed to `_preprocess_value`, the method</span>
<span class="sd">    correctly processes it into a lowercase string representation of the</span>
<span class="sd">    enumeration value&#39;s name.</span>

<span class="sd">    Assertions:</span>
<span class="sd">        - The processed value of `SampleEnum.OPTION_A` should be &quot;optiona&quot;.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">class</span><span class="w"> </span><span class="nc">SampleEnum</span><span class="p">(</span><span class="n">Enum</span><span class="p">):</span>
        <span class="n">OPTION_A</span> <span class="o">=</span> <span class="s2">&quot;OptionA&quot;</span>
        <span class="n">OPTION_B</span> <span class="o">=</span> <span class="s2">&quot;OptionB&quot;</span>

    <span class="n">value</span> <span class="o">=</span> <span class="n">SampleEnum</span><span class="o">.</span><span class="n">OPTION_A</span>
    <span class="n">processed_value</span> <span class="o">=</span> <span class="n">BaseConfig</span><span class="o">.</span><span class="n">_preprocess_value</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>

    <span class="k">assert</span> <span class="n">processed_value</span> <span class="o">==</span> <span class="s2">&quot;optiona&quot;</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="aiperf.tests.config.test_base_config.test_serialize_to_yaml" class="doc doc-heading">
            <code class=" language-python"><span class="n">test_serialize_to_yaml</span><span class="p">()</span></code>

<a href="#aiperf.tests.config.test_base_config.test_serialize_to_yaml" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">

        <p>Tests the <code>serialize_to_yaml</code> method of the <code>BaseTestConfig</code> class.</p>
<p>This test verifies that the YAML serialization of a <code>BaseTestConfig</code> object
correctly includes all nested fields and their values, as well as other
attributes of the configuration.</p>


<details class="assertions" open>
  <summary>Assertions</summary>
  <ul>
<li>The serialized YAML output contains the "nested" key.</li>
<li>The serialized YAML output includes the "field1" and "field2" values
  from the <code>NestedConfig</code> object.</li>
<li>The serialized YAML output includes the "verbose" attribute with the
  correct value.</li>
</ul>
</details>

            <details class="quote">
              <summary>Source code in <code>aiperf/tests/config/test_base_config.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">test_serialize_to_yaml</span><span class="p">():</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Tests the `serialize_to_yaml` method of the `BaseTestConfig` class.</span>

<span class="sd">    This test verifies that the YAML serialization of a `BaseTestConfig` object</span>
<span class="sd">    correctly includes all nested fields and their values, as well as other</span>
<span class="sd">    attributes of the configuration.</span>

<span class="sd">    Assertions:</span>
<span class="sd">        - The serialized YAML output contains the &quot;nested&quot; key.</span>
<span class="sd">        - The serialized YAML output includes the &quot;field1&quot; and &quot;field2&quot; values</span>
<span class="sd">          from the `NestedConfig` object.</span>
<span class="sd">        - The serialized YAML output includes the &quot;verbose&quot; attribute with the</span>
<span class="sd">          correct value.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">config</span> <span class="o">=</span> <span class="n">BaseTestConfig</span><span class="p">(</span>
        <span class="n">nested</span><span class="o">=</span><span class="n">NestedConfig</span><span class="p">(</span><span class="n">field1</span><span class="o">=</span><span class="s2">&quot;value1&quot;</span><span class="p">,</span> <span class="n">field2</span><span class="o">=</span><span class="mi">42</span><span class="p">),</span>
        <span class="n">verbose</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="n">yaml_output</span> <span class="o">=</span> <span class="n">config</span><span class="o">.</span><span class="n">serialize_to_yaml</span><span class="p">(</span><span class="n">verbose</span><span class="o">=</span><span class="n">config</span><span class="o">.</span><span class="n">verbose</span><span class="p">,</span> <span class="n">indent</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>

    <span class="k">assert</span> <span class="s2">&quot;nested:&quot;</span> <span class="ow">in</span> <span class="n">yaml_output</span>
    <span class="k">assert</span> <span class="s2">&quot;field1: value1&quot;</span> <span class="ow">in</span> <span class="n">yaml_output</span>
    <span class="k">assert</span> <span class="s2">&quot;field2: 42&quot;</span> <span class="ow">in</span> <span class="n">yaml_output</span>
    <span class="k">assert</span> <span class="s2">&quot;verbose: true&quot;</span> <span class="ow">in</span> <span class="n">yaml_output</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="aiperf.tests.config.test_base_config.test_should_add_field_to_template" class="doc doc-heading">
            <code class=" language-python"><span class="n">test_should_add_field_to_template</span><span class="p">()</span></code>

<a href="#aiperf.tests.config.test_base_config.test_should_add_field_to_template" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">

        <p>Test the <code>_should_add_field_to_template</code> method of the <code>BaseConfig</code> class.</p>
<p>This test verifies the behavior of <code>_should_add_field_to_template</code> when handling
fields with different <code>json_schema_extra</code> configurations.</p>


<details class="assertions" open>
  <summary>Assertions</summary>
  <ul>
<li>Fields with <code>add_to_template</code> set to <code>False</code> should not be added to the template.</li>
<li>Fields with <code>add_to_template</code> set to <code>True</code> should be added to the template.</li>
<li>Fields without <code>json_schema_extra</code> should be added to the template by default.</li>
<li>Fields with <code>json_schema_extra</code> set to <code>None</code> should be added to the template by default.</li>
<li>Fields with unexpected keys in <code>json_schema_extra</code> should be added to the template by default.</li>
</ul>
</details>

            <details class="quote">
              <summary>Source code in <code>aiperf/tests/config/test_base_config.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">test_should_add_field_to_template</span><span class="p">():</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Test the `_should_add_field_to_template` method of the `BaseConfig` class.</span>

<span class="sd">    This test verifies the behavior of `_should_add_field_to_template` when handling</span>
<span class="sd">    fields with different `json_schema_extra` configurations.</span>

<span class="sd">    Assertions:</span>
<span class="sd">        - Fields with `add_to_template` set to `False` should not be added to the template.</span>
<span class="sd">        - Fields with `add_to_template` set to `True` should be added to the template.</span>
<span class="sd">        - Fields without `json_schema_extra` should be added to the template by default.</span>
<span class="sd">        - Fields with `json_schema_extra` set to `None` should be added to the template by default.</span>
<span class="sd">        - Fields with unexpected keys in `json_schema_extra` should be added to the template by default.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">field_with_flag</span> <span class="o">=</span> <span class="n">FieldInfo</span><span class="p">(</span><span class="n">json_schema_extra</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;add_to_template&quot;</span><span class="p">:</span> <span class="kc">False</span><span class="p">})</span>
    <span class="n">field_with_add_to_template_true</span> <span class="o">=</span> <span class="n">FieldInfo</span><span class="p">(</span>
        <span class="n">json_schema_extra</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;add_to_template&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">}</span>
    <span class="p">)</span>
    <span class="n">field_no_extra</span> <span class="o">=</span> <span class="n">FieldInfo</span><span class="p">()</span>
    <span class="n">field_with_none_extra</span> <span class="o">=</span> <span class="n">FieldInfo</span><span class="p">(</span><span class="n">json_schema_extra</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
    <span class="n">field_with_unexpected_keys</span> <span class="o">=</span> <span class="n">FieldInfo</span><span class="p">(</span><span class="n">json_schema_extra</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;unexpected_key&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">})</span>

    <span class="k">assert</span> <span class="ow">not</span> <span class="n">BaseConfig</span><span class="o">.</span><span class="n">_should_add_field_to_template</span><span class="p">(</span><span class="n">field_with_flag</span><span class="p">)</span>
    <span class="k">assert</span> <span class="n">BaseConfig</span><span class="o">.</span><span class="n">_should_add_field_to_template</span><span class="p">(</span><span class="n">field_with_add_to_template_true</span><span class="p">)</span>
    <span class="k">assert</span> <span class="n">BaseConfig</span><span class="o">.</span><span class="n">_should_add_field_to_template</span><span class="p">(</span><span class="n">field_no_extra</span><span class="p">)</span>
    <span class="k">assert</span> <span class="n">BaseConfig</span><span class="o">.</span><span class="n">_should_add_field_to_template</span><span class="p">(</span><span class="n">field_with_none_extra</span><span class="p">)</span>
    <span class="k">assert</span> <span class="n">BaseConfig</span><span class="o">.</span><span class="n">_should_add_field_to_template</span><span class="p">(</span><span class="n">field_with_unexpected_keys</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div><h2 id="aiperftestsconfigtest_endpoint_config">aiperf.tests.config.test_endpoint_config<a class="headerlink" href="#aiperftestsconfigtest_endpoint_config" title="Permanent link">&para;</a></h2>


<div class="doc doc-object doc-module">



<a id="aiperf.tests.config.test_endpoint_config"></a>
    <div class="doc doc-contents first">









  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h2 id="aiperf.tests.config.test_endpoint_config.test_endpoint_config_custom_values" class="doc doc-heading">
            <code class=" language-python"><span class="n">test_endpoint_config_custom_values</span><span class="p">()</span></code>

<a href="#aiperf.tests.config.test_endpoint_config.test_endpoint_config_custom_values" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">

        <p>Test the <code>EndPointConfig</code> class with custom values.
This test verifies that the <code>EndPointConfig</code> object correctly initializes
its attributes when provided with a dictionary of custom values. It ensures
that each attribute in the configuration matches the corresponding value
from the input dictionary.</p>
<p>Raises:
- AssertionError: If any attribute value does not match the expected value.</p>


            <details class="quote">
              <summary>Source code in <code>aiperf/tests/config/test_endpoint_config.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">test_endpoint_config_custom_values</span><span class="p">():</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Test the `EndPointConfig` class with custom values.</span>
<span class="sd">    This test verifies that the `EndPointConfig` object correctly initializes</span>
<span class="sd">    its attributes when provided with a dictionary of custom values. It ensures</span>
<span class="sd">    that each attribute in the configuration matches the corresponding value</span>
<span class="sd">    from the input dictionary.</span>

<span class="sd">    Raises:</span>
<span class="sd">    - AssertionError: If any attribute value does not match the expected value.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">custom_values</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s2">&quot;model_selection_strategy&quot;</span><span class="p">:</span> <span class="s2">&quot;round_robin&quot;</span><span class="p">,</span>
        <span class="s2">&quot;backend&quot;</span><span class="p">:</span> <span class="s2">&quot;vllm&quot;</span><span class="p">,</span>
        <span class="s2">&quot;custom&quot;</span><span class="p">:</span> <span class="s2">&quot;custom_endpoint&quot;</span><span class="p">,</span>
        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;custom_type&quot;</span><span class="p">,</span>
        <span class="s2">&quot;streaming&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
        <span class="s2">&quot;server_metrics_urls&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;http://custom-metrics-url&quot;</span><span class="p">],</span>
        <span class="s2">&quot;url&quot;</span><span class="p">:</span> <span class="s2">&quot;http://custom-url&quot;</span><span class="p">,</span>
        <span class="s2">&quot;grpc_method&quot;</span><span class="p">:</span> <span class="s2">&quot;custom.package.Service/Method&quot;</span><span class="p">,</span>
    <span class="p">}</span>
    <span class="n">config</span> <span class="o">=</span> <span class="n">EndPointConfig</span><span class="p">(</span><span class="o">**</span><span class="n">custom_values</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">custom_values</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="n">config_value</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">config</span><span class="p">,</span> <span class="n">key</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">config_value</span><span class="p">,</span> <span class="n">Enum</span><span class="p">):</span>
            <span class="n">config_value</span> <span class="o">=</span> <span class="n">config_value</span><span class="o">.</span><span class="n">value</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>

        <span class="k">assert</span> <span class="n">config_value</span> <span class="o">==</span> <span class="n">value</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="aiperf.tests.config.test_endpoint_config.test_endpoint_config_defaults" class="doc doc-heading">
            <code class=" language-python"><span class="n">test_endpoint_config_defaults</span><span class="p">()</span></code>

<a href="#aiperf.tests.config.test_endpoint_config.test_endpoint_config_defaults" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">

        <p>Test the default values of the EndPointConfig class.</p>
<p>This test verifies that the default attributes of an EndPointConfig instance
match the predefined constants in the EndPointDefaults class. It ensures that
the configuration is initialized correctly with expected default values.</p>


            <details class="quote">
              <summary>Source code in <code>aiperf/tests/config/test_endpoint_config.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">test_endpoint_config_defaults</span><span class="p">():</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Test the default values of the EndPointConfig class.</span>

<span class="sd">    This test verifies that the default attributes of an EndPointConfig instance</span>
<span class="sd">    match the predefined constants in the EndPointDefaults class. It ensures that</span>
<span class="sd">    the configuration is initialized correctly with expected default values.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">config</span> <span class="o">=</span> <span class="n">EndPointConfig</span><span class="p">()</span>
    <span class="k">assert</span> <span class="n">config</span><span class="o">.</span><span class="n">model_selection_strategy</span> <span class="o">==</span> <span class="n">EndPointDefaults</span><span class="o">.</span><span class="n">MODEL_SELECTION_STRATEGY</span>
    <span class="k">assert</span> <span class="n">config</span><span class="o">.</span><span class="n">backend</span> <span class="o">==</span> <span class="n">EndPointDefaults</span><span class="o">.</span><span class="n">BACKEND</span>
    <span class="k">assert</span> <span class="n">config</span><span class="o">.</span><span class="n">custom</span> <span class="o">==</span> <span class="n">EndPointDefaults</span><span class="o">.</span><span class="n">CUSTOM</span>
    <span class="k">assert</span> <span class="n">config</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="n">EndPointDefaults</span><span class="o">.</span><span class="n">TYPE</span>
    <span class="k">assert</span> <span class="n">config</span><span class="o">.</span><span class="n">streaming</span> <span class="o">==</span> <span class="n">EndPointDefaults</span><span class="o">.</span><span class="n">STREAMING</span>
    <span class="k">assert</span> <span class="n">config</span><span class="o">.</span><span class="n">server_metrics_urls</span> <span class="o">==</span> <span class="n">EndPointDefaults</span><span class="o">.</span><span class="n">SERVER_METRICS_URLS</span>
    <span class="k">assert</span> <span class="n">config</span><span class="o">.</span><span class="n">url</span> <span class="o">==</span> <span class="n">EndPointDefaults</span><span class="o">.</span><span class="n">URL</span>
    <span class="k">assert</span> <span class="n">config</span><span class="o">.</span><span class="n">grpc_method</span> <span class="o">==</span> <span class="n">EndPointDefaults</span><span class="o">.</span><span class="n">GRPC_METHOD</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="aiperf.tests.config.test_endpoint_config.test_server_metrics_urls_validator" class="doc doc-heading">
            <code class=" language-python"><span class="n">test_server_metrics_urls_validator</span><span class="p">()</span></code>

<a href="#aiperf.tests.config.test_endpoint_config.test_server_metrics_urls_validator" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">

        <p>Test the validation and assignment of the <code>server_metrics_urls</code> attribute
in the <code>EndPointConfig</code> class.
This test verifies the following scenarios:
1. When a single URL string is provided, it is correctly converted into a list
containing that URL.
2. When a list of URL strings is provided, it is correctly assigned without modification.
Assertions:
- Ensure that <code>server_metrics_urls</code> is correctly set as a list in both cases.</p>


            <details class="quote">
              <summary>Source code in <code>aiperf/tests/config/test_endpoint_config.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span>
<span class="normal">71</span>
<span class="normal">72</span>
<span class="normal">73</span>
<span class="normal">74</span>
<span class="normal">75</span>
<span class="normal">76</span>
<span class="normal">77</span>
<span class="normal">78</span>
<span class="normal">79</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">test_server_metrics_urls_validator</span><span class="p">():</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Test the validation and assignment of the `server_metrics_urls` attribute</span>
<span class="sd">    in the `EndPointConfig` class.</span>
<span class="sd">    This test verifies the following scenarios:</span>
<span class="sd">    1. When a single URL string is provided, it is correctly converted into a list</span>
<span class="sd">    containing that URL.</span>
<span class="sd">    2. When a list of URL strings is provided, it is correctly assigned without modification.</span>
<span class="sd">    Assertions:</span>
<span class="sd">    - Ensure that `server_metrics_urls` is correctly set as a list in both cases.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">config</span> <span class="o">=</span> <span class="n">EndPointConfig</span><span class="p">(</span><span class="n">server_metrics_urls</span><span class="o">=</span><span class="s2">&quot;http://metrics-url&quot;</span><span class="p">)</span>
    <span class="k">assert</span> <span class="n">config</span><span class="o">.</span><span class="n">server_metrics_urls</span> <span class="o">==</span> <span class="p">[</span><span class="s2">&quot;http://metrics-url&quot;</span><span class="p">]</span>

    <span class="n">config</span> <span class="o">=</span> <span class="n">EndPointConfig</span><span class="p">(</span>
        <span class="n">server_metrics_urls</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;http://metrics-url1&quot;</span><span class="p">,</span> <span class="s2">&quot;http://metrics-url2&quot;</span><span class="p">]</span>
    <span class="p">)</span>
    <span class="k">assert</span> <span class="n">config</span><span class="o">.</span><span class="n">server_metrics_urls</span> <span class="o">==</span> <span class="p">[</span><span class="s2">&quot;http://metrics-url1&quot;</span><span class="p">,</span> <span class="s2">&quot;http://metrics-url2&quot;</span><span class="p">]</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div><h2 id="aiperftestsconfigtest_image_config">aiperf.tests.config.test_image_config<a class="headerlink" href="#aiperftestsconfigtest_image_config" title="Permanent link">&para;</a></h2>


<div class="doc doc-object doc-module">



<a id="aiperf.tests.config.test_image_config"></a>
    <div class="doc doc-contents first">









  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h2 id="aiperf.tests.config.test_image_config.test_image_config_custom_values" class="doc doc-heading">
            <code class=" language-python"><span class="n">test_image_config_custom_values</span><span class="p">()</span></code>

<a href="#aiperf.tests.config.test_image_config.test_image_config_custom_values" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">

        <p>Test the InputConfig class with custom values.</p>
<p>This test verifies that the InputConfig class correctly initializes its attributes
when provided with a dictionary of custom values.</p>


            <details class="quote">
              <summary>Source code in <code>aiperf/tests/config/test_image_config.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">test_image_config_custom_values</span><span class="p">():</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Test the InputConfig class with custom values.</span>

<span class="sd">    This test verifies that the InputConfig class correctly initializes its attributes</span>
<span class="sd">    when provided with a dictionary of custom values.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">custom_values</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s2">&quot;width&quot;</span><span class="p">:</span> <span class="n">ImageWidthConfig</span><span class="p">(</span><span class="n">mean</span><span class="o">=</span><span class="mf">640.0</span><span class="p">,</span> <span class="n">stddev</span><span class="o">=</span><span class="mf">80.0</span><span class="p">),</span>
        <span class="s2">&quot;height&quot;</span><span class="p">:</span> <span class="n">ImageHeightConfig</span><span class="p">(</span><span class="n">mean</span><span class="o">=</span><span class="mf">480.0</span><span class="p">,</span> <span class="n">stddev</span><span class="o">=</span><span class="mf">60.0</span><span class="p">),</span>
        <span class="s2">&quot;batch_size&quot;</span><span class="p">:</span> <span class="mi">16</span><span class="p">,</span>
        <span class="s2">&quot;format&quot;</span><span class="p">:</span> <span class="n">ImageFormat</span><span class="o">.</span><span class="n">JPEG</span><span class="p">,</span>
    <span class="p">}</span>
    <span class="n">config</span> <span class="o">=</span> <span class="n">ImageConfig</span><span class="p">(</span><span class="o">**</span><span class="n">custom_values</span><span class="p">)</span>

    <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">custom_values</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="k">assert</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">config</span><span class="p">,</span> <span class="n">key</span><span class="p">)</span> <span class="o">==</span> <span class="n">value</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="aiperf.tests.config.test_image_config.test_image_config_defaults" class="doc doc-heading">
            <code class=" language-python"><span class="n">test_image_config_defaults</span><span class="p">()</span></code>

<a href="#aiperf.tests.config.test_image_config.test_image_config_defaults" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">

        <p>Test the default values of the ImageConfig class.</p>
<p>This test verifies that the ImageConfig object is initialized with the correct
default values as defined in the ImageDefaults class.</p>


            <details class="quote">
              <summary>Source code in <code>aiperf/tests/config/test_image_config.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">test_image_config_defaults</span><span class="p">():</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Test the default values of the ImageConfig class.</span>

<span class="sd">    This test verifies that the ImageConfig object is initialized with the correct</span>
<span class="sd">    default values as defined in the ImageDefaults class.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">config</span> <span class="o">=</span> <span class="n">ImageConfig</span><span class="p">()</span>
    <span class="k">assert</span> <span class="n">config</span><span class="o">.</span><span class="n">width</span><span class="o">.</span><span class="n">mean</span> <span class="o">==</span> <span class="n">ImageDefaults</span><span class="o">.</span><span class="n">WIDTH_MEAN</span>
    <span class="k">assert</span> <span class="n">config</span><span class="o">.</span><span class="n">width</span><span class="o">.</span><span class="n">stddev</span> <span class="o">==</span> <span class="n">ImageDefaults</span><span class="o">.</span><span class="n">WIDTH_STDDEV</span>
    <span class="k">assert</span> <span class="n">config</span><span class="o">.</span><span class="n">height</span><span class="o">.</span><span class="n">mean</span> <span class="o">==</span> <span class="n">ImageDefaults</span><span class="o">.</span><span class="n">HEIGHT_MEAN</span>
    <span class="k">assert</span> <span class="n">config</span><span class="o">.</span><span class="n">height</span><span class="o">.</span><span class="n">stddev</span> <span class="o">==</span> <span class="n">ImageDefaults</span><span class="o">.</span><span class="n">HEIGHT_STDDEV</span>
    <span class="k">assert</span> <span class="n">config</span><span class="o">.</span><span class="n">batch_size</span> <span class="o">==</span> <span class="n">ImageDefaults</span><span class="o">.</span><span class="n">BATCH_SIZE</span>
    <span class="k">assert</span> <span class="n">config</span><span class="o">.</span><span class="n">format</span> <span class="o">==</span> <span class="n">ImageDefaults</span><span class="o">.</span><span class="n">FORMAT</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div><h2 id="aiperftestsconfigtest_input_config">aiperf.tests.config.test_input_config<a class="headerlink" href="#aiperftestsconfigtest_input_config" title="Permanent link">&para;</a></h2>


<div class="doc doc-object doc-module">



<a id="aiperf.tests.config.test_input_config"></a>
    <div class="doc doc-contents first">









  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h2 id="aiperf.tests.config.test_input_config.test_input_config_custom_values" class="doc doc-heading">
            <code class=" language-python"><span class="n">test_input_config_custom_values</span><span class="p">()</span></code>

<a href="#aiperf.tests.config.test_input_config.test_input_config_custom_values" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">

        <p>Test the InputConfig class with custom values.</p>
<p>This test verifies that the InputConfig class correctly initializes its attributes
when provided with a dictionary of custom values.</p>


            <details class="quote">
              <summary>Source code in <code>aiperf/tests/config/test_input_config.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">test_input_config_custom_values</span><span class="p">():</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Test the InputConfig class with custom values.</span>

<span class="sd">    This test verifies that the InputConfig class correctly initializes its attributes</span>
<span class="sd">    when provided with a dictionary of custom values.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">config</span> <span class="o">=</span> <span class="n">InputConfig</span><span class="p">(</span>
        <span class="n">batch_size</span><span class="o">=</span><span class="mi">64</span><span class="p">,</span>
        <span class="n">extra</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;key&quot;</span><span class="p">:</span> <span class="s2">&quot;value&quot;</span><span class="p">},</span>
        <span class="n">goodput</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;request_latency&quot;</span><span class="p">:</span> <span class="mi">200</span><span class="p">},</span>
        <span class="n">header</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;Authorization&quot;</span><span class="p">:</span> <span class="s2">&quot;Bearer token&quot;</span><span class="p">},</span>
        <span class="n">file</span><span class="o">=</span><span class="s2">&quot;synthetic:queries,passages&quot;</span><span class="p">,</span>
        <span class="n">num_dataset_entries</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span>
        <span class="n">random_seed</span><span class="o">=</span><span class="mi">42</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="k">assert</span> <span class="n">config</span><span class="o">.</span><span class="n">batch_size</span> <span class="o">==</span> <span class="mi">64</span>
    <span class="k">assert</span> <span class="n">config</span><span class="o">.</span><span class="n">extra</span> <span class="o">==</span> <span class="p">{</span><span class="s2">&quot;key&quot;</span><span class="p">:</span> <span class="s2">&quot;value&quot;</span><span class="p">}</span>
    <span class="k">assert</span> <span class="n">config</span><span class="o">.</span><span class="n">goodput</span> <span class="o">==</span> <span class="p">{</span><span class="s2">&quot;request_latency&quot;</span><span class="p">:</span> <span class="mi">200</span><span class="p">}</span>
    <span class="k">assert</span> <span class="n">config</span><span class="o">.</span><span class="n">header</span> <span class="o">==</span> <span class="p">{</span><span class="s2">&quot;Authorization&quot;</span><span class="p">:</span> <span class="s2">&quot;Bearer token&quot;</span><span class="p">}</span>
    <span class="k">assert</span> <span class="n">config</span><span class="o">.</span><span class="n">file</span> <span class="o">==</span> <span class="n">PosixPath</span><span class="p">(</span><span class="s2">&quot;synthetic:queries,passages&quot;</span><span class="p">)</span>
    <span class="k">assert</span> <span class="n">config</span><span class="o">.</span><span class="n">num_dataset_entries</span> <span class="o">==</span> <span class="mi">10</span>
    <span class="k">assert</span> <span class="n">config</span><span class="o">.</span><span class="n">random_seed</span> <span class="o">==</span> <span class="mi">42</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="aiperf.tests.config.test_input_config.test_input_config_defaults" class="doc doc-heading">
            <code class=" language-python"><span class="n">test_input_config_defaults</span><span class="p">()</span></code>

<a href="#aiperf.tests.config.test_input_config.test_input_config_defaults" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">

        <p>Test the default values of the InputConfig class.</p>
<p>This test verifies that an instance of InputConfig is initialized with the
expected default values as defined in the InputDefaults class. Additionally,
it checks that the <code>audio</code> attribute is an instance of the AudioConfig class.</p>


            <details class="quote">
              <summary>Source code in <code>aiperf/tests/config/test_input_config.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">test_input_config_defaults</span><span class="p">():</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Test the default values of the InputConfig class.</span>

<span class="sd">    This test verifies that an instance of InputConfig is initialized with the</span>
<span class="sd">    expected default values as defined in the InputDefaults class. Additionally,</span>
<span class="sd">    it checks that the `audio` attribute is an instance of the AudioConfig class.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">config</span> <span class="o">=</span> <span class="n">InputConfig</span><span class="p">()</span>
    <span class="k">assert</span> <span class="n">config</span><span class="o">.</span><span class="n">batch_size</span> <span class="o">==</span> <span class="n">InputDefaults</span><span class="o">.</span><span class="n">BATCH_SIZE</span>
    <span class="k">assert</span> <span class="n">config</span><span class="o">.</span><span class="n">extra</span> <span class="o">==</span> <span class="n">InputDefaults</span><span class="o">.</span><span class="n">EXTRA</span>
    <span class="k">assert</span> <span class="n">config</span><span class="o">.</span><span class="n">goodput</span> <span class="o">==</span> <span class="n">InputDefaults</span><span class="o">.</span><span class="n">GOODPUT</span>
    <span class="k">assert</span> <span class="n">config</span><span class="o">.</span><span class="n">header</span> <span class="o">==</span> <span class="n">InputDefaults</span><span class="o">.</span><span class="n">HEADER</span>
    <span class="k">assert</span> <span class="n">config</span><span class="o">.</span><span class="n">file</span> <span class="o">==</span> <span class="n">InputDefaults</span><span class="o">.</span><span class="n">FILE</span>
    <span class="k">assert</span> <span class="n">config</span><span class="o">.</span><span class="n">num_dataset_entries</span> <span class="o">==</span> <span class="n">InputDefaults</span><span class="o">.</span><span class="n">NUM_DATASET_ENTRIES</span>
    <span class="k">assert</span> <span class="n">config</span><span class="o">.</span><span class="n">random_seed</span> <span class="o">==</span> <span class="n">InputDefaults</span><span class="o">.</span><span class="n">RANDOM_SEED</span>
    <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">audio</span><span class="p">,</span> <span class="n">AudioConfig</span><span class="p">)</span>
    <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">image</span><span class="p">,</span> <span class="n">ImageConfig</span><span class="p">)</span>
    <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">prompt</span><span class="p">,</span> <span class="n">PromptConfig</span><span class="p">)</span>
    <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">sessions</span><span class="p">,</span> <span class="n">SessionsConfig</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="aiperf.tests.config.test_input_config.test_input_config_file_validation" class="doc doc-heading">
            <code class=" language-python"><span class="n">test_input_config_file_validation</span><span class="p">()</span></code>

<a href="#aiperf.tests.config.test_input_config.test_input_config_file_validation" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">

        <p>Test InputConfig file field with valid and invalid values.</p>


            <details class="quote">
              <summary>Source code in <code>aiperf/tests/config/test_input_config.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">78</span>
<span class="normal">79</span>
<span class="normal">80</span>
<span class="normal">81</span>
<span class="normal">82</span>
<span class="normal">83</span>
<span class="normal">84</span>
<span class="normal">85</span>
<span class="normal">86</span>
<span class="normal">87</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">test_input_config_file_validation</span><span class="p">():</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Test InputConfig file field with valid and invalid values.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">valid_file</span> <span class="o">=</span> <span class="s2">&quot;synthetic:queries,passages&quot;</span>
    <span class="n">config</span> <span class="o">=</span> <span class="n">InputConfig</span><span class="p">(</span><span class="n">file</span><span class="o">=</span><span class="n">valid_file</span><span class="p">)</span>
    <span class="k">assert</span> <span class="n">config</span><span class="o">.</span><span class="n">file</span> <span class="o">==</span> <span class="n">PosixPath</span><span class="p">(</span><span class="n">valid_file</span><span class="p">)</span>

    <span class="k">with</span> <span class="n">pytest</span><span class="o">.</span><span class="n">raises</span><span class="p">(</span><span class="n">ValidationError</span><span class="p">):</span>
        <span class="n">InputConfig</span><span class="p">(</span><span class="n">file</span><span class="o">=</span><span class="mi">12345</span><span class="p">)</span>  <span class="c1"># Invalid file (non-string value)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="aiperf.tests.config.test_input_config.test_input_config_goodput_validation" class="doc doc-heading">
            <code class=" language-python"><span class="n">test_input_config_goodput_validation</span><span class="p">()</span></code>

<a href="#aiperf.tests.config.test_input_config.test_input_config_goodput_validation" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">

        <p>Test InputConfig goodput field with valid and invalid values.</p>


            <details class="quote">
              <summary>Source code in <code>aiperf/tests/config/test_input_config.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span>
<span class="normal">71</span>
<span class="normal">72</span>
<span class="normal">73</span>
<span class="normal">74</span>
<span class="normal">75</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">test_input_config_goodput_validation</span><span class="p">():</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Test InputConfig goodput field with valid and invalid values.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">valid_goodput</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;request_latency&quot;</span><span class="p">:</span> <span class="mi">300</span><span class="p">,</span> <span class="s2">&quot;output_token_throughput_per_user&quot;</span><span class="p">:</span> <span class="mi">600</span><span class="p">}</span>
    <span class="n">config</span> <span class="o">=</span> <span class="n">InputConfig</span><span class="p">(</span><span class="n">goodput</span><span class="o">=</span><span class="n">valid_goodput</span><span class="p">)</span>
    <span class="k">assert</span> <span class="n">config</span><span class="o">.</span><span class="n">goodput</span> <span class="o">==</span> <span class="n">valid_goodput</span>

    <span class="k">with</span> <span class="n">pytest</span><span class="o">.</span><span class="n">raises</span><span class="p">(</span><span class="n">ValidationError</span><span class="p">):</span>
        <span class="n">InputConfig</span><span class="p">(</span><span class="n">goodput</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;invalid_metric&quot;</span><span class="p">:</span> <span class="s2">&quot;not_a_number&quot;</span><span class="p">})</span>  <span class="c1"># Invalid goodput</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div><h2 id="aiperftestsconfigtest_output_config">aiperf.tests.config.test_output_config<a class="headerlink" href="#aiperftestsconfigtest_output_config" title="Permanent link">&para;</a></h2>


<div class="doc doc-object doc-module">



<a id="aiperf.tests.config.test_output_config"></a>
    <div class="doc doc-contents first">









  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h2 id="aiperf.tests.config.test_output_config.test_output_config_custom_values" class="doc doc-heading">
            <code class=" language-python"><span class="n">test_output_config_custom_values</span><span class="p">()</span></code>

<a href="#aiperf.tests.config.test_output_config.test_output_config_custom_values" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">

        <p>Test the OutputConfig class with custom values.</p>
<p>This test verifies that the OutputConfig class correctly initializes its attributes
when provided with a dictionary of custom values.</p>


            <details class="quote">
              <summary>Source code in <code>aiperf/tests/config/test_output_config.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">test_output_config_custom_values</span><span class="p">():</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Test the OutputConfig class with custom values.</span>

<span class="sd">    This test verifies that the OutputConfig class correctly initializes its attributes</span>
<span class="sd">    when provided with a dictionary of custom values.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">custom_values</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s2">&quot;artifact_directory&quot;</span><span class="p">:</span> <span class="n">Path</span><span class="p">(</span><span class="s2">&quot;/custom/artifact/directory&quot;</span><span class="p">),</span>
    <span class="p">}</span>
    <span class="n">config</span> <span class="o">=</span> <span class="n">OutputConfig</span><span class="p">(</span><span class="o">**</span><span class="n">custom_values</span><span class="p">)</span>

    <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">custom_values</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="k">assert</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">config</span><span class="p">,</span> <span class="n">key</span><span class="p">)</span> <span class="o">==</span> <span class="n">value</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="aiperf.tests.config.test_output_config.test_output_config_defaults" class="doc doc-heading">
            <code class=" language-python"><span class="n">test_output_config_defaults</span><span class="p">()</span></code>

<a href="#aiperf.tests.config.test_output_config.test_output_config_defaults" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">

        <p>Test the default values of the OutputConfig class.</p>
<p>This test verifies that the OutputConfig object is initialized with the correct
default values as defined in the OutputDefaults class.</p>


            <details class="quote">
              <summary>Source code in <code>aiperf/tests/config/test_output_config.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">test_output_config_defaults</span><span class="p">():</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Test the default values of the OutputConfig class.</span>

<span class="sd">    This test verifies that the OutputConfig object is initialized with the correct</span>
<span class="sd">    default values as defined in the OutputDefaults class.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">config</span> <span class="o">=</span> <span class="n">OutputConfig</span><span class="p">()</span>
    <span class="k">assert</span> <span class="n">config</span><span class="o">.</span><span class="n">artifact_directory</span> <span class="o">==</span> <span class="n">OutputDefaults</span><span class="o">.</span><span class="n">ARTIFACT_DIRECTORY</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div><h2 id="aiperftestsconfigtest_prompt_config">aiperf.tests.config.test_prompt_config<a class="headerlink" href="#aiperftestsconfigtest_prompt_config" title="Permanent link">&para;</a></h2>


<div class="doc doc-object doc-module">



<a id="aiperf.tests.config.test_prompt_config"></a>
    <div class="doc doc-contents first">









  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h2 id="aiperf.tests.config.test_prompt_config.test_input_tokens_config_custom_values" class="doc doc-heading">
            <code class=" language-python"><span class="n">test_input_tokens_config_custom_values</span><span class="p">()</span></code>

<a href="#aiperf.tests.config.test_prompt_config.test_input_tokens_config_custom_values" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">

        <p>Test the InputTokensConfig class with custom values.</p>
<p>This test verifies that the InputTokensConfig class correctly initializes its attributes
when provided with a dictionary of custom values.</p>


            <details class="quote">
              <summary>Source code in <code>aiperf/tests/config/test_prompt_config.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">test_input_tokens_config_custom_values</span><span class="p">():</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Test the InputTokensConfig class with custom values.</span>

<span class="sd">    This test verifies that the InputTokensConfig class correctly initializes its attributes</span>
<span class="sd">    when provided with a dictionary of custom values.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">custom_values</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s2">&quot;mean&quot;</span><span class="p">:</span> <span class="mi">100</span><span class="p">,</span>
        <span class="s2">&quot;stddev&quot;</span><span class="p">:</span> <span class="mf">10.0</span><span class="p">,</span>
    <span class="p">}</span>
    <span class="n">config</span> <span class="o">=</span> <span class="n">InputTokensConfig</span><span class="p">(</span><span class="o">**</span><span class="n">custom_values</span><span class="p">)</span>

    <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">custom_values</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="k">assert</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">config</span><span class="p">,</span> <span class="n">key</span><span class="p">)</span> <span class="o">==</span> <span class="n">value</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="aiperf.tests.config.test_prompt_config.test_input_tokens_config_defaults" class="doc doc-heading">
            <code class=" language-python"><span class="n">test_input_tokens_config_defaults</span><span class="p">()</span></code>

<a href="#aiperf.tests.config.test_prompt_config.test_input_tokens_config_defaults" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">

        <p>Test the default values of the InputTokensConfig class.</p>
<p>This test verifies that the InputTokensConfig object is initialized with the correct
default values as defined in the SyntheticTokensDefaults class.</p>


            <details class="quote">
              <summary>Source code in <code>aiperf/tests/config/test_prompt_config.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">test_input_tokens_config_defaults</span><span class="p">():</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Test the default values of the InputTokensConfig class.</span>

<span class="sd">    This test verifies that the InputTokensConfig object is initialized with the correct</span>
<span class="sd">    default values as defined in the SyntheticTokensDefaults class.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">config</span> <span class="o">=</span> <span class="n">InputTokensConfig</span><span class="p">()</span>
    <span class="k">assert</span> <span class="n">config</span><span class="o">.</span><span class="n">mean</span> <span class="o">==</span> <span class="n">InputTokensDefaults</span><span class="o">.</span><span class="n">MEAN</span>
    <span class="k">assert</span> <span class="n">config</span><span class="o">.</span><span class="n">stddev</span> <span class="o">==</span> <span class="n">InputTokensDefaults</span><span class="o">.</span><span class="n">STDDEV</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="aiperf.tests.config.test_prompt_config.test_output_tokens_config_custom_values" class="doc doc-heading">
            <code class=" language-python"><span class="n">test_output_tokens_config_custom_values</span><span class="p">()</span></code>

<a href="#aiperf.tests.config.test_prompt_config.test_output_tokens_config_custom_values" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">

        <p>Test the OutputTokensConfig class with custom values.</p>
<p>This test verifies that the OutputTokensConfig class correctly initializes its attributes
when provided with a dictionary of custom values.</p>


            <details class="quote">
              <summary>Source code in <code>aiperf/tests/config/test_prompt_config.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span>
<span class="normal">71</span>
<span class="normal">72</span>
<span class="normal">73</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">test_output_tokens_config_custom_values</span><span class="p">():</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Test the OutputTokensConfig class with custom values.</span>

<span class="sd">    This test verifies that the OutputTokensConfig class correctly initializes its attributes</span>
<span class="sd">    when provided with a dictionary of custom values.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">custom_values</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s2">&quot;mean&quot;</span><span class="p">:</span> <span class="mi">100</span><span class="p">,</span>
        <span class="s2">&quot;deterministic&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
        <span class="s2">&quot;stddev&quot;</span><span class="p">:</span> <span class="mf">10.0</span><span class="p">,</span>
    <span class="p">}</span>
    <span class="n">config</span> <span class="o">=</span> <span class="n">OutputTokensConfig</span><span class="p">(</span><span class="o">**</span><span class="n">custom_values</span><span class="p">)</span>

    <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">custom_values</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="k">assert</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">config</span><span class="p">,</span> <span class="n">key</span><span class="p">)</span> <span class="o">==</span> <span class="n">value</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="aiperf.tests.config.test_prompt_config.test_output_tokens_config_defaults" class="doc doc-heading">
            <code class=" language-python"><span class="n">test_output_tokens_config_defaults</span><span class="p">()</span></code>

<a href="#aiperf.tests.config.test_prompt_config.test_output_tokens_config_defaults" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">

        <p>Test the default values of the OutputTokensConfig class.</p>
<p>This test verifies that the OutputTokensConfig object is initialized with the correct
default values as defined in the OutputTokensDefaults class.</p>


            <details class="quote">
              <summary>Source code in <code>aiperf/tests/config/test_prompt_config.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">test_output_tokens_config_defaults</span><span class="p">():</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Test the default values of the OutputTokensConfig class.</span>

<span class="sd">    This test verifies that the OutputTokensConfig object is initialized with the correct</span>
<span class="sd">    default values as defined in the OutputTokensDefaults class.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">config</span> <span class="o">=</span> <span class="n">OutputTokensConfig</span><span class="p">()</span>
    <span class="k">assert</span> <span class="n">config</span><span class="o">.</span><span class="n">mean</span> <span class="o">==</span> <span class="n">OutputTokensDefaults</span><span class="o">.</span><span class="n">MEAN</span>
    <span class="k">assert</span> <span class="n">config</span><span class="o">.</span><span class="n">deterministic</span> <span class="o">==</span> <span class="n">OutputTokensDefaults</span><span class="o">.</span><span class="n">DETERMINISTIC</span>
    <span class="k">assert</span> <span class="n">config</span><span class="o">.</span><span class="n">stddev</span> <span class="o">==</span> <span class="n">OutputTokensDefaults</span><span class="o">.</span><span class="n">STDDEV</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="aiperf.tests.config.test_prompt_config.test_prefix_prompt_config_custom_values" class="doc doc-heading">
            <code class=" language-python"><span class="n">test_prefix_prompt_config_custom_values</span><span class="p">()</span></code>

<a href="#aiperf.tests.config.test_prompt_config.test_prefix_prompt_config_custom_values" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">

        <p>Test the PrefixPromptConfig class with custom values.</p>
<p>This test verifies that the PrefixPromptConfig class correctly initializes its attributes
when provided with a dictionary of custom values.</p>


            <details class="quote">
              <summary>Source code in <code>aiperf/tests/config/test_prompt_config.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">test_prefix_prompt_config_custom_values</span><span class="p">():</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Test the PrefixPromptConfig class with custom values.</span>

<span class="sd">    This test verifies that the PrefixPromptConfig class correctly initializes its attributes</span>
<span class="sd">    when provided with a dictionary of custom values.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">custom_values</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s2">&quot;pool_size&quot;</span><span class="p">:</span> <span class="mi">100</span><span class="p">,</span>
        <span class="s2">&quot;length&quot;</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span>
    <span class="p">}</span>
    <span class="n">config</span> <span class="o">=</span> <span class="n">PrefixPromptConfig</span><span class="p">(</span><span class="o">**</span><span class="n">custom_values</span><span class="p">)</span>

    <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">custom_values</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="k">assert</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">config</span><span class="p">,</span> <span class="n">key</span><span class="p">)</span> <span class="o">==</span> <span class="n">value</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="aiperf.tests.config.test_prompt_config.test_prefix_prompt_config_defaults" class="doc doc-heading">
            <code class=" language-python"><span class="n">test_prefix_prompt_config_defaults</span><span class="p">()</span></code>

<a href="#aiperf.tests.config.test_prompt_config.test_prefix_prompt_config_defaults" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">

        <p>Test the default values of the PrefixPromptConfig class.</p>
<p>This test verifies that the PrefixPromptConfig object is initialized with the correct
default values as defined in the PrefixPromptDefaults class.</p>


            <details class="quote">
              <summary>Source code in <code>aiperf/tests/config/test_prompt_config.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">76</span>
<span class="normal">77</span>
<span class="normal">78</span>
<span class="normal">79</span>
<span class="normal">80</span>
<span class="normal">81</span>
<span class="normal">82</span>
<span class="normal">83</span>
<span class="normal">84</span>
<span class="normal">85</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">test_prefix_prompt_config_defaults</span><span class="p">():</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Test the default values of the PrefixPromptConfig class.</span>

<span class="sd">    This test verifies that the PrefixPromptConfig object is initialized with the correct</span>
<span class="sd">    default values as defined in the PrefixPromptDefaults class.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">config</span> <span class="o">=</span> <span class="n">PrefixPromptConfig</span><span class="p">()</span>
    <span class="k">assert</span> <span class="n">config</span><span class="o">.</span><span class="n">pool_size</span> <span class="o">==</span> <span class="n">PrefixPromptDefaults</span><span class="o">.</span><span class="n">POOL_SIZE</span>
    <span class="k">assert</span> <span class="n">config</span><span class="o">.</span><span class="n">length</span> <span class="o">==</span> <span class="n">PrefixPromptDefaults</span><span class="o">.</span><span class="n">LENGTH</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div><h2 id="aiperftestsconfigtest_sessions_config">aiperf.tests.config.test_sessions_config<a class="headerlink" href="#aiperftestsconfigtest_sessions_config" title="Permanent link">&para;</a></h2>


<div class="doc doc-object doc-module">



<a id="aiperf.tests.config.test_sessions_config"></a>
    <div class="doc doc-contents first">









  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h2 id="aiperf.tests.config.test_sessions_config.test_sessions_config_custom_values" class="doc doc-heading">
            <code class=" language-python"><span class="n">test_sessions_config_custom_values</span><span class="p">()</span></code>

<a href="#aiperf.tests.config.test_sessions_config.test_sessions_config_custom_values" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">

        <p>Test the SessionsConfig class with custom values.</p>
<p>This test verifies that the SessionsConfig class correctly initializes its attributes
when provided with a dictionary of custom values.</p>


            <details class="quote">
              <summary>Source code in <code>aiperf/tests/config/test_sessions_config.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">test_sessions_config_custom_values</span><span class="p">():</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Test the SessionsConfig class with custom values.</span>

<span class="sd">    This test verifies that the SessionsConfig class correctly initializes its attributes</span>
<span class="sd">    when provided with a dictionary of custom values.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">custom_values</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s2">&quot;num&quot;</span><span class="p">:</span> <span class="mi">100</span><span class="p">,</span>
        <span class="s2">&quot;turns&quot;</span><span class="p">:</span> <span class="n">SessionTurnsConfig</span><span class="p">(</span><span class="n">mean</span><span class="o">=</span><span class="mf">5.0</span><span class="p">,</span> <span class="n">stddev</span><span class="o">=</span><span class="mf">1.0</span><span class="p">),</span>
        <span class="s2">&quot;turn_delay&quot;</span><span class="p">:</span> <span class="n">SessionTurnDelayConfig</span><span class="p">(</span><span class="n">mean</span><span class="o">=</span><span class="mf">10.0</span><span class="p">,</span> <span class="n">stddev</span><span class="o">=</span><span class="mf">2.0</span><span class="p">,</span> <span class="n">ratio</span><span class="o">=</span><span class="mf">1.5</span><span class="p">),</span>
    <span class="p">}</span>
    <span class="n">config</span> <span class="o">=</span> <span class="n">SessionsConfig</span><span class="p">(</span><span class="o">**</span><span class="n">custom_values</span><span class="p">)</span>

    <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">custom_values</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="k">assert</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">config</span><span class="p">,</span> <span class="n">key</span><span class="p">)</span> <span class="o">==</span> <span class="n">value</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="aiperf.tests.config.test_sessions_config.test_sessions_config_defaults" class="doc doc-heading">
            <code class=" language-python"><span class="n">test_sessions_config_defaults</span><span class="p">()</span></code>

<a href="#aiperf.tests.config.test_sessions_config.test_sessions_config_defaults" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">

        <p>Test the default values of the SessionsConfig class.</p>
<p>This test verifies that the SessionsConfig object is initialized with the correct
default values as defined in the SessionsDefaults class.</p>


            <details class="quote">
              <summary>Source code in <code>aiperf/tests/config/test_sessions_config.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">test_sessions_config_defaults</span><span class="p">():</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Test the default values of the SessionsConfig class.</span>

<span class="sd">    This test verifies that the SessionsConfig object is initialized with the correct</span>
<span class="sd">    default values as defined in the SessionsDefaults class.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">config</span> <span class="o">=</span> <span class="n">SessionsConfig</span><span class="p">()</span>
    <span class="k">assert</span> <span class="n">config</span><span class="o">.</span><span class="n">num</span> <span class="o">==</span> <span class="n">SessionsDefaults</span><span class="o">.</span><span class="n">NUM</span>
    <span class="k">assert</span> <span class="n">config</span><span class="o">.</span><span class="n">turns</span><span class="o">.</span><span class="n">mean</span> <span class="o">==</span> <span class="n">SessionTurnsDefaults</span><span class="o">.</span><span class="n">MEAN</span>
    <span class="k">assert</span> <span class="n">config</span><span class="o">.</span><span class="n">turns</span><span class="o">.</span><span class="n">stddev</span> <span class="o">==</span> <span class="n">SessionTurnsDefaults</span><span class="o">.</span><span class="n">STDDEV</span>
    <span class="k">assert</span> <span class="n">config</span><span class="o">.</span><span class="n">turn_delay</span><span class="o">.</span><span class="n">mean</span> <span class="o">==</span> <span class="n">SessionTurnDelayDefaults</span><span class="o">.</span><span class="n">MEAN</span>
    <span class="k">assert</span> <span class="n">config</span><span class="o">.</span><span class="n">turn_delay</span><span class="o">.</span><span class="n">stddev</span> <span class="o">==</span> <span class="n">SessionTurnDelayDefaults</span><span class="o">.</span><span class="n">STDDEV</span>
    <span class="k">assert</span> <span class="n">config</span><span class="o">.</span><span class="n">turn_delay</span><span class="o">.</span><span class="n">ratio</span> <span class="o">==</span> <span class="n">SessionTurnDelayDefaults</span><span class="o">.</span><span class="n">RATIO</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div><h2 id="aiperftestsconfigtest_tokenizer_config">aiperf.tests.config.test_tokenizer_config<a class="headerlink" href="#aiperftestsconfigtest_tokenizer_config" title="Permanent link">&para;</a></h2>


<div class="doc doc-object doc-module">



<a id="aiperf.tests.config.test_tokenizer_config"></a>
    <div class="doc doc-contents first">









  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h2 id="aiperf.tests.config.test_tokenizer_config.test_output_config_custom_values" class="doc doc-heading">
            <code class=" language-python"><span class="n">test_output_config_custom_values</span><span class="p">()</span></code>

<a href="#aiperf.tests.config.test_tokenizer_config.test_output_config_custom_values" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">

        <p>Test the OutputConfig class with custom values.</p>
<p>This test verifies that the OutputConfig class correctly initializes its attributes
when provided with a dictionary of custom values.</p>


            <details class="quote">
              <summary>Source code in <code>aiperf/tests/config/test_tokenizer_config.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">test_output_config_custom_values</span><span class="p">():</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Test the OutputConfig class with custom values.</span>

<span class="sd">    This test verifies that the OutputConfig class correctly initializes its attributes</span>
<span class="sd">    when provided with a dictionary of custom values.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">custom_values</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;custom_tokenizer&quot;</span><span class="p">,</span>
        <span class="s2">&quot;revision&quot;</span><span class="p">:</span> <span class="s2">&quot;v1.0.0&quot;</span><span class="p">,</span>
        <span class="s2">&quot;trust_remote_code&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
    <span class="p">}</span>
    <span class="n">config</span> <span class="o">=</span> <span class="n">TokenizerConfig</span><span class="p">(</span><span class="o">**</span><span class="n">custom_values</span><span class="p">)</span>

    <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">custom_values</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="k">assert</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">config</span><span class="p">,</span> <span class="n">key</span><span class="p">)</span> <span class="o">==</span> <span class="n">value</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="aiperf.tests.config.test_tokenizer_config.test_tokenizer_config_defaults" class="doc doc-heading">
            <code class=" language-python"><span class="n">test_tokenizer_config_defaults</span><span class="p">()</span></code>

<a href="#aiperf.tests.config.test_tokenizer_config.test_tokenizer_config_defaults" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">

        <p>Test the default values of the TokenizerConfig class.</p>
<p>This test verifies that the TokenizerConfig object is initialized with the correct
default values as defined in the TokenizerDefaults class.</p>


            <details class="quote">
              <summary>Source code in <code>aiperf/tests/config/test_tokenizer_config.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">test_tokenizer_config_defaults</span><span class="p">():</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Test the default values of the TokenizerConfig class.</span>

<span class="sd">    This test verifies that the TokenizerConfig object is initialized with the correct</span>
<span class="sd">    default values as defined in the TokenizerDefaults class.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">config</span> <span class="o">=</span> <span class="n">TokenizerConfig</span><span class="p">()</span>
    <span class="k">assert</span> <span class="n">config</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="n">TokenizerDefaults</span><span class="o">.</span><span class="n">NAME</span>
    <span class="k">assert</span> <span class="n">config</span><span class="o">.</span><span class="n">revision</span> <span class="o">==</span> <span class="n">TokenizerDefaults</span><span class="o">.</span><span class="n">REVISION</span>
    <span class="k">assert</span> <span class="n">config</span><span class="o">.</span><span class="n">trust_remote_code</span> <span class="o">==</span> <span class="n">TokenizerDefaults</span><span class="o">.</span><span class="n">TRUST_REMOTE_CODE</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div><h2 id="aiperftestsconfigtest_user_config">aiperf.tests.config.test_user_config<a class="headerlink" href="#aiperftestsconfigtest_user_config" title="Permanent link">&para;</a></h2>


<div class="doc doc-object doc-module">



<a id="aiperf.tests.config.test_user_config"></a>
    <div class="doc doc-contents first">









  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h2 id="aiperf.tests.config.test_user_config.test_user_config_custom_values" class="doc doc-heading">
            <code class=" language-python"><span class="n">test_user_config_custom_values</span><span class="p">()</span></code>

<a href="#aiperf.tests.config.test_user_config.test_user_config_custom_values" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">

        <p>Test the UserConfig class with custom values.
This test verifies that the UserConfig instance correctly initializes
with the provided custom values and that its attributes match the expected
values.
Assertions:
    - Checks that the <code>model_names</code> attribute is correctly set to "model1, model2".
    - Verifies that the <code>verbose</code> attribute is set to True.
    - Ensures that the <code>template_filename</code> attribute is set to "custom_template.yaml".</p>


            <details class="quote">
              <summary>Source code in <code>aiperf/tests/config/test_user_config.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">77</span>
<span class="normal">78</span>
<span class="normal">79</span>
<span class="normal">80</span>
<span class="normal">81</span>
<span class="normal">82</span>
<span class="normal">83</span>
<span class="normal">84</span>
<span class="normal">85</span>
<span class="normal">86</span>
<span class="normal">87</span>
<span class="normal">88</span>
<span class="normal">89</span>
<span class="normal">90</span>
<span class="normal">91</span>
<span class="normal">92</span>
<span class="normal">93</span>
<span class="normal">94</span>
<span class="normal">95</span>
<span class="normal">96</span>
<span class="normal">97</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">test_user_config_custom_values</span><span class="p">():</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Test the UserConfig class with custom values.</span>
<span class="sd">    This test verifies that the UserConfig instance correctly initializes</span>
<span class="sd">    with the provided custom values and that its attributes match the expected</span>
<span class="sd">    values.</span>
<span class="sd">    Assertions:</span>
<span class="sd">        - Checks that the `model_names` attribute is correctly set to &quot;model1, model2&quot;.</span>
<span class="sd">        - Verifies that the `verbose` attribute is set to True.</span>
<span class="sd">        - Ensures that the `template_filename` attribute is set to &quot;custom_template.yaml&quot;.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">custom_values</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s2">&quot;model_names&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;model1&quot;</span><span class="p">,</span> <span class="s2">&quot;model2&quot;</span><span class="p">],</span>
        <span class="s2">&quot;verbose&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
        <span class="s2">&quot;template_filename&quot;</span><span class="p">:</span> <span class="s2">&quot;custom_template.yaml&quot;</span><span class="p">,</span>
    <span class="p">}</span>
    <span class="n">config</span> <span class="o">=</span> <span class="n">UserConfig</span><span class="p">(</span><span class="o">**</span><span class="n">custom_values</span><span class="p">)</span>
    <span class="k">assert</span> <span class="n">config</span><span class="o">.</span><span class="n">model_names</span> <span class="o">==</span> <span class="p">[</span><span class="s2">&quot;model1&quot;</span><span class="p">,</span> <span class="s2">&quot;model2&quot;</span><span class="p">]</span>
    <span class="k">assert</span> <span class="n">config</span><span class="o">.</span><span class="n">verbose</span> <span class="ow">is</span> <span class="kc">True</span>
    <span class="k">assert</span> <span class="n">config</span><span class="o">.</span><span class="n">template_filename</span> <span class="o">==</span> <span class="s2">&quot;custom_template.yaml&quot;</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="aiperf.tests.config.test_user_config.test_user_config_defaults" class="doc doc-heading">
            <code class=" language-python"><span class="n">test_user_config_defaults</span><span class="p">()</span></code>

<a href="#aiperf.tests.config.test_user_config.test_user_config_defaults" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">

        <p>Test the default values of the UserConfig class.
This test verifies that the UserConfig instance is initialized with the expected
default values as defined in the UserDefaults class. Additionally, it checks that
the <code>endpoint</code> and <code>input</code> attributes are instances of their respective configuration
classes.
Assertions:
- <code>model_names</code> matches <code>UserDefaults.MODEL_NAMES</code>.
- <code>verbose</code> matches <code>UserDefaults.VERBOSE</code>.
- <code>template_filename</code> matches <code>UserDefaults.TEMPLATE_FILENAME</code>.
- <code>endpoint</code> is an instance of <code>EndPointConfig</code>.
- <code>input</code> is an instance of <code>InputConfig</code>.
- <code>output</code> is an instance of <code>OutputConfig</code>
- <code>tokenizer</code> is an instance of <code>TokenizerConfig</code>.</p>


            <details class="quote">
              <summary>Source code in <code>aiperf/tests/config/test_user_config.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span>
<span class="normal">71</span>
<span class="normal">72</span>
<span class="normal">73</span>
<span class="normal">74</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">test_user_config_defaults</span><span class="p">():</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Test the default values of the UserConfig class.</span>
<span class="sd">    This test verifies that the UserConfig instance is initialized with the expected</span>
<span class="sd">    default values as defined in the UserDefaults class. Additionally, it checks that</span>
<span class="sd">    the `endpoint` and `input` attributes are instances of their respective configuration</span>
<span class="sd">    classes.</span>
<span class="sd">    Assertions:</span>
<span class="sd">    - `model_names` matches `UserDefaults.MODEL_NAMES`.</span>
<span class="sd">    - `verbose` matches `UserDefaults.VERBOSE`.</span>
<span class="sd">    - `template_filename` matches `UserDefaults.TEMPLATE_FILENAME`.</span>
<span class="sd">    - `endpoint` is an instance of `EndPointConfig`.</span>
<span class="sd">    - `input` is an instance of `InputConfig`.</span>
<span class="sd">    - `output` is an instance of `OutputConfig`</span>
<span class="sd">    - `tokenizer` is an instance of `TokenizerConfig`.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">config</span> <span class="o">=</span> <span class="n">UserConfig</span><span class="p">()</span>
    <span class="k">assert</span> <span class="n">config</span><span class="o">.</span><span class="n">model_names</span> <span class="o">==</span> <span class="n">UserDefaults</span><span class="o">.</span><span class="n">MODEL_NAMES</span>
    <span class="k">assert</span> <span class="n">config</span><span class="o">.</span><span class="n">verbose</span> <span class="o">==</span> <span class="n">UserDefaults</span><span class="o">.</span><span class="n">VERBOSE</span>
    <span class="k">assert</span> <span class="n">config</span><span class="o">.</span><span class="n">template_filename</span> <span class="o">==</span> <span class="n">UserDefaults</span><span class="o">.</span><span class="n">TEMPLATE_FILENAME</span>
    <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">endpoint</span><span class="p">,</span> <span class="n">EndPointConfig</span><span class="p">)</span>
    <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">input</span><span class="p">,</span> <span class="n">InputConfig</span><span class="p">)</span>
    <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">output</span><span class="p">,</span> <span class="n">OutputConfig</span><span class="p">)</span>
    <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">tokenizer</span><span class="p">,</span> <span class="n">TokenizerConfig</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="aiperf.tests.config.test_user_config.test_user_config_serialization_to_file" class="doc doc-heading">
            <code class=" language-python"><span class="n">test_user_config_serialization_to_file</span><span class="p">()</span></code>

<a href="#aiperf.tests.config.test_user_config.test_user_config_serialization_to_file" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">

        <p>Test the serialization and deserialization of a UserConfig object to and from a file.</p>
<p>This test verifies that a UserConfig instance can be serialized to JSON format,
written to a file, and then accurately deserialized back into a UserConfig object.
It ensures that the original configuration and the loaded configuration are identical.</p>
<p>Steps:
1. Create a UserConfig instance with predefined attributes.
2. Serialize the UserConfig instance to JSON and write it to a mocked file.
3. Read the JSON data from the mocked file and deserialize it back into a UserConfig instance.
4. Assert that the original UserConfig instance matches the deserialized instance.</p>
<p>Mocks:
- <code>pathlib.Path.open</code> is mocked to simulate file operations without actual file I/O.</p>


            <details class="quote">
              <summary>Source code in <code>aiperf/tests/config/test_user_config.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">test_user_config_serialization_to_file</span><span class="p">():</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Test the serialization and deserialization of a UserConfig object to and from a file.</span>

<span class="sd">    This test verifies that a UserConfig instance can be serialized to JSON format,</span>
<span class="sd">    written to a file, and then accurately deserialized back into a UserConfig object.</span>
<span class="sd">    It ensures that the original configuration and the loaded configuration are identical.</span>

<span class="sd">    Steps:</span>
<span class="sd">    1. Create a UserConfig instance with predefined attributes.</span>
<span class="sd">    2. Serialize the UserConfig instance to JSON and write it to a mocked file.</span>
<span class="sd">    3. Read the JSON data from the mocked file and deserialize it back into a UserConfig instance.</span>
<span class="sd">    4. Assert that the original UserConfig instance matches the deserialized instance.</span>

<span class="sd">    Mocks:</span>
<span class="sd">    - `pathlib.Path.open` is mocked to simulate file operations without actual file I/O.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">config</span> <span class="o">=</span> <span class="n">UserConfig</span><span class="p">(</span>
        <span class="n">model_names</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;model1&quot;</span><span class="p">,</span> <span class="s2">&quot;model2&quot;</span><span class="p">],</span>
        <span class="n">verbose</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">template_filename</span><span class="o">=</span><span class="s2">&quot;custom_template.yaml&quot;</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="c1"># Serialize to JSON and write to a mocked file</span>
    <span class="n">mocked_file</span> <span class="o">=</span> <span class="n">mock_open</span><span class="p">()</span>
    <span class="k">with</span> <span class="n">patch</span><span class="p">(</span><span class="s2">&quot;pathlib.Path.open&quot;</span><span class="p">,</span> <span class="n">mocked_file</span><span class="p">):</span>
        <span class="n">mocked_file</span><span class="p">()</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">model_dump_json</span><span class="p">(</span><span class="n">indent</span><span class="o">=</span><span class="mi">4</span><span class="p">))</span>

    <span class="c1"># Read the mocked file and deserialize back to UserConfig</span>
    <span class="k">with</span> <span class="n">patch</span><span class="p">(</span><span class="s2">&quot;pathlib.Path.open&quot;</span><span class="p">,</span> <span class="n">mocked_file</span><span class="p">):</span>
        <span class="n">mocked_file</span><span class="p">()</span><span class="o">.</span><span class="n">read</span><span class="o">.</span><span class="n">return_value</span> <span class="o">=</span> <span class="n">config</span><span class="o">.</span><span class="n">model_dump_json</span><span class="p">(</span><span class="n">indent</span><span class="o">=</span><span class="mi">4</span><span class="p">)</span>
        <span class="n">loaded_config</span> <span class="o">=</span> <span class="n">UserConfig</span><span class="o">.</span><span class="n">model_validate_json</span><span class="p">(</span><span class="n">mocked_file</span><span class="p">()</span><span class="o">.</span><span class="n">read</span><span class="p">())</span>

    <span class="c1"># Ensure the original and loaded configs are identical</span>
    <span class="k">assert</span> <span class="n">config</span> <span class="o">==</span> <span class="n">loaded_config</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div><h2 id="aiperftestsconftest">aiperf.tests.conftest<a class="headerlink" href="#aiperftestsconftest" title="Permanent link">&para;</a></h2>


<div class="doc doc-object doc-module">



<a id="aiperf.tests.conftest"></a>
    <div class="doc doc-contents first">

        <p>Shared fixtures for testing AIPerf services.</p>
<p>This file contains fixtures that are automatically discovered by pytest
and made available to test functions in the same directory and subdirectories.</p>









  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h2 id="aiperf.tests.conftest.mock_communication" class="doc doc-heading">
            <code class=" language-python"><span class="n">mock_communication</span><span class="p">(</span><span class="n">mock_zmq_communication</span><span class="p">)</span></code>

<a href="#aiperf.tests.conftest.mock_communication" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">

        <p>Create a mock communication object for testing service communication.</p>
<p>This mock tracks published messages and subscriptions for verification in tests.</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="unittest.mock.MagicMock">MagicMock</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>An MagicMock configured to behave like ZMQCommunication</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>aiperf/tests/conftest.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@pytest</span><span class="o">.</span><span class="n">fixture</span>
<span class="k">def</span><span class="w"> </span><span class="nf">mock_communication</span><span class="p">(</span><span class="n">mock_zmq_communication</span><span class="p">:</span> <span class="n">MagicMock</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">MagicMock</span><span class="p">:</span>  <span class="c1"># noqa: F811 : used as a fixture</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Create a mock communication object for testing service communication.</span>

<span class="sd">    This mock tracks published messages and subscriptions for verification in tests.</span>

<span class="sd">    Returns:</span>
<span class="sd">        An MagicMock configured to behave like ZMQCommunication</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">mock_zmq_communication</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="aiperf.tests.conftest.mock_hf_tokenizer" class="doc doc-heading">
            <code class=" language-python"><span class="n">mock_hf_tokenizer</span><span class="p">()</span></code>

<a href="#aiperf.tests.conftest.mock_hf_tokenizer" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">

        <p>Mock Hugging Face tokenizer to avoid HTTP requests during testing.</p>
<p>This fixture patches AutoTokenizer.from_pretrained and provides a realistic
mock tokenizer that can encode, decode, and handle special tokens.</p>


<details class="usage-in-tests" open>
  <summary>Usage in tests</summary>
  <p>def test_something(mock_hf_tokenizer):
    tokenizer = Tokenizer.from_pretrained("any-model-name")
    # tokenizer is now mocked and won't make HTTP requests</p>
</details>

            <details class="quote">
              <summary>Source code in <code>aiperf/tests/conftest.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span>
<span class="normal">71</span>
<span class="normal">72</span>
<span class="normal">73</span>
<span class="normal">74</span>
<span class="normal">75</span>
<span class="normal">76</span>
<span class="normal">77</span>
<span class="normal">78</span>
<span class="normal">79</span>
<span class="normal">80</span>
<span class="normal">81</span>
<span class="normal">82</span>
<span class="normal">83</span>
<span class="normal">84</span>
<span class="normal">85</span>
<span class="normal">86</span>
<span class="normal">87</span>
<span class="normal">88</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@pytest</span><span class="o">.</span><span class="n">fixture</span>
<span class="k">def</span><span class="w"> </span><span class="nf">mock_hf_tokenizer</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="n">Generator</span><span class="p">[</span><span class="n">MagicMock</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Mock Hugging Face tokenizer to avoid HTTP requests during testing.</span>

<span class="sd">    This fixture patches AutoTokenizer.from_pretrained and provides a realistic</span>
<span class="sd">    mock tokenizer that can encode, decode, and handle special tokens.</span>

<span class="sd">    Usage in tests:</span>
<span class="sd">        def test_something(mock_hf_tokenizer):</span>
<span class="sd">            tokenizer = Tokenizer.from_pretrained(&quot;any-model-name&quot;)</span>
<span class="sd">            # tokenizer is now mocked and won&#39;t make HTTP requests</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Create a mock tokenizer with realistic behavior</span>
    <span class="n">mock_tokenizer</span> <span class="o">=</span> <span class="n">MagicMock</span><span class="p">()</span>
    <span class="n">mock_tokenizer</span><span class="o">.</span><span class="n">bos_token_id</span> <span class="o">=</span> <span class="mi">1</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">mock_call</span><span class="p">(</span><span class="n">text</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="n">base_tokens</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">10</span> <span class="o">+</span> <span class="nb">len</span><span class="p">(</span><span class="n">text</span><span class="o">.</span><span class="n">split</span><span class="p">())))</span>
        <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;input_ids&quot;</span><span class="p">:</span> <span class="n">base_tokens</span><span class="p">}</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">mock_encode</span><span class="p">(</span><span class="n">text</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">mock_call</span><span class="p">(</span><span class="n">text</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)[</span><span class="s2">&quot;input_ids&quot;</span><span class="p">]</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">mock_decode</span><span class="p">(</span><span class="n">token_ids</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="k">return</span> <span class="s2">&quot; &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="nb">str</span><span class="p">(</span><span class="n">t</span><span class="p">)</span> <span class="k">for</span> <span class="n">t</span> <span class="ow">in</span> <span class="n">token_ids</span><span class="p">])</span>

    <span class="n">mock_tokenizer</span><span class="o">.</span><span class="n">side_effect</span> <span class="o">=</span> <span class="n">mock_call</span>
    <span class="n">mock_tokenizer</span><span class="o">.</span><span class="n">encode</span> <span class="o">=</span> <span class="n">mock_encode</span>
    <span class="n">mock_tokenizer</span><span class="o">.</span><span class="n">decode</span> <span class="o">=</span> <span class="n">mock_decode</span>

    <span class="k">with</span> <span class="n">patch</span><span class="p">(</span>
        <span class="s2">&quot;aiperf.common.tokenizer.AutoTokenizer.from_pretrained&quot;</span><span class="p">,</span>
        <span class="n">return_value</span><span class="o">=</span><span class="n">mock_tokenizer</span><span class="p">,</span>
    <span class="p">):</span>
        <span class="k">yield</span> <span class="n">mock_tokenizer</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="aiperf.tests.conftest.mock_zmq_context" class="doc doc-heading">
            <code class=" language-python"><span class="n">mock_zmq_context</span><span class="p">()</span></code>

<a href="#aiperf.tests.conftest.mock_zmq_context" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">

        <p>Fixture to provide a mock ZMQ context.</p>


            <details class="quote">
              <summary>Source code in <code>aiperf/tests/conftest.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@pytest</span><span class="o">.</span><span class="n">fixture</span>
<span class="k">def</span><span class="w"> </span><span class="nf">mock_zmq_context</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="n">Generator</span><span class="p">[</span><span class="n">MagicMock</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Fixture to provide a mock ZMQ context.&quot;&quot;&quot;</span>
    <span class="n">zmq_context</span> <span class="o">=</span> <span class="n">MagicMock</span><span class="p">()</span>
    <span class="n">zmq_context</span><span class="o">.</span><span class="n">socket</span><span class="o">.</span><span class="n">return_value</span> <span class="o">=</span> <span class="n">mock_zmq_socket</span><span class="p">()</span>

    <span class="k">with</span> <span class="n">patch</span><span class="p">(</span><span class="s2">&quot;zmq.Context&quot;</span><span class="p">,</span> <span class="n">new_callable</span><span class="o">=</span><span class="n">zmq_context</span><span class="p">):</span>
        <span class="k">yield</span> <span class="n">zmq_context</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="aiperf.tests.conftest.mock_zmq_socket" class="doc doc-heading">
            <code class=" language-python"><span class="n">mock_zmq_socket</span><span class="p">()</span></code>

<a href="#aiperf.tests.conftest.mock_zmq_socket" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">

        <p>Fixture to provide a mock ZMQ socket.</p>


            <details class="quote">
              <summary>Source code in <code>aiperf/tests/conftest.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@pytest</span><span class="o">.</span><span class="n">fixture</span>
<span class="k">def</span><span class="w"> </span><span class="nf">mock_zmq_socket</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="n">Generator</span><span class="p">[</span><span class="n">MagicMock</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Fixture to provide a mock ZMQ socket.&quot;&quot;&quot;</span>
    <span class="n">zmq_socket</span> <span class="o">=</span> <span class="n">MagicMock</span><span class="p">()</span>
    <span class="k">with</span> <span class="n">patch</span><span class="p">(</span><span class="s2">&quot;zmq.Socket&quot;</span><span class="p">,</span> <span class="n">new_callable</span><span class="o">=</span><span class="n">zmq_socket</span><span class="p">):</span>
        <span class="k">yield</span> <span class="n">zmq_socket</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div><h2 id="aiperftestsdata_exporterstest_console_exporter">aiperf.tests.data_exporters.test_console_exporter<a class="headerlink" href="#aiperftestsdata_exporterstest_console_exporter" title="Permanent link">&para;</a></h2>


<div class="doc doc-object doc-module">



<a id="aiperf.tests.data_exporters.test_console_exporter"></a>
    <div class="doc doc-contents first">









  <div class="doc doc-children">











  </div>

    </div>

</div><h2 id="aiperftestsdata_exporterstest_exporter_manager">aiperf.tests.data_exporters.test_exporter_manager<a class="headerlink" href="#aiperftestsdata_exporterstest_exporter_manager" title="Permanent link">&para;</a></h2>


<div class="doc doc-object doc-module">



<a id="aiperf.tests.data_exporters.test_exporter_manager"></a>
    <div class="doc doc-contents first">









  <div class="doc doc-children">











  </div>

    </div>

</div><h2 id="aiperftestsservicestest_dataset_manager">aiperf.tests.services.test_dataset_manager<a class="headerlink" href="#aiperftestsservicestest_dataset_manager" title="Permanent link">&para;</a></h2>


<div class="doc doc-object doc-module">



<a id="aiperf.tests.services.test_dataset_manager"></a>
    <div class="doc doc-contents first">

        <p>Tests for the dataset manager service.</p>









  <div class="doc doc-children">








<div class="doc doc-object doc-class">



<h2 id="aiperf.tests.services.test_dataset_manager.DatasetManagerTestConfig" class="doc doc-heading">
            <code>DatasetManagerTestConfig</code>


<a href="#aiperf.tests.services.test_dataset_manager.DatasetManagerTestConfig" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="pydantic.BaseModel">BaseModel</span></code></p>


        <p>Configuration model for dataset manager tests.</p>







              <details class="quote">
                <summary>Source code in <code>aiperf/tests/services/test_dataset_manager.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">DatasetManagerTestConfig</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Configuration model for dataset manager tests.&quot;&quot;&quot;</span>

    <span class="c1"># TODO: Replace this with the actual configuration model once available</span>
    <span class="k">pass</span>
</code></pre></div></td></tr></table></div>
              </details>

    </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="aiperf.tests.services.test_dataset_manager.TestDatasetManager" class="doc doc-heading">
            <code>TestDatasetManager</code>


<a href="#aiperf.tests.services.test_dataset_manager.TestDatasetManager" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="BaseTestComponentService (aiperf.tests.base_test_component_service.BaseTestComponentService)" href="#aiperf.tests.base_test_component_service.BaseTestComponentService">BaseTestComponentService</a></code></p>


        <p>Tests for the dataset manager service.</p>
<p>This test class extends BaseTestComponentService to leverage common
component service tests while adding dataset manager specific tests.</p>







              <details class="quote">
                <summary>Source code in <code>aiperf/tests/services/test_dataset_manager.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@pytest</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">asyncio</span>
<span class="k">class</span><span class="w"> </span><span class="nc">TestDatasetManager</span><span class="p">(</span><span class="n">BaseTestComponentService</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Tests for the dataset manager service.</span>

<span class="sd">    This test class extends BaseTestComponentService to leverage common</span>
<span class="sd">    component service tests while adding dataset manager specific tests.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="nd">@pytest</span><span class="o">.</span><span class="n">fixture</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">service_class</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">type</span><span class="p">[</span><span class="n">BaseService</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Return the service class to be tested.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">DatasetManager</span>

    <span class="nd">@pytest</span><span class="o">.</span><span class="n">fixture</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">dataset_config</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">DatasetManagerTestConfig</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Return a test configuration for the dataset manager.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">DatasetManagerTestConfig</span><span class="p">()</span>

    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">test_dataset_manager_initialization</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">initialized_service</span><span class="p">:</span> <span class="n">DatasetManager</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Test that the dataset manager initializes with the correct service type.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">service</span> <span class="o">=</span> <span class="k">await</span> <span class="n">async_fixture</span><span class="p">(</span><span class="n">initialized_service</span><span class="p">)</span>
        <span class="k">assert</span> <span class="n">service</span><span class="o">.</span><span class="n">service_type</span> <span class="o">==</span> <span class="n">ServiceType</span><span class="o">.</span><span class="n">DATASET_MANAGER</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h3 id="aiperf.tests.services.test_dataset_manager.TestDatasetManager.dataset_config" class="doc doc-heading">
            <code class=" language-python"><span class="n">dataset_config</span><span class="p">()</span></code>

<a href="#aiperf.tests.services.test_dataset_manager.TestDatasetManager.dataset_config" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Return a test configuration for the dataset manager.</p>


            <details class="quote">
              <summary>Source code in <code>aiperf/tests/services/test_dataset_manager.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@pytest</span><span class="o">.</span><span class="n">fixture</span>
<span class="k">def</span><span class="w"> </span><span class="nf">dataset_config</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">DatasetManagerTestConfig</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Return a test configuration for the dataset manager.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">DatasetManagerTestConfig</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="aiperf.tests.services.test_dataset_manager.TestDatasetManager.service_class" class="doc doc-heading">
            <code class=" language-python"><span class="n">service_class</span><span class="p">()</span></code>

<a href="#aiperf.tests.services.test_dataset_manager.TestDatasetManager.service_class" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Return the service class to be tested.</p>


            <details class="quote">
              <summary>Source code in <code>aiperf/tests/services/test_dataset_manager.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@pytest</span><span class="o">.</span><span class="n">fixture</span>
<span class="k">def</span><span class="w"> </span><span class="nf">service_class</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">type</span><span class="p">[</span><span class="n">BaseService</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Return the service class to be tested.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">DatasetManager</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="aiperf.tests.services.test_dataset_manager.TestDatasetManager.test_dataset_manager_initialization" class="doc doc-heading">
            <code class=" language-python"><span class="n">test_dataset_manager_initialization</span><span class="p">(</span><span class="n">initialized_service</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#aiperf.tests.services.test_dataset_manager.TestDatasetManager.test_dataset_manager_initialization" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Test that the dataset manager initializes with the correct service type.</p>


            <details class="quote">
              <summary>Source code in <code>aiperf/tests/services/test_dataset_manager.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">test_dataset_manager_initialization</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span> <span class="n">initialized_service</span><span class="p">:</span> <span class="n">DatasetManager</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Test that the dataset manager initializes with the correct service type.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">service</span> <span class="o">=</span> <span class="k">await</span> <span class="n">async_fixture</span><span class="p">(</span><span class="n">initialized_service</span><span class="p">)</span>
    <span class="k">assert</span> <span class="n">service</span><span class="o">.</span><span class="n">service_type</span> <span class="o">==</span> <span class="n">ServiceType</span><span class="o">.</span><span class="n">DATASET_MANAGER</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>




  </div>

    </div>

</div><h2 id="aiperftestsservicestest_post_processor_manager">aiperf.tests.services.test_post_processor_manager<a class="headerlink" href="#aiperftestsservicestest_post_processor_manager" title="Permanent link">&para;</a></h2>


<div class="doc doc-object doc-module">



<a id="aiperf.tests.services.test_post_processor_manager"></a>
    <div class="doc doc-contents first">

        <p>Tests for the post processor manager service.</p>









  <div class="doc doc-children">








<div class="doc doc-object doc-class">



<h2 id="aiperf.tests.services.test_post_processor_manager.PostProcessorTestConfig" class="doc doc-heading">
            <code>PostProcessorTestConfig</code>


<a href="#aiperf.tests.services.test_post_processor_manager.PostProcessorTestConfig" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="pydantic.BaseModel">BaseModel</span></code></p>


        <p>Configuration model for post processor manager tests.</p>







              <details class="quote">
                <summary>Source code in <code>aiperf/tests/services/test_post_processor_manager.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">PostProcessorTestConfig</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Configuration model for post processor manager tests.&quot;&quot;&quot;</span>

    <span class="c1"># TODO: Replace this with the actual configuration model once available</span>
    <span class="k">pass</span>
</code></pre></div></td></tr></table></div>
              </details>

    </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="aiperf.tests.services.test_post_processor_manager.TestPostProcessorManager" class="doc doc-heading">
            <code>TestPostProcessorManager</code>


<a href="#aiperf.tests.services.test_post_processor_manager.TestPostProcessorManager" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="BaseTestComponentService (aiperf.tests.base_test_component_service.BaseTestComponentService)" href="#aiperf.tests.base_test_component_service.BaseTestComponentService">BaseTestComponentService</a></code></p>


        <p>Tests for the post processor manager service.</p>
<p>This test class extends BaseTestComponentService to leverage common
component service tests while adding post processor manager specific tests.</p>







              <details class="quote">
                <summary>Source code in <code>aiperf/tests/services/test_post_processor_manager.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@pytest</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">asyncio</span>
<span class="k">class</span><span class="w"> </span><span class="nc">TestPostProcessorManager</span><span class="p">(</span><span class="n">BaseTestComponentService</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Tests for the post processor manager service.</span>

<span class="sd">    This test class extends BaseTestComponentService to leverage common</span>
<span class="sd">    component service tests while adding post processor manager specific tests.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="nd">@pytest</span><span class="o">.</span><span class="n">fixture</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">service_class</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">type</span><span class="p">[</span><span class="n">BaseService</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Return the service class to be tested.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">PostProcessorManager</span>

    <span class="nd">@pytest</span><span class="o">.</span><span class="n">fixture</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">processor_config</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">PostProcessorTestConfig</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Return a test configuration for the post processor manager.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">PostProcessorTestConfig</span><span class="p">()</span>

    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">test_post_processor_manager_initialization</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">initialized_service</span><span class="p">:</span> <span class="n">PostProcessorManager</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Test that the post processor manager initializes with the correct service type.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">service</span> <span class="o">=</span> <span class="k">await</span> <span class="n">async_fixture</span><span class="p">(</span><span class="n">initialized_service</span><span class="p">)</span>
        <span class="k">assert</span> <span class="n">service</span><span class="o">.</span><span class="n">service_type</span> <span class="o">==</span> <span class="n">ServiceType</span><span class="o">.</span><span class="n">POST_PROCESSOR_MANAGER</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h3 id="aiperf.tests.services.test_post_processor_manager.TestPostProcessorManager.processor_config" class="doc doc-heading">
            <code class=" language-python"><span class="n">processor_config</span><span class="p">()</span></code>

<a href="#aiperf.tests.services.test_post_processor_manager.TestPostProcessorManager.processor_config" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Return a test configuration for the post processor manager.</p>


            <details class="quote">
              <summary>Source code in <code>aiperf/tests/services/test_post_processor_manager.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@pytest</span><span class="o">.</span><span class="n">fixture</span>
<span class="k">def</span><span class="w"> </span><span class="nf">processor_config</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">PostProcessorTestConfig</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Return a test configuration for the post processor manager.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">PostProcessorTestConfig</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="aiperf.tests.services.test_post_processor_manager.TestPostProcessorManager.service_class" class="doc doc-heading">
            <code class=" language-python"><span class="n">service_class</span><span class="p">()</span></code>

<a href="#aiperf.tests.services.test_post_processor_manager.TestPostProcessorManager.service_class" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Return the service class to be tested.</p>


            <details class="quote">
              <summary>Source code in <code>aiperf/tests/services/test_post_processor_manager.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@pytest</span><span class="o">.</span><span class="n">fixture</span>
<span class="k">def</span><span class="w"> </span><span class="nf">service_class</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">type</span><span class="p">[</span><span class="n">BaseService</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Return the service class to be tested.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">PostProcessorManager</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="aiperf.tests.services.test_post_processor_manager.TestPostProcessorManager.test_post_processor_manager_initialization" class="doc doc-heading">
            <code class=" language-python"><span class="n">test_post_processor_manager_initialization</span><span class="p">(</span><span class="n">initialized_service</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#aiperf.tests.services.test_post_processor_manager.TestPostProcessorManager.test_post_processor_manager_initialization" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Test that the post processor manager initializes with the correct service type.</p>


            <details class="quote">
              <summary>Source code in <code>aiperf/tests/services/test_post_processor_manager.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">test_post_processor_manager_initialization</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span> <span class="n">initialized_service</span><span class="p">:</span> <span class="n">PostProcessorManager</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Test that the post processor manager initializes with the correct service type.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">service</span> <span class="o">=</span> <span class="k">await</span> <span class="n">async_fixture</span><span class="p">(</span><span class="n">initialized_service</span><span class="p">)</span>
    <span class="k">assert</span> <span class="n">service</span><span class="o">.</span><span class="n">service_type</span> <span class="o">==</span> <span class="n">ServiceType</span><span class="o">.</span><span class="n">POST_PROCESSOR_MANAGER</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>




  </div>

    </div>

</div><h2 id="aiperftestsservicestest_records_manager">aiperf.tests.services.test_records_manager<a class="headerlink" href="#aiperftestsservicestest_records_manager" title="Permanent link">&para;</a></h2>


<div class="doc doc-object doc-module">



<a id="aiperf.tests.services.test_records_manager"></a>
    <div class="doc doc-contents first">

        <p>Tests for the records manager service.</p>









  <div class="doc doc-children">








<div class="doc doc-object doc-class">



<h2 id="aiperf.tests.services.test_records_manager.RecordsManagerTestConfig" class="doc doc-heading">
            <code>RecordsManagerTestConfig</code>


<a href="#aiperf.tests.services.test_records_manager.RecordsManagerTestConfig" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="pydantic.BaseModel">BaseModel</span></code></p>


        <p>Configuration model for records manager tests.</p>







              <details class="quote">
                <summary>Source code in <code>aiperf/tests/services/test_records_manager.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">RecordsManagerTestConfig</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Configuration model for records manager tests.&quot;&quot;&quot;</span>

    <span class="c1"># TODO: Replace this with the actual configuration model once available</span>
    <span class="k">pass</span>
</code></pre></div></td></tr></table></div>
              </details>

    </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="aiperf.tests.services.test_records_manager.TestRecordsManager" class="doc doc-heading">
            <code>TestRecordsManager</code>


<a href="#aiperf.tests.services.test_records_manager.TestRecordsManager" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="BaseTestComponentService (aiperf.tests.base_test_component_service.BaseTestComponentService)" href="#aiperf.tests.base_test_component_service.BaseTestComponentService">BaseTestComponentService</a></code></p>


        <p>Tests for the records manager service.</p>
<p>This test class extends BaseTestComponentService to leverage common
component service tests while adding records manager specific tests.</p>







              <details class="quote">
                <summary>Source code in <code>aiperf/tests/services/test_records_manager.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@pytest</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">asyncio</span>
<span class="k">class</span><span class="w"> </span><span class="nc">TestRecordsManager</span><span class="p">(</span><span class="n">BaseTestComponentService</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Tests for the records manager service.</span>

<span class="sd">    This test class extends BaseTestComponentService to leverage common</span>
<span class="sd">    component service tests while adding records manager specific tests.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="nd">@pytest</span><span class="o">.</span><span class="n">fixture</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">service_class</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">type</span><span class="p">[</span><span class="n">BaseService</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Return the service class to be tested.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">RecordsManager</span>

    <span class="nd">@pytest</span><span class="o">.</span><span class="n">fixture</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">records_config</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">RecordsManagerTestConfig</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Return a test configuration for the records manager.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">RecordsManagerTestConfig</span><span class="p">()</span>

    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">test_records_manager_initialization</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">initialized_service</span><span class="p">:</span> <span class="n">RecordsManager</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Test that the records manager initializes with the correct service type.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">service</span> <span class="o">=</span> <span class="k">await</span> <span class="n">async_fixture</span><span class="p">(</span><span class="n">initialized_service</span><span class="p">)</span>
        <span class="k">assert</span> <span class="n">service</span><span class="o">.</span><span class="n">service_type</span> <span class="o">==</span> <span class="n">ServiceType</span><span class="o">.</span><span class="n">RECORDS_MANAGER</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h3 id="aiperf.tests.services.test_records_manager.TestRecordsManager.records_config" class="doc doc-heading">
            <code class=" language-python"><span class="n">records_config</span><span class="p">()</span></code>

<a href="#aiperf.tests.services.test_records_manager.TestRecordsManager.records_config" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Return a test configuration for the records manager.</p>


            <details class="quote">
              <summary>Source code in <code>aiperf/tests/services/test_records_manager.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@pytest</span><span class="o">.</span><span class="n">fixture</span>
<span class="k">def</span><span class="w"> </span><span class="nf">records_config</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">RecordsManagerTestConfig</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Return a test configuration for the records manager.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">RecordsManagerTestConfig</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="aiperf.tests.services.test_records_manager.TestRecordsManager.service_class" class="doc doc-heading">
            <code class=" language-python"><span class="n">service_class</span><span class="p">()</span></code>

<a href="#aiperf.tests.services.test_records_manager.TestRecordsManager.service_class" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Return the service class to be tested.</p>


            <details class="quote">
              <summary>Source code in <code>aiperf/tests/services/test_records_manager.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@pytest</span><span class="o">.</span><span class="n">fixture</span>
<span class="k">def</span><span class="w"> </span><span class="nf">service_class</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">type</span><span class="p">[</span><span class="n">BaseService</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Return the service class to be tested.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">RecordsManager</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="aiperf.tests.services.test_records_manager.TestRecordsManager.test_records_manager_initialization" class="doc doc-heading">
            <code class=" language-python"><span class="n">test_records_manager_initialization</span><span class="p">(</span><span class="n">initialized_service</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#aiperf.tests.services.test_records_manager.TestRecordsManager.test_records_manager_initialization" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Test that the records manager initializes with the correct service type.</p>


            <details class="quote">
              <summary>Source code in <code>aiperf/tests/services/test_records_manager.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">test_records_manager_initialization</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span> <span class="n">initialized_service</span><span class="p">:</span> <span class="n">RecordsManager</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Test that the records manager initializes with the correct service type.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">service</span> <span class="o">=</span> <span class="k">await</span> <span class="n">async_fixture</span><span class="p">(</span><span class="n">initialized_service</span><span class="p">)</span>
    <span class="k">assert</span> <span class="n">service</span><span class="o">.</span><span class="n">service_type</span> <span class="o">==</span> <span class="n">ServiceType</span><span class="o">.</span><span class="n">RECORDS_MANAGER</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>




  </div>

    </div>

</div><h2 id="aiperftestsservicestest_system_controller">aiperf.tests.services.test_system_controller<a class="headerlink" href="#aiperftestsservicestest_system_controller" title="Permanent link">&para;</a></h2>


<div class="doc doc-object doc-module">



<a id="aiperf.tests.services.test_system_controller"></a>
    <div class="doc doc-contents first">

        <p>Tests for the system controller service.</p>









  <div class="doc doc-children">








<div class="doc doc-object doc-class">



<h2 id="aiperf.tests.services.test_system_controller.SystemControllerTestConfig" class="doc doc-heading">
            <code>SystemControllerTestConfig</code>


<a href="#aiperf.tests.services.test_system_controller.SystemControllerTestConfig" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="pydantic.BaseModel">BaseModel</span></code></p>


        <p>Configuration model for system controller tests.</p>







              <details class="quote">
                <summary>Source code in <code>aiperf/tests/services/test_system_controller.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">SystemControllerTestConfig</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Configuration model for system controller tests.&quot;&quot;&quot;</span>

    <span class="c1"># TODO: Replace this with the actual configuration model once available</span>
    <span class="k">pass</span>
</code></pre></div></td></tr></table></div>
              </details>

    </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="aiperf.tests.services.test_system_controller.TestSystemController" class="doc doc-heading">
            <code>TestSystemController</code>


<a href="#aiperf.tests.services.test_system_controller.TestSystemController" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="BaseTestControllerService (aiperf.tests.base_test_controller_service.BaseTestControllerService)" href="#aiperf.tests.base_test_controller_service.BaseTestControllerService">BaseTestControllerService</a></code></p>


        <p>Tests for the system controller service.</p>
<p>This test class extends BaseTestControllerService to leverage common
controller service tests while adding system controller specific tests.
Tests include service lifecycle management, message handling, and coordination.</p>







              <details class="quote">
                <summary>Source code in <code>aiperf/tests/services/test_system_controller.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 27</span>
<span class="normal"> 28</span>
<span class="normal"> 29</span>
<span class="normal"> 30</span>
<span class="normal"> 31</span>
<span class="normal"> 32</span>
<span class="normal"> 33</span>
<span class="normal"> 34</span>
<span class="normal"> 35</span>
<span class="normal"> 36</span>
<span class="normal"> 37</span>
<span class="normal"> 38</span>
<span class="normal"> 39</span>
<span class="normal"> 40</span>
<span class="normal"> 41</span>
<span class="normal"> 42</span>
<span class="normal"> 43</span>
<span class="normal"> 44</span>
<span class="normal"> 45</span>
<span class="normal"> 46</span>
<span class="normal"> 47</span>
<span class="normal"> 48</span>
<span class="normal"> 49</span>
<span class="normal"> 50</span>
<span class="normal"> 51</span>
<span class="normal"> 52</span>
<span class="normal"> 53</span>
<span class="normal"> 54</span>
<span class="normal"> 55</span>
<span class="normal"> 56</span>
<span class="normal"> 57</span>
<span class="normal"> 58</span>
<span class="normal"> 59</span>
<span class="normal"> 60</span>
<span class="normal"> 61</span>
<span class="normal"> 62</span>
<span class="normal"> 63</span>
<span class="normal"> 64</span>
<span class="normal"> 65</span>
<span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@pytest</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">asyncio</span>
<span class="k">class</span><span class="w"> </span><span class="nc">TestSystemController</span><span class="p">(</span><span class="n">BaseTestControllerService</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Tests for the system controller service.</span>

<span class="sd">    This test class extends BaseTestControllerService to leverage common</span>
<span class="sd">    controller service tests while adding system controller specific tests.</span>
<span class="sd">    Tests include service lifecycle management, message handling, and coordination.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="nd">@pytest</span><span class="o">.</span><span class="n">fixture</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">service_class</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">type</span><span class="p">[</span><span class="n">BaseService</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Return the class to test.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">SystemController</span>

    <span class="nd">@pytest</span><span class="o">.</span><span class="n">fixture</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">controller_config</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">SystemControllerTestConfig</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Return a test configuration for the system controller.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">SystemControllerTestConfig</span><span class="p">()</span>

    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">test_controller_subscriptions</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">initialized_service</span><span class="p">:</span> <span class="n">SystemController</span><span class="p">,</span> <span class="n">mock_communication</span><span class="p">:</span> <span class="n">MagicMock</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Verifies the controller sets up subscriptions to receive messages from components.&quot;&quot;&quot;</span>

        <span class="k">await</span> <span class="n">async_fixture</span><span class="p">(</span><span class="n">initialized_service</span><span class="p">)</span>

        <span class="c1"># A SystemController should subscribe to registration, status, and heartbeat topics</span>
        <span class="n">expected_topics</span> <span class="o">=</span> <span class="p">[</span><span class="n">Topic</span><span class="o">.</span><span class="n">REGISTRATION</span><span class="p">,</span> <span class="n">Topic</span><span class="o">.</span><span class="n">STATUS</span><span class="p">,</span> <span class="n">Topic</span><span class="o">.</span><span class="n">HEARTBEAT</span><span class="p">]</span>

        <span class="k">for</span> <span class="n">topic</span> <span class="ow">in</span> <span class="n">expected_topics</span><span class="p">:</span>
            <span class="k">assert</span> <span class="n">topic</span> <span class="ow">in</span> <span class="n">mock_communication</span><span class="o">.</span><span class="n">mock_data</span><span class="o">.</span><span class="n">subscriptions</span>
            <span class="k">assert</span> <span class="nb">callable</span><span class="p">(</span><span class="n">mock_communication</span><span class="o">.</span><span class="n">mock_data</span><span class="o">.</span><span class="n">subscriptions</span><span class="p">[</span><span class="n">topic</span><span class="p">])</span>

    <span class="nd">@pytest</span><span class="o">.</span><span class="n">fixture</span><span class="p">(</span><span class="n">autouse</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">service_manager_with_multiprocess</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">monkeypatch</span><span class="p">,</span> <span class="n">service_config</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">MultiProcessServiceManager</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Return a test service manager with multiprocess support.</span>

<span class="sd">        This fixture mocks the initialization methods to avoid actual process creation.</span>

<span class="sd">        Args:</span>
<span class="sd">            monkeypatch: Pytest monkeypatch fixture for patching functions</span>

<span class="sd">        Returns:</span>
<span class="sd">            A MultiProcessServiceManager instance configured for testing</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Create a proper async mock for the service methods</span>
        <span class="n">async_mock</span> <span class="o">=</span> <span class="n">AsyncMock</span><span class="p">(</span><span class="n">return_value</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>

        <span class="n">monkeypatch</span><span class="o">.</span><span class="n">setattr</span><span class="p">(</span>
            <span class="n">MultiProcessServiceManager</span><span class="p">,</span> <span class="s2">&quot;wait_for_all_services_registration&quot;</span><span class="p">,</span> <span class="n">async_mock</span>
        <span class="p">)</span>
        <span class="n">monkeypatch</span><span class="o">.</span><span class="n">setattr</span><span class="p">(</span>
            <span class="n">MultiProcessServiceManager</span><span class="p">,</span> <span class="s2">&quot;initialize_all_services&quot;</span><span class="p">,</span> <span class="n">async_mock</span>
        <span class="p">)</span>
        <span class="n">monkeypatch</span><span class="o">.</span><span class="n">setattr</span><span class="p">(</span><span class="n">MultiProcessServiceManager</span><span class="p">,</span> <span class="s2">&quot;stop_all_services&quot;</span><span class="p">,</span> <span class="n">async_mock</span><span class="p">)</span>
        <span class="n">monkeypatch</span><span class="o">.</span><span class="n">setattr</span><span class="p">(</span>
            <span class="n">MultiProcessServiceManager</span><span class="p">,</span> <span class="s2">&quot;wait_for_all_services_start&quot;</span><span class="p">,</span> <span class="n">async_mock</span>
        <span class="p">)</span>

        <span class="n">multiprocess_manager</span> <span class="o">=</span> <span class="n">MultiProcessServiceManager</span><span class="p">(</span>
            <span class="n">required_service_types</span><span class="o">=</span><span class="p">[</span><span class="n">ServiceType</span><span class="o">.</span><span class="n">TEST</span><span class="p">],</span>
            <span class="n">config</span><span class="o">=</span><span class="n">service_config</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="k">return</span> <span class="n">multiprocess_manager</span>

    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">test_service_run_does_start</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">initialized_service</span><span class="p">:</span> <span class="n">SystemController</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Test that the service run method starts the service (added by BaseControllerService using @on_run).</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">service</span> <span class="o">=</span> <span class="k">await</span> <span class="n">async_fixture</span><span class="p">(</span><span class="n">initialized_service</span><span class="p">)</span>

        <span class="k">with</span> <span class="p">(</span>
            <span class="n">patch</span><span class="p">(</span>
                <span class="s2">&quot;aiperf.services.system_controller.system_controller.SystemController._forever_loop&quot;</span><span class="p">,</span>
                <span class="n">return_value</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
            <span class="p">)</span> <span class="k">as</span> <span class="n">mock_forever_loop</span><span class="p">,</span>
            <span class="n">patch</span><span class="p">(</span>
                <span class="s2">&quot;aiperf.services.system_controller.system_controller.SystemController.start&quot;</span><span class="p">,</span>
                <span class="n">return_value</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
            <span class="p">)</span> <span class="k">as</span> <span class="n">mock_start</span><span class="p">,</span>
        <span class="p">):</span>
            <span class="k">await</span> <span class="n">service</span><span class="o">.</span><span class="n">run_forever</span><span class="p">()</span>
            <span class="n">mock_forever_loop</span><span class="o">.</span><span class="n">assert_called_once</span><span class="p">()</span>
            <span class="n">mock_start</span><span class="o">.</span><span class="n">assert_called_once</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h3 id="aiperf.tests.services.test_system_controller.TestSystemController.controller_config" class="doc doc-heading">
            <code class=" language-python"><span class="n">controller_config</span><span class="p">()</span></code>

<a href="#aiperf.tests.services.test_system_controller.TestSystemController.controller_config" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Return a test configuration for the system controller.</p>


            <details class="quote">
              <summary>Source code in <code>aiperf/tests/services/test_system_controller.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@pytest</span><span class="o">.</span><span class="n">fixture</span>
<span class="k">def</span><span class="w"> </span><span class="nf">controller_config</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">SystemControllerTestConfig</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Return a test configuration for the system controller.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">SystemControllerTestConfig</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="aiperf.tests.services.test_system_controller.TestSystemController.service_class" class="doc doc-heading">
            <code class=" language-python"><span class="n">service_class</span><span class="p">()</span></code>

<a href="#aiperf.tests.services.test_system_controller.TestSystemController.service_class" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Return the class to test.</p>


            <details class="quote">
              <summary>Source code in <code>aiperf/tests/services/test_system_controller.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@pytest</span><span class="o">.</span><span class="n">fixture</span>
<span class="k">def</span><span class="w"> </span><span class="nf">service_class</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">type</span><span class="p">[</span><span class="n">BaseService</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Return the class to test.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">SystemController</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="aiperf.tests.services.test_system_controller.TestSystemController.service_manager_with_multiprocess" class="doc doc-heading">
            <code class=" language-python"><span class="n">service_manager_with_multiprocess</span><span class="p">(</span><span class="n">monkeypatch</span><span class="p">,</span> <span class="n">service_config</span><span class="p">)</span></code>

<a href="#aiperf.tests.services.test_system_controller.TestSystemController.service_manager_with_multiprocess" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Return a test service manager with multiprocess support.</p>
<p>This fixture mocks the initialization methods to avoid actual process creation.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>monkeypatch</code>
            </td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Pytest monkeypatch fixture for patching functions</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="MultiProcessServiceManager (aiperf.services.service_manager.multiprocess.MultiProcessServiceManager)" href="#aiperf.services.service_manager.multiprocess.MultiProcessServiceManager">MultiProcessServiceManager</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A MultiProcessServiceManager instance configured for testing</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>aiperf/tests/services/test_system_controller.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span>
<span class="normal">71</span>
<span class="normal">72</span>
<span class="normal">73</span>
<span class="normal">74</span>
<span class="normal">75</span>
<span class="normal">76</span>
<span class="normal">77</span>
<span class="normal">78</span>
<span class="normal">79</span>
<span class="normal">80</span>
<span class="normal">81</span>
<span class="normal">82</span>
<span class="normal">83</span>
<span class="normal">84</span>
<span class="normal">85</span>
<span class="normal">86</span>
<span class="normal">87</span>
<span class="normal">88</span>
<span class="normal">89</span>
<span class="normal">90</span>
<span class="normal">91</span>
<span class="normal">92</span>
<span class="normal">93</span>
<span class="normal">94</span>
<span class="normal">95</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@pytest</span><span class="o">.</span><span class="n">fixture</span><span class="p">(</span><span class="n">autouse</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="k">def</span><span class="w"> </span><span class="nf">service_manager_with_multiprocess</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span> <span class="n">monkeypatch</span><span class="p">,</span> <span class="n">service_config</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">MultiProcessServiceManager</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Return a test service manager with multiprocess support.</span>

<span class="sd">    This fixture mocks the initialization methods to avoid actual process creation.</span>

<span class="sd">    Args:</span>
<span class="sd">        monkeypatch: Pytest monkeypatch fixture for patching functions</span>

<span class="sd">    Returns:</span>
<span class="sd">        A MultiProcessServiceManager instance configured for testing</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Create a proper async mock for the service methods</span>
    <span class="n">async_mock</span> <span class="o">=</span> <span class="n">AsyncMock</span><span class="p">(</span><span class="n">return_value</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>

    <span class="n">monkeypatch</span><span class="o">.</span><span class="n">setattr</span><span class="p">(</span>
        <span class="n">MultiProcessServiceManager</span><span class="p">,</span> <span class="s2">&quot;wait_for_all_services_registration&quot;</span><span class="p">,</span> <span class="n">async_mock</span>
    <span class="p">)</span>
    <span class="n">monkeypatch</span><span class="o">.</span><span class="n">setattr</span><span class="p">(</span>
        <span class="n">MultiProcessServiceManager</span><span class="p">,</span> <span class="s2">&quot;initialize_all_services&quot;</span><span class="p">,</span> <span class="n">async_mock</span>
    <span class="p">)</span>
    <span class="n">monkeypatch</span><span class="o">.</span><span class="n">setattr</span><span class="p">(</span><span class="n">MultiProcessServiceManager</span><span class="p">,</span> <span class="s2">&quot;stop_all_services&quot;</span><span class="p">,</span> <span class="n">async_mock</span><span class="p">)</span>
    <span class="n">monkeypatch</span><span class="o">.</span><span class="n">setattr</span><span class="p">(</span>
        <span class="n">MultiProcessServiceManager</span><span class="p">,</span> <span class="s2">&quot;wait_for_all_services_start&quot;</span><span class="p">,</span> <span class="n">async_mock</span>
    <span class="p">)</span>

    <span class="n">multiprocess_manager</span> <span class="o">=</span> <span class="n">MultiProcessServiceManager</span><span class="p">(</span>
        <span class="n">required_service_types</span><span class="o">=</span><span class="p">[</span><span class="n">ServiceType</span><span class="o">.</span><span class="n">TEST</span><span class="p">],</span>
        <span class="n">config</span><span class="o">=</span><span class="n">service_config</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="k">return</span> <span class="n">multiprocess_manager</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="aiperf.tests.services.test_system_controller.TestSystemController.test_controller_subscriptions" class="doc doc-heading">
            <code class=" language-python"><span class="n">test_controller_subscriptions</span><span class="p">(</span><span class="n">initialized_service</span><span class="p">,</span> <span class="n">mock_communication</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#aiperf.tests.services.test_system_controller.TestSystemController.test_controller_subscriptions" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Verifies the controller sets up subscriptions to receive messages from components.</p>


            <details class="quote">
              <summary>Source code in <code>aiperf/tests/services/test_system_controller.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">test_controller_subscriptions</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span> <span class="n">initialized_service</span><span class="p">:</span> <span class="n">SystemController</span><span class="p">,</span> <span class="n">mock_communication</span><span class="p">:</span> <span class="n">MagicMock</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Verifies the controller sets up subscriptions to receive messages from components.&quot;&quot;&quot;</span>

    <span class="k">await</span> <span class="n">async_fixture</span><span class="p">(</span><span class="n">initialized_service</span><span class="p">)</span>

    <span class="c1"># A SystemController should subscribe to registration, status, and heartbeat topics</span>
    <span class="n">expected_topics</span> <span class="o">=</span> <span class="p">[</span><span class="n">Topic</span><span class="o">.</span><span class="n">REGISTRATION</span><span class="p">,</span> <span class="n">Topic</span><span class="o">.</span><span class="n">STATUS</span><span class="p">,</span> <span class="n">Topic</span><span class="o">.</span><span class="n">HEARTBEAT</span><span class="p">]</span>

    <span class="k">for</span> <span class="n">topic</span> <span class="ow">in</span> <span class="n">expected_topics</span><span class="p">:</span>
        <span class="k">assert</span> <span class="n">topic</span> <span class="ow">in</span> <span class="n">mock_communication</span><span class="o">.</span><span class="n">mock_data</span><span class="o">.</span><span class="n">subscriptions</span>
        <span class="k">assert</span> <span class="nb">callable</span><span class="p">(</span><span class="n">mock_communication</span><span class="o">.</span><span class="n">mock_data</span><span class="o">.</span><span class="n">subscriptions</span><span class="p">[</span><span class="n">topic</span><span class="p">])</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="aiperf.tests.services.test_system_controller.TestSystemController.test_service_run_does_start" class="doc doc-heading">
            <code class=" language-python"><span class="n">test_service_run_does_start</span><span class="p">(</span><span class="n">initialized_service</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#aiperf.tests.services.test_system_controller.TestSystemController.test_service_run_does_start" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Test that the service run method starts the service (added by BaseControllerService using @on_run).</p>


            <details class="quote">
              <summary>Source code in <code>aiperf/tests/services/test_system_controller.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">test_service_run_does_start</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span> <span class="n">initialized_service</span><span class="p">:</span> <span class="n">SystemController</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Test that the service run method starts the service (added by BaseControllerService using @on_run).</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">service</span> <span class="o">=</span> <span class="k">await</span> <span class="n">async_fixture</span><span class="p">(</span><span class="n">initialized_service</span><span class="p">)</span>

    <span class="k">with</span> <span class="p">(</span>
        <span class="n">patch</span><span class="p">(</span>
            <span class="s2">&quot;aiperf.services.system_controller.system_controller.SystemController._forever_loop&quot;</span><span class="p">,</span>
            <span class="n">return_value</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="p">)</span> <span class="k">as</span> <span class="n">mock_forever_loop</span><span class="p">,</span>
        <span class="n">patch</span><span class="p">(</span>
            <span class="s2">&quot;aiperf.services.system_controller.system_controller.SystemController.start&quot;</span><span class="p">,</span>
            <span class="n">return_value</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="p">)</span> <span class="k">as</span> <span class="n">mock_start</span><span class="p">,</span>
    <span class="p">):</span>
        <span class="k">await</span> <span class="n">service</span><span class="o">.</span><span class="n">run_forever</span><span class="p">()</span>
        <span class="n">mock_forever_loop</span><span class="o">.</span><span class="n">assert_called_once</span><span class="p">()</span>
        <span class="n">mock_start</span><span class="o">.</span><span class="n">assert_called_once</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>




  </div>

    </div>

</div><h2 id="aiperftestsservicestest_timing_manager">aiperf.tests.services.test_timing_manager<a class="headerlink" href="#aiperftestsservicestest_timing_manager" title="Permanent link">&para;</a></h2>


<div class="doc doc-object doc-module">



<a id="aiperf.tests.services.test_timing_manager"></a>
    <div class="doc doc-contents first">

        <p>Tests for the timing manager service.</p>









  <div class="doc doc-children">








<div class="doc doc-object doc-class">



<h2 id="aiperf.tests.services.test_timing_manager.TestTimingManager" class="doc doc-heading">
            <code>TestTimingManager</code>


<a href="#aiperf.tests.services.test_timing_manager.TestTimingManager" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="BaseTestComponentService (aiperf.tests.base_test_component_service.BaseTestComponentService)" href="#aiperf.tests.base_test_component_service.BaseTestComponentService">BaseTestComponentService</a></code></p>


        <p>Tests for the timing manager service.</p>
<p>This test class extends BaseTestComponentService to leverage common
component service tests while adding timing manager specific tests.</p>







              <details class="quote">
                <summary>Source code in <code>aiperf/tests/services/test_timing_manager.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@pytest</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">asyncio</span>
<span class="k">class</span><span class="w"> </span><span class="nc">TestTimingManager</span><span class="p">(</span><span class="n">BaseTestComponentService</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Tests for the timing manager service.</span>

<span class="sd">    This test class extends BaseTestComponentService to leverage common</span>
<span class="sd">    component service tests while adding timing manager specific tests.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="nd">@pytest</span><span class="o">.</span><span class="n">fixture</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">service_class</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">type</span><span class="p">[</span><span class="n">BaseService</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Return the service class to be tested.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">TimingManager</span>

    <span class="nd">@pytest</span><span class="o">.</span><span class="n">fixture</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">timing_config</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">TimingManagerTestConfig</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Return a test configuration for the timing manager.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">TimingManagerTestConfig</span><span class="p">()</span>

    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">test_timing_manager_initialization</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">initialized_service</span><span class="p">:</span> <span class="n">TimingManager</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Test that the timing manager initializes with the correct service type.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">service</span> <span class="o">=</span> <span class="k">await</span> <span class="n">async_fixture</span><span class="p">(</span><span class="n">initialized_service</span><span class="p">)</span>
        <span class="k">assert</span> <span class="n">service</span><span class="o">.</span><span class="n">service_type</span> <span class="o">==</span> <span class="n">ServiceType</span><span class="o">.</span><span class="n">TIMING_MANAGER</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h3 id="aiperf.tests.services.test_timing_manager.TestTimingManager.service_class" class="doc doc-heading">
            <code class=" language-python"><span class="n">service_class</span><span class="p">()</span></code>

<a href="#aiperf.tests.services.test_timing_manager.TestTimingManager.service_class" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Return the service class to be tested.</p>


            <details class="quote">
              <summary>Source code in <code>aiperf/tests/services/test_timing_manager.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@pytest</span><span class="o">.</span><span class="n">fixture</span>
<span class="k">def</span><span class="w"> </span><span class="nf">service_class</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">type</span><span class="p">[</span><span class="n">BaseService</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Return the service class to be tested.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">TimingManager</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="aiperf.tests.services.test_timing_manager.TestTimingManager.test_timing_manager_initialization" class="doc doc-heading">
            <code class=" language-python"><span class="n">test_timing_manager_initialization</span><span class="p">(</span><span class="n">initialized_service</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#aiperf.tests.services.test_timing_manager.TestTimingManager.test_timing_manager_initialization" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Test that the timing manager initializes with the correct service type.</p>


            <details class="quote">
              <summary>Source code in <code>aiperf/tests/services/test_timing_manager.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">test_timing_manager_initialization</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span> <span class="n">initialized_service</span><span class="p">:</span> <span class="n">TimingManager</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Test that the timing manager initializes with the correct service type.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">service</span> <span class="o">=</span> <span class="k">await</span> <span class="n">async_fixture</span><span class="p">(</span><span class="n">initialized_service</span><span class="p">)</span>
    <span class="k">assert</span> <span class="n">service</span><span class="o">.</span><span class="n">service_type</span> <span class="o">==</span> <span class="n">ServiceType</span><span class="o">.</span><span class="n">TIMING_MANAGER</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="aiperf.tests.services.test_timing_manager.TestTimingManager.timing_config" class="doc doc-heading">
            <code class=" language-python"><span class="n">timing_config</span><span class="p">()</span></code>

<a href="#aiperf.tests.services.test_timing_manager.TestTimingManager.timing_config" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Return a test configuration for the timing manager.</p>


            <details class="quote">
              <summary>Source code in <code>aiperf/tests/services/test_timing_manager.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@pytest</span><span class="o">.</span><span class="n">fixture</span>
<span class="k">def</span><span class="w"> </span><span class="nf">timing_config</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">TimingManagerTestConfig</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Return a test configuration for the timing manager.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">TimingManagerTestConfig</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="aiperf.tests.services.test_timing_manager.TimingManagerTestConfig" class="doc doc-heading">
            <code>TimingManagerTestConfig</code>


<a href="#aiperf.tests.services.test_timing_manager.TimingManagerTestConfig" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="pydantic.BaseModel">BaseModel</span></code></p>


        <p>Configuration model for timing manager tests.</p>







              <details class="quote">
                <summary>Source code in <code>aiperf/tests/services/test_timing_manager.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">TimingManagerTestConfig</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Configuration model for timing manager tests.&quot;&quot;&quot;</span>

    <span class="c1"># TODO: Replace this with the actual configuration model once available</span>
    <span class="k">pass</span>
</code></pre></div></td></tr></table></div>
              </details>

    </div>

</div>




  </div>

    </div>

</div><h2 id="aiperftestsservicestest_worker">aiperf.tests.services.test_worker<a class="headerlink" href="#aiperftestsservicestest_worker" title="Permanent link">&para;</a></h2>


<div class="doc doc-object doc-module">



<a id="aiperf.tests.services.test_worker"></a>
    <div class="doc doc-contents first">

        <p>Tests for the worker service.</p>









  <div class="doc doc-children">








<div class="doc doc-object doc-class">



<h2 id="aiperf.tests.services.test_worker.TestWorker" class="doc doc-heading">
            <code>TestWorker</code>


<a href="#aiperf.tests.services.test_worker.TestWorker" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="BaseTestService (aiperf.tests.base_test_service.BaseTestService)" href="#aiperf.tests.base_test_service.BaseTestService">BaseTestService</a></code></p>


        <p>Tests for the worker service.</p>
<p>This test class extends BaseTestService since Worker is a direct subclass
of BaseService, not a BaseComponentService.</p>







              <details class="quote">
                <summary>Source code in <code>aiperf/tests/services/test_worker.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@pytest</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">asyncio</span>
<span class="k">class</span><span class="w"> </span><span class="nc">TestWorker</span><span class="p">(</span><span class="n">BaseTestService</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Tests for the worker service.</span>

<span class="sd">    This test class extends BaseTestService since Worker is a direct subclass</span>
<span class="sd">    of BaseService, not a BaseComponentService.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="nd">@pytest</span><span class="o">.</span><span class="n">fixture</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">service_class</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">type</span><span class="p">[</span><span class="n">BaseService</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Return the service class to be tested.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Worker</span>

    <span class="nd">@pytest</span><span class="o">.</span><span class="n">fixture</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">worker_config</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">WorkerTestConfig</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Return a test configuration for the worker.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">WorkerTestConfig</span><span class="p">()</span>

    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">test_worker_initialization</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">initialized_service</span><span class="p">:</span> <span class="n">Worker</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Test that the worker initializes with the correct configuration.</span>

<span class="sd">        Verifies the worker service is properly instantiated with its configuration.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Basic existence checks</span>
        <span class="n">service</span> <span class="o">=</span> <span class="k">await</span> <span class="n">async_fixture</span><span class="p">(</span><span class="n">initialized_service</span><span class="p">)</span>
        <span class="k">assert</span> <span class="n">service</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
        <span class="k">assert</span> <span class="n">service</span><span class="o">.</span><span class="n">service_config</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
        <span class="k">assert</span> <span class="n">service</span><span class="o">.</span><span class="n">service_type</span> <span class="o">==</span> <span class="n">ServiceType</span><span class="o">.</span><span class="n">WORKER</span>

        <span class="c1"># Initialize the worker</span>
        <span class="k">await</span> <span class="n">service</span><span class="o">.</span><span class="n">initialize</span><span class="p">()</span>

        <span class="c1"># Check the worker is properly initialized</span>
        <span class="k">assert</span> <span class="n">service</span><span class="o">.</span><span class="n">is_initialized</span>
        <span class="k">assert</span> <span class="n">service</span><span class="o">.</span><span class="n">state</span> <span class="o">==</span> <span class="n">ServiceState</span><span class="o">.</span><span class="n">READY</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h3 id="aiperf.tests.services.test_worker.TestWorker.service_class" class="doc doc-heading">
            <code class=" language-python"><span class="n">service_class</span><span class="p">()</span></code>

<a href="#aiperf.tests.services.test_worker.TestWorker.service_class" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Return the service class to be tested.</p>


            <details class="quote">
              <summary>Source code in <code>aiperf/tests/services/test_worker.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@pytest</span><span class="o">.</span><span class="n">fixture</span>
<span class="k">def</span><span class="w"> </span><span class="nf">service_class</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">type</span><span class="p">[</span><span class="n">BaseService</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Return the service class to be tested.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">Worker</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="aiperf.tests.services.test_worker.TestWorker.test_worker_initialization" class="doc doc-heading">
            <code class=" language-python"><span class="n">test_worker_initialization</span><span class="p">(</span><span class="n">initialized_service</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#aiperf.tests.services.test_worker.TestWorker.test_worker_initialization" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Test that the worker initializes with the correct configuration.</p>
<p>Verifies the worker service is properly instantiated with its configuration.</p>


            <details class="quote">
              <summary>Source code in <code>aiperf/tests/services/test_worker.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">test_worker_initialization</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">initialized_service</span><span class="p">:</span> <span class="n">Worker</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Test that the worker initializes with the correct configuration.</span>

<span class="sd">    Verifies the worker service is properly instantiated with its configuration.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Basic existence checks</span>
    <span class="n">service</span> <span class="o">=</span> <span class="k">await</span> <span class="n">async_fixture</span><span class="p">(</span><span class="n">initialized_service</span><span class="p">)</span>
    <span class="k">assert</span> <span class="n">service</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
    <span class="k">assert</span> <span class="n">service</span><span class="o">.</span><span class="n">service_config</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
    <span class="k">assert</span> <span class="n">service</span><span class="o">.</span><span class="n">service_type</span> <span class="o">==</span> <span class="n">ServiceType</span><span class="o">.</span><span class="n">WORKER</span>

    <span class="c1"># Initialize the worker</span>
    <span class="k">await</span> <span class="n">service</span><span class="o">.</span><span class="n">initialize</span><span class="p">()</span>

    <span class="c1"># Check the worker is properly initialized</span>
    <span class="k">assert</span> <span class="n">service</span><span class="o">.</span><span class="n">is_initialized</span>
    <span class="k">assert</span> <span class="n">service</span><span class="o">.</span><span class="n">state</span> <span class="o">==</span> <span class="n">ServiceState</span><span class="o">.</span><span class="n">READY</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="aiperf.tests.services.test_worker.TestWorker.worker_config" class="doc doc-heading">
            <code class=" language-python"><span class="n">worker_config</span><span class="p">()</span></code>

<a href="#aiperf.tests.services.test_worker.TestWorker.worker_config" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Return a test configuration for the worker.</p>


            <details class="quote">
              <summary>Source code in <code>aiperf/tests/services/test_worker.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@pytest</span><span class="o">.</span><span class="n">fixture</span>
<span class="k">def</span><span class="w"> </span><span class="nf">worker_config</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">WorkerTestConfig</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Return a test configuration for the worker.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">WorkerTestConfig</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="aiperf.tests.services.test_worker.WorkerTestConfig" class="doc doc-heading">
            <code>WorkerTestConfig</code>


<a href="#aiperf.tests.services.test_worker.WorkerTestConfig" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="pydantic.BaseModel">BaseModel</span></code></p>


        <p>Test configuration for the workers.</p>







              <details class="quote">
                <summary>Source code in <code>aiperf/tests/services/test_worker.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">WorkerTestConfig</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Test configuration for the workers.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="c1"># TODO: Replace this with the actual configuration model once available</span>
    <span class="k">pass</span>
</code></pre></div></td></tr></table></div>
              </details>

    </div>

</div>




  </div>

    </div>

</div><h2 id="aiperftestsservicestest_worker_manager">aiperf.tests.services.test_worker_manager<a class="headerlink" href="#aiperftestsservicestest_worker_manager" title="Permanent link">&para;</a></h2>


<div class="doc doc-object doc-module">



<a id="aiperf.tests.services.test_worker_manager"></a>
    <div class="doc doc-contents first">

        <p>Tests for the worker manager service.</p>









  <div class="doc doc-children">








<div class="doc doc-object doc-class">



<h2 id="aiperf.tests.services.test_worker_manager.TestWorkerManager" class="doc doc-heading">
            <code>TestWorkerManager</code>


<a href="#aiperf.tests.services.test_worker_manager.TestWorkerManager" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="BaseTestComponentService (aiperf.tests.base_test_component_service.BaseTestComponentService)" href="#aiperf.tests.base_test_component_service.BaseTestComponentService">BaseTestComponentService</a></code></p>


        <p>Tests for the worker manager service.</p>
<p>This test class extends BaseTestComponentService to leverage common
component service tests while adding worker manager specific tests.</p>







              <details class="quote">
                <summary>Source code in <code>aiperf/tests/services/test_worker_manager.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@pytest</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">asyncio</span>
<span class="k">class</span><span class="w"> </span><span class="nc">TestWorkerManager</span><span class="p">(</span><span class="n">BaseTestComponentService</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Tests for the worker manager service.</span>

<span class="sd">    This test class extends BaseTestComponentService to leverage common</span>
<span class="sd">    component service tests while adding worker manager specific tests.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="nd">@pytest</span><span class="o">.</span><span class="n">fixture</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">service_class</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">type</span><span class="p">[</span><span class="n">BaseService</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Return the service class to be tested.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">WorkerManager</span>

    <span class="nd">@pytest</span><span class="o">.</span><span class="n">fixture</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">worker_manager_config</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">WorkerManagerTestConfig</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Return a test configuration for the worker manager.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">WorkerManagerTestConfig</span><span class="p">()</span>

    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">test_worker_manager_initialization</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">initialized_service</span><span class="p">:</span> <span class="n">WorkerManager</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Test that the worker manager initializes with the correct attributes.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">service</span> <span class="o">=</span> <span class="k">await</span> <span class="n">async_fixture</span><span class="p">(</span><span class="n">initialized_service</span><span class="p">)</span>
        <span class="k">assert</span> <span class="n">service</span><span class="o">.</span><span class="n">service_type</span> <span class="o">==</span> <span class="n">ServiceType</span><span class="o">.</span><span class="n">WORKER_MANAGER</span>
        <span class="k">assert</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">service</span><span class="p">,</span> <span class="s2">&quot;workers&quot;</span><span class="p">)</span>
        <span class="k">assert</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">service</span><span class="p">,</span> <span class="s2">&quot;cpu_count&quot;</span><span class="p">)</span>
        <span class="k">assert</span> <span class="n">service</span><span class="o">.</span><span class="n">cpu_count</span> <span class="o">==</span> <span class="n">multiprocessing</span><span class="o">.</span><span class="n">cpu_count</span><span class="p">()</span>
        <span class="k">assert</span> <span class="n">service</span><span class="o">.</span><span class="n">worker_count</span> <span class="o">==</span> <span class="n">service</span><span class="o">.</span><span class="n">cpu_count</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h3 id="aiperf.tests.services.test_worker_manager.TestWorkerManager.service_class" class="doc doc-heading">
            <code class=" language-python"><span class="n">service_class</span><span class="p">()</span></code>

<a href="#aiperf.tests.services.test_worker_manager.TestWorkerManager.service_class" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Return the service class to be tested.</p>


            <details class="quote">
              <summary>Source code in <code>aiperf/tests/services/test_worker_manager.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@pytest</span><span class="o">.</span><span class="n">fixture</span>
<span class="k">def</span><span class="w"> </span><span class="nf">service_class</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">type</span><span class="p">[</span><span class="n">BaseService</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Return the service class to be tested.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">WorkerManager</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="aiperf.tests.services.test_worker_manager.TestWorkerManager.test_worker_manager_initialization" class="doc doc-heading">
            <code class=" language-python"><span class="n">test_worker_manager_initialization</span><span class="p">(</span><span class="n">initialized_service</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#aiperf.tests.services.test_worker_manager.TestWorkerManager.test_worker_manager_initialization" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Test that the worker manager initializes with the correct attributes.</p>


            <details class="quote">
              <summary>Source code in <code>aiperf/tests/services/test_worker_manager.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">test_worker_manager_initialization</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span> <span class="n">initialized_service</span><span class="p">:</span> <span class="n">WorkerManager</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Test that the worker manager initializes with the correct attributes.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">service</span> <span class="o">=</span> <span class="k">await</span> <span class="n">async_fixture</span><span class="p">(</span><span class="n">initialized_service</span><span class="p">)</span>
    <span class="k">assert</span> <span class="n">service</span><span class="o">.</span><span class="n">service_type</span> <span class="o">==</span> <span class="n">ServiceType</span><span class="o">.</span><span class="n">WORKER_MANAGER</span>
    <span class="k">assert</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">service</span><span class="p">,</span> <span class="s2">&quot;workers&quot;</span><span class="p">)</span>
    <span class="k">assert</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">service</span><span class="p">,</span> <span class="s2">&quot;cpu_count&quot;</span><span class="p">)</span>
    <span class="k">assert</span> <span class="n">service</span><span class="o">.</span><span class="n">cpu_count</span> <span class="o">==</span> <span class="n">multiprocessing</span><span class="o">.</span><span class="n">cpu_count</span><span class="p">()</span>
    <span class="k">assert</span> <span class="n">service</span><span class="o">.</span><span class="n">worker_count</span> <span class="o">==</span> <span class="n">service</span><span class="o">.</span><span class="n">cpu_count</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="aiperf.tests.services.test_worker_manager.TestWorkerManager.worker_manager_config" class="doc doc-heading">
            <code class=" language-python"><span class="n">worker_manager_config</span><span class="p">()</span></code>

<a href="#aiperf.tests.services.test_worker_manager.TestWorkerManager.worker_manager_config" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Return a test configuration for the worker manager.</p>


            <details class="quote">
              <summary>Source code in <code>aiperf/tests/services/test_worker_manager.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@pytest</span><span class="o">.</span><span class="n">fixture</span>
<span class="k">def</span><span class="w"> </span><span class="nf">worker_manager_config</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">WorkerManagerTestConfig</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Return a test configuration for the worker manager.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">WorkerManagerTestConfig</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="aiperf.tests.services.test_worker_manager.WorkerManagerTestConfig" class="doc doc-heading">
            <code>WorkerManagerTestConfig</code>


<a href="#aiperf.tests.services.test_worker_manager.WorkerManagerTestConfig" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="pydantic.BaseModel">BaseModel</span></code></p>


        <p>Configuration model for worker manager tests.</p>







              <details class="quote">
                <summary>Source code in <code>aiperf/tests/services/test_worker_manager.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">WorkerManagerTestConfig</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Configuration model for worker manager tests.&quot;&quot;&quot;</span>

    <span class="c1"># TODO: Replace this with the actual configuration model once available</span>
    <span class="k">pass</span>
</code></pre></div></td></tr></table></div>
              </details>

    </div>

</div>




  </div>

    </div>

</div><h2 id="aiperfteststest_aiperf_task">aiperf.tests.test_aiperf_task<a class="headerlink" href="#aiperfteststest_aiperf_task" title="Permanent link">&para;</a></h2>


<div class="doc doc-object doc-module">



<a id="aiperf.tests.test_aiperf_task"></a>
    <div class="doc doc-contents first">









  <div class="doc doc-children">











  </div>

    </div>

</div><h2 id="aiperfteststest_audio_generator">aiperf.tests.test_audio_generator<a class="headerlink" href="#aiperfteststest_audio_generator" title="Permanent link">&para;</a></h2>


<div class="doc doc-object doc-module">



<a id="aiperf.tests.test_audio_generator"></a>
    <div class="doc doc-contents first">









  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h2 id="aiperf.tests.test_audio_generator.decode_audio" class="doc doc-heading">
            <code class=" language-python"><span class="n">decode_audio</span><span class="p">(</span><span class="n">data_uri</span><span class="p">)</span></code>

<a href="#aiperf.tests.test_audio_generator.decode_audio" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">

        <p>Helper function to decode audio from data URI format.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>data_uri</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Data URI string in format "format,b64_data"</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="tuple">tuple</span>[<span title="numpy.ndarray">ndarray</span>, <span title="int">int</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Tuple of (audio_data: np.ndarray, sample_rate: int)</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>aiperf/tests/test_audio_generator.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">decode_audio</span><span class="p">(</span><span class="n">data_uri</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">tuple</span><span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">,</span> <span class="nb">int</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Helper function to decode audio from data URI format.</span>

<span class="sd">    Args:</span>
<span class="sd">        data_uri: Data URI string in format &quot;format,b64_data&quot;</span>

<span class="sd">    Returns:</span>
<span class="sd">        Tuple of (audio_data: np.ndarray, sample_rate: int)</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Parse data URI</span>
    <span class="n">_</span><span class="p">,</span> <span class="n">b64_data</span> <span class="o">=</span> <span class="n">data_uri</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;,&quot;</span><span class="p">)</span>
    <span class="n">decoded_data</span> <span class="o">=</span> <span class="n">base64</span><span class="o">.</span><span class="n">b64decode</span><span class="p">(</span><span class="n">b64_data</span><span class="p">)</span>

    <span class="c1"># Load audio using soundfile - format is auto-detected from content</span>
    <span class="n">audio_data</span><span class="p">,</span> <span class="n">sample_rate</span> <span class="o">=</span> <span class="n">sf</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="n">io</span><span class="o">.</span><span class="n">BytesIO</span><span class="p">(</span><span class="n">decoded_data</span><span class="p">))</span>
    <span class="k">return</span> <span class="n">audio_data</span><span class="p">,</span> <span class="n">sample_rate</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div><h2 id="aiperfteststest_benchmark_duration_metric">aiperf.tests.test_benchmark_duration_metric<a class="headerlink" href="#aiperfteststest_benchmark_duration_metric" title="Permanent link">&para;</a></h2>


<div class="doc doc-object doc-module">



<a id="aiperf.tests.test_benchmark_duration_metric"></a>
    <div class="doc doc-contents first">









  <div class="doc doc-children">











  </div>

    </div>

</div><h2 id="aiperfteststest_hooks">aiperf.tests.test_hooks<a class="headerlink" href="#aiperfteststest_hooks" title="Permanent link">&para;</a></h2>


<div class="doc doc-object doc-module">



<a id="aiperf.tests.test_hooks"></a>
    <div class="doc doc-contents first">









  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h2 id="aiperf.tests.test_hooks.test_hook_decorators" class="doc doc-heading">
            <code class=" language-python"><span class="n">test_hook_decorators</span><span class="p">()</span></code>

<a href="#aiperf.tests.test_hooks.test_hook_decorators" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">

        <p>Test the hook decorators.</p>


            <details class="quote">
              <summary>Source code in <code>aiperf/tests/test_hooks.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">71</span>
<span class="normal">72</span>
<span class="normal">73</span>
<span class="normal">74</span>
<span class="normal">75</span>
<span class="normal">76</span>
<span class="normal">77</span>
<span class="normal">78</span>
<span class="normal">79</span>
<span class="normal">80</span>
<span class="normal">81</span>
<span class="normal">82</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">test_hook_decorators</span><span class="p">():</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Test the hook decorators.&quot;&quot;&quot;</span>
    <span class="n">test_hooks</span> <span class="o">=</span> <span class="n">MockHooks</span><span class="p">()</span>

    <span class="k">assert</span> <span class="n">test_hooks</span><span class="o">.</span><span class="n">get_hooks</span><span class="p">(</span><span class="n">AIPerfHook</span><span class="o">.</span><span class="n">ON_INIT</span><span class="p">)</span> <span class="o">==</span> <span class="p">[</span>
        <span class="n">test_hooks</span><span class="o">.</span><span class="n">on_init_3</span><span class="p">,</span>
        <span class="n">test_hooks</span><span class="o">.</span><span class="n">on_init_2</span><span class="p">,</span>
        <span class="n">test_hooks</span><span class="o">.</span><span class="n">on_init_1</span><span class="p">,</span>
    <span class="p">],</span> <span class="s2">&quot;Init hooks should be registered in the order they are defined&quot;</span>
    <span class="k">assert</span> <span class="n">test_hooks</span><span class="o">.</span><span class="n">get_hooks</span><span class="p">(</span><span class="n">AIPerfHook</span><span class="o">.</span><span class="n">ON_CLEANUP</span><span class="p">)</span> <span class="o">==</span> <span class="p">[</span><span class="n">test_hooks</span><span class="o">.</span><span class="n">on_cleanup_1</span><span class="p">],</span> <span class="p">(</span>
        <span class="s2">&quot;Cleanup hooks should be registered&quot;</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="aiperf.tests.test_hooks.test_hook_inheritance" class="doc doc-heading">
            <code class=" language-python"><span class="n">test_hook_inheritance</span><span class="p">()</span></code>

<a href="#aiperf.tests.test_hooks.test_hook_inheritance" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">

        <p>Test the hook inheritance.</p>


            <details class="quote">
              <summary>Source code in <code>aiperf/tests/test_hooks.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">test_hook_inheritance</span><span class="p">():</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Test the hook inheritance.&quot;&quot;&quot;</span>
    <span class="n">test_hooks_inheritance</span> <span class="o">=</span> <span class="n">MockHooksInheritance</span><span class="p">()</span>

    <span class="k">assert</span> <span class="n">test_hooks_inheritance</span><span class="o">.</span><span class="n">get_hooks</span><span class="p">(</span><span class="n">AIPerfHook</span><span class="o">.</span><span class="n">ON_INIT</span><span class="p">)</span> <span class="o">==</span> <span class="p">[</span>
        <span class="n">test_hooks_inheritance</span><span class="o">.</span><span class="n">on_init_3</span><span class="p">,</span>
        <span class="n">test_hooks_inheritance</span><span class="o">.</span><span class="n">on_init_2</span><span class="p">,</span>
        <span class="n">test_hooks_inheritance</span><span class="o">.</span><span class="n">on_init_1</span><span class="p">,</span>
        <span class="n">test_hooks_inheritance</span><span class="o">.</span><span class="n">on_init_4</span><span class="p">,</span>
    <span class="p">],</span> <span class="s2">&quot;Init hooks should be registered in the order they are defined&quot;</span>

    <span class="k">assert</span> <span class="n">test_hooks_inheritance</span><span class="o">.</span><span class="n">get_hooks</span><span class="p">(</span><span class="n">AIPerfHook</span><span class="o">.</span><span class="n">ON_CLEANUP</span><span class="p">)</span> <span class="o">==</span> <span class="p">[</span>
        <span class="n">test_hooks_inheritance</span><span class="o">.</span><span class="n">on_cleanup_1</span><span class="p">,</span>
        <span class="n">test_hooks_inheritance</span><span class="o">.</span><span class="n">on_cleanup_2</span><span class="p">,</span>
    <span class="p">],</span> <span class="s2">&quot;Cleanup hooks should be registered in the order they are defined&quot;</span>

    <span class="k">assert</span> <span class="n">test_hooks_inheritance</span><span class="o">.</span><span class="n">get_hooks</span><span class="p">(</span><span class="n">AIPerfHook</span><span class="o">.</span><span class="n">ON_START</span><span class="p">)</span> <span class="o">==</span> <span class="p">[</span>
        <span class="n">test_hooks_inheritance</span><span class="o">.</span><span class="n">on_start_1</span>
    <span class="p">],</span> <span class="s2">&quot;Start hook should be registered&quot;</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="aiperf.tests.test_hooks.test_hook_ordering" class="doc doc-heading">
            <code class=" language-python"><span class="n">test_hook_ordering</span><span class="p">()</span></code>

<a href="#aiperf.tests.test_hooks.test_hook_ordering" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">

        <p>Test that the hook ordering is correct.</p>


            <details class="quote">
              <summary>Source code in <code>aiperf/tests/test_hooks.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">285</span>
<span class="normal">286</span>
<span class="normal">287</span>
<span class="normal">288</span>
<span class="normal">289</span>
<span class="normal">290</span>
<span class="normal">291</span>
<span class="normal">292</span>
<span class="normal">293</span>
<span class="normal">294</span>
<span class="normal">295</span>
<span class="normal">296</span>
<span class="normal">297</span>
<span class="normal">298</span>
<span class="normal">299</span>
<span class="normal">300</span>
<span class="normal">301</span>
<span class="normal">302</span>
<span class="normal">303</span>
<span class="normal">304</span>
<span class="normal">305</span>
<span class="normal">306</span>
<span class="normal">307</span>
<span class="normal">308</span>
<span class="normal">309</span>
<span class="normal">310</span>
<span class="normal">311</span>
<span class="normal">312</span>
<span class="normal">313</span>
<span class="normal">314</span>
<span class="normal">315</span>
<span class="normal">316</span>
<span class="normal">317</span>
<span class="normal">318</span>
<span class="normal">319</span>
<span class="normal">320</span>
<span class="normal">321</span>
<span class="normal">322</span>
<span class="normal">323</span>
<span class="normal">324</span>
<span class="normal">325</span>
<span class="normal">326</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">test_hook_ordering</span><span class="p">():</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Test that the hook ordering is correct.&quot;&quot;&quot;</span>

    <span class="nd">@supports_hooks</span><span class="p">(</span><span class="n">AIPerfHook</span><span class="o">.</span><span class="n">ON_INIT</span><span class="p">)</span>
    <span class="k">class</span><span class="w"> </span><span class="nc">Hooks</span><span class="p">(</span><span class="n">HooksMixin</span><span class="p">):</span>
        <span class="nd">@on_init</span>
        <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">on_init_2</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
            <span class="k">pass</span>

        <span class="nd">@on_init</span>
        <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">on_init_3</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
            <span class="k">pass</span>

        <span class="nd">@on_init</span>
        <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">on_init_1</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
            <span class="k">pass</span>

    <span class="n">hooks</span> <span class="o">=</span> <span class="n">Hooks</span><span class="p">()</span>

    <span class="c1"># Ensure the hooks are added in the order they are defined</span>
    <span class="k">assert</span> <span class="n">hooks</span><span class="o">.</span><span class="n">get_hooks</span><span class="p">(</span><span class="n">AIPerfHook</span><span class="o">.</span><span class="n">ON_INIT</span><span class="p">)</span> <span class="o">==</span> <span class="p">[</span>
        <span class="n">hooks</span><span class="o">.</span><span class="n">on_init_2</span><span class="p">,</span>
        <span class="n">hooks</span><span class="o">.</span><span class="n">on_init_3</span><span class="p">,</span>
        <span class="n">hooks</span><span class="o">.</span><span class="n">on_init_1</span><span class="p">,</span>
    <span class="p">],</span> <span class="s2">&quot;Hooks should be registered in the order they are defined&quot;</span>

    <span class="k">class</span><span class="w"> </span><span class="nc">Hooks2</span><span class="p">(</span><span class="n">Hooks</span><span class="p">):</span>
        <span class="nd">@on_init</span>
        <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">on_init_0</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
            <span class="k">pass</span>

    <span class="n">hooks2</span> <span class="o">=</span> <span class="n">Hooks2</span><span class="p">()</span>

    <span class="c1"># Ensure that base hooks are registered before the subclass hooks</span>
    <span class="k">assert</span> <span class="n">hooks2</span><span class="o">.</span><span class="n">get_hooks</span><span class="p">(</span><span class="n">AIPerfHook</span><span class="o">.</span><span class="n">ON_INIT</span><span class="p">)</span> <span class="o">==</span> <span class="p">[</span>
        <span class="c1"># Base hooks</span>
        <span class="n">hooks2</span><span class="o">.</span><span class="n">on_init_2</span><span class="p">,</span>
        <span class="n">hooks2</span><span class="o">.</span><span class="n">on_init_3</span><span class="p">,</span>
        <span class="n">hooks2</span><span class="o">.</span><span class="n">on_init_1</span><span class="p">,</span>
        <span class="c1"># Subclass hooks</span>
        <span class="n">hooks2</span><span class="o">.</span><span class="n">on_init_0</span><span class="p">,</span>
    <span class="p">],</span> <span class="s2">&quot;Base hooks should be registered before subclass hooks&quot;</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="aiperf.tests.test_hooks.test_inheritance_hook_order" class="doc doc-heading">
            <code class=" language-python"><span class="n">test_inheritance_hook_order</span><span class="p">()</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#aiperf.tests.test_hooks.test_inheritance_hook_order" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">

        <p>Test that the hook order is correct when using inheritance.</p>


            <details class="quote">
              <summary>Source code in <code>aiperf/tests/test_hooks.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@pytest</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">asyncio</span>
<span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">test_inheritance_hook_order</span><span class="p">():</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Test that the hook order is correct when using inheritance.&quot;&quot;&quot;</span>

    <span class="k">class</span><span class="w"> </span><span class="nc">MockHooksInheritance2</span><span class="p">(</span><span class="n">MockHooks</span><span class="p">):</span>
        <span class="nd">@on_init</span>
        <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">on_init_99</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
            <span class="k">assert</span> <span class="bp">self</span><span class="o">.</span><span class="n">on_init_1</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">called_hooks</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_called_hook</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">on_init_99</span><span class="p">)</span>

        <span class="nd">@on_init</span>
        <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">on_init_0</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
            <span class="k">assert</span> <span class="bp">self</span><span class="o">.</span><span class="n">on_init_1</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">called_hooks</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_called_hook</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">on_init_0</span><span class="p">)</span>

    <span class="n">test_hooks</span> <span class="o">=</span> <span class="n">MockHooksInheritance2</span><span class="p">()</span>

    <span class="k">await</span> <span class="n">test_hooks</span><span class="o">.</span><span class="n">initialize</span><span class="p">()</span>

    <span class="k">assert</span> <span class="n">test_hooks</span><span class="o">.</span><span class="n">on_init_0</span> <span class="ow">in</span> <span class="n">test_hooks</span><span class="o">.</span><span class="n">called_hooks</span><span class="p">,</span> <span class="p">(</span>
        <span class="s2">&quot;Subclass hook should be called&quot;</span>
    <span class="p">)</span>
    <span class="k">assert</span> <span class="n">test_hooks</span><span class="o">.</span><span class="n">on_init_1</span> <span class="ow">in</span> <span class="n">test_hooks</span><span class="o">.</span><span class="n">called_hooks</span><span class="p">,</span> <span class="s2">&quot;Base hook should be called&quot;</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="aiperf.tests.test_hooks.test_inheritance_hook_override" class="doc doc-heading">
            <code class=" language-python"><span class="n">test_inheritance_hook_override</span><span class="p">()</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#aiperf.tests.test_hooks.test_inheritance_hook_override" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">

        <p>Test that a hook that is overridden in a subclass does not call the base class hook.</p>


            <details class="quote">
              <summary>Source code in <code>aiperf/tests/test_hooks.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span>
<span class="normal">278</span>
<span class="normal">279</span>
<span class="normal">280</span>
<span class="normal">281</span>
<span class="normal">282</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@pytest</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">asyncio</span>
<span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">test_inheritance_hook_override</span><span class="p">():</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Test that a hook that is overridden in a subclass does not call the base class hook.&quot;&quot;&quot;</span>

    <span class="k">class</span><span class="w"> </span><span class="nc">MockHooksInheritance3</span><span class="p">(</span><span class="n">MockHooks</span><span class="p">):</span>
        <span class="nd">@on_init</span>
        <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">on_init_1</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
            <span class="k">assert</span> <span class="n">MockHooks</span><span class="o">.</span><span class="n">on_init_1</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">called_hooks</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_called_hook</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">on_init_1</span><span class="p">)</span>

    <span class="n">test_hooks</span> <span class="o">=</span> <span class="n">MockHooksInheritance3</span><span class="p">()</span>

    <span class="k">await</span> <span class="n">test_hooks</span><span class="o">.</span><span class="n">initialize</span><span class="p">()</span>

    <span class="k">assert</span> <span class="n">test_hooks</span><span class="o">.</span><span class="n">on_init_1</span> <span class="ow">in</span> <span class="n">test_hooks</span><span class="o">.</span><span class="n">called_hooks</span><span class="p">,</span> <span class="p">(</span>
        <span class="s2">&quot;Subclass hook should be called&quot;</span>
    <span class="p">)</span>
    <span class="k">assert</span> <span class="n">MockHooks</span><span class="o">.</span><span class="n">on_init_1</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">test_hooks</span><span class="o">.</span><span class="n">called_hooks</span><span class="p">,</span> <span class="p">(</span>
        <span class="s2">&quot;Base hook should not be called&quot;</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="aiperf.tests.test_hooks.test_instance_additional_hooks" class="doc doc-heading">
            <code class=" language-python"><span class="n">test_instance_additional_hooks</span><span class="p">()</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#aiperf.tests.test_hooks.test_instance_additional_hooks" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">

        <p>Test that additional hooks can be added to a class that supports hooks.</p>


            <details class="quote">
              <summary>Source code in <code>aiperf/tests/test_hooks.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@pytest</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">asyncio</span>
<span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">test_instance_additional_hooks</span><span class="p">():</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Test that additional hooks can be added to a class that supports hooks.&quot;&quot;&quot;</span>
    <span class="n">test_hooks</span> <span class="o">=</span> <span class="n">MockHooksInheritance</span><span class="p">()</span>

    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">custom_start_hook</span><span class="p">():</span>
        <span class="n">test_hooks</span><span class="o">.</span><span class="n">add_called_hook</span><span class="p">(</span><span class="n">custom_start_hook</span><span class="p">)</span>

    <span class="n">test_hooks</span><span class="o">.</span><span class="n">register_hook</span><span class="p">(</span><span class="n">AIPerfHook</span><span class="o">.</span><span class="n">ON_START</span><span class="p">,</span> <span class="n">custom_start_hook</span><span class="p">)</span>

    <span class="k">assert</span> <span class="n">test_hooks</span><span class="o">.</span><span class="n">get_hooks</span><span class="p">(</span><span class="n">AIPerfHook</span><span class="o">.</span><span class="n">ON_START</span><span class="p">)</span> <span class="o">==</span> <span class="p">[</span>
        <span class="n">test_hooks</span><span class="o">.</span><span class="n">on_start_1</span><span class="p">,</span>
        <span class="n">custom_start_hook</span><span class="p">,</span>
    <span class="p">]</span>

    <span class="k">await</span> <span class="n">test_hooks</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>

    <span class="k">assert</span> <span class="n">custom_start_hook</span> <span class="ow">in</span> <span class="n">test_hooks</span><span class="o">.</span><span class="n">called_hooks</span><span class="p">,</span> <span class="p">(</span>
        <span class="s2">&quot;Custom start hook should be called&quot;</span>
    <span class="p">)</span>
    <span class="k">assert</span> <span class="n">test_hooks</span><span class="o">.</span><span class="n">on_start_1</span> <span class="ow">in</span> <span class="n">test_hooks</span><span class="o">.</span><span class="n">called_hooks</span><span class="p">,</span> <span class="p">(</span>
        <span class="s2">&quot;Base start hook should be called&quot;</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="aiperf.tests.test_hooks.test_instance_additional_supported_hooks" class="doc doc-heading">
            <code class=" language-python"><span class="n">test_instance_additional_supported_hooks</span><span class="p">()</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#aiperf.tests.test_hooks.test_instance_additional_supported_hooks" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">

        <p>Test that additional hook types can be supported by a class</p>


            <details class="quote">
              <summary>Source code in <code>aiperf/tests/test_hooks.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@pytest</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">asyncio</span>
<span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">test_instance_additional_supported_hooks</span><span class="p">():</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Test that additional hook types can be supported by a class&quot;&quot;&quot;</span>
    <span class="n">test_hooks</span> <span class="o">=</span> <span class="n">MockHooks</span><span class="p">()</span>

    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">custom_stop_hook</span><span class="p">():</span>
        <span class="n">test_hooks</span><span class="o">.</span><span class="n">add_called_hook</span><span class="p">(</span><span class="n">custom_stop_hook</span><span class="p">)</span>

    <span class="c1"># this should raise an UnsupportedHookError because the hook type is not supported</span>
    <span class="k">with</span> <span class="n">pytest</span><span class="o">.</span><span class="n">raises</span><span class="p">(</span><span class="n">UnsupportedHookError</span><span class="p">):</span>
        <span class="n">test_hooks</span><span class="o">.</span><span class="n">register_hook</span><span class="p">(</span><span class="n">AIPerfHook</span><span class="o">.</span><span class="n">ON_STOP</span><span class="p">,</span> <span class="n">custom_stop_hook</span><span class="p">)</span>

    <span class="c1"># Now we add the hook type to the supported hooks</span>
    <span class="n">test_hooks</span><span class="o">.</span><span class="n">supported_hooks</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">AIPerfHook</span><span class="o">.</span><span class="n">ON_STOP</span><span class="p">)</span>

    <span class="c1"># Now we can register the hook and it will not raise an UnsupportedHookError</span>
    <span class="n">test_hooks</span><span class="o">.</span><span class="n">register_hook</span><span class="p">(</span><span class="n">AIPerfHook</span><span class="o">.</span><span class="n">ON_STOP</span><span class="p">,</span> <span class="n">custom_stop_hook</span><span class="p">)</span>

    <span class="c1"># Expect the hook to be in the list of hooks</span>
    <span class="k">assert</span> <span class="n">test_hooks</span><span class="o">.</span><span class="n">get_hooks</span><span class="p">(</span><span class="n">AIPerfHook</span><span class="o">.</span><span class="n">ON_STOP</span><span class="p">)</span> <span class="o">==</span> <span class="p">[</span><span class="n">custom_stop_hook</span><span class="p">]</span>

    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">custom_init_hook</span><span class="p">():</span>
        <span class="n">test_hooks</span><span class="o">.</span><span class="n">called_hooks</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">custom_init_hook</span><span class="p">)</span>
        <span class="c1"># Hack to allow the hook to run the newly added ON_STOP hook</span>
        <span class="k">await</span> <span class="n">test_hooks</span><span class="o">.</span><span class="n">run_hooks_async</span><span class="p">(</span><span class="n">AIPerfHook</span><span class="o">.</span><span class="n">ON_STOP</span><span class="p">)</span>

    <span class="n">test_hooks</span><span class="o">.</span><span class="n">register_hook</span><span class="p">(</span>
        <span class="n">AIPerfHook</span><span class="o">.</span><span class="n">ON_INIT</span><span class="p">,</span> <span class="n">custom_init_hook</span>
    <span class="p">)</span>  <span class="c1"># this should not raise an UnsupportedHookError</span>

    <span class="k">await</span> <span class="n">test_hooks</span><span class="o">.</span><span class="n">initialize</span><span class="p">()</span>

    <span class="c1"># Expect the custom init and stop hooks to have been called</span>
    <span class="k">assert</span> <span class="n">custom_init_hook</span> <span class="ow">in</span> <span class="n">test_hooks</span><span class="o">.</span><span class="n">called_hooks</span><span class="p">,</span> <span class="p">(</span>
        <span class="s2">&quot;Custom init hook should be called&quot;</span>
    <span class="p">)</span>
    <span class="k">assert</span> <span class="n">custom_stop_hook</span> <span class="ow">in</span> <span class="n">test_hooks</span><span class="o">.</span><span class="n">called_hooks</span><span class="p">,</span> <span class="p">(</span>
        <span class="s2">&quot;Custom stop hook should be called&quot;</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="aiperf.tests.test_hooks.test_unsupported_hook_decorator" class="doc doc-heading">
            <code class=" language-python"><span class="n">test_unsupported_hook_decorator</span><span class="p">()</span></code>

<a href="#aiperf.tests.test_hooks.test_unsupported_hook_decorator" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">

        <p>Test that an UnsupportedHookError is raised when a hook is defined on a class
that does not support it.</p>


            <details class="quote">
              <summary>Source code in <code>aiperf/tests/test_hooks.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">test_unsupported_hook_decorator</span><span class="p">():</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Test that an UnsupportedHookError is raised when a hook is defined on a class</span>
<span class="sd">    that does not support it.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="nd">@supports_hooks</span><span class="p">(</span><span class="n">AIPerfHook</span><span class="o">.</span><span class="n">ON_CLEANUP</span><span class="p">)</span>
    <span class="k">class</span><span class="w"> </span><span class="nc">TestHooksUnsupported</span><span class="p">(</span><span class="n">MockHooks</span><span class="p">):</span>
        <span class="nd">@on_start</span>
        <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">_on_start_1</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_called_hook</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_on_start_1</span><span class="p">)</span>

    <span class="k">with</span> <span class="n">pytest</span><span class="o">.</span><span class="n">raises</span><span class="p">(</span><span class="n">UnsupportedHookError</span><span class="p">):</span>
        <span class="n">TestHooksUnsupported</span><span class="p">()</span>  <span class="c1"># this should raise an UnsupportedHookError</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div><h2 id="aiperfteststest_image_generator">aiperf.tests.test_image_generator<a class="headerlink" href="#aiperfteststest_image_generator" title="Permanent link">&para;</a></h2>


<div class="doc doc-object doc-module">



<a id="aiperf.tests.test_image_generator"></a>
    <div class="doc doc-contents first">









  <div class="doc doc-children">











  </div>

    </div>

</div><h2 id="aiperfteststest_max_response_metric">aiperf.tests.test_max_response_metric<a class="headerlink" href="#aiperfteststest_max_response_metric" title="Permanent link">&para;</a></h2>


<div class="doc doc-object doc-module">



<a id="aiperf.tests.test_max_response_metric"></a>
    <div class="doc doc-contents first">









  <div class="doc doc-children">











  </div>

    </div>

</div><h2 id="aiperfteststest_messages">aiperf.tests.test_messages<a class="headerlink" href="#aiperfteststest_messages" title="Permanent link">&para;</a></h2>


<div class="doc doc-object doc-module">



<a id="aiperf.tests.test_messages"></a>
    <div class="doc doc-contents first">









  <div class="doc doc-children">











  </div>

    </div>

</div><h2 id="aiperfteststest_metric_summary">aiperf.tests.test_metric_summary<a class="headerlink" href="#aiperfteststest_metric_summary" title="Permanent link">&para;</a></h2>


<div class="doc doc-object doc-module">



<a id="aiperf.tests.test_metric_summary"></a>
    <div class="doc doc-contents first">









  <div class="doc doc-children">











  </div>

    </div>

</div><h2 id="aiperfteststest_min_request_metric">aiperf.tests.test_min_request_metric<a class="headerlink" href="#aiperfteststest_min_request_metric" title="Permanent link">&para;</a></h2>


<div class="doc doc-object doc-module">



<a id="aiperf.tests.test_min_request_metric"></a>
    <div class="doc doc-contents first">









  <div class="doc doc-children">











  </div>

    </div>

</div><h2 id="aiperfteststest_prompt_generator">aiperf.tests.test_prompt_generator<a class="headerlink" href="#aiperfteststest_prompt_generator" title="Permanent link">&para;</a></h2>


<div class="doc doc-object doc-module">



<a id="aiperf.tests.test_prompt_generator"></a>
    <div class="doc doc-contents first">









  <div class="doc doc-children">











  </div>

    </div>

</div><h2 id="aiperfteststest_records">aiperf.tests.test_records<a class="headerlink" href="#aiperfteststest_records" title="Permanent link">&para;</a></h2>


<div class="doc doc-object doc-module">



<a id="aiperf.tests.test_records"></a>
    <div class="doc doc-contents first">









  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h2 id="aiperf.tests.test_records.test_record_dataclass" class="doc doc-heading">
            <code class=" language-python"><span class="n">test_record_dataclass</span><span class="p">()</span></code>

<a href="#aiperf.tests.test_records.test_record_dataclass" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">

        <p>Test the initialization and attribute assignment of the Record dataclass.</p>
<p>This test creates two transaction objects and a Record object containing them.
It asserts that the Record's 'request' attribute and 'transactions' list are set correctly.</p>


            <details class="quote">
              <summary>Source code in <code>aiperf/tests/test_records.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">test_record_dataclass</span><span class="p">():</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Test the initialization and attribute assignment of the Record dataclass.</span>

<span class="sd">    This test creates two transaction objects and a Record object containing them.</span>
<span class="sd">    It asserts that the Record&#39;s &#39;request&#39; attribute and &#39;transactions&#39; list are set correctly.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">req</span> <span class="o">=</span> <span class="n">Transaction</span><span class="p">(</span><span class="n">timestamp</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span> <span class="n">payload</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
    <span class="n">resp1</span> <span class="o">=</span> <span class="n">Transaction</span><span class="p">(</span><span class="n">timestamp</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">payload</span><span class="o">=</span><span class="s2">&quot;foo&quot;</span><span class="p">)</span>
    <span class="n">resp2</span> <span class="o">=</span> <span class="n">Transaction</span><span class="p">(</span><span class="n">timestamp</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">payload</span><span class="o">=</span><span class="s2">&quot;bar&quot;</span><span class="p">)</span>
    <span class="n">record</span> <span class="o">=</span> <span class="n">Record</span><span class="p">(</span><span class="n">request</span><span class="o">=</span><span class="n">req</span><span class="p">,</span> <span class="n">responses</span><span class="o">=</span><span class="p">[</span><span class="n">resp1</span><span class="p">,</span> <span class="n">resp2</span><span class="p">])</span>
    <span class="k">assert</span> <span class="n">record</span><span class="o">.</span><span class="n">request</span> <span class="o">==</span> <span class="n">req</span>
    <span class="k">assert</span> <span class="n">record</span><span class="o">.</span><span class="n">responses</span> <span class="o">==</span> <span class="p">[</span><span class="n">resp1</span><span class="p">,</span> <span class="n">resp2</span><span class="p">]</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="aiperf.tests.test_records.test_records_add_and_get_records" class="doc doc-heading">
            <code class=" language-python"><span class="n">test_records_add_and_get_records</span><span class="p">()</span></code>

<a href="#aiperf.tests.test_records.test_records_add_and_get_records" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">

        <p>Test the functionality of adding a record to the Records object and retrieving it.</p>
<p>This test verifies that:
- A record can be added to the Records instance with a specified request and a list of transaction objects.
- The added record contains the correct request value and associated transactions.</p>


            <details class="quote">
              <summary>Source code in <code>aiperf/tests/test_records.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">test_records_add_and_get_records</span><span class="p">():</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Test the functionality of adding a record to the Records object and retrieving it.</span>

<span class="sd">    This test verifies that:</span>
<span class="sd">    - A record can be added to the Records instance with a specified request and a list of transaction objects.</span>
<span class="sd">    - The added record contains the correct request value and associated transactions.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">records</span> <span class="o">=</span> <span class="n">Records</span><span class="p">()</span>
    <span class="n">req</span> <span class="o">=</span> <span class="n">Transaction</span><span class="p">(</span><span class="n">timestamp</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">payload</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
    <span class="n">resp1</span> <span class="o">=</span> <span class="n">Transaction</span><span class="p">(</span><span class="n">timestamp</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">payload</span><span class="o">=</span><span class="s2">&quot;payload1&quot;</span><span class="p">)</span>
    <span class="n">resp2</span> <span class="o">=</span> <span class="n">Transaction</span><span class="p">(</span><span class="n">timestamp</span><span class="o">=</span><span class="mi">20</span><span class="p">,</span> <span class="n">payload</span><span class="o">=</span><span class="s2">&quot;payload2&quot;</span><span class="p">)</span>

    <span class="n">records</span><span class="o">.</span><span class="n">add_record</span><span class="p">(</span><span class="n">request</span><span class="o">=</span><span class="n">req</span><span class="p">,</span> <span class="n">responses</span><span class="o">=</span><span class="p">[</span><span class="n">resp1</span><span class="p">,</span> <span class="n">resp2</span><span class="p">])</span>
    <span class="n">all_records</span> <span class="o">=</span> <span class="n">records</span><span class="o">.</span><span class="n">records</span>
    <span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">all_records</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span>
    <span class="k">assert</span> <span class="n">all_records</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">request</span> <span class="o">==</span> <span class="n">req</span>
    <span class="k">assert</span> <span class="n">all_records</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">responses</span> <span class="o">==</span> <span class="p">[</span><span class="n">resp1</span><span class="p">,</span> <span class="n">resp2</span><span class="p">]</span>
    <span class="k">assert</span> <span class="n">all_records</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">responses</span> <span class="o">==</span> <span class="p">[</span><span class="n">resp1</span><span class="p">,</span> <span class="n">resp2</span><span class="p">]</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="aiperf.tests.test_records.test_records_multiple_adds" class="doc doc-heading">
            <code class=" language-python"><span class="n">test_records_multiple_adds</span><span class="p">()</span></code>

<a href="#aiperf.tests.test_records.test_records_multiple_adds" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">

        <p>Test that multiple records can be added to the Records object and retrieved in order.</p>
<p>This test creates two transaction objects with different timestamps and payloads,
adds them as records with distinct request values, and verifies:
- The total number of records is correct.
- The order of records is preserved.
- The request and transaction payloads are correctly associated with each record.</p>


            <details class="quote">
              <summary>Source code in <code>aiperf/tests/test_records.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span>
<span class="normal">71</span>
<span class="normal">72</span>
<span class="normal">73</span>
<span class="normal">74</span>
<span class="normal">75</span>
<span class="normal">76</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">test_records_multiple_adds</span><span class="p">():</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Test that multiple records can be added to the Records object and retrieved in order.</span>

<span class="sd">    This test creates two transaction objects with different timestamps and payloads,</span>
<span class="sd">    adds them as records with distinct request values, and verifies:</span>
<span class="sd">    - The total number of records is correct.</span>
<span class="sd">    - The order of records is preserved.</span>
<span class="sd">    - The request and transaction payloads are correctly associated with each record.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">records</span> <span class="o">=</span> <span class="n">Records</span><span class="p">()</span>
    <span class="n">req1</span> <span class="o">=</span> <span class="n">Transaction</span><span class="p">(</span><span class="n">timestamp</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span> <span class="n">payload</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
    <span class="n">req2</span> <span class="o">=</span> <span class="n">Transaction</span><span class="p">(</span><span class="n">timestamp</span><span class="o">=</span><span class="mi">200</span><span class="p">,</span> <span class="n">payload</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
    <span class="n">resp1</span> <span class="o">=</span> <span class="n">Transaction</span><span class="p">(</span><span class="n">timestamp</span><span class="o">=</span><span class="mi">150</span><span class="p">,</span> <span class="n">payload</span><span class="o">=</span><span class="s2">&quot;a&quot;</span><span class="p">)</span>
    <span class="n">resp2</span> <span class="o">=</span> <span class="n">Transaction</span><span class="p">(</span><span class="n">timestamp</span><span class="o">=</span><span class="mi">250</span><span class="p">,</span> <span class="n">payload</span><span class="o">=</span><span class="s2">&quot;b&quot;</span><span class="p">)</span>
    <span class="n">records</span><span class="o">.</span><span class="n">add_record</span><span class="p">(</span><span class="n">request</span><span class="o">=</span><span class="n">req1</span><span class="p">,</span> <span class="n">responses</span><span class="o">=</span><span class="p">[</span><span class="n">resp1</span><span class="p">])</span>
    <span class="n">records</span><span class="o">.</span><span class="n">add_record</span><span class="p">(</span><span class="n">request</span><span class="o">=</span><span class="n">req2</span><span class="p">,</span> <span class="n">responses</span><span class="o">=</span><span class="p">[</span><span class="n">resp2</span><span class="p">])</span>
    <span class="n">all_records</span> <span class="o">=</span> <span class="n">records</span><span class="o">.</span><span class="n">records</span>
    <span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">all_records</span><span class="p">)</span> <span class="o">==</span> <span class="mi">2</span>
    <span class="k">assert</span> <span class="n">all_records</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">request</span> <span class="o">==</span> <span class="n">req1</span>
    <span class="k">assert</span> <span class="n">all_records</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">request</span> <span class="o">==</span> <span class="n">req2</span>
    <span class="k">assert</span> <span class="n">all_records</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">responses</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">payload</span> <span class="o">==</span> <span class="s2">&quot;a&quot;</span>
    <span class="k">assert</span> <span class="n">all_records</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">responses</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">payload</span> <span class="o">==</span> <span class="s2">&quot;b&quot;</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="aiperf.tests.test_records.test_records_serialization_and_deserialization" class="doc doc-heading">
            <code class=" language-python"><span class="n">test_records_serialization_and_deserialization</span><span class="p">()</span></code>

<a href="#aiperf.tests.test_records.test_records_serialization_and_deserialization" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">

        <p>Test the serialization and deserialization of the Records model using Pydantic's model_dump and model_validate methods.
This test creates a Records instance, adds a record with two transaction objects, serializes the Records instance to a dictionary,
and then deserializes it back to a Records object. It asserts that the deserialized object retains the correct structure and data,
including the request value and the details of each transaction.</p>


            <details class="quote">
              <summary>Source code in <code>aiperf/tests/test_records.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">test_records_serialization_and_deserialization</span><span class="p">():</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Test the serialization and deserialization of the Records model using Pydantic&#39;s model_dump and model_validate methods.</span>
<span class="sd">    This test creates a Records instance, adds a record with two transaction objects, serializes the Records instance to a dictionary,</span>
<span class="sd">    and then deserializes it back to a Records object. It asserts that the deserialized object retains the correct structure and data,</span>
<span class="sd">    including the request value and the details of each transaction.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">records</span> <span class="o">=</span> <span class="n">Records</span><span class="p">()</span>
    <span class="n">req</span> <span class="o">=</span> <span class="n">Transaction</span><span class="p">(</span><span class="n">timestamp</span><span class="o">=</span><span class="mi">1000</span><span class="p">,</span> <span class="n">payload</span><span class="o">=</span><span class="s2">&quot;request_payload&quot;</span><span class="p">)</span>
    <span class="n">resp1</span> <span class="o">=</span> <span class="n">Transaction</span><span class="p">(</span><span class="n">timestamp</span><span class="o">=</span><span class="mi">42</span><span class="p">,</span> <span class="n">payload</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;foo&quot;</span><span class="p">:</span> <span class="s2">&quot;bar&quot;</span><span class="p">})</span>
    <span class="n">resp2</span> <span class="o">=</span> <span class="n">Transaction</span><span class="p">(</span><span class="n">timestamp</span><span class="o">=</span><span class="mi">43</span><span class="p">,</span> <span class="n">payload</span><span class="o">=</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">])</span>
    <span class="n">records</span><span class="o">.</span><span class="n">add_record</span><span class="p">(</span><span class="n">request</span><span class="o">=</span><span class="n">req</span><span class="p">,</span> <span class="n">responses</span><span class="o">=</span><span class="p">[</span><span class="n">resp1</span><span class="p">,</span> <span class="n">resp2</span><span class="p">])</span>

    <span class="c1"># Serialize to dict using Pydantic&#39;s model_dump</span>
    <span class="n">data</span> <span class="o">=</span> <span class="n">records</span><span class="o">.</span><span class="n">model_dump</span><span class="p">()</span>

    <span class="c1"># Deserialize back using model_validate</span>
    <span class="n">loaded_records</span> <span class="o">=</span> <span class="n">Records</span><span class="o">.</span><span class="n">model_validate</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>

    <span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">loaded_records</span><span class="o">.</span><span class="n">records</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span>
    <span class="k">assert</span> <span class="n">loaded_records</span><span class="o">.</span><span class="n">records</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">timestamp</span> <span class="o">==</span> <span class="n">req</span><span class="o">.</span><span class="n">timestamp</span>
    <span class="k">assert</span> <span class="n">loaded_records</span><span class="o">.</span><span class="n">records</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">payload</span> <span class="o">==</span> <span class="n">req</span><span class="o">.</span><span class="n">payload</span>
    <span class="k">assert</span> <span class="n">loaded_records</span><span class="o">.</span><span class="n">records</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">responses</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">timestamp</span> <span class="o">==</span> <span class="mi">42</span>
    <span class="k">assert</span> <span class="n">loaded_records</span><span class="o">.</span><span class="n">records</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">responses</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">payload</span> <span class="o">==</span> <span class="p">{</span><span class="s2">&quot;foo&quot;</span><span class="p">:</span> <span class="s2">&quot;bar&quot;</span><span class="p">}</span>
    <span class="k">assert</span> <span class="n">loaded_records</span><span class="o">.</span><span class="n">records</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">responses</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">timestamp</span> <span class="o">==</span> <span class="mi">43</span>
    <span class="k">assert</span> <span class="n">loaded_records</span><span class="o">.</span><span class="n">records</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">responses</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">payload</span> <span class="o">==</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="aiperf.tests.test_records.test_transaction_dataclass" class="doc doc-heading">
            <code class=" language-python"><span class="n">test_transaction_dataclass</span><span class="p">()</span></code>

<a href="#aiperf.tests.test_records.test_transaction_dataclass" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">

        <p>Test the initialization and attribute assignment of the Transaction dataclass.</p>
<p>This test verifies that a transaction object can be created with a specific timestamp and payload,
and that its attributes are correctly set and accessible.</p>


            <details class="quote">
              <summary>Source code in <code>aiperf/tests/test_records.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">test_transaction_dataclass</span><span class="p">():</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Test the initialization and attribute assignment of the Transaction dataclass.</span>

<span class="sd">    This test verifies that a transaction object can be created with a specific timestamp and payload,</span>
<span class="sd">    and that its attributes are correctly set and accessible.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">resp</span> <span class="o">=</span> <span class="n">Transaction</span><span class="p">(</span><span class="n">timestamp</span><span class="o">=</span><span class="mi">1234567890</span><span class="p">,</span> <span class="n">payload</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;result&quot;</span><span class="p">:</span> <span class="s2">&quot;ok&quot;</span><span class="p">})</span>
    <span class="k">assert</span> <span class="n">resp</span><span class="o">.</span><span class="n">timestamp</span> <span class="o">==</span> <span class="mi">1234567890</span>
    <span class="k">assert</span> <span class="n">resp</span><span class="o">.</span><span class="n">payload</span> <span class="o">==</span> <span class="p">{</span><span class="s2">&quot;result&quot;</span><span class="p">:</span> <span class="s2">&quot;ok&quot;</span><span class="p">}</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div><h2 id="aiperfteststest_request_latency_metric">aiperf.tests.test_request_latency_metric<a class="headerlink" href="#aiperfteststest_request_latency_metric" title="Permanent link">&para;</a></h2>


<div class="doc doc-object doc-module">



<a id="aiperf.tests.test_request_latency_metric"></a>
    <div class="doc doc-contents first">









  <div class="doc doc-children">











  </div>

    </div>

</div><h2 id="aiperfteststest_tokenizer">aiperf.tests.test_tokenizer<a class="headerlink" href="#aiperfteststest_tokenizer" title="Permanent link">&para;</a></h2>


<div class="doc doc-object doc-module">



<a id="aiperf.tests.test_tokenizer"></a>
    <div class="doc doc-contents first">









  <div class="doc doc-children">











  </div>

    </div>

</div><h2 id="aiperfteststest_ttft_metric">aiperf.tests.test_ttft_metric<a class="headerlink" href="#aiperfteststest_ttft_metric" title="Permanent link">&para;</a></h2>


<div class="doc doc-object doc-module">



<a id="aiperf.tests.test_ttft_metric"></a>
    <div class="doc doc-contents first">









  <div class="doc doc-children">











  </div>

    </div>

</div><h2 id="aiperfteststest_ttst_metric">aiperf.tests.test_ttst_metric<a class="headerlink" href="#aiperfteststest_ttst_metric" title="Permanent link">&para;</a></h2>


<div class="doc doc-object doc-module">



<a id="aiperf.tests.test_ttst_metric"></a>
    <div class="doc doc-contents first">









  <div class="doc doc-children">











  </div>

    </div>

</div><h2 id="aiperftestsutilsasync_test_utils">aiperf.tests.utils.async_test_utils<a class="headerlink" href="#aiperftestsutilsasync_test_utils" title="Permanent link">&para;</a></h2>


<div class="doc doc-object doc-module">



<a id="aiperf.tests.utils.async_test_utils"></a>
    <div class="doc doc-contents first">

        <p>Utilities for testing asynchronous code.</p>









  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h2 id="aiperf.tests.utils.async_test_utils.async_fixture" class="doc doc-heading">
            <code class=" language-python"><span class="n">async_fixture</span><span class="p">(</span><span class="n">fixture</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#aiperf.tests.utils.async_test_utils.async_fixture" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">

        <p>Manually await an async pytest fixture.</p>
<p>This is necessary because pytest fixtures are not awaited by default in test methods.
If the fixture is an async generator, this will get the first yielded value.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>fixture</code>
            </td>
            <td>
                  <code><span title="aiperf.tests.utils.async_test_utils.T">T</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The fixture to await</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="aiperf.tests.utils.async_test_utils.T">T</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The awaited fixture value</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>aiperf/tests/utils/async_test_utils.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">async_fixture</span><span class="p">(</span><span class="n">fixture</span><span class="p">:</span> <span class="n">T</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">T</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Manually await an async pytest fixture.</span>

<span class="sd">    This is necessary because pytest fixtures are not awaited by default in test methods.</span>
<span class="sd">    If the fixture is an async generator, this will get the first yielded value.</span>

<span class="sd">    Args:</span>
<span class="sd">        fixture: The fixture to await</span>

<span class="sd">    Returns:</span>
<span class="sd">        The awaited fixture value</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">fixture</span><span class="p">,</span> <span class="s2">&quot;__aiter__&quot;</span><span class="p">):</span>
        <span class="c1"># If it&#39;s an async generator, get the first yielded value</span>
        <span class="k">with</span> <span class="n">contextlib</span><span class="o">.</span><span class="n">suppress</span><span class="p">(</span><span class="ne">StopAsyncIteration</span><span class="p">):</span>
            <span class="n">async_gen</span> <span class="o">=</span> <span class="n">cast</span><span class="p">(</span><span class="n">AsyncIterator</span><span class="p">[</span><span class="n">Any</span><span class="p">],</span> <span class="n">fixture</span><span class="p">)</span>
            <span class="n">value</span> <span class="o">=</span> <span class="k">await</span> <span class="n">anext</span><span class="p">(</span><span class="n">async_gen</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">cast</span><span class="p">(</span><span class="n">T</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>

    <span class="c1"># Otherwise return the fixture as is</span>
    <span class="k">return</span> <span class="n">fixture</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="aiperf.tests.utils.async_test_utils.async_noop" class="doc doc-heading">
            <code class=" language-python"><span class="n">async_noop</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#aiperf.tests.utils.async_test_utils.async_noop" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">

        <p>A no-op async function for testing purposes.</p>
<p>Can be used to replace asyncio.sleep, asyncio.wait_for, or other async calls in tests.
Accepts any arguments but performs no operation and returns immediately.</p>


            <details class="quote">
              <summary>Source code in <code>aiperf/tests/utils/async_test_utils.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">async_noop</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A no-op async function for testing purposes.</span>

<span class="sd">    Can be used to replace asyncio.sleep, asyncio.wait_for, or other async calls in tests.</span>
<span class="sd">    Accepts any arguments but performs no operation and returns immediately.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div><h2 id="aiperftestsutilsmetric_test_utils">aiperf.tests.utils.metric_test_utils<a class="headerlink" href="#aiperftestsutilsmetric_test_utils" title="Permanent link">&para;</a></h2>


<div class="doc doc-object doc-module">



<a id="aiperf.tests.utils.metric_test_utils"></a>
    <div class="doc doc-contents first">









  <div class="doc doc-children">











  </div>

    </div>

</div>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "..", "features": [], "search": "../assets/javascripts/workers/search.d50fe291.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../assets/javascripts/bundle.13a4f30d.min.js"></script>
      
    
  </body>
</html>